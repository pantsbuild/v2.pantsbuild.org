<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-2.3 docs-doc-page docs-doc-id-docs/introduction/pants-1.x-vs.-2.x/how-to-upgrade" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>How to upgrade | Pantsbuild</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:image content=https://www.pantsbuild.org/img/social-card.png /><meta data-rh=true name=twitter:image content=https://www.pantsbuild.org/img/social-card.png /><meta data-rh=true property=og:url content=https://www.pantsbuild.org/2.3/docs/introduction/pants-1.x-vs.-2.x/how-to-upgrade /><meta data-rh=true property=og:locale content=en /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docusaurus_version content=2.3 /><meta data-rh=true name=docusaurus_tag content=docs-default-2.3 /><meta data-rh=true name=docsearch:version content=2.3 /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-2.3 /><meta data-rh=true name=robots content="noindex, nofollow"/><meta data-rh=true property=og:title content="How to upgrade | Pantsbuild"/><meta data-rh=true name=description content="How to upgrade from Pants 1.x to 2.0."/><meta data-rh=true property=og:description content="How to upgrade from Pants 1.x to 2.0."/><link data-rh=true rel=icon href=/img/favicon.ico /><link data-rh=true rel=canonical href=https://www.pantsbuild.org/2.3/docs/introduction/pants-1.x-vs.-2.x/how-to-upgrade /><link data-rh=true rel=alternate href=https://www.pantsbuild.org/2.3/docs/introduction/pants-1.x-vs.-2.x/how-to-upgrade hreflang=en /><link data-rh=true rel=alternate href=https://www.pantsbuild.org/2.3/docs/introduction/pants-1.x-vs.-2.x/how-to-upgrade hreflang=x-default /><link data-rh=true rel=preconnect href=https://QD9KY1TRVK-dsn.algolia.net crossorigin=anonymous /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://www.pantsbuild.org/2.3/docs/introduction/pants-1.x-vs.-2.x/","name":"Pants 1.x vs. 2.x","position":1},{"@type":"ListItem","item":"https://www.pantsbuild.org/2.3/docs/introduction/pants-1.x-vs.-2.x/how-to-upgrade","name":"How to upgrade","position":2}]}</script><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="Pantsbuild RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="Pantsbuild Atom Feed"><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=G-SEHBXJRF42"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-SEHBXJRF42",{anonymize_ip:!0})</script><link rel=search type=application/opensearchdescription+xml title=Pantsbuild href=/opensearch.xml><link rel=stylesheet href=/assets/css/styles.b71b45ed.css /><script src=/assets/js/runtime~main.43acf77f.js defer></script><script src=/assets/js/main.636c7439.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_lucK href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/logo.svg alt="My Site Logo" class="themedComponent_x_jL themedComponent--light_WGb9"/><img src=/img/logo.svg alt="My Site Logo" class="themedComponent_x_jL themedComponent--dark_oBxQ"/></div><b class="navbar__title text--truncate">Pantsbuild</b></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/2.3/docs/introduction/welcome-to-pants>Docs</a><a class="navbar__item navbar__link" href=/2.3/reference/global-options>Reference</a><a class="navbar__item navbar__link" href=/blog>Blog</a><a class="navbar__item navbar__link" href=/sponsors>Sponsors</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class=navbar__link aria-haspopup=true aria-expanded=false role=button href=/2.3/docs/introduction/welcome-to-pants>2.3 (deprecated)</a><ul class=dropdown__menu><li><a class=dropdown__link href=/prerelease/docs/introduction/welcome-to-pants>2.31 (prerelease)</a><li><a class=dropdown__link href=/stable/docs/introduction/welcome-to-pants>2.30</a><li><a class=dropdown__link href=/2.29/docs/introduction/welcome-to-pants>2.29</a><li><a class=dropdown__link href=/2.28/docs/introduction/welcome-to-pants>2.28 (deprecated)</a><li class=""><hr class=dropdown-separator><li><a class=dropdown__link href=/versions>All Versions</a></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>Slack</a><ul class=dropdown__menu><li><a href=https://pantsbuild.slack.com target=_blank rel="noopener noreferrer" class=dropdown__link>Workspace<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a><li><a href="https://docs.google.com/forms/d/e/1FAIpQLSf9zgf-MXRnVDJbrVEST3urqneq7LCcy0zw8qU-GH4hPMn52A/viewform?usp=sf_link" target=_blank rel="noopener noreferrer" class=dropdown__link>Workspace Invite<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a><li><a href=https://chat.pantsbuild.org target=_blank rel="noopener noreferrer" class=dropdown__link>Linen Mirror<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a></ul></div><a href=https://github.com/pantsbuild/pants target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a><div class=navbarSearchContainer_Mydu><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts=Meta+k><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 24 24" aria-hidden=true><circle cx=11 cy=11 r=8 stroke=currentColor fill=none stroke-width=1.4 /><path d="m21 21-4.3-4.3" stroke=currentColor fill=none stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div><div class="toggle_AwgP colorModeToggle_rXRM"><button class="clean-btn toggleButton_kTC9 toggleButtonDisabled_N4X8" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_X8HE lightToggleIcon_cay9"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_X8HE darkToggleIcon_B6hH"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_X8HE systemToggleIcon_k4zv"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_GzA5"><div class=docsWrapper_LbKj><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_bDNn" type=button></button><div class=docRoot_PpgM><aside class="theme-doc-sidebar-container docSidebarContainer_aj0D"><div class=sidebarViewport_pg77><div class=sidebar_Us5f><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_FPuF"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true href=/2.3/docs/introduction/welcome-to-pants><span title=Introduction class=categoryLinkLabel_JmoG>Introduction</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/2.3/docs/introduction/welcome-to-pants><span title="Welcome to Pants!" class=linkLabel_BwCR>Welcome to Pants!</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/2.3/docs/introduction/how-does-pants-work><span title="How does Pants work?" class=linkLabel_BwCR>How does Pants work?</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist" tabindex=0 href=/2.3/docs/introduction/getting-started><span title="Getting started" class=categoryLinkLabel_JmoG>Getting started</span></a><button aria-label="Expand sidebar category 'Getting started'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist menu__link--active" tabindex=0 href=/2.3/docs/introduction/pants-1.x-vs.-2.x><span title="Pants 1.x vs. 2.x" class=categoryLinkLabel_JmoG>Pants 1.x vs. 2.x</span></a><button aria-label="Collapse sidebar category 'Pants 1.x vs. 2.x'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/2.3/docs/introduction/pants-1.x-vs.-2.x/how-to-upgrade><span title="How to upgrade" class=linkLabel_BwCR>How to upgrade</span></a></ul></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/2.3/docs/using-pants/command-line-help><span title="Using Pants" class=categoryLinkLabel_JmoG>Using Pants</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/2.3/docs/python/overview><span title=Python class=categoryLinkLabel_JmoG>Python</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/2.3/docs/codegen/protobuf-and-grpc><span title=Codegen class=categoryLinkLabel_JmoG>Codegen</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/2.3/docs/aws-lambda/python-support><span title="AWS Lambda" class=categoryLinkLabel_JmoG>AWS Lambda</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/2.3/docs/writing-plugins/overview><span title="Writing Plugins" class=categoryLinkLabel_JmoG>Writing Plugins</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/2.3/docs/release-notes/deprecation-policy><span title="Release notes" class=categoryLinkLabel_JmoG>Release notes</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist" href=/2.3/docs/contributions><span title=Contributions class=categoryLinkLabel_JmoG>Contributions</span></a><button aria-label="Expand sidebar category 'Contributions'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 margin-vert--none"><hr/><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/2.3/reference/global-options><span title=Reference class=linkLabel_BwCR>Reference</span></a></ul></nav></div></div></aside><main class=docMainContainer_oWFJ><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_b2qu"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role=alert><div>This is documentation for <!-- -->Pantsbuild<!-- --> <b>2.3 (deprecated)</b>, which is no longer actively maintained.</div><div class=margin-top--md>For up-to-date documentation, see the <b><a href=/stable/docs/introduction/welcome-to-pants>latest version</a></b> (<!-- -->2.30<!-- -->).</div></div><div class=docItemContainer_TkYX><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_nJ9e" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_WW1h><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>Introduction</span><li class=breadcrumbs__item><a class=breadcrumbs__link href=/2.3/docs/introduction/pants-1.x-vs.-2.x><span>Pants 1.x vs. 2.x</span></a><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>How to upgrade</span></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.3 (deprecated)</span><div class="tocCollapsible_hk9T theme-doc-toc-mobile tocMobile_cNpz"><button type=button class="clean-btn tocCollapsibleButton_ljii">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>How to upgrade</h1></header><p>How to upgrade from Pants 1.x to 2.0.</p>
<hr/>
<div class="theme-admonition theme-admonition-note admonition_LZeC alert alert--secondary"><div class=admonitionHeading_SJYM><span class=admonitionIcon_iulS><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>Why upgrade?</div><div class=admonitionContent_NJOy><p>See <a class="" href=/2.3/docs/introduction/pants-1.x-vs.-2.x>Pants 1.x vs. 2.0</a>.</div></div>
<h2 class="anchor anchorTargetStickyNavbar_UrHV" id=step-1-upgrade-to-pants-130>Step 1: Upgrade to Pants 1.30<a href=#step-1-upgrade-to-pants-130 class=hash-link aria-label="Direct link to Step 1: Upgrade to Pants 1.30" title="Direct link to Step 1: Upgrade to Pants 1.30" translate=no>​</a></h2>
<p>We recommend upgrading to 1.30.1, which is the last minor release in the 1.x series. See <a class="" href=/2.3/docs/release-notes/upgrade-tips>Upgrade tips</a> for some tips with upgrading.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=upgrade-your-pants-script>Upgrade your <code>./pants</code> script<a href=#upgrade-your-pants-script class=hash-link aria-label="Direct link to upgrade-your-pants-script" title="Direct link to upgrade-your-pants-script" translate=no>​</a></h3>
<p>We've made changes recently to the script to facilitate the upgrade to Pants 2.0. Run this:</p>
<div class="language-bash codeBlockContainer_LrZr theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_QpNL><pre tabindex=0 class="prism-code language-bash codeBlock_z5Jo thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_YVRJ><span class=token-line style=color:#bfc7d5><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-L</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-o</span><span class="token plain"> ./pants https://pantsbuild.github.io/setup/pants</span><br/></span></code></pre></div></div>
<p>Check in any changes to your version control.</p>
<h2 class="anchor anchorTargetStickyNavbar_UrHV" id=step-2-setup-jvm-node-and-go-support-if-relevant>Step 2: Setup JVM, Node, and Go support (if relevant)<a href=#step-2-setup-jvm-node-and-go-support-if-relevant class=hash-link aria-label="Direct link to Step 2: Setup JVM, Node, and Go support (if relevant)" title="Direct link to Step 2: Setup JVM, Node, and Go support (if relevant)" translate=no>​</a></h2>
<p>Pants 2.0 initially only supports Python, with support for other languages coming soon.</p>
<p>If you are using Pants's JVM, Node, or Go support and would like to continue using it, you will want two different Pants scripts: one to run Python with Pants 2.x, and one to run the other languages with Pants 1.x.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=step-2a-setup-pantsv1toml>Step 2a: Setup <code>pants.v1.toml</code><a href=#step-2a-setup-pantsv1toml class=hash-link aria-label="Direct link to step-2a-setup-pantsv1toml" title="Direct link to step-2a-setup-pantsv1toml" translate=no>​</a></h3>
<p>Copy over your original <code>pants.toml</code> into a new TOML config file. You can call it whatever you'd like, such as <code>pants.v1.toml</code> or <code>pants.jvm.toml</code>.</p>
<p>We recommend deactivating the Python backend package and any Python plugins like <code>pantsbuild.pants.contrib.mypy</code> so that you do not accidentally use your v1 script to run Python code.</p>
<div class="language-toml codeBlockContainer_LrZr theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockTitle_GKkA>pants.v1.toml</div><div class=codeBlockContent_QpNL><pre tabindex=0 class="prism-code language-toml codeBlock_z5Jo thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_YVRJ><span class=token-line style=color:#bfc7d5><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token table class-name" style="color:rgb(255, 203, 107)">GLOBAL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">pants_version</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"1.30.1"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Instead of using backend_packages.remove, you may alternatively</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># explicitly enumerate every backend_package you want activated.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">backend_packages.remove</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">"pants.backend.python"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">plugins</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">"pantsbuild.pants.contrib.go==%(pants_version)s"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">"pantsbuild.pants.contrib.node==%(pants_version)s"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><br/></span></code></pre></div></div>
<p>Finally, tell Pants to ignore the BUILD files for your Python code. This is important because Pants 1.x may not understand BUILD files from Pants 2.x, such as if Pants 2.x adds a new target type.</p>
<div class="language-toml codeBlockContainer_LrZr theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockTitle_GKkA>pants.v1.toml</div><div class=codeBlockContent_QpNL><pre tabindex=0 class="prism-code language-toml codeBlock_z5Jo thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_YVRJ><span class=token-line style=color:#bfc7d5><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token table class-name" style="color:rgb(255, 203, 107)">GLOBAL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Replace this with the paths to your Python code.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">build_ignore</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">"src/python"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"tests/python"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=step-2b-create-v1>Step 2b: Create <code>./v1</code><a href=#step-2b-create-v1 class=hash-link aria-label="Direct link to step-2b-create-v1" title="Direct link to step-2b-create-v1" translate=no>​</a></h3>
<p>Rather than using the script <code>./pants</code>, you will use this script to run Pants for other languages. You can name this script whatever you'd like, such as <code>./v1</code>, <code>./pants_jvm</code>, or <code>./jvm</code>.</p>
<div class="language-shell codeBlockContainer_LrZr theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockTitle_GKkA>./v1</div><div class=codeBlockContent_QpNL><pre tabindex=0 class="prism-code language-shell codeBlock_z5Jo thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_YVRJ><span class=token-line style=color:#bfc7d5><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">PANTS_TOML</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">pants.v1.toml</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">PANTS_CONFIG_FILES</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"[</span><span class="token string entity" style="color:rgb(195, 232, 141)">\"</span><span class="token string variable" style="color:rgb(191, 199, 213)">$PANTS_TOML</span><span class="token string" style="color:rgb(195, 232, 141)">}</span><span class="token string entity" style="color:rgb(195, 232, 141)">\"</span><span class="token string" style="color:rgb(195, 232, 141)">]"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">PANTS_BIN_NAME</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">./v1</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">./pants </span><span class="token string" style="color:rgb(195, 232, 141)">"</span><span class="token string variable" style="color:rgb(191, 199, 213)">$@</span><span class="token string" style="color:rgb(195, 232, 141)">"</span><br/></span></code></pre></div></div>
<p>Then, run <code>chmod +x ./v1</code>.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=step-2c-remove-the-other-languages-from-pantstoml>Step 2c: Remove the other languages from <code>pants.toml</code><a href=#step-2c-remove-the-other-languages-from-pantstoml class=hash-link aria-label="Direct link to step-2c-remove-the-other-languages-from-pantstoml" title="Direct link to step-2c-remove-the-other-languages-from-pantstoml" translate=no>​</a></h3>
<p>Now update your main <code>pants.toml</code> to remove from <code>backend_packages</code> and <code>plugins</code> to deactivate non-Python implementations.</p>
<p>Set <code>build_ignore</code> to tell Pants to ignore the BUILD files with any non-Python target types.</p>
<div class="language-toml codeBlockContainer_LrZr theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockTitle_GKkA>pants.toml</div><div class=codeBlockContent_QpNL><pre tabindex=0 class="prism-code language-toml codeBlock_z5Jo thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_YVRJ><span class=token-line style=color:#bfc7d5><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token table class-name" style="color:rgb(255, 203, 107)">GLOBAL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">pants_version</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"1.30.1"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Instead of using backend_packages.remove, you may alternatively</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># explicitly enumerate every backend_package you want activated.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">backend_packages.remove</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">"pants.backend.jvm"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">plugins</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">"pantsbuild.pants.contrib.mypy==%(pants_version)s"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Replace this with the paths to your non-Python code.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">build_ignore</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">"src/java"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"src/go"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_UrHV" id=step-3-rewrite-your-plugins-if-relevant>Step 3: Rewrite your plugins (if relevant)<a href=#step-3-rewrite-your-plugins-if-relevant class=hash-link aria-label="Direct link to Step 3: Rewrite your plugins (if relevant)" title="Direct link to Step 3: Rewrite your plugins (if relevant)" translate=no>​</a></h2>
<p>Refer to <a class="" href=/2.3/docs/writing-plugins/overview>Plugins overview</a> to learn more about the new Rules and Target APIs.</p>
<p>We know that rewriting a plugin can be time-consuming, and we want to help. Please message us on <a class="" href=/community/members>Slack</a> in the <code>#plugins</code> channel. We can actively help you rewrite your code, including pair programming if needed. We don't want having to port your plugins to block you from upgrading to 2.0.</p>
<h2 class="anchor anchorTargetStickyNavbar_UrHV" id=step-4-upgrade-to-20>Step 4: Upgrade to 2.0<a href=#step-4-upgrade-to-20 class=hash-link aria-label="Direct link to Step 4: Upgrade to 2.0" title="Direct link to Step 4: Upgrade to 2.0" translate=no>​</a></h2>
<p>Now that the v1 engine is removed, some of the option names changed.</p>
<ul>
<li class=""><code>--v1</code> and <code>--v2</code> are both deprecated and will no-op.</li>
<li class=""><code>backend_packages2</code> and <code>plugins2</code> are deprecated in favor of <code>backend_packages</code> and <code>plugins</code>. Also, there are no more published Plugins, so the <code>plugins</code> key can be removed.</li>
<li class=""><code>--enable-pantsd</code> is now <code>--pantsd</code>. (Deprecated in 1.30.0)</li>
<li class=""><code>--quiet</code> was removed because Pants output is now much less verbose thanks to the dynamic UI. Instead, to disable all Pants output, use <code>--no-dynamic-ui</code> and <code>--level=error</code>.</li>
</ul>
<p>Before:</p>
<div class="language-toml codeBlockContainer_LrZr theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockTitle_GKkA>pants.toml</div><div class=codeBlockContent_QpNL><pre tabindex=0 class="prism-code language-toml codeBlock_z5Jo thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_YVRJ><span class=token-line style=color:#bfc7d5><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token table class-name" style="color:rgb(255, 203, 107)">GLOBAL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">pants_version</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"1.30.1"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">v1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">v2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">backend_packages</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">backend_packages2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">"pants.backend.python"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">"pants.backend.python.lint.isort"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">"pants.backend.python.lint.mypy"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">plugins</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">plugins2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">enable_pantsd</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><br/></span></code></pre></div></div>
<p>After:</p>
<div class="language-toml codeBlockContainer_LrZr theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockTitle_GKkA>pants.toml</div><div class=codeBlockContent_QpNL><pre tabindex=0 class="prism-code language-toml codeBlock_z5Jo thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_YVRJ><span class=token-line style=color:#bfc7d5><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token table class-name" style="color:rgb(255, 203, 107)">GLOBAL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">pants_version</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"2.0.1rc0"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">backend_packages</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">"pants.backend.python"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">"pants.backend.python.lint.isort"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">"pants.backend.python.typecheck.mypy"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">pantsd</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><br/></span></code></pre></div></div>
<p>Run <code>./pants</code> to validate that your <code>pants.toml</code> is valid. You may need to remove some options that are no longer used in Pants 2.0.</p>
<p>Once <code>./pants</code> works, run <code>./pants list ::</code> to make sure that Pants can parse all of your BUILD files.</p>
<div class="theme-admonition theme-admonition-note admonition_LZeC alert alert--secondary"><div class=admonitionHeading_SJYM><span class=admonitionIcon_iulS><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>Reminder: use <code>ignore_pants_warnings</code> to ignore deprecations</div><div class=admonitionContent_NJOy><p>For example:<div class="language-toml codeBlockContainer_LrZr theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_QpNL><pre tabindex=0 class="prism-code language-toml codeBlock_z5Jo thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_YVRJ><span class=token-line style=color:#bfc7d5><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token table class-name" style="color:rgb(255, 203, 107)">GLOBAL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">ignore_pants_warnings</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">"DEPRECATED: Use the target type `pex_binary`"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><br/></span></code></pre></div></div></div></div>
<h2 class="anchor anchorTargetStickyNavbar_UrHV" id=step-5-tweak-your-cis-caching-recommended>Step 5: Tweak your CI's caching (recommended)<a href=#step-5-tweak-your-cis-caching-recommended class=hash-link aria-label="Direct link to Step 5: Tweak your CI's caching (recommended)" title="Direct link to Step 5: Tweak your CI's caching (recommended)" translate=no>​</a></h2>
<p>With the v1 engine, most caching was saved to the folder <code>&lt;build root>/.pants.d</code>. With the v2 engine, caching is saved to <code>~/.cache/pants/lmdb_store</code> and <code>~/.cache/pants/named_caches</code>.</p>
<p>Refer to <a class="" href=/2.3/docs/using-pants/using-pants-in-ci>Using Pants in CI</a> for more information, including a script to nuke your cache when it has gotten too large.</p>
<h2 class="anchor anchorTargetStickyNavbar_UrHV" id=step-6-set-up-a-constraints-file-strongly-recommended>Step 6: Set up a constraints file (strongly recommended)<a href=#step-6-set-up-a-constraints-file-strongly-recommended class=hash-link aria-label="Direct link to Step 6: Set up a constraints file (strongly recommended)" title="Direct link to Step 6: Set up a constraints file (strongly recommended)" translate=no>​</a></h2>
<p>A constraints file (aka lockfile) is important for reproducible builds.</p>
<p>Setting up a constraints file also allows Pants to optimize to avoid resolving requirements more than one time for your project. This greatly speeds up the performance of goals like <code>test</code>, <code>run</code>, and <code>repl</code>.</p>
<p>See <a class="" href=/2.3/docs/python/overview/third-party-dependencies>Third-party dependencies</a> for a guide to set this up.</p>
<h2 class="anchor anchorTargetStickyNavbar_UrHV" id=key-differences-to-be-aware-of>Key differences to be aware of<a href=#key-differences-to-be-aware-of class=hash-link aria-label="Direct link to Key differences to be aware of" title="Direct link to Key differences to be aware of" translate=no>​</a></h2>
<div class="theme-admonition theme-admonition-tip admonition_LZeC alert alert--success"><div class=admonitionHeading_SJYM><span class=admonitionIcon_iulS><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>Missing features? Let us know!</div><div class=admonitionContent_NJOy><p>Please message us on <a class="" href=/community/members>Slack</a> if you are having issues upgrading or find something missing. We would love to help.</div></div>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=files-are-now-the-atomic-unit-rather-than-targets-130-vs-20>Files are now the "atomic unit", rather than targets (1.30 vs. 2.0)<a href=#files-are-now-the-atomic-unit-rather-than-targets-130-vs-20 class=hash-link aria-label='Direct link to Files are now the "atomic unit", rather than targets (1.30 vs. 2.0)' title='Direct link to Files are now the "atomic unit", rather than targets (1.30 vs. 2.0)' translate=no>​</a></h3>
<p>Previously, with both the v1 and v2 engines, targets were the "atomic unit". For example, you could only add dependencies on an entire target, rather than specific files within the target.</p>
<p>This model created a tension. It's convenient to only specify a few targets to avoid boilerplate in BUILD files, but this would result in much coarser invalidation. If you wanted fine-grained invalidation, you would need one target for every single file in your project.</p>
<p>Now, files are the "atomic unit". You can now depend on a specific file, which will copy the metadata from its original target. Depending on a target is now sugar for depending on each file belonging to that target.</p>
<p>This should have little impact on your day-to-day usage, other than:</p>
<ul>
<li class="">Tests run per-file, rather than per-target.</li>
<li class="">The project introspection goals like <code>list</code>, <code>filter</code>, <code>dependencies</code>, and <code>dependees</code> will have different output.</li>
<li class=""><code>--changed-since</code> is more precise. It used to return all sibling files to files that were changed, even if those siblings were untouched. Now, it only returns files that were actually changed.</li>
<li class="">If you use dependency inference, Pants will infer dependencies on specific files, rather than the entire target. For one Pants user with ~70k lines of Python code, this finer-grained precision reduced the size of dependencies by 30%!</li>
</ul>
<p><code>run</code>, <code>package</code> (formerly <code>binary</code>, <code>setup-py</code>, and <code>awslambda</code>), <code>fmt</code>, and <code>lint</code> will all behave the same as before. You can still use both files and address specs like <code>::</code> on the command line. You can keep your <code>dependencies</code> fields the same as before.</p>
<p>Previously, we did not recommend using recursive globs with the <code>sources</code> field, like <code>**/*.py</code>, because it resulted in too coarse of invalidation. If you are using dependency inference—or use explicit file dependencies—you no longer need to be concerned with how the granularity of your targets will impact the granularity of your dependencies. (However, using too coarse of targets may still be difficult to reason about.)</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=dependency-inference-is-enabled-by-default-130-vs-20>Dependency inference is enabled by default (1.30 vs. 2.0)<a href=#dependency-inference-is-enabled-by-default-130-vs-20 class=hash-link aria-label="Direct link to Dependency inference is enabled by default (1.30 vs. 2.0)" title="Direct link to Dependency inference is enabled by default (1.30 vs. 2.0)" translate=no>​</a></h3>
<p>Pants now understands your Python import statements and knows how to map those imports back to the owning targets, e.g. <code>python_library</code> and <code>python_requirement_library</code> targets. This means that most of the time, you can leave off the <code>dependencies</code> field in your BUILD file.</p>
<p>While we strongly recommend using this feature—because it makes Pants much more ergonomic and is likely to result in finer-grained invalidation—you probably do not want to use it when first upgrading. You can turn off this feature by setting <code>imports = false</code> in the <code>[python-infers]</code> section.</p>
<p>Once you have successfully upgraded to 2.0, you can re-enable dependency inference. You'll first want to teach Pants about your third-party dependencies, see <a class="" href=/2.3/docs/python/overview/third-party-dependencies>Third-party dependencies</a>. Then set <code>imports = true</code>, but don't yet delete anything from your BUILD files.</p>
<p>Simply turning on dependency inference should be safe; Pants will only infer dependencies when there is no ambiguity, and it's optimized to avoid false positives. All of your original explicit <code>dependencies</code> will still be respected. While dependency inference will likely result in some dependencies being added that were unintentionally left off, these dependencies were likely already being used thanks to transitive dependencies (otherwise, your code would have been broken).</p>
<p>Now, with dependency inference enabled, you can start deleting <code>dependencies</code> from your BUILD files. This can be an incremental process; you do not need to update all your BUILD files in one pull request. For each target, run <code>./pants dependencies</code> before, then delete the entire <code>dependencies</code> field, run <code>./pants dependencies</code> again to compare, and check if anything removed should have been included. You will want to check your import statements to see what is actually in use; it's common for the <code>dependencies</code> field to become stale and drift from your code.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=less-magical-handling-of-__init__py-files-130-vs-20>Less magical handling of <code>__init__.py</code> files (1.30 vs. 2.0)<a href=#less-magical-handling-of-__init__py-files-130-vs-20 class=hash-link aria-label="Direct link to less-magical-handling-of-__init__py-files-130-vs-20" title="Direct link to less-magical-handling-of-__init__py-files-130-vs-20" translate=no>​</a></h3>
<p>Previously, with both the v1 and v2 engines, Pants would detect any missing <code>__init__.py</code> files and automatically inject them by generating empty files. This is surprising and also breaks <a href=https://www.python.org/dev/peps/pep-0420/ target=_blank rel="noopener noreferrer" class="">PEP 420</a> style namespace packages.</p>
<p>Instead, now Pants will use any <code>__init__.py</code> files it discovers for a file or its ancestor directories. <code>__init__.py</code> files will be used even if they are left off of the <code>sources</code> field in a target. Pants will no longer auto-generate any missing <code>__init__.py</code> files.</p>
<p>If you set the option <code>--python-infer-inits</code> on (disabled by default), then Pants will infer a proper dependency on those files, rather than simply copying the file. You can run <code>./pants dependencies</code> to see this behavior. This is because it's possible for an <code>__init__.py</code> file to have content in it. This behavior may result, though, in you having more dependencies than you desire. If your <code>__init__.py</code> files are all empty, it is safe to keep this option off.</p>
<p>If you encounter issues with imports, you may need to manually add any missing <code>__init__.py</code> files.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=dependency-inference-for-conftestpy-130-vs-20>Dependency inference for <code>conftest.py</code> (1.30 vs. 2.0)<a href=#dependency-inference-for-conftestpy-130-vs-20 class=hash-link aria-label="Direct link to dependency-inference-for-conftestpy-130-vs-20" title="Direct link to dependency-inference-for-conftestpy-130-vs-20" translate=no>​</a></h3>
<p>Pytest uses any <code>conftest.py</code> files found in the current directory and any ancestor directories.</p>
<p>Previously, with both the v1 and v2 engine, you would have to be careful to make sure that each <code>conftest.py</code> file had an owning target, and then to add an explicit dependency on each <code>conftest.py</code> file that you wanted to use.</p>
<p>Instead, now Pants will infer dependencies on any sibling and ancestor <code>confest.py</code> files, which will ensure that they are always used. You can turn this feature off by setting <code>conftests = false</code> in the <code>[python-infer]</code> section of your <code>pants.toml</code>.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=use-the-package-goal-instead-of-binary-awslambda-and-setup-py-130-vs-20>Use the <code>package</code> goal instead of <code>binary</code>, <code>awslambda</code>, and <code>setup-py</code> (1.30 vs. 2.0)<a href=#use-the-package-goal-instead-of-binary-awslambda-and-setup-py-130-vs-20 class=hash-link aria-label="Direct link to use-the-package-goal-instead-of-binary-awslambda-and-setup-py-130-vs-20" title="Direct link to use-the-package-goal-instead-of-binary-awslambda-and-setup-py-130-vs-20" translate=no>​</a></h3>
<p>We consolidated all three of those goals into the new <code>package</code> goal. (The old goals still exist, but are deprecated).</p>
<p><code>package</code> behaves identically for <code>binary</code> and <code>awslambda</code>. For <code>setup-py</code>, rather than using command line arguments like <code>./pants setup-py path/to:tgt -- bdist_wheel</code>, set the field <code>setup_py_commands = ['bdist_wheel']</code>, for example.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=use-python_distribution-target-type-for-providessetup_py-130-vs-20>Use <code>python_distribution</code> target type for <code>provides=setup_py()</code> (1.30 vs. 2.0)<a href=#use-python_distribution-target-type-for-providessetup_py-130-vs-20 class=hash-link aria-label="Direct link to use-python_distribution-target-type-for-providessetup_py-130-vs-20" title="Direct link to use-python_distribution-target-type-for-providessetup_py-130-vs-20" translate=no>​</a></h3>
<p>Previously, the <code>provides</code> field was used on <code>python_library</code> targets for the <code>setup-py</code> goal. Now, use a dedicated <code>python_distribution</code> target.</p>
<p>Typically, you can keep the original <code>python_library</code> you had the same as before, e.g. keep the same <code>dependencies</code> field the same. Then, create a new <code>python_distribution</code> target and move the <code>provides</code> field from the <code>python_library</code> to the <code>python_distribution</code>.</p>
<p>Finally, add to the <code>python_distribution</code>'s <code>dependencies</code> field the address to the original <code>python_library</code>; this will cause the <code>python_distribution</code> to include everything that was originally included. You can verify everything shows up correctly by running <code>./pants dependencies --transitive path/to:my-dist</code>.</p>
<div class="language-python codeBlockContainer_LrZr theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_QpNL><pre tabindex=0 class="prism-code language-python codeBlock_z5Jo thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_YVRJ><span class=token-line style=color:#bfc7d5><span class="token plain">python_library</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"lib"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  dependencies</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">"dep1"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"dep2"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">python_distribution</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"my-dist"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    dependencies</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">":lib"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    provides</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">setup_py</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">        name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"my-dist"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=python_binary-is-deprecated-in-favor-of-pex_binary-130-vs-20><code>python_binary</code> is deprecated in favor of <code>pex_binary</code> (1.30 vs. 2.0)<a href=#python_binary-is-deprecated-in-favor-of-pex_binary-130-vs-20 class=hash-link aria-label="Direct link to python_binary-is-deprecated-in-favor-of-pex_binary-130-vs-20" title="Direct link to python_binary-is-deprecated-in-favor-of-pex_binary-130-vs-20" translate=no>​</a></h3>
<p>The target type behaves identically. It was renamed for clarity and to accommodate possible future binary formats like PyInstaller.</p>
<p>Use this command to automatically update your BUILD files:</p>
<ul>
<li class="">macOS: <code>for f in $(find . -name BUILD); do sed -i '' -Ee 's#^python_binary\\(#pex_binary(#g' $f ; done</code></li>
<li class="">Linux: <code>for f in $(find . -name BUILD); do sed -i -Ee 's#^python_binary\\(#pex_binary(#g' $f ; done</code></li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=tests-run-in-the-background-by-default-v1-vs-v2-engine>Tests run in the background by default (v1 vs. v2 engine)<a href=#tests-run-in-the-background-by-default-v1-vs-v2-engine class=hash-link aria-label="Direct link to Tests run in the background by default (v1 vs. v2 engine)" title="Direct link to Tests run in the background by default (v1 vs. v2 engine)" translate=no>​</a></h3>
<p>In v1, tests run in the foreground. That is, you can see tests run in real-time in your terminal, and you can use breakpoints and debuggers.</p>
<p>In v2, tests instead run in the background. Why? So that Pants can run multiple test files in parallel.</p>
<p>To instead run a test interactively, run <code>./pants test --debug</code>. (See <a class="" href=/2.3/docs/python/goals/test>test</a>).</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=tests-always-run-in-a-chroot-v1-vs-v2-engine>Tests always run in a chroot (v1 vs. v2 engine)<a href=#tests-always-run-in-a-chroot-v1-vs-v2-engine class=hash-link aria-label="Direct link to Tests always run in a chroot (v1 vs. v2 engine)" title="Direct link to Tests always run in a chroot (v1 vs. v2 engine)" translate=no>​</a></h3>
<p>Before Pants 1.25.0, tests would run in the build root, rather than in a temporary directory (chroot). We changed the default for the v1 engine in 1.25.0 to default to running in a chroot, but you might have still set <code>chroot = false</code> in the <code>[test.pytest]</code> scope.</p>
<p>The <code>chroot</code> option was removed because the v2 engine always runs tests in a chroot. To fix any issues, usually, you will need to declare dependencies that you previously left off, such as declaring a <code>files()</code> or <code>resource()</code> target for resource files.</p>
<p>(Why do we now run in a chroot? This allows us to safely run multiple tests in parallel.)</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=coveragepy-support-was-redesigned-v1-engine-vs-v2-engine>Coverage.py support was redesigned (v1 engine vs. v2 engine)<a href=#coveragepy-support-was-redesigned-v1-engine-vs-v2-engine class=hash-link aria-label="Direct link to Coverage.py support was redesigned (v1 engine vs. v2 engine)" title="Direct link to Coverage.py support was redesigned (v1 engine vs. v2 engine)" translate=no>​</a></h3>
<p>Previously, Pants would try to figure out which modules you wanted coverage for by either using the <code>coverage</code> option in the <code>[test.pytest]</code> scope, or by trying to automatically figure out the value by looking at the <code>coverage</code> field in <code>python_tests</code> targets and using the package names of your test files. This did not work very well and was clunky to get the correct results.</p>
<p>Now, Pants will default to reporting on every file in the transitive closure of your tests, meaning any file that is touched during your tests' run. The <code>coverage</code> field was removed from <code>python_tests</code>. If you want more precise coverage data, you can use the <code>--coverage-py-filter</code> option, e.g. <code>./pants --coverage-py-filter=helloworld.util.lang</code>.</p>
<p>We also added new options to specify which type of report(s) you'd like. See <a class="" href=/2.3/docs/python/goals/test#coverage>test</a> for instructions on how to use coverage.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=linter-config-files-must-be-specified-v1-vs-v2-engine>Linter config files must be specified (v1 vs. v2 engine)<a href=#linter-config-files-must-be-specified-v1-vs-v2-engine class=hash-link aria-label="Direct link to Linter config files must be specified (v1 vs. v2 engine)" title="Direct link to Linter config files must be specified (v1 vs. v2 engine)" translate=no>​</a></h3>
<p>Because linters and formatters now run in a chroot (temporary directory), you must explicitly specify your config files to make sure that they get copied into the directory. See <a class="" href=/2.3/docs/python/overview/linters-and-formatters>Linters and formatters</a>.</p>
<p>(Running in a chroot means that Pants can run all of your linters in parallel.)</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=mypy-is-activated-differently-130-vs-20>MyPy is activated differently (1.30 vs. 2.0)<a href=#mypy-is-activated-differently-130-vs-20 class=hash-link aria-label="Direct link to MyPy is activated differently (1.30 vs. 2.0)" title="Direct link to MyPy is activated differently (1.30 vs. 2.0)" translate=no>​</a></h3>
<p>Before:</p>
<div class="language-toml codeBlockContainer_LrZr theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockTitle_GKkA>pants.toml</div><div class=codeBlockContent_QpNL><pre tabindex=0 class="prism-code language-toml codeBlock_z5Jo thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_YVRJ><span class=token-line style=color:#bfc7d5><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token table class-name" style="color:rgb(255, 203, 107)">GLOBAL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">plugins</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">"pantsbuild.pants.contrib.mypy"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><br/></span></code></pre></div></div>
<p>After:</p>
<div class="language-toml codeBlockContainer_LrZr theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockTitle_GKkA>pants.toml</div><div class=codeBlockContent_QpNL><pre tabindex=0 class="prism-code language-toml codeBlock_z5Jo thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_YVRJ><span class=token-line style=color:#bfc7d5><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token table class-name" style="color:rgb(255, 203, 107)">GLOBAL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">backend_packages</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">"pants.backend.python"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">"pants.backend.python.typecheck.mypy"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><br/></span></code></pre></div></div>
<p>MyPy no longer runs under the <code>lint</code> goal, and instead uses a new <code>typecheck</code> goal.</p>
<p>See <a class="" href=/2.3/docs/python/goals/typecheck>typecheck</a> for more information.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=ipython-is-activated-differently-v1-engine-vs-v2-engine>IPython is activated differently (v1 engine vs. v2 engine)<a href=#ipython-is-activated-differently-v1-engine-vs-v2-engine class=hash-link aria-label="Direct link to IPython is activated differently (v1 engine vs. v2 engine)" title="Direct link to IPython is activated differently (v1 engine vs. v2 engine)" translate=no>​</a></h3>
<p>Before:</p>
<div class="language-toml codeBlockContainer_LrZr theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockTitle_GKkA>pants.toml</div><div class=codeBlockContent_QpNL><pre tabindex=0 class="prism-code language-toml codeBlock_z5Jo thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_YVRJ><span class=token-line style=color:#bfc7d5><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token table class-name" style="color:rgb(255, 203, 107)">repl.py</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">ipython</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><br/></span></code></pre></div></div>
<p>After:</p>
<div class="language-toml codeBlockContainer_LrZr theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockTitle_GKkA>pants.toml</div><div class=codeBlockContent_QpNL><pre tabindex=0 class="prism-code language-toml codeBlock_z5Jo thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_YVRJ><span class=token-line style=color:#bfc7d5><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token table class-name" style="color:rgb(255, 203, 107)">repl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">shell</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"ipython"</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=python_app-is-now-archive-130-vs-20><code>python_app</code> is now <code>archive</code> (1.30 vs. 2.0)<a href=#python_app-is-now-archive-130-vs-20 class=hash-link aria-label="Direct link to python_app-is-now-archive-130-vs-20" title="Direct link to python_app-is-now-archive-130-vs-20" translate=no>​</a></h3>
<p>Rather than using a <code>python_app</code> target and the <code>bundle</code> goal, use the <code>archive</code> target type and the <code>package</code> goal. We redesigned this feature to be simpler, such as using dependencies on <code>files()</code> targets rather than using the <code>bundle</code> type. If you still need to relocate where files are located, you can use the <code>relocated_files()</code> target. See <a class="" href=/2.3/docs/using-pants/resources-and-archives>Resources and archives</a>.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=--cache-ignore-is-removed-v1-vs-v2-engine><code>--cache-ignore</code> is removed (v1 vs. v2 engine)<a href=#--cache-ignore-is-removed-v1-vs-v2-engine class=hash-link aria-label="Direct link to --cache-ignore-is-removed-v1-vs-v2-engine" title="Direct link to --cache-ignore-is-removed-v1-vs-v2-engine" translate=no>​</a></h3>
<p>The v2 engine handles caching very differently than the v1 engine. Rather than having monolithic tasks like <code>test.pytest</code>, each build step is broken up into several composable "rules". Because of this design, options like <code>--cache-ignore</code> and <code>--test-pytest-cache-ignore</code> would no longer do anything.</p>
<p>Instead, you can use <code>--no-process-execution-use-local-cache</code>. This will avoid reading from the global cache in <code>~/.cache/pants/lmbd_store</code>. Warning: this means that you will re-resolve Python requirements, which is slow.</p>
<p>If you're trying to rerun a test, you can instead run <code>./pants test --force</code> to force the test to rerun, but still use the cache for everything else (See <a class="" href=/2.3/docs/python/goals/test>test</a>).</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=targets-is-replaced-by-help-130-vs-20><code>targets</code> is replaced by <code>help</code> (1.30 vs. 2.0)<a href=#targets-is-replaced-by-help-130-vs-20 class=hash-link aria-label="Direct link to targets-is-replaced-by-help-130-vs-20" title="Direct link to targets-is-replaced-by-help-130-vs-20" translate=no>​</a></h3>
<p>Run <code>./pants help targets</code> for a list of target types, and <code>./pants help $target_type</code> for details on a specific target. The new <code>help</code> mechanism gives much more detail than the previous <code>targets</code> goal.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=option-is-removed-in-favor-of-a-better-help-130-vs-20><code>option</code> is removed in favor of a better <code>help</code> (1.30 vs. 2.0)<a href=#option-is-removed-in-favor-of-a-better-help-130-vs-20 class=hash-link aria-label="Direct link to option-is-removed-in-favor-of-a-better-help-130-vs-20" title="Direct link to option-is-removed-in-favor-of-a-better-help-130-vs-20" translate=no>​</a></h3>
<p><code>./pants help</code> will now show you what the current value is and how the value was derived.</p>
<p>You can use <code>./pants help-all</code> to get information on every option in JSON format.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=alias-is-removed-130-vs-20><code>alias</code> is removed (1.30 vs. 2.0)<a href=#alias-is-removed-130-vs-20 class=hash-link aria-label="Direct link to alias-is-removed-130-vs-20" title="Direct link to alias-is-removed-130-vs-20" translate=no>​</a></h3>
<p>If you found this feature useful, we'd be happy to add it back in a more powerful way. Please message us on <a class="" href=/community/members>Slack</a> or open a <a href=https://github.com/pantsbuild/pants/issues target=_blank rel="noopener noreferrer" class="">GitHub issue</a>.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=prep_command-is-removed-130-vs-20><code>prep_command</code> is removed (1.30 vs. 2.0)<a href=#prep_command-is-removed-130-vs-20 class=hash-link aria-label="Direct link to prep_command-is-removed-130-vs-20" title="Direct link to prep_command-is-removed-130-vs-20" translate=no>​</a></h3>
<p><code>prep_command</code> does not fit well with the v2 engine's execution model. If you needed this functionality, please message us on <a class="" href=/community/members>Slack</a> and we will help to figure out how to recreate your setup.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=minimize-filemap-path-paths-and-sort-are-removed-130-vs-20><code>minimize</code>, <code>filemap</code>, <code>path</code>, <code>paths</code>, and <code>sort</code> are removed (1.30 vs. 2.0)<a href=#minimize-filemap-path-paths-and-sort-are-removed-130-vs-20 class=hash-link aria-label="Direct link to minimize-filemap-path-paths-and-sort-are-removed-130-vs-20" title="Direct link to minimize-filemap-path-paths-and-sort-are-removed-130-vs-20" translate=no>​</a></h3>
<p>We are happy to add these back if you found them useful. Please message us on <a class="" href=/community/members>Slack</a> or open a <a href=https://github.com/pantsbuild/pants/issues target=_blank rel="noopener noreferrer" class="">GitHub issue</a>.</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_eWnd"><a href=https://github.com/pantsbuild/pants/edit/main/docs/docs/introduction/pants-1.x-vs.-2.x/how-to-upgrade.mdx target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_HmrO aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_F4iS"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/2.3/docs/introduction/pants-1.x-vs.-2.x><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Pants 1.x vs. 2.x</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/2.3/docs/using-pants/command-line-help><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Command line help</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_ZBPU thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#step-1-upgrade-to-pants-130 class="table-of-contents__link toc-highlight">Step 1: Upgrade to Pants 1.30</a><ul><li><a href=#upgrade-your-pants-script class="table-of-contents__link toc-highlight">Upgrade your <code>./pants</code> script</a></ul><li><a href=#step-2-setup-jvm-node-and-go-support-if-relevant class="table-of-contents__link toc-highlight">Step 2: Setup JVM, Node, and Go support (if relevant)</a><ul><li><a href=#step-2a-setup-pantsv1toml class="table-of-contents__link toc-highlight">Step 2a: Setup <code>pants.v1.toml</code></a><li><a href=#step-2b-create-v1 class="table-of-contents__link toc-highlight">Step 2b: Create <code>./v1</code></a><li><a href=#step-2c-remove-the-other-languages-from-pantstoml class="table-of-contents__link toc-highlight">Step 2c: Remove the other languages from <code>pants.toml</code></a></ul><li><a href=#step-3-rewrite-your-plugins-if-relevant class="table-of-contents__link toc-highlight">Step 3: Rewrite your plugins (if relevant)</a><li><a href=#step-4-upgrade-to-20 class="table-of-contents__link toc-highlight">Step 4: Upgrade to 2.0</a><li><a href=#step-5-tweak-your-cis-caching-recommended class="table-of-contents__link toc-highlight">Step 5: Tweak your CI's caching (recommended)</a><li><a href=#step-6-set-up-a-constraints-file-strongly-recommended class="table-of-contents__link toc-highlight">Step 6: Set up a constraints file (strongly recommended)</a><li><a href=#key-differences-to-be-aware-of class="table-of-contents__link toc-highlight">Key differences to be aware of</a><ul><li><a href=#files-are-now-the-atomic-unit-rather-than-targets-130-vs-20 class="table-of-contents__link toc-highlight">Files are now the "atomic unit", rather than targets (1.30 vs. 2.0)</a><li><a href=#dependency-inference-is-enabled-by-default-130-vs-20 class="table-of-contents__link toc-highlight">Dependency inference is enabled by default (1.30 vs. 2.0)</a><li><a href=#less-magical-handling-of-__init__py-files-130-vs-20 class="table-of-contents__link toc-highlight">Less magical handling of <code>__init__.py</code> files (1.30 vs. 2.0)</a><li><a href=#dependency-inference-for-conftestpy-130-vs-20 class="table-of-contents__link toc-highlight">Dependency inference for <code>conftest.py</code> (1.30 vs. 2.0)</a><li><a href=#use-the-package-goal-instead-of-binary-awslambda-and-setup-py-130-vs-20 class="table-of-contents__link toc-highlight">Use the <code>package</code> goal instead of <code>binary</code>, <code>awslambda</code>, and <code>setup-py</code> (1.30 vs. 2.0)</a><li><a href=#use-python_distribution-target-type-for-providessetup_py-130-vs-20 class="table-of-contents__link toc-highlight">Use <code>python_distribution</code> target type for <code>provides=setup_py()</code> (1.30 vs. 2.0)</a><li><a href=#python_binary-is-deprecated-in-favor-of-pex_binary-130-vs-20 class="table-of-contents__link toc-highlight"><code>python_binary</code> is deprecated in favor of <code>pex_binary</code> (1.30 vs. 2.0)</a><li><a href=#tests-run-in-the-background-by-default-v1-vs-v2-engine class="table-of-contents__link toc-highlight">Tests run in the background by default (v1 vs. v2 engine)</a><li><a href=#tests-always-run-in-a-chroot-v1-vs-v2-engine class="table-of-contents__link toc-highlight">Tests always run in a chroot (v1 vs. v2 engine)</a><li><a href=#coveragepy-support-was-redesigned-v1-engine-vs-v2-engine class="table-of-contents__link toc-highlight">Coverage.py support was redesigned (v1 engine vs. v2 engine)</a><li><a href=#linter-config-files-must-be-specified-v1-vs-v2-engine class="table-of-contents__link toc-highlight">Linter config files must be specified (v1 vs. v2 engine)</a><li><a href=#mypy-is-activated-differently-130-vs-20 class="table-of-contents__link toc-highlight">MyPy is activated differently (1.30 vs. 2.0)</a><li><a href=#ipython-is-activated-differently-v1-engine-vs-v2-engine class="table-of-contents__link toc-highlight">IPython is activated differently (v1 engine vs. v2 engine)</a><li><a href=#python_app-is-now-archive-130-vs-20 class="table-of-contents__link toc-highlight"><code>python_app</code> is now <code>archive</code> (1.30 vs. 2.0)</a><li><a href=#--cache-ignore-is-removed-v1-vs-v2-engine class="table-of-contents__link toc-highlight"><code>--cache-ignore</code> is removed (v1 vs. v2 engine)</a><li><a href=#targets-is-replaced-by-help-130-vs-20 class="table-of-contents__link toc-highlight"><code>targets</code> is replaced by <code>help</code> (1.30 vs. 2.0)</a><li><a href=#option-is-removed-in-favor-of-a-better-help-130-vs-20 class="table-of-contents__link toc-highlight"><code>option</code> is removed in favor of a better <code>help</code> (1.30 vs. 2.0)</a><li><a href=#alias-is-removed-130-vs-20 class="table-of-contents__link toc-highlight"><code>alias</code> is removed (1.30 vs. 2.0)</a><li><a href=#prep_command-is-removed-130-vs-20 class="table-of-contents__link toc-highlight"><code>prep_command</code> is removed (1.30 vs. 2.0)</a><li><a href=#minimize-filemap-path-paths-and-sort-are-removed-130-vs-20 class="table-of-contents__link toc-highlight"><code>minimize</code>, <code>filemap</code>, <code>path</code>, <code>paths</code>, and <code>sort</code> are removed (1.30 vs. 2.0)</a></ul></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Spotlight</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/spotlight/users>Users</a><li class=footer__item><a class=footer__link-item href=/spotlight/testimonials>Testimonials</a><li class=footer__item><a class=footer__link-item href=/spotlight/media>Media</a><li class=footer__item><a class=footer__link-item href=/spotlight/service-providers>Service Providers</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Connect</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://github.com/pantsbuild/pants target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://twitter.com/pantsbuild target=_blank rel="noopener noreferrer" class=footer__link-item>Twitter<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://www.youtube.com/@pantsbuild target=_blank rel="noopener noreferrer" class=footer__link-item>YouTube<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://groups.google.com/forum/#!forum/pants-devel target=_blank rel="noopener noreferrer" class=footer__link-item>Mailing List<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/blog>Blog</a><li class=footer__item><a class=footer__link-item href=/sponsors>Sponsors</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/community/getting-help>Getting Help</a><li class=footer__item><a class=footer__link-item href=/community/members>Members</a><li class=footer__item><a class=footer__link-item href=/community/code-of-conduct>Code of Conduct</a><li class=footer__item><a class=footer__link-item href=/community/meet-the-team>Meet the Team</a><li class=footer__item><a class=footer__link-item href=/community/maintainers>Maintainers</a><li class=footer__item><a class=footer__link-item href=/community/contentious-decisions>Contentious Decisions</a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © Pants project contributors. <a href=https://github.com/pantsbuild/pantsbuild.org>Website source</a> @ <a href=https://github.com/pantsbuild/pantsbuild.org/commit/a274212dfdcfe1657dd5eae4836420db8cdf9099>a27421</a>.</div></div></div></footer></div></body>