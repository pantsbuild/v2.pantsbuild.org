"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["171339"],{64705(e,n,t){t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var s=t(896646),a=t(886070),o=t(848193);let i={title:"Goals",sidebar_position:0},l,r={},c=[{value:"Running goals",id:"running-goals",level:2},{value:"Goal arguments",id:"goal-arguments",level:2},{value:"File arguments vs. target arguments",id:"file-arguments-vs-target-arguments",level:3},{value:"Goal options",id:"goal-options",level:3}];function d(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"The commands Pants runs."}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsxs)(n.p,{children:["Pants commands are known as ",(0,a.jsx)(n.em,{children:"goals"}),", such as ",(0,a.jsx)(n.code,{children:"test"})," and ",(0,a.jsx)(n.code,{children:"lint"}),"."]}),"\n",(0,a.jsx)(n.p,{children:"To see the current list of goals, run:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"\u276F ./pants help goals\n"})}),"\n",(0,a.jsxs)(n.p,{children:["You'll see more goals activated as you activate more ",(0,a.jsx)(n.a,{href:"/2.8/docs/using-pants/key-concepts-to-know-about-pants/backends",children:"backends"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"running-goals",children:"Running goals"}),"\n",(0,a.jsx)(n.p,{children:"For example:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"\u276F ./pants test project/app_test.py\n15:40:37.89 [INFO] Completed: test - project/app_test.py:tests succeeded.\n\n\u2713 project/app_test.py:tests succeeded.\n"})}),"\n",(0,a.jsx)(n.p,{children:"You can also run multiple goals in a single run of Pants, in which case they will run sequentially:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Format all code, and then lint it:\n\u276F ./pants fmt lint ::\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Finally, Pants supports running goals in a ",(0,a.jsx)(n.code,{children:"--loop"}),": in this mode, all goals specified will run sequentially, and then Pants will wait until a relevant file has changed to try running them again."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Re-run typechecking and testing continuously as files or their dependencies change:\n\u276F ./pants --loop check test project/app_test.py\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Use ",(0,a.jsx)(n.code,{children:"Ctrl+C"})," to exit the ",(0,a.jsx)(n.code,{children:"--loop"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"goal-arguments",children:"Goal arguments"}),"\n",(0,a.jsxs)(n.p,{children:["Some simple goals\u2014such as the ",(0,a.jsx)(n.code,{children:"roots"})," goal\u2014do not require arguments. But most goals require some arguments to work on."]}),"\n",(0,a.jsxs)(n.p,{children:["For example, to run the ",(0,a.jsx)(n.code,{children:"count-loc"})," goal, which counts lines of code in your repository, you need to provide a set of files and/or targets to run on:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-text",metastring:'title="Shell"',children:"$ ./pants count-loc '**'\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nLanguage                 Files     Lines   Blanks  Comments     Code Complexity\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nPython                      13       155       50        22       83          5\nBASH                         2       261       29        22      210         10\nJSON                         2        25        0         0       25          0\nPlain Text                   2        43        1         0       42          0\nTOML                         2        65       14        18       33          0\n...\n"})}),"\n",(0,a.jsx)(n.admonition,{title:"Quoting file patterns",type:"note",children:(0,a.jsxs)(n.p,{children:["Note the single-quotes around the file pattern ",(0,a.jsx)(n.code,{children:"'**'"}),". This is so that your shell doesn't attempt to expand the pattern, but instead passes it unaltered to Pants."]})}),"\n",(0,a.jsx)(n.h3,{id:"file-arguments-vs-target-arguments",children:"File arguments vs. target arguments"}),"\n",(0,a.jsx)(n.p,{children:"Goal arguments can be of one of two types:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.em,{children:"File arguments"}),": file paths and/or globs."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.em,{children:"Target arguments"}),": addresses and/or address globs of ",(0,a.jsx)(n.a,{href:"/2.8/docs/using-pants/key-concepts-to-know-about-pants/targets-and-build-files",children:"targets"}),"."]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Typically you can just use file arguments, and not worry about targets."}),"\n",(0,a.jsx)(n.p,{children:"Any goal can take either type of argument:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"If a target argument is given, the goal acts on all the files in the matching targets."}),"\n",(0,a.jsx)(n.li,{children:"If a file argument is given, Pants will map the file back to its containing target to read any necessary metadata."}),"\n"]}),"\n",(0,a.jsxs)(n.admonition,{title:"File/target globs",type:"note",children:[(0,a.jsxs)(n.p,{children:["For file arguments, use ",(0,a.jsx)(n.code,{children:"'*'"})," and ",(0,a.jsx)(n.code,{children:"'**'"}),", with the same semantics as the shell. Reminder: quote the argument if you want Pants to evaluate the glob, rather than your shell."]}),(0,a.jsx)(n.p,{children:"For target arguments, you can use:"}),(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"dir::"}),", where ",(0,a.jsx)(n.code,{children:"::"})," means every target in the current directory and recursively in subdirectories."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"dir:"}),", where ",(0,a.jsx)(n.code,{children:":"})," means every target in that directory, but not subdirectories."]}),"\n"]}),(0,a.jsxs)(n.p,{children:["For example, ",(0,a.jsx)(n.code,{children:"./pants list ::"})," will find every target in your project."]})]}),"\n",(0,a.jsx)(n.admonition,{title:"Tip: advanced target selection, such as running over changed files",type:"note",children:(0,a.jsxs)(n.p,{children:["See ",(0,a.jsx)(n.a,{href:"/2.8/docs/using-pants/advanced-target-selection",children:"Advanced target selection"})," for alternative techniques to specify which files/targets to run on."]})}),"\n",(0,a.jsx)(n.h3,{id:"goal-options",children:"Goal options"}),"\n",(0,a.jsxs)(n.p,{children:["Many goals also have ",(0,a.jsx)(n.a,{href:"/2.8/docs/using-pants/key-concepts-to-know-about-pants/options",children:"options"})," to change how they behave."]}),"\n",(0,a.jsxs)(n.p,{children:["To see if a goal has any options, run ",(0,a.jsx)(n.code,{children:"./pants help $goal"})," or ",(0,a.jsx)(n.code,{children:"./pants help-advanced $goal"}),". See ",(0,a.jsx)(n.a,{href:"/community/getting-help",children:"Command Line Help"})," for more information."]}),"\n",(0,a.jsx)(n.p,{children:"For example:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"\u276F ./pants help test\n17:20:14.24 [INFO] Remote cache/execution options updated: reinitializing scheduler...\n17:20:15.36 [INFO] Scheduler initialized.\n\n`test` goal options\n-------------------\n\nRun tests.\n\nConfig section: [test]\n\n  --[no-]test-debug\n  PANTS_TEST_DEBUG\n  debug\n      default: False\n      current value: False\n      Run tests sequentially in an interactive process. This is necessary, for example, when you\n      add breakpoints to your code.\n\n...\n"})}),"\n",(0,a.jsx)(n.p,{children:"You can then use the option by prefixing it with the goal name:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"./pants --test-debug test project/app_test.py\n"})}),"\n",(0,a.jsx)(n.p,{children:"You can also put the option after the file/target arguments:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"./pants test project/app_test.py --test-debug\n"})}),"\n",(0,a.jsx)(n.p,{children:"As a shorthand, if you put the option after the goal and before the file/target arguments, you can leave off the goal name in the flag:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"./pants test --debug project/app_test.py\n"})})]})}function h(e={}){let{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},848193(e,n,t){t.d(n,{R:()=>i,x:()=>l});var s=t(830758);let a={},o=s.createContext(a);function i(e){let n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(o.Provider,{value:n},e.children)}},896646(e){e.exports=JSON.parse('{"id":"docs/using-pants/key-concepts-to-know-about-pants/goals","title":"Goals","description":"The commands Pants runs.","source":"@site/versioned_docs/version-2.8/docs/using-pants/key-concepts-to-know-about-pants/goals.mdx","sourceDirName":"docs/using-pants/key-concepts-to-know-about-pants","slug":"/docs/using-pants/key-concepts-to-know-about-pants/goals","permalink":"/2.8/docs/using-pants/key-concepts-to-know-about-pants/goals","draft":false,"unlisted":false,"editUrl":"https://github.com/pantsbuild/pants/edit/main/docs/docs/using-pants/key-concepts-to-know-about-pants/goals.mdx","tags":[],"version":"2.8","sidebarPosition":0,"frontMatter":{"title":"Goals","sidebar_position":0},"sidebar":"docsSidebar","previous":{"title":"Key concepts to know about Pants","permalink":"/2.8/docs/using-pants/key-concepts-to-know-about-pants/"},"next":{"title":"Targets and BUILD files","permalink":"/2.8/docs/using-pants/key-concepts-to-know-about-pants/targets-and-build-files"}}')}}]);