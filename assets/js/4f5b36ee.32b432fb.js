"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["171490"],{687367(e,n,t){t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>h});var o=t(21196),s=t(886070),r=t(848193);let i={title:"repl",sidebar_position:5},l,a={},h=[{value:"IPython",id:"ipython",level:2},{value:"Examples",id:"examples",level:2}];function d(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",hr:"hr",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Open a REPL for interactive development."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:["Pants will load a ",(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/REPL",children:"REPL"})," with all of your specified source code and any of its third-party dependencies, which allows you to import those values."]}),"\n",(0,s.jsx)(n.h2,{id:"ipython",children:"IPython"}),"\n",(0,s.jsxs)(n.p,{children:["In addition to the default Python shell, Pants supports the improved ",(0,s.jsx)(n.a,{href:"https://ipython.org",children:"IPython shell"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["To use IPython, run ",(0,s.jsx)(n.code,{children:"pants repl --shell=ipython"}),". To permanently use IPython, add this to your ",(0,s.jsx)(n.code,{children:"pants.toml"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",metastring:'title="pants.toml"',children:'[repl]\nshell = "ipython"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["You can change IPython's version with ",(0,s.jsx)(n.code,{children:"[ipython].version"}),". If you change it, Pants's default lockfile for IPython will not work. Either set the ",(0,s.jsx)(n.code,{children:"lockfile"})," option to a custom path or ",(0,s.jsx)(n.code,{children:'"<none>"'})," to opt-out. See ",(0,s.jsx)(n.a,{href:"/2.19/docs/python/overview/third-party-dependencies#tool-lockfiles",children:"Third-party dependencies"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",metastring:'title="pants.toml"',children:'[ipython]\nversion = "ipython>=8.0.0"\nlockfile = "3rdparty/python/ipython_lock.txt"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["If you set the ",(0,s.jsx)(n.code,{children:"version"})," lower than IPython 7, then you must set ",(0,s.jsx)(n.code,{children:"[ipython].ignore_cwd = false"})," to avoid Pants setting an option that did not exist in earlier IPython releases."]}),"\n",(0,s.jsxs)(n.admonition,{title:"Python 2 support",type:"note",children:[(0,s.jsxs)(n.p,{children:["Pants uses IPython 7 by default, which does not work with Python 2. You can override ",(0,s.jsx)(n.code,{children:"version"})," to use IPython 5. As mentioned above, you must set ",(0,s.jsx)(n.code,{children:"ignore_cwd = false"}),"."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[ipython]\nversion = "ipython<6"\nlockfile = "3rdparty/python/ipython_lock.txt"\nignore_cwd = false\n'})}),(0,s.jsx)(n.p,{children:"You can even use IPython 7 for Python 3 code, and IPython 5 for Python 2 code:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[ipython]\nversion = "ipython==7.16.1 ; python_version >= \'3.6\'"\nextra_requirements.add = ["ipython<6 ; python_version == \'2.7\'"]\nlockfile = "3rdparty/python/ipython_lock.txt"\nignore_cwd = false\n'})})]}),"\n",(0,s.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",metastring:'title="Shell"',children:'$ pants repl helloworld/greet/greeting.py\n\nPython 3.7.6 (default, Feb 26 2020, 08:28:08)\n[Clang 11.0.0 (clang-1100.0.33.8)] on darwin\nType "help", "copyright", "credits" or "license" for more information.\n(InteractiveConsole)\n>>> from helloworld.greet.greeting import Greeter\n>>> Greeter().greet("Pants")\n\'buenas tardes, Pants!\'\n>>> from translate import Translator\n>>> Translator(to_lang="fr").translate("Good morning.")\n\'Salut.\'\n'})}),"\n",(0,s.jsx)(n.p,{children:"This will not load any of your code:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",metastring:'title="Shell"',children:"\u276F pants repl --shell=ipython\nPython 3.9.12 (main, Mar 26 2022, 15:45:34)\nType 'copyright', 'credits' or 'license' for more information\nIPython 7.34.0 -- An enhanced Interactive Python. Type '?' for help.\n\nIn [1]: 21 * 4\nOut[1]: 84\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"pants repl ::"})," will load all your code."]}),"\n",(0,s.jsxs)(n.p,{children:["To pass arguments to the repl program, use ",(0,s.jsx)(n.code,{children:"--"})," at the end of the command, like this:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",metastring:'title="Shell"',children:"$ pants repl --shell=ipython -- -i helloworld/main.py\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Check the documentation for the ",(0,s.jsx)(n.code,{children:"--repl-args"})," option in ",(0,s.jsx)(n.code,{children:"pants help repl"})," to see which shells support passing arguments."]}),"\n",(0,s.jsx)(n.admonition,{title:"Tip: how to exit the REPL",type:"note",children:(0,s.jsxs)(n.p,{children:["Either type ",(0,s.jsx)(n.code,{children:"exit()"})," and hit enter, or press ",(0,s.jsx)(n.code,{children:"ctrl+d"}),"."]})})]})}function c(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},848193(e,n,t){t.d(n,{R:()=>i,x:()=>l});var o=t(830758);let s={},r=o.createContext(s);function i(e){let n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(r.Provider,{value:n},e.children)}},21196(e){e.exports=JSON.parse('{"id":"docs/python/goals/repl","title":"repl","description":"Open a REPL for interactive development.","source":"@site/versioned_docs/version-2.19/docs/python/goals/repl.mdx","sourceDirName":"docs/python/goals","slug":"/docs/python/goals/repl","permalink":"/2.19/docs/python/goals/repl","draft":false,"unlisted":false,"editUrl":"https://github.com/pantsbuild/pants/edit/main/docs/docs/python/goals/repl.mdx","tags":[],"version":"2.19","sidebarPosition":5,"frontMatter":{"title":"repl","sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"publish","permalink":"/2.19/docs/python/goals/publish"},"next":{"title":"run","permalink":"/2.19/docs/python/goals/run"}}')}}]);