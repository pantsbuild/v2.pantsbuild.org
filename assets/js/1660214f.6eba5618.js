"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["73254"],{41346(e,s,t){t.r(s),t.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>g,frontMatter:()=>l,metadata:()=>r,toc:()=>h});var r=t(254901),i=t(886070),n=t(848193),d=t(989898),o=t(375002);let l={title:"go_package",description:"A first-party Go package (corresponding to a directory with `.go` files).\n"},a,c={},h=[{value:"<code>assembler_flags</code>",id:"assembler_flags",level:2},{value:"<code>compiler_flags</code>",id:"compiler_flags",level:2},{value:"<code>dependencies</code>",id:"dependencies",level:2},{value:"<code>description</code>",id:"description",level:2},{value:"<code>skip_go_vet</code>",id:"skip_go_vet",level:2},{value:"<code>skip_gofmt</code>",id:"skip_gofmt",level:2},{value:"<code>skip_golangci_lint</code>",id:"skip_golangci_lint",level:2},{value:"<code>skip_tests</code>",id:"skip_tests",level:2},{value:"<code>sources</code>",id:"sources",level:2},{value:"<code>tags</code>",id:"tags",level:2},{value:"<code>test_asan</code>",id:"test_asan",level:2},{value:"<code>test_extra_env_vars</code>",id:"test_extra_env_vars",level:2},{value:"<code>test_msan</code>",id:"test_msan",level:2},{value:"<code>test_race</code>",id:"test_race",level:2},{value:"<code>test_timeout</code>",id:"test_timeout",level:2}];function p(e){let s={a:"a",code:"code",h2:"h2",hr:"hr",li:"li",p:"p",ul:"ul",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.p,{children:["A first-party Go package (corresponding to a directory with ",(0,i.jsx)(s.code,{children:".go"})," files)."]}),"\n",(0,i.jsxs)(s.p,{children:["Expects that there is a ",(0,i.jsx)(s.code,{children:"go_mod"})," target in its directory or in an ancestor directory."]}),"\n",(0,i.jsxs)(s.p,{children:["Backend: ",(0,i.jsx)("span",{className:"color--primary",children:(0,i.jsx)(s.code,{children:"pants.backend.experimental.go"})})]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)("span",{className:o.A.options,children:[(0,i.jsx)(s.h2,{id:"assembler_flags",children:(0,i.jsx)(s.code,{children:"assembler_flags"})}),(0,i.jsxs)(d.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,i.jsxs)(s.p,{children:["Extra flags to pass to the Go assembler (i.e., ",(0,i.jsx)(s.code,{children:"go tool asm"}),") when assembling Go-format assembly code."]}),(0,i.jsx)(s.p,{children:"Note: These flags will not be added to gcc/clang-format assembly that is assembled in packages using Cgo."}),(0,i.jsx)(s.p,{children:"This field can be specified on several different target types:"}),(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["On ",(0,i.jsx)(s.code,{children:"go_mod"})," targets, the assembler flags are used when building any package involving the module including both first-party (i.e., ",(0,i.jsx)(s.code,{children:"go_package"})," targets) and third-party dependencies."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["On ",(0,i.jsx)(s.code,{children:"go_binary"})," targets, the assembler flags are used when building any packages comprising that binary including third-party dependencies. These assembler flags will be added after any assembler flags added by any ",(0,i.jsx)(s.code,{children:"assembler_flags"})," field set on the applicable ",(0,i.jsx)(s.code,{children:"go_mod"})," target."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["On ",(0,i.jsx)(s.code,{children:"go_package"})," targets, the assembler flags are used only for building that specific package and not for any other package. These assembler flags will be added after any assembler flags added by any ",(0,i.jsx)(s.code,{children:"assembler_flags"})," field set on the applicable ",(0,i.jsx)(s.code,{children:"go_mod"})," target or applicable ",(0,i.jsx)(s.code,{children:"go_binary"})," target."]}),"\n"]}),"\n"]}),(0,i.jsxs)(s.p,{children:["Run ",(0,i.jsx)(s.code,{children:"go doc cmd/asm"})," to see the flags supported by ",(0,i.jsx)(s.code,{children:"go tool asm"}),"."]})]}),(0,i.jsx)(s.h2,{id:"compiler_flags",children:(0,i.jsx)(s.code,{children:"compiler_flags"})}),(0,i.jsxs)(d.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,i.jsxs)(s.p,{children:["Extra flags to pass to the Go compiler (i.e., ",(0,i.jsx)(s.code,{children:"go tool compile"}),") when compiling Go code."]}),(0,i.jsx)(s.p,{children:"This field can be specified on several different target types:"}),(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["On ",(0,i.jsx)(s.code,{children:"go_mod"})," targets, the compiler flags are used when compiling any package involving the module including both first-party (i.e., ",(0,i.jsx)(s.code,{children:"go_package"})," targets) and third-party dependencies."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["On ",(0,i.jsx)(s.code,{children:"go_binary"})," targets, the compiler flags are used when compiling any packages comprising that binary including third-party dependencies. These compiler flags will be added after any compiler flags added by any ",(0,i.jsx)(s.code,{children:"compiler_flags"})," field set on the applicable ",(0,i.jsx)(s.code,{children:"go_mod"})," target."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["On ",(0,i.jsx)(s.code,{children:"go_package"})," targets, the compiler flags are used only for compiling that specific package and not for any other package. These compiler flags will be added after any compiler flags added by any ",(0,i.jsx)(s.code,{children:"compiler_flags"})," field set on the applicable ",(0,i.jsx)(s.code,{children:"go_mod"})," target or applicable ",(0,i.jsx)(s.code,{children:"go_binary"})," target."]}),"\n"]}),"\n"]}),(0,i.jsxs)(s.p,{children:["Run ",(0,i.jsx)(s.code,{children:"go doc cmd/compile"})," to see the flags supported by ",(0,i.jsx)(s.code,{children:"go tool compile"}),"."]})]}),(0,i.jsx)(s.h2,{id:"dependencies",children:(0,i.jsx)(s.code,{children:"dependencies"})}),(0,i.jsxs)(d.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,i.jsxs)(s.p,{children:["Addresses to other targets that this target depends on, e.g. ",(0,i.jsx)(s.code,{children:"['helloworld/subdir:lib', 'helloworld/main.py:lib', '3rdparty:reqs#django']"}),"."]}),(0,i.jsxs)(s.p,{children:["This augments any dependencies inferred by Pants, such as by analyzing your imports. Use ",(0,i.jsx)(s.code,{children:"pants dependencies"})," or ",(0,i.jsx)(s.code,{children:"pants peek"})," on this target to get the final result."]}),(0,i.jsxs)(s.p,{children:["See ",(0,i.jsx)(s.a,{href:"https://www.pantsbuild.org/v2.19/docs/targets",children:"https://www.pantsbuild.org/v2.19/docs/targets"})," for more about how addresses are formed, including for generated targets. You can also run ",(0,i.jsx)(s.code,{children:"pants list ::"})," to find all addresses in your project, or ",(0,i.jsx)(s.code,{children:"pants list dir"})," to find all addresses defined in that directory."]}),(0,i.jsxs)(s.p,{children:["If the target is in the same BUILD file, you can leave off the BUILD file path, e.g. ",(0,i.jsx)(s.code,{children:":tgt"})," instead of ",(0,i.jsx)(s.code,{children:"helloworld/subdir:tgt"}),". For generated first-party addresses, use ",(0,i.jsx)(s.code,{children:"./"})," for the file path, e.g. ",(0,i.jsx)(s.code,{children:"./main.py:tgt"}),"; for all other generated targets, use ",(0,i.jsx)(s.code,{children:":tgt#generated_name"}),"."]}),(0,i.jsxs)(s.p,{children:["You may exclude dependencies by prefixing with ",(0,i.jsx)(s.code,{children:"!"}),", e.g. ",(0,i.jsx)(s.code,{children:"['!helloworld/subdir:lib', '!./sibling.txt']"}),". Ignores are intended for false positives with dependency inference; otherwise, simply leave off the dependency from the BUILD file."]})]}),(0,i.jsx)(s.h2,{id:"description",children:(0,i.jsx)(s.code,{children:"description"})}),(0,i.jsxs)(d.A,{type_repr:"str | None",default_repr:"None",children:[(0,i.jsx)(s.p,{children:"A human-readable description of the target."}),(0,i.jsxs)(s.p,{children:["Use ",(0,i.jsx)(s.code,{children:"pants list --documented ::"})," to see all targets with descriptions."]})]}),(0,i.jsx)(s.h2,{id:"skip_go_vet",children:(0,i.jsx)(s.code,{children:"skip_go_vet"})}),(0,i.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.experimental.go.lint.vet",children:(0,i.jsxs)(s.p,{children:["If true, don't run ",(0,i.jsx)(s.code,{children:"go vet"})," on this target's code."]})}),(0,i.jsx)(s.h2,{id:"skip_gofmt",children:(0,i.jsx)(s.code,{children:"skip_gofmt"})}),(0,i.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.experimental.go",children:(0,i.jsx)(s.p,{children:"If true, don't run gofmt on this package."})}),(0,i.jsx)(s.h2,{id:"skip_golangci_lint",children:(0,i.jsx)(s.code,{children:"skip_golangci_lint"})}),(0,i.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.experimental.go.lint.golangci_lint",children:(0,i.jsxs)(s.p,{children:["If true, don't run ",(0,i.jsx)(s.code,{children:"golangci-lint"})," on this target's code."]})}),(0,i.jsx)(s.h2,{id:"skip_tests",children:(0,i.jsx)(s.code,{children:"skip_tests"})}),(0,i.jsx)(d.A,{type_repr:"bool",default_repr:"False",children:(0,i.jsx)(s.p,{children:"If true, don't run this package's tests."})}),(0,i.jsx)(s.h2,{id:"sources",children:(0,i.jsx)(s.code,{children:"sources"})}),(0,i.jsxs)(d.A,{type_repr:"Iterable[str] | None",default_repr:"('*.go',)",children:[(0,i.jsx)(s.p,{children:"A list of files and globs that belong to this target."}),(0,i.jsxs)(s.p,{children:["Paths are relative to the BUILD file's directory. You can ignore files/globs by prefixing them with ",(0,i.jsx)(s.code,{children:"!"}),"."]}),(0,i.jsxs)(s.p,{children:["Example: ",(0,i.jsx)(s.code,{children:"sources=['example.go', '*_test.go', '!test_ignore.go']"})]})]}),(0,i.jsx)(s.h2,{id:"tags",children:(0,i.jsx)(s.code,{children:"tags"})}),(0,i.jsxs)(d.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,i.jsx)(s.p,{children:"Arbitrary strings to describe a target."}),(0,i.jsxs)(s.p,{children:["For example, you may tag some test targets with 'integration_test' so that you could run ",(0,i.jsx)(s.code,{children:"pants --tag='integration_test' test ::"})," to only run on targets with that tag."]})]}),(0,i.jsx)(s.h2,{id:"test_asan",children:(0,i.jsx)(s.code,{children:"test_asan"})}),(0,i.jsxs)(d.A,{type_repr:"bool | None",default_repr:"None",children:[(0,i.jsx)(s.p,{children:'Enable interoperation between Go code and the C/C++ "address sanitizer" when building this package\'s test binary.'}),(0,i.jsxs)(s.p,{children:["See ",(0,i.jsx)(s.a,{href:"https://github.com/google/sanitizers/wiki/AddressSanitizer",children:"https://github.com/google/sanitizers/wiki/AddressSanitizer"})," for additional information about the C/C++ address sanitizer."]})]}),(0,i.jsx)(s.h2,{id:"test_extra_env_vars",children:(0,i.jsx)(s.code,{children:"test_extra_env_vars"})}),(0,i.jsxs)(d.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,i.jsx)(s.p,{children:"Additional environment variables to include in test processes."}),(0,i.jsxs)(s.p,{children:["Entries are strings in the form ",(0,i.jsx)(s.code,{children:"ENV_VAR=value"})," to use explicitly; or just ",(0,i.jsx)(s.code,{children:"ENV_VAR"})," to copy the value of a variable in Pants's own environment."]}),(0,i.jsxs)(s.p,{children:["This will be merged with and override values from ",(0,i.jsx)(s.code,{children:"[test].extra_env_vars"}),"."]})]}),(0,i.jsx)(s.h2,{id:"test_msan",children:(0,i.jsx)(s.code,{children:"test_msan"})}),(0,i.jsxs)(d.A,{type_repr:"bool | None",default_repr:"None",children:[(0,i.jsx)(s.p,{children:'Enable interoperation between Go code and the C/C++ "memory sanitizer" when building this package\'s test binary.'}),(0,i.jsxs)(s.p,{children:["See ",(0,i.jsx)(s.a,{href:"https://github.com/google/sanitizers/wiki/MemorySanitizer",children:"https://github.com/google/sanitizers/wiki/MemorySanitizer"})," for additional information about the C/C++ memory sanitizer."]})]}),(0,i.jsx)(s.h2,{id:"test_race",children:(0,i.jsx)(s.code,{children:"test_race"})}),(0,i.jsxs)(d.A,{type_repr:"bool | None",default_repr:"None",children:[(0,i.jsx)(s.p,{children:"Enable compiling this package's test binary with the Go data race detector."}),(0,i.jsxs)(s.p,{children:["See ",(0,i.jsx)(s.a,{href:"https://go.dev/doc/articles/race_detector",children:"https://go.dev/doc/articles/race_detector"})," for additional information about the Go data race detector."]})]}),(0,i.jsx)(s.h2,{id:"test_timeout",children:(0,i.jsx)(s.code,{children:"test_timeout"})}),(0,i.jsxs)(d.A,{type_repr:"int | None",default_repr:"None",children:[(0,i.jsx)(s.p,{children:"A timeout (in seconds) used by each test file belonging to this target."}),(0,i.jsxs)(s.p,{children:["If unset, will default to ",(0,i.jsx)(s.code,{children:"[test].timeout_default"}),"; if that option is also unset, then the test will never time out. Will never exceed ",(0,i.jsx)(s.code,{children:"[test].timeout_maximum"}),". Only applies if the option ",(0,i.jsx)(s.code,{children:"--test-timeouts"})," is set to true (the default)."]})]})]})]})}function g(e={}){let{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},375002(e,s,t){t.d(s,{A:()=>r});let r={options:"options_nrbo"}},989898(e,s,t){t.d(s,{A:()=>i});var r=t(886070);function i({children:e,type_repr:s,default_repr:t,backend:i}){return(0,r.jsxs)("div",{className:"margin-bottom--lg",children:[(0,r.jsx)("code",{style:{color:"var(--pants-reference-option-repr)"},children:s}),(0,r.jsx)("br",{}),(0,r.jsxs)("div",{style:{paddingLeft:"2em"},children:[t&&(0,r.jsxs)("span",{children:["default:"," ",(0,r.jsx)("code",{style:{color:"var(--ifm-color-success)"},children:t})]}),!t&&(0,r.jsx)("span",{style:{color:"var(--ifm-color-success)"},children:"required"}),i&&(0,r.jsxs)("div",{children:["backend:"," ",(0,r.jsx)("code",{style:{color:"var(--ifm-color-success)"},children:i})]}),e]})]})}},848193(e,s,t){t.d(s,{R:()=>d,x:()=>o});var r=t(830758);let i={},n=r.createContext(i);function d(e){let s=r.useContext(n);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),r.createElement(n.Provider,{value:s},e.children)}},254901(e){e.exports=JSON.parse('{"id":"reference/targets/go_package","title":"go_package","description":"A first-party Go package (corresponding to a directory with `.go` files).\\n","source":"@site/versioned_docs/version-2.19/reference/targets/go_package.mdx","sourceDirName":"reference/targets","slug":"/reference/targets/go_package","permalink":"/2.19/reference/targets/go_package","draft":false,"unlisted":false,"tags":[],"version":"2.19","frontMatter":{"title":"go_package","description":"A first-party Go package (corresponding to a directory with `.go` files).\\n"},"sidebar":"referenceSidebar","previous":{"title":"go_mod","permalink":"/2.19/reference/targets/go_mod"},"next":{"title":"go_third_party_package","permalink":"/2.19/reference/targets/go_third_party_package"}}')}}]);