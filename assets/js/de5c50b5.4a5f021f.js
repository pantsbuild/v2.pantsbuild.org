"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["565039"],{405513(e,s,t){t.r(s),t.d(s,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>d,metadata:()=>n,toc:()=>h});var n=t(555985),l=t(886070),i=t(848193),r=t(685008),o=t(637180);let d={title:"Options and subsystems",sidebar_position:2},c,a={},h=[{value:"<code>register()</code> parameters",id:"register-parameters",level:2},{value:"Flag name",id:"flag-name",level:3},{value:"<code>metavar</code>",id:"metavar",level:3},{value:"<code>default</code>",id:"default",level:3},{value:"<code>type</code>",id:"type",level:3},{value:"<code>passthrough</code>",id:"passthrough",level:3},{value:"<code>advanced</code>",id:"advanced",level:3},{value:"<code>help</code>",id:"help",level:3},{value:"Using options in rules",id:"using-options-in-rules",level:2}];function p(e){let s={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.p,{children:"How to add options to your plugin."}),"\n",(0,l.jsx)(s.hr,{}),"\n",(0,l.jsxs)(s.p,{children:["As explained in ",(0,l.jsx)(s.a,{href:"/2.9/docs/using-pants/key-concepts/options",children:"Options"}),", options are partitioned into named scopes, like ",(0,l.jsx)(s.code,{children:"[test]"})," and ",(0,l.jsx)(s.code,{children:"[isort]"}),". Each of these scopes corresponds to a ",(0,l.jsx)(s.em,{children:"subsystem"}),"."]}),"\n",(0,l.jsx)(s.p,{children:"To add new options:"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["Define a subclass of ",(0,l.jsx)(s.code,{children:"Subsystem"})," from ",(0,l.jsx)(s.code,{children:"pants.subsystem.subsystem"}),".","\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["Set the class property ",(0,l.jsx)(s.code,{children:"options_scope"})," with the name of the subsystem.","\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["This value will be prepended to all options in the subsystem, e.g. ",(0,l.jsx)(s.code,{children:"--skip"})," will become ",(0,l.jsx)(s.code,{children:"--shellcheck-skip"}),"."]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["Set the class property ",(0,l.jsx)(s.code,{children:"help"}),", which is used by ",(0,l.jsx)(s.code,{children:"./pants help"}),"."]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["Add new options through the class method ",(0,l.jsx)(s.code,{children:"register_options()"}),"."]}),"\n",(0,l.jsxs)(s.li,{children:["Register the ",(0,l.jsx)(s.code,{children:"Subsystem"})," with ",(0,l.jsx)(s.code,{children:"SubsystemRule"})," and ",(0,l.jsx)(s.code,{children:"register.py"}),".","\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["You don't need this if the ",(0,l.jsx)(s.code,{children:"Subsystem"})," is used in an ",(0,l.jsx)(s.code,{children:"@rule"})," because ",(0,l.jsx)(s.code,{children:"collect_rules()"})," will recognize it. It doesn't hurt to keep this around, though."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(r.A,{groupId:"code-examples",children:[(0,l.jsx)(o.A,{value:"pants-plugins/example/shellcheck.py",label:"pants-plugins/example/shellcheck.py",children:(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-python",metastring:'tab={"label":"pants-plugins/example/shellcheck.py"}',children:'from pants.engine.rules import SubsystemRule\nfrom pants.option.subsystem import Subsystem\n\n\nclass ShellcheckSubsystem(Subsystem):\n    options_scope = "shellcheck"\n    help = "The Shellcheck linter."\n\n    @classmethod\n    def register_options(cls, register):\n        super().register_options(register)\n        register(\n            "--skip",\n            type=bool,\n            default=False,\n            help="Don\'t use Shellcheck when running `./pants lint`."\n        )\n\n\ndef rules():\n    return [SubsystemRule(ShellcheckSubsystem)]\n'})})}),(0,l.jsx)(o.A,{value:"pants-plugins/example/register.py",label:"pants-plugins/example/register.py",children:(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-python",metastring:'tab={"label":"pants-plugins/example/register.py"}',children:"from example import shellcheck\n\ndef rules():\n    return [*shellcheck.rules()]\n"})})})]}),"\n",(0,l.jsxs)(s.p,{children:["The subsystem should now show up when you run ",(0,l.jsx)(s.code,{children:"./pants help shellcheck"}),"."]}),"\n",(0,l.jsxs)(s.admonition,{type:"note",children:[(0,l.jsx)(s.mdxAdmonitionTitle,{children:(0,l.jsx)(s.code,{children:"GoalSubsystem"})}),(0,l.jsxs)(s.p,{children:["As explained in ",(0,l.jsx)(s.a,{href:"/2.9/docs/writing-plugins/the-rules-api/goal-rules",children:"Goal rules"}),", goals use a subclass of ",(0,l.jsx)(s.code,{children:"Subsystem"}),": ",(0,l.jsx)(s.code,{children:"GoalSubsystem"})," from ",(0,l.jsx)(s.code,{children:"pants.engine.goal"}),"."]}),(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"GoalSubsystem"})," behaves the same way as a normal subsystem, except that you set the class property ",(0,l.jsx)(s.code,{children:"name"})," rather than ",(0,l.jsx)(s.code,{children:"options_scope"}),". The ",(0,l.jsx)(s.code,{children:"name"})," will auto-populate the ",(0,l.jsx)(s.code,{children:"options_scope"}),"."]})]}),"\n",(0,l.jsxs)(s.h2,{id:"register-parameters",children:[(0,l.jsx)(s.code,{children:"register()"})," parameters"]}),"\n",(0,l.jsx)(s.h3,{id:"flag-name",children:"Flag name"}),"\n",(0,l.jsxs)(s.p,{children:["The first argument to ",(0,l.jsx)(s.code,{children:"register()"})," should be a string with the option name, like, ",(0,l.jsx)(s.code,{children:"--example-option"}),"."]}),"\n",(0,l.jsxs)(s.p,{children:["When users use a command-line flag, the option will get prefixed with the ",(0,l.jsx)(s.code,{children:"options_scope"}),", e.g. ",(0,l.jsx)(s.code,{children:"--shellcheck-skip"}),". With config files, every ",(0,l.jsx)(s.code,{children:"-"})," will be replaced by ",(0,l.jsx)(s.code,{children:"_"}),", e.g. ",(0,l.jsx)(s.code,{children:"example_option"}),"."]}),"\n",(0,l.jsxs)(s.p,{children:["You may also specify a short flag, like ",(0,l.jsx)(s.code,{children:"-e"}),". You may pass multiple values, so you may pass ",(0,l.jsx)(s.code,{children:"-e, --example-option"}),"."]}),"\n",(0,l.jsx)(s.h3,{id:"metavar",children:(0,l.jsx)(s.code,{children:"metavar"})}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"metavar"})," changes what users see in ",(0,l.jsx)(s.code,{children:"./pants help"})," as possible values for the flag. If unspecified, Pants will use a ",(0,l.jsx)(s.code,{children:"metavar"})," based on the ",(0,l.jsx)(s.code,{children:"type"})," you specify."]}),"\n",(0,l.jsx)(s.h3,{id:"default",children:(0,l.jsx)(s.code,{children:"default"})}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"default"})," will be used if the user does not specify the value."]}),"\n",(0,l.jsxs)(s.p,{children:["If you leave this off, the ",(0,l.jsx)(s.code,{children:"default"})," will depend on the ",(0,l.jsx)(s.code,{children:"type"})," you specify."]}),"\n",(0,l.jsx)(s.h3,{id:"type",children:(0,l.jsx)(s.code,{children:"type"})}),"\n",(0,l.jsxs)(s.p,{children:["Refer to ",(0,l.jsx)(s.a,{href:"/2.9/docs/using-pants/key-concepts/options#option-types",children:"Options"})," for how a user specifies these different types."]}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"type"})}),(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Default (if not overridden)"}),(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Other notes"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"str"})}),(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"None"})}),(0,l.jsx)(s.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"int"})}),(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"None"})}),(0,l.jsxs)(s.td,{style:{textAlign:"left"},children:["Will error if a user passes a ",(0,l.jsx)(s.code,{children:"float"}),"."]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"float"})}),(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"None"})}),(0,l.jsxs)(s.td,{style:{textAlign:"left"},children:["Will convert an ",(0,l.jsx)(s.code,{children:"int"})," into a ",(0,l.jsx)(s.code,{children:"float"}),"."]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"bool"})}),(0,l.jsxs)(s.td,{style:{textAlign:"left"},children:[(0,l.jsx)(s.code,{children:"False"})," ",(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),"Set ",(0,l.jsx)(s.code,{children:"default=UnsetBool"})," from ",(0,l.jsx)(s.code,{children:"pants.option.custom_types"})," to represent a trinary state. If the user does not specify a value, the option will return ",(0,l.jsx)(s.code,{children:"None"}),"."]}),(0,l.jsx)(s.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{style:{textAlign:"left"},children:"Enums"}),(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"None"})}),(0,l.jsxs)(s.td,{style:{textAlign:"left"},children:["Create an ",(0,l.jsx)(s.code,{children:"enum.Enum"}),", with the value for each member as a string.",(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),"See below for an example."]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"list"})}),(0,l.jsxs)(s.td,{style:{textAlign:"left"},children:[(0,l.jsx)(s.code,{children:"[]"})," (empty list)"]}),(0,l.jsxs)(s.td,{style:{textAlign:"left"},children:["You must also set ",(0,l.jsx)(s.code,{children:"member_type"})," to one of ",(0,l.jsx)(s.code,{children:"str"}),", ",(0,l.jsx)(s.code,{children:"int"}),", ",(0,l.jsx)(s.code,{children:"float"}),", ",(0,l.jsx)(s.code,{children:"dict"}),", ",(0,l.jsx)(s.code,{children:"dir_option"}),", ",(0,l.jsx)(s.code,{children:"file_option"}),", ",(0,l.jsx)(s.code,{children:"target_option"}),", ",(0,l.jsx)(s.code,{children:"shell_str"}),", or an ",(0,l.jsx)(s.code,{children:"Enum"}),"."]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"dict"})}),(0,l.jsxs)(s.td,{style:{textAlign:"left"},children:[(0,l.jsx)(s.code,{children:"{}"})," (empty dictionary)"]}),(0,l.jsx)(s.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"shell_str"})}),(0,l.jsxs)(s.td,{style:{textAlign:"left"},children:[(0,l.jsx)(s.code,{children:"[]"})," (empty list)"]}),(0,l.jsxs)(s.td,{style:{textAlign:"left"},children:["You must set ",(0,l.jsx)(s.code,{children:"type=list"})," and ",(0,l.jsx)(s.code,{children:"member_type=shell_str"}),".",(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),"Pants will ",(0,l.jsx)(s.a,{href:"https://docs.python.org/3/library/shlex.html",children:'"shlex"'})," the string passed by the user, i.e. to split on each space.",(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),"For example, ",(0,l.jsx)(s.code,{children:"./pants --docformatter-args='--wrap-summaries 100 --wrap-descriptions 100'"})," will get converted into ",(0,l.jsx)(s.code,{children:'["--wrap_summaries", "100", "--wrap-descriptions", "100"]'}),".",(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),"The type is from ",(0,l.jsx)(s.code,{children:"pants.option.custom_types"}),"."]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"target_option"})}),(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"None"})}),(0,l.jsxs)(s.td,{style:{textAlign:"left"},children:["This behaves like ",(0,l.jsx)(s.code,{children:"str"}),", but changes the ",(0,l.jsx)(s.code,{children:"metavar"})," so that ",(0,l.jsx)(s.code,{children:"./pants help"})," is more useful.",(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),"The type is from ",(0,l.jsx)(s.code,{children:"pants.option.custom_types"}),"."]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"file_option"})}),(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"None"})}),(0,l.jsxs)(s.td,{style:{textAlign:"left"},children:["This behaves like ",(0,l.jsx)(s.code,{children:"str"}),", but changes the ",(0,l.jsx)(s.code,{children:"metavar"})," so that ",(0,l.jsx)(s.code,{children:"./pants help"})," is more useful. It will also validate that the file exists.",(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),"The type is from ",(0,l.jsx)(s.code,{children:"pants.option.custom_types"}),"."]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"dir_option"})}),(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"None"})}),(0,l.jsxs)(s.td,{style:{textAlign:"left"},children:["This behaves like ",(0,l.jsx)(s.code,{children:"str"}),", but changes the ",(0,l.jsx)(s.code,{children:"metavar"})," so that ",(0,l.jsx)(s.code,{children:"./pants help"})," is more useful. It will also validate that the directory exists.",(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),"The type is from ",(0,l.jsx)(s.code,{children:"pants.option.custom_types"}),"."]})]})]})]}),"\n",(0,l.jsxs)(s.p,{children:["An example of an ",(0,l.jsx)(s.code,{children:"Enum"}),":"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-python",children:'from enum import Enum\n\nclass LeafyGreens(Enum):\n    KALE = "kale"\n    SPINACH = "spinach"\n\nregister(\n    "--vegetable",\n    type=LeafyGreens,\n    default=LeafyGreens.KALE,\n    help="Which veggie Pants should use.",\n)\n'})}),"\n",(0,l.jsx)(s.h3,{id:"passthrough",children:(0,l.jsx)(s.code,{children:"passthrough"})}),"\n",(0,l.jsxs)(s.p,{children:["Set ",(0,l.jsx)(s.code,{children:"passthrough=True"})," if the option should work with the ",(0,l.jsx)(s.code,{children:"-- <args>"})," syntax, e.g. ",(0,l.jsx)(s.code,{children:"./pants test app.py -- -v -k demo"}),"."]}),"\n",(0,l.jsx)(s.h3,{id:"advanced",children:(0,l.jsx)(s.code,{children:"advanced"})}),"\n",(0,l.jsxs)(s.p,{children:["If you set ",(0,l.jsx)(s.code,{children:"advanced=True"}),", the option will only show up in ",(0,l.jsx)(s.code,{children:"help-advanced"}),", and not ",(0,l.jsx)(s.code,{children:"help"}),"."]}),"\n",(0,l.jsx)(s.p,{children:"You should generally set this value if the option will primarily be used by codebase administrators, such as setting up a config file."}),"\n",(0,l.jsx)(s.h3,{id:"help",children:(0,l.jsx)(s.code,{children:"help"})}),"\n",(0,l.jsxs)(s.p,{children:["This help message will show up when running ",(0,l.jsx)(s.code,{children:"./pants help"})," and ",(0,l.jsx)(s.code,{children:"./pants help-advanced"}),"."]}),"\n",(0,l.jsx)(s.h2,{id:"using-options-in-rules",children:"Using options in rules"}),"\n",(0,l.jsxs)(s.p,{children:["To use a ",(0,l.jsx)(s.code,{children:"Subsystem"})," or ",(0,l.jsx)(s.code,{children:"GoalSubsystem"})," in your rule, request it as a parameter. Then, use the property ",(0,l.jsx)(s.code,{children:".options"}),", followed by the name of the option. Replace any ",(0,l.jsx)(s.code,{children:"-"})," with ",(0,l.jsx)(s.code,{children:"_"}),", e.g. ",(0,l.jsx)(s.code,{children:"--my-option"})," becomes ",(0,l.jsx)(s.code,{children:"my_option"}),"."]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-python",children:"from pants.engine.rules import rule\n...\n\n@rule\nasync def demo(shellcheck: Shellcheck) -> LintResults:\n    if shellcheck.options.skip:\n        return LintResults()\n    extra_args = shellcheck.options.args\n    ...\n"})}),"\n",(0,l.jsxs)(s.admonition,{title:"Tip: teach MyPy about your subsystem",type:"note",children:[(0,l.jsxs)(s.p,{children:["MyPy does not understand the property ",(0,l.jsx)(s.code,{children:".options"}),"."]}),(0,l.jsxs)(s.p,{children:["Instead, you can create a ",(0,l.jsx)(s.code,{children:"@property"})," for each option and use ",(0,l.jsx)(s.code,{children:"typing.cast()"})," to teach MyPy what each value is."]}),(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-python",children:'from typing import cast\n\nclass Shellcheck(Subsystem):\n    options_scope = "shellcheck"\n    help = "The Shellcheck linter."\n\n    @classmethod\n    def register_options(cls, register):\n        super().register_options(register)\n        register(\n            "--skip",\n            type=bool,\n            default=False,\n            help="Don\'t use Shellcheck when running `./pants lint`.\n        )\n\n    @property\n    def skip(self) -> bool:\n        return cast(bool, self.options.skip)\n'})}),(0,l.jsx)(s.p,{children:"This is optional. It can make your call sites simpler and safer thanks to MyPy, but it requires some boilerplate."})]})]})}function u(e={}){let{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(p,{...e})}):p(e)}},753348(e,s,t){t.d(s,{A:()=>n});let n={tabItem:"tabItem_mHvh"}},618264(e,s,t){t.d(s,{A:()=>n});let n={tabList:"tabList_sFbf",tabItem:"tabItem_UVfV"}},637180(e,s,t){t.d(s,{A:()=>r});var n=t(886070);t(830758);var l=t(313526),i=t(753348);function r({children:e,hidden:s,className:t}){return(0,n.jsx)("div",{role:"tabpanel",className:(0,l.A)(i.A.tabItem,t),hidden:s,children:e})}},685008(e,s,t){t.d(s,{A:()=>x});var n=t(886070),l=t(830758),i=t(313526),r=t(911212),o=t(274875),d=t(106632),c=t(189223),a=t(618264);function h({className:e,block:s,selectedValue:t,selectValue:l,tabValues:r}){let d=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.a_)(),h=e=>{let s=e.currentTarget,n=r[d.indexOf(s)].value;n!==t&&(c(s),l(n))},p=e=>{let s=null;switch(e.key){case"Enter":h(e);break;case"ArrowRight":{let t=d.indexOf(e.currentTarget)+1;s=d[t]??d[0];break}case"ArrowLeft":{let t=d.indexOf(e.currentTarget)-1;s=d[t]??d[d.length-1]}}s?.focus()};return(0,n.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":s},e),children:r.map(({value:e,label:s,attributes:l})=>(0,n.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{d.push(e)},onKeyDown:p,onClick:h,...l,className:(0,i.A)("tabs__item",a.A.tabItem,l?.className,{"tabs__item--active":t===e}),children:s??e},e))})}function p({lazy:e,children:s,selectedValue:t}){let r=(Array.isArray(s)?s:[s]).filter(Boolean);if(e){let e=r.find(e=>e.props.value===t);return e?(0,l.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,n.jsx)("div",{className:"margin-top--md",children:r.map((e,s)=>(0,l.cloneElement)(e,{key:s,hidden:e.props.value!==t}))})}function u(e){let s=(0,d.u)(e);return(0,n.jsxs)("div",{className:(0,i.A)(r.G.tabs.container,"tabs-container",a.A.tabList),children:[(0,n.jsx)(h,{...s,...e}),(0,n.jsx)(p,{...s,...e})]})}function x(e){let s=(0,c.A)();return(0,n.jsx)(u,{...e,children:(0,d.v)(e.children)},String(s))}},106632(e,s,t){t.d(s,{u:()=>h,v:()=>c});var n=t(830758),l=t(325557),i=t(363717),r=t(125740),o=t(574229),d=t(270367);function c(e){return n.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,n.isValidElement)(e)&&function(e){let{props:s}=e;return!!s&&"object"==typeof s&&"value"in s}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function a({value:e,tabValues:s}){return s.some(s=>s.value===e)}function h(e){let s,{defaultValue:t,queryString:h=!1,groupId:p}=e,u=function(e){let{values:s,children:t}=e;return(0,n.useMemo)(()=>{let e=s??c(t).map(({props:{value:e,label:s,attributes:t,default:n}})=>({value:e,label:s,attributes:t,default:n})),n=(0,o.XI)(e,(e,s)=>e.value===s.value);if(n.length>0)throw Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return e},[s,t])}(e),[x,j]=(0,n.useState)(()=>(function({defaultValue:e,tabValues:s}){if(0===s.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!a({value:e,tabValues:s}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${s.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}let t=s.find(e=>e.default)??s[0];if(!t)throw Error("Unexpected error: 0 tabValues");return t.value})({defaultValue:t,tabValues:u})),[m,f]=function({queryString:e=!1,groupId:s}){let t=(0,l.W6)(),i=function({queryString:e=!1,groupId:s}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!s)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return s??null}({queryString:e,groupId:s});return[(0,r.aZ)(i),(0,n.useCallback)(e=>{if(!i)return;let s=new URLSearchParams(t.location.search);s.set(i,e),t.replace({...t.location,search:s.toString()})},[i,t])]}({queryString:h,groupId:p}),[y,g]=function({groupId:e}){let s=e?`docusaurus.tab.${e}`:null,[t,l]=(0,d.Dv)(s);return[t,(0,n.useCallback)(e=>{s&&l.set(e)},[s,l])]}({groupId:p}),b=a({value:s=m??y,tabValues:u})?s:null;return(0,i.A)(()=>{b&&j(b)},[b]),{selectedValue:x,selectValue:(0,n.useCallback)(e=>{if(!a({value:e,tabValues:u}))throw Error(`Can't select invalid tab value=${e}`);j(e),f(e),g(e)},[f,g,u]),tabValues:u}}},848193(e,s,t){t.d(s,{R:()=>r,x:()=>o});var n=t(830758);let l={},i=n.createContext(l);function r(e){let s=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),n.createElement(i.Provider,{value:s},e.children)}},555985(e){e.exports=JSON.parse('{"id":"docs/writing-plugins/the-rules-api/options-and-subsystems","title":"Options and subsystems","description":"How to add options to your plugin.","source":"@site/versioned_docs/version-2.9/docs/writing-plugins/the-rules-api/options-and-subsystems.mdx","sourceDirName":"docs/writing-plugins/the-rules-api","slug":"/docs/writing-plugins/the-rules-api/options-and-subsystems","permalink":"/2.9/docs/writing-plugins/the-rules-api/options-and-subsystems","draft":false,"unlisted":false,"editUrl":"https://github.com/pantsbuild/pants/edit/main/docs/docs/writing-plugins/the-rules-api/options-and-subsystems.mdx","tags":[],"version":"2.9","sidebarPosition":2,"frontMatter":{"title":"Options and subsystems","sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Goal rules","permalink":"/2.9/docs/writing-plugins/the-rules-api/goal-rules"},"next":{"title":"File system","permalink":"/2.9/docs/writing-plugins/the-rules-api/file-system"}}')}}]);