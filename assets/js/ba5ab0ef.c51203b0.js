"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["828662"],{362701(e,n,i){i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>c,frontMatter:()=>o,metadata:()=>t,toc:()=>a});var t=i(520911),s=i(886070),d=i(848193);let o={title:"Logging and dynamic output",sidebar_position:8},l,r={},a=[{value:"Adding logging",id:"adding-logging",level:2},{value:"Changing the dynamic UI",id:"changing-the-dynamic-ui",level:2},{value:"Streaming results (advanced)",id:"streaming-results-advanced",level:2}];function g(e){let n={a:"a",code:"code",h2:"h2",hr:"hr",p:"p",pre:"pre",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"How to add logging and influence the dynamic UI."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:["Even though a ",(0,s.jsx)(n.a,{href:"/2.23/docs/writing-plugins/the-rules-api/goal-rules",children:(0,s.jsx)(n.code,{children:"@goal_rule"})})," is the only type of rule that can print to ",(0,s.jsx)(n.code,{children:"stdout"})," (via the special ",(0,s.jsx)(n.code,{children:"Console"})," type), any rule can log to stderr and change how the rule appears in the dynamic UI."]}),"\n",(0,s.jsx)(n.h2,{id:"adding-logging",children:"Adding logging"}),"\n",(0,s.jsxs)(n.p,{children:["To add logging, use the ",(0,s.jsxs)(n.a,{href:"https://docs.python.org/3/library/logging.html",children:[(0,s.jsx)(n.code,{children:"logging"})," standard library module"]}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import logging\n\nlogger = logging.getLogger(__name__)\n\n@rule\ndef demo(...) -> Foo:\n    logger.info("Inside the demo rule.")\n    ...\n'})}),"\n",(0,s.jsxs)(n.p,{children:["You can use ",(0,s.jsx)(n.code,{children:"logger.info"}),", ",(0,s.jsx)(n.code,{children:"logger.warning"}),", ",(0,s.jsx)(n.code,{children:"logger.error"}),", ",(0,s.jsx)(n.code,{children:"logger.debug"}),", and ",(0,s.jsx)(n.code,{children:"logger.trace"}),". You can then change your log level by setting the ",(0,s.jsx)(n.code,{children:"-l"}),"/",(0,s.jsx)(n.code,{children:"--level"})," option, e.g. ",(0,s.jsx)(n.code,{children:"pants -ldebug my-goal"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"changing-the-dynamic-ui",children:"Changing the dynamic UI"}),"\n",(0,s.jsx)(n.h2,{id:"streaming-results-advanced",children:"Streaming results (advanced)"}),"\n",(0,s.jsxs)(n.p,{children:["When you run ",(0,s.jsx)(n.code,{children:"pants fmt"}),", ",(0,s.jsx)(n.code,{children:"pants lint"}),", and ",(0,s.jsx)(n.code,{children:"pants test"}),', you may notice that we "stream" the results. As soon as an individual process finishes, we print the result, rather than waiting for all the processes to finish and dumping at the end.']}),"\n",(0,s.jsxs)(n.p,{children:["We also set the log level dynamically. If something succeeds, we log the result at ",(0,s.jsx)(n.code,{children:"INFO"}),", but if something fails, we use ",(0,s.jsx)(n.code,{children:"WARN"}),"."]})]})}function c(e={}){let{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(g,{...e})}):g(e)}},848193(e,n,i){i.d(n,{R:()=>o,x:()=>l});var t=i(830758);let s={},d=t.createContext(s);function o(e){let n=t.useContext(d);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(d.Provider,{value:n},e.children)}},520911(e){e.exports=JSON.parse('{"id":"docs/writing-plugins/the-rules-api/logging-and-dynamic-output","title":"Logging and dynamic output","description":"How to add logging and influence the dynamic UI.","source":"@site/versioned_docs/version-2.23/docs/writing-plugins/the-rules-api/logging-and-dynamic-output.mdx","sourceDirName":"docs/writing-plugins/the-rules-api","slug":"/docs/writing-plugins/the-rules-api/logging-and-dynamic-output","permalink":"/2.23/docs/writing-plugins/the-rules-api/logging-and-dynamic-output","draft":false,"unlisted":false,"editUrl":"https://github.com/pantsbuild/pants/edit/main/docs/docs/writing-plugins/the-rules-api/logging-and-dynamic-output.mdx","tags":[],"version":"2.23","sidebarPosition":8,"frontMatter":{"title":"Logging and dynamic output","sidebar_position":8},"sidebar":"docsSidebar","previous":{"title":"Union rules (advanced)","permalink":"/2.23/docs/writing-plugins/the-rules-api/union-rules-advanced"},"next":{"title":"Testing plugins","permalink":"/2.23/docs/writing-plugins/the-rules-api/testing-plugins"}}')}}]);