"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["939828"],{658053(e,n,s){s.r(n),s.d(n,{assets:()=>p,contentTitle:()=>c,default:()=>_,frontMatter:()=>l,metadata:()=>r,toc:()=>a});var r=s(759853),i=s(886070),t=s(848193),o=s(554707),d=s(375002);let l={title:"python-infer",description:"Options controlling which dependencies will be inferred for Python targets.\n"},c,p={},a=[{value:"Basic options",id:"basic-options",level:2},{value:"<code>conftests</code>",id:"conftests",level:3},{value:"<code>entry_points</code>",id:"entry_points",level:3},{value:"<code>imports</code>",id:"imports",level:3},{value:"<code>inits</code>",id:"inits",level:3},{value:"<code>string_imports</code>",id:"string_imports",level:3},{value:"<code>string_imports_min_dots</code>",id:"string_imports_min_dots",level:3},{value:"<code>unowned_dependency_behavior</code>",id:"unowned_dependency_behavior",level:3},{value:"Advanced options",id:"advanced-options",level:2},{value:"Deprecated options",id:"deprecated-options",level:2},{value:"Related subsystems",id:"related-subsystems",level:2}];function h(e){let n={code:"code",h2:"h2",h3:"h3",hr:"hr",p:"p",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"Options controlling which dependencies will be inferred for Python targets."}),"\n",(0,i.jsxs)(n.p,{children:["Backend: ",(0,i.jsx)("span",{className:"color--primary",children:(0,i.jsx)(n.code,{children:"pants.backend.python"})})]}),"\n",(0,i.jsxs)(n.p,{children:["Config section: ",(0,i.jsx)("span",{className:"color--primary",children:(0,i.jsx)(n.code,{children:"[python-infer]"})})]}),"\n",(0,i.jsxs)("span",{className:d.A.options,children:[(0,i.jsx)(n.h2,{id:"basic-options",children:"Basic options"}),(0,i.jsx)(n.h3,{id:"conftests",children:(0,i.jsx)(n.code,{children:"conftests"})}),(0,i.jsx)(o.A,{cli_repr:"--[no-]python-infer-conftests",env_repr:"PANTS_PYTHON_INFER_CONFTESTS",toml_repr:`[python-infer]
conftests = <bool>`,default_repr:"True",children:(0,i.jsx)(n.p,{children:"Infer a test target's dependencies on any conftest.py files in the current directory and ancestor directories."})}),(0,i.jsx)(n.h3,{id:"entry_points",children:(0,i.jsx)(n.code,{children:"entry_points"})}),(0,i.jsx)(o.A,{cli_repr:"--[no-]python-infer-entry-points",env_repr:"PANTS_PYTHON_INFER_ENTRY_POINTS",toml_repr:`[python-infer]
entry_points = <bool>`,default_repr:"True",children:(0,i.jsxs)(n.p,{children:["Infer dependencies on targets' entry points, e.g. ",(0,i.jsx)(n.code,{children:"pex_binary"}),"'s ",(0,i.jsx)(n.code,{children:"entry_point"})," field, ",(0,i.jsx)(n.code,{children:"python_awslambda"}),"'s ",(0,i.jsx)(n.code,{children:"handler"})," field and ",(0,i.jsx)(n.code,{children:"python_distribution"}),"'s ",(0,i.jsx)(n.code,{children:"entry_points"})," field."]})}),(0,i.jsx)(n.h3,{id:"imports",children:(0,i.jsx)(n.code,{children:"imports"})}),(0,i.jsx)(o.A,{cli_repr:"--[no-]python-infer-imports",env_repr:"PANTS_PYTHON_INFER_IMPORTS",toml_repr:`[python-infer]
imports = <bool>`,default_repr:"True",children:(0,i.jsx)(n.p,{children:"Infer a target's imported dependencies by parsing import statements from sources."})}),(0,i.jsx)(n.h3,{id:"inits",children:(0,i.jsx)(n.code,{children:"inits"})}),(0,i.jsxs)(o.A,{cli_repr:"--[no-]python-infer-inits",env_repr:"PANTS_PYTHON_INFER_INITS",toml_repr:`[python-infer]
inits = <bool>`,default_repr:"False",children:[(0,i.jsxs)(n.p,{children:["Infer a target's dependencies on any ",(0,i.jsx)(n.code,{children:"__init__.py"})," files in the packages it is located in (recursively upward in the directory structure)."]}),(0,i.jsxs)(n.p,{children:["Even if this is disabled, Pants will still include any ancestor ",(0,i.jsx)(n.code,{children:"__init__.py"})," files, only they will not be 'proper' dependencies, e.g. they will not show up in ",(0,i.jsx)(n.code,{children:"./pants dependencies"})," and their own dependencies will not be used."]}),(0,i.jsxs)(n.p,{children:["If you have empty ",(0,i.jsx)(n.code,{children:"__init__.py"})," files, it's safe to leave this option off; otherwise, you should enable this option."]})]}),(0,i.jsx)(n.h3,{id:"string_imports",children:(0,i.jsx)(n.code,{children:"string_imports"})}),(0,i.jsx)(o.A,{cli_repr:"--[no-]python-infer-string-imports",env_repr:"PANTS_PYTHON_INFER_STRING_IMPORTS",toml_repr:`[python-infer]
string_imports = <bool>`,default_repr:"False",children:(0,i.jsxs)(n.p,{children:["Infer a target's dependencies based on strings that look like dynamic dependencies, such as Django settings files expressing dependencies as strings. To ignore any false positives, put ",(0,i.jsx)(n.code,{children:"!{bad_address}"})," in the ",(0,i.jsx)(n.code,{children:"dependencies"})," field of your target."]})}),(0,i.jsx)(n.h3,{id:"string_imports_min_dots",children:(0,i.jsx)(n.code,{children:"string_imports_min_dots"})}),(0,i.jsx)(o.A,{cli_repr:"--python-infer-string-imports-min-dots=<int>",env_repr:"PANTS_PYTHON_INFER_STRING_IMPORTS_MIN_DOTS",toml_repr:`[python-infer]
string_imports_min_dots = <int>`,default_repr:"2",children:(0,i.jsxs)(n.p,{children:["If --string-imports is True, treat valid-looking strings with at least this many dots in them as potential dynamic dependencies. E.g., ",(0,i.jsx)(n.code,{children:"'foo.bar.Baz'"})," will be treated as a potential dependency if this option is set to 2 but not if set to 3."]})}),(0,i.jsx)(n.h3,{id:"unowned_dependency_behavior",children:(0,i.jsx)(n.code,{children:"unowned_dependency_behavior"})}),(0,i.jsx)(o.A,{cli_repr:"--python-infer-unowned-dependency-behavior=<UnownedDependencyUsage>",env_repr:"PANTS_PYTHON_INFER_UNOWNED_DEPENDENCY_BEHAVIOR",toml_repr:`[python-infer]
unowned_dependency_behavior = <UnownedDependencyUsage>`,one_of:"error, warning, ignore",default_repr:"ignore",children:(0,i.jsx)(n.p,{children:"How to handle inferred dependencies that don't have any owner."})}),(0,i.jsx)(n.h2,{id:"advanced-options",children:"Advanced options"}),(0,i.jsx)(n.p,{children:"None"}),(0,i.jsx)(n.h2,{id:"deprecated-options",children:"Deprecated options"}),(0,i.jsx)(n.p,{children:"None"}),(0,i.jsx)(n.h2,{id:"related-subsystems",children:"Related subsystems"}),(0,i.jsx)(n.p,{children:"None"})]})]})}function _(e={}){let{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},375002(e,n,s){s.d(n,{A:()=>r});let r={options:"options_nrbo"}},554707(e,n,s){s.d(n,{A:()=>o});var r=s(886070),i=s(384122),t=s(580830);function o({children:e,cli_repr:n,env_repr:s,toml_repr:o,one_of:d,default_repr:l,target_field_name:c,removal_version:p,removal_hint:a}){return(0,r.jsxs)("div",{className:"margin-bottom--lg",children:[(0,r.jsx)("code",{style:{color:"var(--pants-reference-option-repr)"},children:n}),(0,r.jsx)("br",{}),(0,r.jsx)("code",{style:{color:"var(--pants-reference-option-repr)"},children:s}),(0,r.jsx)("br",{}),(0,r.jsx)(i.A,{language:"toml",title:"pants.toml",children:o}),(0,r.jsxs)("div",{style:{paddingLeft:"2em"},children:[(0,r.jsxs)("span",{children:[d&&(0,r.jsxs)("span",{children:["one of:"," ",(0,r.jsx)("code",{style:{color:"var(--ifm-color-success)"},children:d}),(0,r.jsx)("br",{})]}),"default:"," ",(0,r.jsx)("span",{style:{color:"var(--ifm-color-success)"},children:(l||"").includes("\n")?(0,r.jsx)("pre",{className:"padding--sm",children:l}):(0,r.jsx)("code",{children:l})})]}),(0,r.jsx)("br",{}),p&&(0,r.jsxs)("span",{style:{color:"var(--ifm-color-danger-darkest)"},children:["Deprecated, will be removed in version: ",p,".",(0,r.jsx)("br",{}),a,(0,r.jsx)("br",{})]}),e,c&&(0,r.jsxs)("span",{children:["Can be overriden by field",(0,r.jsx)("code",{children:c})," on"," ",(0,r.jsx)(t.A,{to:"../targets/local_environment",children:(0,r.jsx)("code",{children:"local_environment"})}),","," ",(0,r.jsx)(t.A,{to:"../targets/docker_environment",children:(0,r.jsx)("code",{children:"docker_environment"})}),", or"," ",(0,r.jsx)(t.A,{to:"../targets/remote_environment",children:(0,r.jsx)("code",{children:"remote_environment"})}),"targets."]})]})]})}},759853(e){e.exports=JSON.parse('{"id":"reference/subsystems/python-infer","title":"python-infer","description":"Options controlling which dependencies will be inferred for Python targets.\\n","source":"@site/versioned_docs/version-2.10/reference/subsystems/python-infer.mdx","sourceDirName":"reference/subsystems","slug":"/reference/subsystems/python-infer","permalink":"/2.10/reference/subsystems/python-infer","draft":false,"unlisted":false,"tags":[],"version":"2.10","frontMatter":{"title":"python-infer","description":"Options controlling which dependencies will be inferred for Python targets.\\n"},"sidebar":"referenceSidebar","previous":{"title":"python-bootstrap","permalink":"/2.10/reference/subsystems/python-bootstrap"},"next":{"title":"python-native-code","permalink":"/2.10/reference/subsystems/python-native-code"}}')}}]);