"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["595139"],{563858(e,t,r){r.r(t),r.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>x,frontMatter:()=>d,metadata:()=>n,toc:()=>h});var n=r(958579),i=r(886070),s=r(848193),o=r(989898),l=r(375002);let d={title:"pex_binary",description:"A Python target that can be converted into an executable PEX file.\n"},c,a={},h=[{value:"<code>dependencies</code>",id:"dependencies",level:2},{value:"<code>description</code>",id:"description",level:2},{value:"<code>emit_warnings</code>",id:"emit_warnings",level:2},{value:"<code>entry_point</code>",id:"entry_point",level:2},{value:"<code>execution_mode</code>",id:"execution_mode",level:2},{value:"<code>experimental_resolve</code>",id:"experimental_resolve",level:2},{value:"<code>ignore_errors</code>",id:"ignore_errors",level:2},{value:"<code>include_tools</code>",id:"include_tools",level:2},{value:"<code>inherit_path</code>",id:"inherit_path",level:2},{value:"<code>interpreter_constraints</code>",id:"interpreter_constraints",level:2},{value:"<code>output_path</code>",id:"output_path",level:2},{value:"<code>platforms</code>",id:"platforms",level:2},{value:"<code>restartable</code>",id:"restartable",level:2},{value:"<code>script</code>",id:"script",level:2},{value:"<code>shebang</code>",id:"shebang",level:2},{value:"<code>strip_pex_env</code>",id:"strip_pex_env",level:2},{value:"<code>tags</code>",id:"tags",level:2}];function p(e){let t={a:"a",code:"code",em:"em",h2:"h2",hr:"hr",li:"li",ol:"ol",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.p,{children:"A Python target that can be converted into an executable PEX file."}),"\n",(0,i.jsxs)(t.p,{children:["PEX files are self-contained executable files that contain a complete Python environment capable of running the target. For more information, see ",(0,i.jsx)(t.a,{href:"https://www.pantsbuild.org/v2.8/docs/pex-files",children:"https://www.pantsbuild.org/v2.8/docs/pex-files"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:["Backend: ",(0,i.jsx)("span",{className:"color--primary",children:"``"})]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsxs)("span",{className:l.A.options,children:[(0,i.jsx)(t.h2,{id:"dependencies",children:(0,i.jsx)(t.code,{children:"dependencies"})}),(0,i.jsxs)(o.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,i.jsxs)(t.p,{children:["Addresses to other targets that this target depends on, e.g. ['helloworld/subdir",":lib","']."]}),(0,i.jsxs)(t.p,{children:["Alternatively, you may include file names. Pants will find which target owns that file, and create a new target from that which only includes the file in its ",(0,i.jsx)(t.code,{children:"sources"})," field. For files relative to the current BUILD file, prefix with ",(0,i.jsx)(t.code,{children:"./"}),"; otherwise, put the full path, e.g. ['./sibling.txt', 'resources/demo.json']."]}),(0,i.jsxs)(t.p,{children:["You may exclude dependencies by prefixing with ",(0,i.jsx)(t.code,{children:"!"}),", e.g. ",(0,i.jsx)(t.code,{children:"['!helloworld/subdir:lib', '!./sibling.txt']"}),". Ignores are intended for false positives with dependency inference; otherwise, simply leave off the dependency from the BUILD file."]})]}),(0,i.jsx)(t.h2,{id:"description",children:(0,i.jsx)(t.code,{children:"description"})}),(0,i.jsxs)(o.A,{type_repr:"str | None",default_repr:"None",children:[(0,i.jsx)(t.p,{children:"A human-readable description of the target."}),(0,i.jsxs)(t.p,{children:["Use ",(0,i.jsx)(t.code,{children:"./pants list --documented ::"})," to see all targets with descriptions."]})]}),(0,i.jsx)(t.h2,{id:"emit_warnings",children:(0,i.jsx)(t.code,{children:"emit_warnings"})}),(0,i.jsxs)(o.A,{type_repr:"bool | None",default_repr:"None",children:[(0,i.jsx)(t.p,{children:"Whether or not to emit PEX warnings at runtime."}),(0,i.jsxs)(t.p,{children:["The default is determined by the option ",(0,i.jsx)(t.code,{children:"emit_warnings"})," in the ",(0,i.jsx)(t.code,{children:"[pex-binary-defaults]"})," scope."]})]}),(0,i.jsx)(t.h2,{id:"entry_point",children:(0,i.jsx)(t.code,{children:"entry_point"})}),(0,i.jsxs)(o.A,{type_repr:"str | None",default_repr:"None",children:[(0,i.jsxs)(t.p,{children:["Set the entry point, i.e. what gets run when executing ",(0,i.jsx)(t.code,{children:"./my_app.pex"}),", to a module."]}),(0,i.jsxs)(t.p,{children:["You can specify a full module like 'path.to.module' and 'path.to.module",":func","', or use a shorthand to specify a file name, using the same syntax as the ",(0,i.jsx)(t.code,{children:"sources"})," field:"]}),(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["'app.py', Pants will convert into the module ",(0,i.jsx)(t.code,{children:"path.to.app"}),";"]}),"\n",(0,i.jsxs)(t.li,{children:["'app.py",":func","', Pants will convert into ",(0,i.jsx)(t.code,{children:"path.to.app:func"}),"."]}),"\n"]}),(0,i.jsx)(t.p,{children:"You must use the file name shorthand for file arguments to work with this target."}),(0,i.jsxs)(t.p,{children:["You may either set this field or the ",(0,i.jsx)(t.code,{children:"script"})," field, but not both. Leave off both fields to have no entry point."]})]}),(0,i.jsx)(t.h2,{id:"execution_mode",children:(0,i.jsx)(t.code,{children:"execution_mode"})}),(0,i.jsxs)(o.A,{type_repr:"'unzip' | 'venv' | 'zipapp' | None",default_repr:"'zipapp'",children:[(0,i.jsx)(t.p,{children:"The mode the generated PEX file will run in."}),(0,i.jsxs)(t.p,{children:["The traditional PEX file runs in a modified 'zipapp' mode (See: ",(0,i.jsx)(t.a,{href:"https://www.python.org/dev/peps/pep-0441/",children:"https://www.python.org/dev/peps/pep-0441/"}),") where zipped internal code and dependencies are first unpacked to disk. This mode achieves the fastest cold start times and may, for example be the best choice for cloud lambda functions."]}),(0,i.jsxs)(t.p,{children:["The fastest execution mode in the steady state is 'venv', which generates a virtual environment from the PEX file on first run, but then achieves near native virtual environment start times. This mode also benefits from a traditional virtual environment ",(0,i.jsx)(t.code,{children:"sys.path"}),", giving maximum compatibility with stdlib and third party APIs."]}),(0,i.jsx)(t.p,{children:"The 'unzip' mode is deprecated since the default 'zipapp' mode now executes this way."})]}),(0,i.jsx)(t.h2,{id:"experimental_resolve",children:(0,i.jsx)(t.code,{children:"experimental_resolve"})}),(0,i.jsxs)(o.A,{type_repr:"str | None",default_repr:"None",children:[(0,i.jsxs)(t.p,{children:["The resolve from ",(0,i.jsx)(t.code,{children:"[python].experimental_resolves_to_lockfiles"})," to use, if any."]}),(0,i.jsx)(t.p,{children:"This field is highly experimental and may change without the normal deprecation policy."})]}),(0,i.jsx)(t.h2,{id:"ignore_errors",children:(0,i.jsx)(t.code,{children:"ignore_errors"})}),(0,i.jsx)(o.A,{type_repr:"bool",default_repr:"False",children:(0,i.jsx)(t.p,{children:"Should PEX ignore when it cannot resolve dependencies?"})}),(0,i.jsx)(t.h2,{id:"include_tools",children:(0,i.jsx)(t.code,{children:"include_tools"})}),(0,i.jsxs)(o.A,{type_repr:"bool",default_repr:"False",children:[(0,i.jsx)(t.p,{children:"Whether to include Pex tools in the PEX bootstrap code."}),(0,i.jsxs)(t.p,{children:["With tools included, the generated PEX file can be executed with ",(0,i.jsx)(t.code,{children:"PEX_TOOLS=1 <pex file> --help"})," to gain access to all the available tools."]})]}),(0,i.jsx)(t.h2,{id:"inherit_path",children:(0,i.jsx)(t.code,{children:"inherit_path"})}),(0,i.jsxs)(o.A,{type_repr:"'fallback' | 'false' | 'prefer' | None",default_repr:"None",children:[(0,i.jsxs)(t.p,{children:["Whether to inherit the ",(0,i.jsx)(t.code,{children:"sys.path"})," (aka PYTHONPATH) of the environment that the binary runs in."]}),(0,i.jsxs)(t.p,{children:["Use ",(0,i.jsx)(t.code,{children:"false"})," to not inherit ",(0,i.jsx)(t.code,{children:"sys.path"}),"; use ",(0,i.jsx)(t.code,{children:"fallback"})," to inherit ",(0,i.jsx)(t.code,{children:"sys.path"})," after packaged dependencies; and use ",(0,i.jsx)(t.code,{children:"prefer"})," to inherit ",(0,i.jsx)(t.code,{children:"sys.path"})," before packaged dependencies."]})]}),(0,i.jsx)(t.h2,{id:"interpreter_constraints",children:(0,i.jsx)(t.code,{children:"interpreter_constraints"})}),(0,i.jsxs)(o.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,i.jsx)(t.p,{children:"The Python interpreters this code is compatible with."}),(0,i.jsxs)(t.p,{children:["Each element should be written in pip-style format, e.g. ",(0,i.jsx)(t.code,{children:"CPython==2.7.*"})," or ",(0,i.jsx)(t.code,{children:"CPython>=3.6,<4"}),". You can leave off ",(0,i.jsx)(t.code,{children:"CPython"})," as a shorthand, e.g. ",(0,i.jsx)(t.code,{children:">=2.7"})," will be expanded to ",(0,i.jsx)(t.code,{children:"CPython>=2.7"}),"."]}),(0,i.jsxs)(t.p,{children:["Specify more than one element to OR the constraints, e.g. ",(0,i.jsx)(t.code,{children:"['PyPy==3.7.*', 'CPython==3.7.*']"})," means either PyPy 3.7 ",(0,i.jsx)(t.em,{children:"or"})," CPython 3.7."]}),(0,i.jsxs)(t.p,{children:["If the field is not set, it will default to the option ",(0,i.jsx)(t.code,{children:"[python].interpreter_constraints"}),"."]}),(0,i.jsxs)(t.p,{children:["See ",(0,i.jsx)(t.a,{href:"https://www.pantsbuild.org/v2.8/docs/python-interpreter-compatibility",children:"https://www.pantsbuild.org/v2.8/docs/python-interpreter-compatibility"})," for how these interpreter constraints are merged with the constraints of dependencies."]})]}),(0,i.jsx)(t.h2,{id:"output_path",children:(0,i.jsx)(t.code,{children:"output_path"})}),(0,i.jsxs)(o.A,{type_repr:"str | None",default_repr:"None",children:[(0,i.jsx)(t.p,{children:"Where the built asset should be located."}),(0,i.jsxs)(t.p,{children:["If undefined, this will use the path to the BUILD file, followed by the target name. For example, ",(0,i.jsx)(t.code,{children:"src/python/project:app"})," would be `src.python.project/app.ext."]}),(0,i.jsxs)(t.p,{children:["When running ",(0,i.jsx)(t.code,{children:"./pants package"}),", this path will be prefixed by ",(0,i.jsx)(t.code,{children:"--distdir"})," (e.g. ",(0,i.jsx)(t.code,{children:"dist/"}),")."]}),(0,i.jsx)(t.p,{children:"Warning: setting this value risks naming collisions with other package targets you may have."})]}),(0,i.jsx)(t.h2,{id:"platforms",children:(0,i.jsx)(t.code,{children:"platforms"})}),(0,i.jsxs)(o.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,i.jsx)(t.p,{children:"The platforms the built PEX should be compatible with."}),(0,i.jsx)(t.p,{children:"This defaults to the current platform, but can be overridden to different platforms. There must be built wheels available for all of the foreign platforms, rather than sdists."}),(0,i.jsx)(t.p,{children:"You can give a list of multiple platforms to create a multiplatform PEX, meaning that the PEX will be executable in all of the supported environments."}),(0,i.jsxs)(t.p,{children:["Platforms should be in the format defined by Pex (",(0,i.jsx)(t.a,{href:"https://pex.readthedocs.io/en/latest/buildingpex.html#platform",children:"https://pex.readthedocs.io/en/latest/buildingpex.html#platform"}),'), i.e. PLATFORM-IMPL-PYVER-ABI (e.g. "linux_x86_64-cp-27-cp27mu", "macosx_10.12_x86_64-cp-36-cp36m"):']}),(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:'PLATFORM: the host platform, e.g. "linux-x86_64", "macosx-10.12-x86_64".'}),"\n",(0,i.jsx)(t.li,{children:'IMPL: the Python implementation abbreviation, e.g. "cp", "pp", "jp".'}),"\n",(0,i.jsx)(t.li,{children:'PYVER: a two-digit string representing the Python version, e.g. "27", "36".'}),"\n",(0,i.jsx)(t.li,{children:'ABI: the ABI tag, e.g. "cp36m", "cp27mu", "abi3", "none".'}),"\n"]})]}),(0,i.jsx)(t.h2,{id:"restartable",children:(0,i.jsx)(t.code,{children:"restartable"})}),(0,i.jsx)(o.A,{type_repr:"bool",default_repr:"False",children:(0,i.jsxs)(t.p,{children:["If true, runs of this target with the ",(0,i.jsx)(t.code,{children:"run"})," goal may be interrupted and restarted when its input files change."]})}),(0,i.jsx)(t.h2,{id:"script",children:(0,i.jsx)(t.code,{children:"script"})}),(0,i.jsxs)(o.A,{type_repr:"str | None",default_repr:"None",children:[(0,i.jsxs)(t.p,{children:["Set the entry point, i.e. what gets run when executing ",(0,i.jsx)(t.code,{children:"./my_app.pex"}),", to a script or console_script as defined by any of the distributions in the PEX."]}),(0,i.jsxs)(t.p,{children:["You may either set this field or the ",(0,i.jsx)(t.code,{children:"entry_point"})," field, but not both. Leave off both fields to have no entry point."]})]}),(0,i.jsx)(t.h2,{id:"shebang",children:(0,i.jsx)(t.code,{children:"shebang"})}),(0,i.jsxs)(o.A,{type_repr:"str | None",default_repr:"None",children:[(0,i.jsx)(t.p,{children:"Set the generated PEX to use this shebang, rather than the default of PEX choosing a shebang based on the interpreter constraints."}),(0,i.jsxs)(t.p,{children:["This influences the behavior of running ",(0,i.jsx)(t.code,{children:"./result.pex"}),". You can ignore the shebang by instead running ",(0,i.jsx)(t.code,{children:"/path/to/python_interpreter ./result.pex"}),"."]})]}),(0,i.jsx)(t.h2,{id:"strip_pex_env",children:(0,i.jsx)(t.code,{children:"strip_pex_env"})}),(0,i.jsxs)(o.A,{type_repr:"bool",default_repr:"True",children:[(0,i.jsxs)(t.p,{children:["Whether or not to strip the PEX runtime environment of ",(0,i.jsx)(t.code,{children:"PEX*"})," environment variables."]}),(0,i.jsxs)(t.p,{children:["Most applications have no need for the ",(0,i.jsx)(t.code,{children:"PEX*"})," environment variables that are used to control PEX startup; so these variables are scrubbed from the environment by Pex before transferring control to the application by default. This prevents any subprocesses that happen to execute other PEX files from inheriting these control knob values since most would be undesired; e.g.: PEX_MODULE or PEX_PATH."]})]}),(0,i.jsx)(t.h2,{id:"tags",children:(0,i.jsx)(t.code,{children:"tags"})}),(0,i.jsxs)(o.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,i.jsx)(t.p,{children:"Arbitrary strings to describe a target."}),(0,i.jsxs)(t.p,{children:["For example, you may tag some test targets with 'integration_test' so that you could run ",(0,i.jsx)(t.code,{children:"./pants --tag='integration_test' test ::"})," to only run on targets with that tag."]})]})]})]})}function x(e={}){let{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},375002(e,t,r){r.d(t,{A:()=>n});let n={options:"options_nrbo"}},989898(e,t,r){r.d(t,{A:()=>i});var n=r(886070);function i({children:e,type_repr:t,default_repr:r,backend:i}){return(0,n.jsxs)("div",{className:"margin-bottom--lg",children:[(0,n.jsx)("code",{style:{color:"var(--pants-reference-option-repr)"},children:t}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{style:{paddingLeft:"2em"},children:[r&&(0,n.jsxs)("span",{children:["default:"," ",(0,n.jsx)("code",{style:{color:"var(--ifm-color-success)"},children:r})]}),!r&&(0,n.jsx)("span",{style:{color:"var(--ifm-color-success)"},children:"required"}),i&&(0,n.jsxs)("div",{children:["backend:"," ",(0,n.jsx)("code",{style:{color:"var(--ifm-color-success)"},children:i})]}),e]})]})}},848193(e,t,r){r.d(t,{R:()=>o,x:()=>l});var n=r(830758);let i={},s=n.createContext(i);function o(e){let t=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(s.Provider,{value:t},e.children)}},958579(e){e.exports=JSON.parse('{"id":"reference/targets/pex_binary","title":"pex_binary","description":"A Python target that can be converted into an executable PEX file.\\n","source":"@site/versioned_docs/version-2.8/reference/targets/pex_binary.mdx","sourceDirName":"reference/targets","slug":"/reference/targets/pex_binary","permalink":"/2.8/reference/targets/pex_binary","draft":false,"unlisted":false,"tags":[],"version":"2.8","frontMatter":{"title":"pex_binary","description":"A Python target that can be converted into an executable PEX file.\\n"},"sidebar":"referenceSidebar","previous":{"title":"jvm_artifact","permalink":"/2.8/reference/targets/jvm_artifact"},"next":{"title":"protobuf_source","permalink":"/2.8/reference/targets/protobuf_source"}}')}}]);