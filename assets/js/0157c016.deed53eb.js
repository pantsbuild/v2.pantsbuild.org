"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["185607"],{852884(e,t,s){s.r(t),s.d(t,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>c,metadata:()=>i,toc:()=>p});var i=s(278174),n=s(886070),r=s(848193),o=s(989898),d=s(375002);let c={title:"python_distribution",description:"A publishable Python setuptools distribution (e.g. an sdist or wheel).\n"},l,a={},p=[{value:"<code>provides</code>",id:"provides",level:2},{value:"<code>dependencies</code>",id:"dependencies",level:2},{value:"<code>description</code>",id:"description",level:2},{value:"<code>entry_points</code>",id:"entry_points",level:2},{value:"<code>generate_setup</code>",id:"generate_setup",level:2},{value:"<code>pypi_repositories</code>",id:"pypi_repositories",level:2},{value:"<code>sdist</code>",id:"sdist",level:2},{value:"<code>sdist_config_settings</code>",id:"sdist_config_settings",level:2},{value:"<code>skip_twine</code>",id:"skip_twine",level:2},{value:"<code>tags</code>",id:"tags",level:2},{value:"<code>wheel</code>",id:"wheel",level:2},{value:"<code>wheel_config_settings</code>",id:"wheel_config_settings",level:2}];function h(e){let t={a:"a",code:"code",h2:"h2",hr:"hr",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.p,{children:"A publishable Python setuptools distribution (e.g. an sdist or wheel)."}),"\n",(0,n.jsxs)(t.p,{children:["See ",(0,n.jsx)(t.a,{href:"https://www.pantsbuild.org/v2.8/docs/python-distributions",children:"https://www.pantsbuild.org/v2.8/docs/python-distributions"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["Backend: ",(0,n.jsx)("span",{className:"color--primary",children:"``"})]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsxs)("span",{className:d.A.options,children:[(0,n.jsx)(t.h2,{id:"provides",children:(0,n.jsx)(t.code,{children:"provides"})}),(0,n.jsxs)(o.A,{type_repr:"PythonArtifact",children:[(0,n.jsx)(t.p,{children:"The setup.py kwargs for the external artifact built from this target."}),(0,n.jsxs)(t.p,{children:["You must define ",(0,n.jsx)(t.code,{children:"name"}),". You can also set almost any keyword argument accepted by setup.py in the ",(0,n.jsx)(t.code,{children:"setup()"})," function: (",(0,n.jsx)(t.a,{href:"https://packaging.python.org/guides/distributing-packages-using-setuptools/#setup-args",children:"https://packaging.python.org/guides/distributing-packages-using-setuptools/#setup-args"}),")."]}),(0,n.jsxs)(t.p,{children:["See ",(0,n.jsx)(t.a,{href:"https://www.pantsbuild.org/v2.8/docs/plugins-setup-py",children:"https://www.pantsbuild.org/v2.8/docs/plugins-setup-py"})," for how to write a plugin to dynamically generate kwargs."]})]}),(0,n.jsx)(t.h2,{id:"dependencies",children:(0,n.jsx)(t.code,{children:"dependencies"})}),(0,n.jsxs)(o.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,n.jsxs)(t.p,{children:["Addresses to other targets that this target depends on, e.g. ['helloworld/subdir",":lib","']."]}),(0,n.jsxs)(t.p,{children:["Alternatively, you may include file names. Pants will find which target owns that file, and create a new target from that which only includes the file in its ",(0,n.jsx)(t.code,{children:"sources"})," field. For files relative to the current BUILD file, prefix with ",(0,n.jsx)(t.code,{children:"./"}),"; otherwise, put the full path, e.g. ['./sibling.txt', 'resources/demo.json']."]}),(0,n.jsxs)(t.p,{children:["You may exclude dependencies by prefixing with ",(0,n.jsx)(t.code,{children:"!"}),", e.g. ",(0,n.jsx)(t.code,{children:"['!helloworld/subdir:lib', '!./sibling.txt']"}),". Ignores are intended for false positives with dependency inference; otherwise, simply leave off the dependency from the BUILD file."]})]}),(0,n.jsx)(t.h2,{id:"description",children:(0,n.jsx)(t.code,{children:"description"})}),(0,n.jsxs)(o.A,{type_repr:"str | None",default_repr:"None",children:[(0,n.jsx)(t.p,{children:"A human-readable description of the target."}),(0,n.jsxs)(t.p,{children:["Use ",(0,n.jsx)(t.code,{children:"./pants list --documented ::"})," to see all targets with descriptions."]})]}),(0,n.jsx)(t.h2,{id:"entry_points",children:(0,n.jsx)(t.code,{children:"entry_points"})}),(0,n.jsxs)(o.A,{type_repr:"Dict[str, Dict[str, str]] | None",default_repr:"None",children:[(0,n.jsxs)(t.p,{children:["Any entry points, such as ",(0,n.jsx)(t.code,{children:"console_scripts"})," and ",(0,n.jsx)(t.code,{children:"gui_scripts"}),"."]}),(0,n.jsxs)(t.p,{children:["Specify as a nested dictionary, with a dictionary for each type of entry point, e.g. ",(0,n.jsx)(t.code,{children:"console_scripts"})," vs. ",(0,n.jsx)(t.code,{children:"gui_scripts"}),'. Each dictionary maps the entry point name to either a setuptools entry point ("path.to.module',":func",'") or a Pants target address to a pex_binary target.']}),(0,n.jsx)(t.p,{children:"Example:"}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:'entry_points={\n  "console_scripts": {\n    "my-script": "project.app:main",\n    "another-script": "project/subdir:pex_binary_tgt"\n  }\n}\n'})}),(0,n.jsxs)(t.p,{children:["Note that Pants will assume that any value that either starts with ",(0,n.jsx)(t.code,{children:":"})," or has ",(0,n.jsx)(t.code,{children:"/"})," in it, is a target address to a pex_binary target. Otherwise, it will assume it's a setuptools entry point as defined by ",(0,n.jsx)(t.a,{href:"https://packaging.python.org/specifications/entry-points/#entry-points-specification",children:"https://packaging.python.org/specifications/entry-points/#entry-points-specification"}),". Use ",(0,n.jsx)(t.code,{children:"//"})," as a prefix for target addresses if you need to disambiguate."]}),(0,n.jsx)(t.p,{children:"Pants will attempt to infer dependencies, which you can confirm by running:"}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"./pants dependencies <python_distribution target address>\n\n"})})]}),(0,n.jsx)(t.h2,{id:"generate_setup",children:(0,n.jsx)(t.code,{children:"generate_setup"})}),(0,n.jsx)(o.A,{type_repr:"bool | None",default_repr:"None",children:(0,n.jsx)(t.p,{children:"Whether to generate setup information for this distribution, based on analyzing sources and dependencies. Set to False to use existing setup information, such as existing setup.py, setup.cfg, pyproject.toml files or similar."})}),(0,n.jsx)(t.h2,{id:"pypi_repositories",children:(0,n.jsx)(t.code,{children:"pypi_repositories"})}),(0,n.jsx)(o.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:(0,n.jsx)(t.p,{children:"List of PyPi repositories to publish the target package to."})}),(0,n.jsx)(t.h2,{id:"sdist",children:(0,n.jsx)(t.code,{children:"sdist"})}),(0,n.jsx)(o.A,{type_repr:"bool",default_repr:"True",children:(0,n.jsx)(t.p,{children:"Whether to build an sdist for the distribution."})}),(0,n.jsx)(t.h2,{id:"sdist_config_settings",children:(0,n.jsx)(t.code,{children:"sdist_config_settings"})}),(0,n.jsx)(o.A,{type_repr:"Dict[str, Iterable[str]] | None",default_repr:"None",children:(0,n.jsx)(t.p,{children:"PEP-517 config settings to pass to the build backend when building an sdist."})}),(0,n.jsx)(t.h2,{id:"skip_twine",children:(0,n.jsx)(t.code,{children:"skip_twine"})}),(0,n.jsx)(o.A,{type_repr:"bool",default_repr:"False",children:(0,n.jsx)(t.p,{children:"If true, don't publish this target's packages using Twine."})}),(0,n.jsx)(t.h2,{id:"tags",children:(0,n.jsx)(t.code,{children:"tags"})}),(0,n.jsxs)(o.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,n.jsx)(t.p,{children:"Arbitrary strings to describe a target."}),(0,n.jsxs)(t.p,{children:["For example, you may tag some test targets with 'integration_test' so that you could run ",(0,n.jsx)(t.code,{children:"./pants --tag='integration_test' test ::"})," to only run on targets with that tag."]})]}),(0,n.jsx)(t.h2,{id:"wheel",children:(0,n.jsx)(t.code,{children:"wheel"})}),(0,n.jsx)(o.A,{type_repr:"bool",default_repr:"True",children:(0,n.jsx)(t.p,{children:"Whether to build a wheel for the distribution."})}),(0,n.jsx)(t.h2,{id:"wheel_config_settings",children:(0,n.jsx)(t.code,{children:"wheel_config_settings"})}),(0,n.jsx)(o.A,{type_repr:"Dict[str, Iterable[str]] | None",default_repr:"None",children:(0,n.jsx)(t.p,{children:"PEP-517 config settings to pass to the build backend when building a wheel."})})]})]})}function u(e={}){let{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},375002(e,t,s){s.d(t,{A:()=>i});let i={options:"options_nrbo"}},989898(e,t,s){s.d(t,{A:()=>n});var i=s(886070);function n({children:e,type_repr:t,default_repr:s,backend:n}){return(0,i.jsxs)("div",{className:"margin-bottom--lg",children:[(0,i.jsx)("code",{style:{color:"var(--pants-reference-option-repr)"},children:t}),(0,i.jsx)("br",{}),(0,i.jsxs)("div",{style:{paddingLeft:"2em"},children:[s&&(0,i.jsxs)("span",{children:["default:"," ",(0,i.jsx)("code",{style:{color:"var(--ifm-color-success)"},children:s})]}),!s&&(0,i.jsx)("span",{style:{color:"var(--ifm-color-success)"},children:"required"}),n&&(0,i.jsxs)("div",{children:["backend:"," ",(0,i.jsx)("code",{style:{color:"var(--ifm-color-success)"},children:n})]}),e]})]})}},848193(e,t,s){s.d(t,{R:()=>o,x:()=>d});var i=s(830758);let n={},r=i.createContext(n);function o(e){let t=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),i.createElement(r.Provider,{value:t},e.children)}},278174(e){e.exports=JSON.parse('{"id":"reference/targets/python_distribution","title":"python_distribution","description":"A publishable Python setuptools distribution (e.g. an sdist or wheel).\\n","source":"@site/versioned_docs/version-2.8/reference/targets/python_distribution.mdx","sourceDirName":"reference/targets","slug":"/reference/targets/python_distribution","permalink":"/2.8/reference/targets/python_distribution","draft":false,"unlisted":false,"tags":[],"version":"2.8","frontMatter":{"title":"python_distribution","description":"A publishable Python setuptools distribution (e.g. an sdist or wheel).\\n"},"sidebar":"referenceSidebar","previous":{"title":"python_awslambda","permalink":"/2.8/reference/targets/python_awslambda"},"next":{"title":"python_requirement","permalink":"/2.8/reference/targets/python_requirement"}}')}}]);