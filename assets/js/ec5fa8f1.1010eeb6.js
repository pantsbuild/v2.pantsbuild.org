"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["822943"],{469606(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>a,metadata:()=>s,toc:()=>d});var s=t(287297),i=t(886070),r=t(848193);let a={title:"Release process",sidebar_position:1},o,l={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"1. Create a PGP signing key",id:"1-create-a-pgp-signing-key",level:3},{value:"2. Add your PGP key to GitHub.",id:"2-add-your-pgp-key-to-github",level:3},{value:"3. Configure Git to use your PGP key.",id:"3-configure-git-to-use-your-pgp-key",level:3},{value:"4. Create a PyPI account",id:"4-create-a-pypi-account",level:3},{value:"5. Get added to pantsbuild.pants PyPI",id:"5-get-added-to-pantsbuildpants-pypi",level:3},{value:"6. Configure <code>~/.pypirc</code>",id:"6-configure-pypirc",level:3},{value:"Step 1: Prepare the release",id:"step-1-prepare-the-release",level:2},{value:"0a. <code>dev0</code> - set up the release series",id:"0a-dev0---set-up-the-release-series",level:3},{value:"0b. <code>dev</code> - Check for any deprecations",id:"0b-dev---check-for-any-deprecations",level:3},{value:"0c. Release candidates - cherry-pick relevant changes",id:"0c-release-candidates---cherry-pick-relevant-changes",level:3},{value:"1. Prepare the changelog",id:"1-prepare-the-changelog",level:3},{value:"2. Update <code>CONTRIBUTORS.md</code>",id:"2-update-contributorsmd",level:3},{value:"3. <code>dev</code> and <code>rc0</code> - bump the <code>VERSION</code>",id:"3-dev-and-rc0---bump-the-version",level:3},{value:"4. Post the prep to GitHub",id:"4-post-the-prep-to-github",level:3},{value:"5a. <code>rc0</code> - create a new Git branch",id:"5a-rc0---create-a-new-git-branch",level:3},{value:"5b. release candidates - cherry-pick and bump the VERSION",id:"5b-release-candidates---cherry-pick-and-bump-the-version",level:3},{value:"Step 2: Update this docs site",id:"step-2-update-this-docs-site",level:2},{value:"<code>dev0</code> - set up the new page",id:"dev0---set-up-the-new-page",level:3},{value:"Summarize important changes",id:"summarize-important-changes",level:3},{value:"Update the version in Installing Pants",id:"update-the-version-in-installing-pants",level:3},{value:"<code>stable</code> releases - Update the default docsite",id:"stable-releases---update-the-default-docsite",level:3},{value:"Step 3: Wait for CI to build the wheels",id:"step-3-wait-for-ci-to-build-the-wheels",level:2},{value:"Step 4: Run <code>release.sh</code>",id:"step-4-run-releasesh",level:2},{value:"Step 5: Test the release",id:"step-5-test-the-release",level:2},{value:"Step 6: Announce the change",id:"step-6-announce-the-change",level:2},{value:"Sample emails",id:"sample-emails",level:3}];function h(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["How to release a new version of ",(0,i.jsx)(n.code,{children:"pantsbuild.pants"})," and its plugins."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsx)(n.h3,{id:"1-create-a-pgp-signing-key",children:"1. Create a PGP signing key"}),"\n",(0,i.jsx)(n.p,{children:"If you already have one, you can reuse it."}),"\n",(0,i.jsxs)(n.p,{children:["You likely want to use the gpg implementation of pgp. On macOS, you can ",(0,i.jsx)(n.code,{children:"brew install gpg"}),". Once gpg is installed, generate a new key: ",(0,i.jsx)(n.a,{href:"https://docs.github.com/en/github/authenticating-to-github/generating-a-new-gpg-key",children:"https://docs.github.com/en/github/authenticating-to-github/generating-a-new-gpg-key"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Please use a password for your key!"}),"\n",(0,i.jsx)(n.h3,{id:"2-add-your-pgp-key-to-github",children:"2. Add your PGP key to GitHub."}),"\n",(0,i.jsxs)(n.p,{children:["See ",(0,i.jsx)(n.a,{href:"https://docs.github.com/en/github/authenticating-to-github/adding-a-new-gpg-key-to-your-github-account",children:"https://docs.github.com/en/github/authenticating-to-github/adding-a-new-gpg-key-to-your-github-account"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"3-configure-git-to-use-your-pgp-key",children:"3. Configure Git to use your PGP key."}),"\n",(0,i.jsxs)(n.p,{children:["See ",(0,i.jsx)(n.a,{href:"https://docs.github.com/en/github/authenticating-to-github/telling-git-about-your-signing-key",children:"https://docs.github.com/en/github/authenticating-to-github/telling-git-about-your-signing-key"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Note: the last step is required on macOS."}),"\n",(0,i.jsx)(n.h3,{id:"4-create-a-pypi-account",children:"4. Create a PyPI account"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://pypi.org/account/register",children:"pypi.org/account/register"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"5-get-added-to-pantsbuildpants-pypi",children:"5. Get added to pantsbuild.pants PyPI"}),"\n",(0,i.jsx)(n.p,{children:"You can ask any of the current Owners to add you as a maintainer."}),"\n",(0,i.jsxs)(n.h3,{id:"6-configure-pypirc",children:["6. Configure ",(0,i.jsx)(n.code,{children:"~/.pypirc"})]}),"\n",(0,i.jsx)(n.p,{children:"Fill in with your PyPI credentials by running:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ cat << EOF > ~/.pypirc && chmod 600 ~/.pypirc\n[pypi]\nusername: <fill me in>\npassword: <fill me in>\n\n[server-login]\nusername: <fill me in>\npassword: <fill me in>\nEOF\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-1-prepare-the-release",children:"Step 1: Prepare the release"}),"\n",(0,i.jsx)(n.p,{children:"The release is automated, outside of these steps:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Removing any completed deprecations"}),"\n",(0,i.jsx)(n.li,{children:"Changelog preparation"}),"\n",(0,i.jsx)(n.li,{children:"CONTRIBUTOR.md updates"}),"\n",(0,i.jsx)(n.li,{children:"Version bumping"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The first three steps always happen in the ",(0,i.jsx)(n.code,{children:"main"})," branch, whereas the version bump happens in the relevant release branch."]}),"\n",(0,i.jsxs)(n.p,{children:["For dev and ",(0,i.jsx)(n.code,{children:"rc0"})," releases, the release branch is ",(0,i.jsx)(n.code,{children:"main"}),". For all other release candidates and stable releases, the release branch is that respective version's branch, e.g. ",(0,i.jsx)(n.code,{children:"1.28.x"})," or ",(0,i.jsx)(n.code,{children:"1.29.x"}),"."]}),"\n",(0,i.jsxs)(n.h3,{id:"0a-dev0---set-up-the-release-series",children:["0a. ",(0,i.jsx)(n.code,{children:"dev0"})," - set up the release series"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Create a new file in ",(0,i.jsx)(n.code,{children:" src/python/pants/notes"}),", e.g. create ",(0,i.jsx)(n.code,{children:"src/python/pants/notes/2.2.x.md"}),".","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Copy the title and template over from the prior release, e.g. ",(0,i.jsx)(n.code,{children:"2.1.x.md"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Add the new file to ",(0,i.jsx)(n.code,{children:"pants.toml"})," in the ",(0,i.jsx)(n.code,{children:"release_notes"})," section."]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"0b-dev---check-for-any-deprecations",children:["0b. ",(0,i.jsx)(n.code,{children:"dev"})," - Check for any deprecations"]}),"\n",(0,i.jsx)(n.p,{children:"Your release will fail if there are any deprecated things that should now be removed. Usually, the person who deprecated the feature should have already removed the stale code, but they may have forgotten."}),"\n",(0,i.jsxs)(n.p,{children:["To check for this, search for the version you are releasing. For example, with ",(0,i.jsx)(n.a,{href:"https://github.com/BurntSushi/ripgrep",children:"ripgrep"}),", run ",(0,i.jsx)(n.code,{children:"rg -C3 1.28.0.dev0"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"If there are things that must be removed, you can either:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Ping the person who made the deprecation to ask them to remove it."}),"\n",(0,i.jsx)(n.li,{children:"Remove it yourself, either in the release prep or as a precursor PR."}),"\n",(0,i.jsx)(n.li,{children:"Bump the removal date back by one dev release."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"0c-release-candidates---cherry-pick-relevant-changes",children:"0c. Release candidates - cherry-pick relevant changes"}),"\n",(0,i.jsxs)(n.p,{children:["Cherry-pick all changes labeled ",(0,i.jsx)(n.code,{children:"needs-cherrypick"})," with the relevant milestone for the stable branch, e.g. the milestone ",(0,i.jsx)(n.code,{children:"1.28.x"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"These pull requests must have been merged into main first, so they will already be closed."}),"\n",(0,i.jsx)(n.p,{children:"To cherry-pick, for example, from 1.28.x:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"git fetch https://github.com/pantsbuild/pants 1.28.x"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"git checkout -b <new-branch-name> FETCH_HEAD"})}),"\n",(0,i.jsxs)(n.li,{children:["Find the commit SHA by running ",(0,i.jsx)(n.code,{children:"git log main"})," or looking in GitHub: ",(0,i.jsx)(n.a,{href:"https://github.com/pantsbuild/pants/commits/main",children:"https://github.com/pantsbuild/pants/commits/main"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"git cherry-pick <sha>"}),", using the SHA from the previous step."]}),"\n",(0,i.jsxs)(n.li,{children:["Open a pull request to merge into the release branch, e.g. ",(0,i.jsx)(n.code,{children:"1.28.x"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Do not push directly to the release branch. All changes should be added through a pull request."}),"\n",(0,i.jsxs)(n.p,{children:["After a commit has been cherry-picked, remove the ",(0,i.jsx)(n.code,{children:"needs-cherrypick"})," label and remove it from the release milestone."]}),"\n",(0,i.jsx)(n.h3,{id:"1-prepare-the-changelog",children:"1. Prepare the changelog"}),"\n",(0,i.jsxs)(n.p,{children:["Update the release page in ",(0,i.jsx)(n.code,{children:"src/python/pants/notes"})," for this release series, e.g. update ",(0,i.jsx)(n.code,{children:"src/python/pants/notes/2.2.x.md"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Run ",(0,i.jsx)(n.code,{children:"build-support/bin/changelog.py --prior 2.2.0.dev0 --new 2.2.0.dev1"})," with the relevant versions. This will generate the headers to copy into the release notes, along with a list of all commits since the last release."]}),"\n",(0,i.jsx)(n.p,{children:"Use your best judgment when classifying commits. If you are uncertain, you can either message the author on Slack or, in your PR, add a comment for the entry to ask for input from others."}),"\n",(0,i.jsx)(n.p,{children:"Each entry should have exactly one blank line between it. You are encouraged to fix typos and tweak PR titles for clarity to users."}),"\n",(0,i.jsxs)(n.admonition,{type:"caution",children:[(0,i.jsxs)(n.mdxAdmonitionTitle,{children:["Reminder: always do this against the ",(0,i.jsx)(n.code,{children:"main"})," branch"]}),(0,i.jsxs)(n.p,{children:["Even if you are preparing notes for a release candidate, always prepare the notes in a branch based on ",(0,i.jsx)(n.code,{children:"main"})," and, later, target your PR to merge with ",(0,i.jsx)(n.code,{children:"main"}),"."]})]}),"\n",(0,i.jsxs)(n.admonition,{title:"See any weird PR titles?",type:"note",children:[(0,i.jsx)(n.p,{children:"Sometimes, committers accidentally use the wrong title when squashing and merging because GitHub pulls the title from the commit title when there is only one commit."}),(0,i.jsx)(n.p,{children:'If you see a vague or strange title like "fix bug", open the original PR to see if the PR title is more descriptive. If it is, please use the more descriptive title instead.'})]}),"\n",(0,i.jsxs)(n.h3,{id:"2-update-contributorsmd",children:["2. Update ",(0,i.jsx)(n.code,{children:"CONTRIBUTORS.md"})]}),"\n",(0,i.jsxs)(n.p,{children:["Run ",(0,i.jsx)(n.code,{children:"./build-support/bin/contributors.sh"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Take note of any new contributors so that you can give a shoutout in the announcement email."}),"\n",(0,i.jsxs)(n.h3,{id:"3-dev-and-rc0---bump-the-version",children:["3. ",(0,i.jsx)(n.code,{children:"dev"})," and ",(0,i.jsx)(n.code,{children:"rc0"})," - bump the ",(0,i.jsx)(n.code,{children:"VERSION"})]}),"\n",(0,i.jsxs)(n.p,{children:["Change ",(0,i.jsx)(n.code,{children:"src/python/pants/VERSION"})," to the new release, e.g. 1.28.0.dev0."]}),"\n",(0,i.jsx)(n.h3,{id:"4-post-the-prep-to-github",children:"4. Post the prep to GitHub"}),"\n",(0,i.jsxs)(n.p,{children:["Open a pull request on GitHub to merge into ",(0,i.jsx)(n.code,{children:"main"}),". Post the PR to the #announce channel in Slack."]}),"\n",(0,i.jsx)(n.p,{children:"Merge once approved and green."}),"\n",(0,i.jsxs)(n.admonition,{title:"Watch out for any recently landed PRs",type:"caution",children:[(0,i.jsx)(n.p,{children:'From the time you put up your release prep until you hit "merge", be careful that no one merges any commits into main.'}),(0,i.jsxs)(n.p,{children:["If they do\u2014and you're doing a dev or ",(0,i.jsx)(n.code,{children:"rc0"})," release\u2014you should merge ",(0,i.jsx)(n.code,{children:"main"})," into your PR and update the changelog with their changes. It's okay if the changes were internal only, but any public changes must be added to the changelog."]}),(0,i.jsx)(n.p,{children:'Once you click "merge", it is safe for people to merge changes again.'})]}),"\n",(0,i.jsxs)(n.h3,{id:"5a-rc0---create-a-new-git-branch",children:["5a. ",(0,i.jsx)(n.code,{children:"rc0"})," - create a new Git branch"]}),"\n",(0,i.jsxs)(n.p,{children:["For example, if you're releasing ",(0,i.jsx)(n.code,{children:"1.28.0rc0"}),", create the branch ",(0,i.jsx)(n.code,{children:"1.28.x"})," by running the below. Make sure you are on your release commit before doing this."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ git checkout -b 1.28.x\n$ git push upstream 1.28.x\n"})}),"\n",(0,i.jsx)(n.h3,{id:"5b-release-candidates---cherry-pick-and-bump-the-version",children:"5b. release candidates - cherry-pick and bump the VERSION"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Checkout from ",(0,i.jsx)(n.code,{children:"main"})," into the release branch, e.g. ",(0,i.jsx)(n.code,{children:"1.28.x"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Cherry-pick the release prep using ",(0,i.jsx)(n.code,{children:"git cherry-pick <sha>"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Bump the ",(0,i.jsx)(n.code,{children:"VERSION"})," in ",(0,i.jsx)(n.code,{children:"src/python/pants/VERSION"}),", e.g. to ",(0,i.jsx)(n.code,{children:"1.28.0rc1"}),". Push this as a new commit directly to the release branch - you do not need to open a pull request."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"step-2-update-this-docs-site",children:"Step 2: Update this docs site"}),"\n",(0,i.jsxs)(n.h3,{id:"dev0---set-up-the-new-page",children:[(0,i.jsx)(n.code,{children:"dev0"})," - set up the new page"]}),"\n",(0,i.jsxs)(n.p,{children:["Create a new version of the docs. Go to ",(0,i.jsx)(n.a,{href:"https://dash.readme.io/project/pants",children:"dash.readme.io/project/pants"}),'. In the top left dropdown, where it says the current version, click "Manage versions". Click "Add new version" and use a "v" with the minor release number, e.g. "v1.28". Fork from the prior release.']}),"\n",(0,i.jsx)(n.p,{children:'Then, create a new page in the "Release notes" section titled with the release series, e.g. "1.28.x".'}),"\n",(0,i.jsx)(n.p,{children:"You can copy the prior release's page to get started. Update the bottom to point to the new changelog."}),"\n",(0,i.jsxs)(n.p,{children:["Update the URL slug to be ",(0,i.jsx)(n.code,{children:"release-notes-1-28-x"}),', for example. Press the drop-down on the blue "Save" button, then "Change page slug".']}),"\n",(0,i.jsx)(n.p,{children:'Finally, reorder the page in the "Release notes" section so that it shows up as the most recent.'}),"\n",(0,i.jsx)(n.h3,{id:"summarize-important-changes",children:"Summarize important changes"}),"\n",(0,i.jsx)(n.p,{children:"In a list of bullet points, briefly describe any important changes from your release."}),"\n",(0,i.jsx)(n.p,{children:"This is a bit subjective, but some things you may want to highlight:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"New features."}),"\n",(0,i.jsx)(n.li,{children:"Major bug fixes."}),"\n",(0,i.jsxs)(n.li,{children:["Substantial API changes.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'You do not need to highlight small changes like "Upgrade from ansiolors 2.10 to ansicolors 2.12". This is what the changelog is for.'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["If there are any docs explaining the new features, link to those by using readme.io's markdown variant of ",(0,i.jsx)(n.code,{children:"[Page title](doc:new-page)"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"You do not need to link to the original PRs in the summary, unless the PR has important documentation for users. The summary is only meant to give a highlight, whereas the changelog has the nitty-gritty details."}),"\n",(0,i.jsx)(n.h3,{id:"update-the-version-in-installing-pants",children:"Update the version in Installing Pants"}),"\n",(0,i.jsxs)(n.p,{children:["Update ",(0,i.jsx)(n.a,{href:"/2.4/docs/introduction/getting-started/installing-pants",children:"Installing Pants"})," to use the version you're releasing in the ",(0,i.jsx)(n.code,{children:"pants.toml"})," snippet."]}),"\n",(0,i.jsxs)(n.h3,{id:"stable-releases---update-the-default-docsite",children:[(0,i.jsx)(n.code,{children:"stable"})," releases - Update the default docsite"]}),"\n",(0,i.jsxs)(n.p,{children:['The first stable release of a branch should update the "default" version of the docsite. For example: when releasing the stable ',(0,i.jsx)(n.code,{children:"2.2.0"}),", the docsite would be changed to pointing from ",(0,i.jsx)(n.code,{children:"v2.1"})," to pointing to ",(0,i.jsx)(n.code,{children:"v2.2"})," by default."]}),"\n",(0,i.jsx)(n.admonition,{title:"Don't have edit access?",type:"caution",children:(0,i.jsx)(n.p,{children:'Ping someone in the #maintainers Slack channel to be added. Alternatively, you can "Suggest edits" in the top right corner.'})}),"\n",(0,i.jsx)(n.h2,{id:"step-3-wait-for-ci-to-build-the-wheels",children:"Step 3: Wait for CI to build the wheels"}),"\n",(0,i.jsxs)(n.p,{children:["Once you have merged the ",(0,i.jsx)(n.code,{children:"VERSION"})," bump\u2014which will be on ",(0,i.jsx)(n.code,{children:"main"})," for ",(0,i.jsx)(n.code,{children:"dev"})," and ",(0,i.jsx)(n.code,{children:"rc0"})," releases and the release branch for release candidates\u2014CI will start building the wheels you need to finish the release."]}),"\n",(0,i.jsxs)(n.p,{children:["Head to ",(0,i.jsx)(n.a,{href:"https://github.com/pantsbuild/pants/actions",children:"https://github.com/pantsbuild/pants/actions"}),' and find your relevant build. You need the "Build wheels and fs_util" jobs to pass.']}),"\n",(0,i.jsxs)(n.h2,{id:"step-4-run-releasesh",children:["Step 4: Run ",(0,i.jsx)(n.code,{children:"release.sh"})]}),"\n",(0,i.jsx)(n.p,{children:"First, ensure that you are on your release branch at your version bump commit."}),"\n",(0,i.jsx)(n.admonition,{title:"Tip: if new commits have landed after your release commit",type:"note",children:(0,i.jsxs)(n.p,{children:["You can reset to your release commit by running ",(0,i.jsx)(n.code,{children:"git rest --hard <sha>"}),"."]})}),"\n",(0,i.jsx)(n.p,{children:"Then, run:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ ./build-support/bin/release.sh\n"})}),"\n",(0,i.jsx)(n.p,{children:"This will first download the pre-built wheels built in CI and will publish them to PyPI. About 2-3 minutes in, the script will prompt you for your PGP password."}),"\n",(0,i.jsx)(n.p,{children:"We also release Pants a Pex via GitHub releases. Run this:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ PANTS_PEX_RELEASE=stable ./build-support/bin/release.sh\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Then go to ",(0,i.jsx)(n.a,{href:"https://github.com/pantsbuild/pants/tags",children:"https://github.com/pantsbuild/pants/tags"}),", find your release's tag, click ",(0,i.jsx)(n.code,{children:"Edit tag"}),", and upload the PEX located at ",(0,i.jsx)(n.code,{children:"dist/pants.<stable-version>.pex"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"step-5-test-the-release",children:"Step 5: Test the release"}),"\n",(0,i.jsx)(n.p,{children:"Run this script as a basic smoke test:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ ./build-support/bin/release.sh -t\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You should also ",(0,i.jsx)(n.a,{href:"https://pypi.org/pypi/pantsbuild.pants",children:"check PyPI"}),' to ensure everything looks good. Click "Release history" to find the version you released, then click it and confirm the changelog is correct on the "Project description" page and that the ',(0,i.jsx)(n.code,{children:"macOS"})," and ",(0,i.jsx)(n.code,{children:"manylinux"}),' wheels show up in the "Download files" page.']}),"\n",(0,i.jsx)(n.h2,{id:"step-6-announce-the-change",children:"Step 6: Announce the change"}),"\n",(0,i.jsxs)(n.p,{children:["Announce the release to ",(0,i.jsx)(n.a,{href:"https://groups.google.com/forum/#!forum/pants-devel",children:"pants-devel"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["You can get a contributor list by running the following, where ",(0,i.jsx)(n.code,{children:"<tag>"})," is the tag for the prior release (eg: ",(0,i.jsx)(n.code,{children:"release_1.28.0.dev0"}),"):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ ./build-support/bin/contributors.sh -s <tag>\n"})}),"\n",(0,i.jsx)(n.h3,{id:"sample-emails",children:"Sample emails"}),"\n",(0,i.jsxs)(n.admonition,{title:"Update these templates!",type:"danger",children:[(0,i.jsx)(n.p,{children:"Google Groups does not support markdown. You must manually create links and remove the markdown syntax."}),(0,i.jsx)(n.p,{children:'Also, make sure that you are using the correct version everywhere. When adding a link, use "Test this link" to ensure it loads properly.'})]}),"\n",(0,i.jsx)(n.p,{children:"Dev release:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Subject: [dev release] pantsbuild.pants 2.4.0.dev0\n\n\nThe first weekly dev release for the 2.4.x series is now available [on PyPI](https://pypi.org/project/pantsbuild.pants/2.4.0.dev0/).\n\nSee [here](https://www.pantsbuild.org/v2.4/docs/release-notes-2-4) for a summary of the 2.4.x series so far and a link to a more detailed changelog.\n\nThank you to this week's contributors:\n\n     6 Eustolia Palledino\n     4 Ahmad Wensel\n     2 Rae Efird\n     1 Niki Fitch\n\nAnd a special shout-out to first-time contributor Niki Fitch, with the PR [`Upgrade Rust to 1.63 (#9441)`](https://github.com/pantsbuild/pants/pull/9441). Thank you for your contribution!\n"})}),"\n",(0,i.jsx)(n.p,{children:"Release candidate:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Subject: [release candidate] pantsbuild.pants 2.4.0rc1\n\n\nThe second release candidate for 2.4.0 is now available [on PyPI](https://pypi.org/project/pantsbuild.pants/2.4.0rc1/).\n\nSee [here](https://www.pantsbuild.org/v2.4/docs/release-notes-2-4) for a summary of the 2.4.x series and a link to a more detailed changelog.\n\nThank you to everyone who tested the previous release, and thank you to the folks who contributed patches!\n\n   3 Niki Fitch\n   1 Mario Rozell\n"})}),"\n",(0,i.jsx)(n.p,{children:"Stable release:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Subject: [stable release] pantsbuild.pants 2.4.0\n\n\nThe first stable release of the 2.4.x series is now available [on PyPI](https://pypi.org/project/pantsbuild.pants/2.4.0/).\n\nSee [here](https://www.pantsbuild.org/v2.4/docs/release-notes-2-4) for a summary of the 2.4.x series and a link to a more detailed changelog.\n\nThanks to all of the contributors to the 2.4.x series!\n\n    Eustolia Palledino\n    Ahmad Wensel\n    Rae Efird\n    Niki Fitch\n    Mario Rozell\n"})})]})}function c(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},848193(e,n,t){t.d(n,{R:()=>a,x:()=>o});var s=t(830758);let i={},r=s.createContext(i);function a(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}},287297(e){e.exports=JSON.parse('{"id":"docs/contributions/releases/release-process","title":"Release process","description":"How to release a new version of pantsbuild.pants and its plugins.","source":"@site/versioned_docs/version-2.4/docs/contributions/releases/release-process.mdx","sourceDirName":"docs/contributions/releases","slug":"/docs/contributions/releases/release-process","permalink":"/2.4/docs/contributions/releases/release-process","draft":false,"unlisted":false,"editUrl":"https://github.com/pantsbuild/pants/edit/main/docs/docs/contributions/releases/release-process.mdx","tags":[],"version":"2.4","sidebarPosition":1,"frontMatter":{"title":"Release process","sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Release strategy","permalink":"/2.4/docs/contributions/releases/release-strategy"}}')}}]);