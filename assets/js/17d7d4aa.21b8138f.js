"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["496255"],{400346(e,t,n){n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var a=n(421803),i=n(886070),s=n(848193);let r={authors:["benjy"],tags:["ci","concepts","deployment"]},o="Better CI/CD caching with Pants",c={authorsImageUrls:[void 0]},l=[];function d(e){let t={a:"a",blockquote:"blockquote",li:"li",p:"p",ul:"ul",...(0,s.R)(),...e.components},{CaptionedImg:a}=t;return a||function(e,t){throw Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("CaptionedImg",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a,{src:n(852404).A,children:(0,i.jsx)(t.p,{children:"Terminal output of a Pants run that retrieved test results from a remote cache\ninstead of having to run the tests."})}),"\n","\n",(0,i.jsxs)(t.p,{children:["Pants is designed to utilize fine-grained caching to speed up builds. Users are often interested in how this interacts with CI providers' own caching features, which are necessary since CI jobs typically run in fresh containers, with no direct access to previous state. In particular, we get questions about how a remote caching service, such as that offered by ",(0,i.jsx)(t.a,{href:"https://toolchain.com/",children:"Toolchain"})," (full disclosure - that's where I work) relates to CI caching."]}),"\n",(0,i.jsx)(t.p,{children:"The topic of CI caching also came up on Twitter recently:"}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsx)(t.p,{children:"It's pretty crazy how inefficient most CI setups are. We're spending 99% of the time reinstalling 99% the same dependencies as last time and recompiling the same code as last time etc. How did we end up in this situation?"}),"\n",(0,i.jsxs)(t.p,{children:["\u2014 Erik Bernhardsson (@bernhardsson) ",(0,i.jsx)(t.a,{href:"https://twitter.com/bernhardsson/status/1550659837981343744?ref_src=twsrc%5Etfw",children:"July 23, 2022"})]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["To provide some info I recently wrote a ",(0,i.jsx)(t.a,{href:"https://dev.to/benjyw/better-cicd-caching-with-new-gen-build-systems-3aem",children:"post on dev.to"})," with some background on how the cache solutions offered by CI providers work, why they are often of limited benefit, and how a modern build system like Pants can support a much more effective caching paradigm."]}),"\n",(0,i.jsxs)(t.p,{children:["Head over to dev.to for the ",(0,i.jsx)(t.a,{href:"https://dev.to/benjyw/better-cicd-caching-with-new-gen-build-systems-3aem",children:"full post"}),", but in a nutshell:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"CI caches have major drawbacks because they are coarse-grained, so you waste a lot of time uploading and downloading data you don't actually need, and because they require you to manually compute a semantically correct cache key."}),"\n",(0,i.jsx)(t.li,{children:"Pants + a remote cache solves these problems with automatic reading and writing of fine-grained, intermediate and final build products against cache keys that are computed for you and guaranteed to be semantically correct."}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["If you're interested in learning more about Pants in general, caching in particular, and remote caching even more specifically, ",(0,i.jsx)(t.a,{href:"https://www.pantsbuild.org/docs/getting-help",children:"come say hi on Slack"}),"!"]})]})}function h(e={}){let{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},852404(e,t,n){n.d(t,{A:()=>a});let a=n.p+"assets/images/splash-e5cae4b9103d6cc4d3369a531a818632.png"},848193(e,t,n){n.d(t,{R:()=>r,x:()=>o});var a=n(830758);let i={},s=a.createContext(i);function r(e){let t=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(s.Provider,{value:t},e.children)}},421803(e){e.exports=JSON.parse('{"permalink":"/blog/2022/07/28/better-ci-cd-caching-with-pants","editUrl":"https://github.com/pantsbuild/pantsbuild.org/edit/main/blog/2022-07-28-better-ci-cd-caching-with-pants/index.mdx","source":"@site/blog/2022-07-28-better-ci-cd-caching-with-pants/index.mdx","title":"Better CI/CD caching with Pants","description":"Terminal output of a Pants run that retrieved test results from a remote cache","date":"2022-07-28T00:00:00.000Z","tags":[{"inline":true,"label":"ci","permalink":"/blog/tags/ci"},{"inline":true,"label":"concepts","permalink":"/blog/tags/concepts"},{"inline":true,"label":"deployment","permalink":"/blog/tags/deployment"}],"readingTime":1.75,"hasTruncateMarker":true,"authors":[{"name":"Benjy Weinberger","title":"Pants Co-creator and Maintainer","url":"https://github.com/benjyw","imageURL":"https://github.com/benjyw.png","key":"benjy","page":null}],"frontMatter":{"authors":["benjy"],"tags":["ci","concepts","deployment"]},"unlisted":false,"prevItem":{"title":"Optimizing Python + Docker deploys using Pants","permalink":"/blog/2022/08/02/optimizing-python-docker-deploys-using-pants"},"nextItem":{"title":"Pants 2.12: Improved performance for common cases, IDE support for Java and Scala","permalink":"/blog/2022/06/29/pants-2-12"}}')}}]);