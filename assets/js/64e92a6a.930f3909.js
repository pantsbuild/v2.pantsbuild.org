"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["97716"],{457328(e,r,t){t.r(r),t.d(r,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>p});var s=t(299961),n=t(886070),i=t(848193),d=t(989898),o=t(375002);let l={title:"python_source",description:"A single Python source file.\n"},c,a={},p=[{value:"<code>source</code>",id:"source",level:2},{value:"<code>dependencies</code>",id:"dependencies",level:2},{value:"<code>description</code>",id:"description",level:2},{value:"<code>interpreter_constraints</code>",id:"interpreter_constraints",level:2},{value:"<code>resolve</code>",id:"resolve",level:2},{value:"<code>restartable</code>",id:"restartable",level:2},{value:"<code>run_goal_use_sandbox</code>",id:"run_goal_use_sandbox",level:2},{value:"<code>skip_add_trailing_comma</code>",id:"skip_add_trailing_comma",level:2},{value:"<code>skip_autoflake</code>",id:"skip_autoflake",level:2},{value:"<code>skip_bandit</code>",id:"skip_bandit",level:2},{value:"<code>skip_black</code>",id:"skip_black",level:2},{value:"<code>skip_docformatter</code>",id:"skip_docformatter",level:2},{value:"<code>skip_flake8</code>",id:"skip_flake8",level:2},{value:"<code>skip_isort</code>",id:"skip_isort",level:2},{value:"<code>skip_mypy</code>",id:"skip_mypy",level:2},{value:"<code>skip_pydocstyle</code>",id:"skip_pydocstyle",level:2},{value:"<code>skip_pylint</code>",id:"skip_pylint",level:2},{value:"<code>skip_pyright</code>",id:"skip_pyright",level:2},{value:"<code>skip_pytype</code>",id:"skip_pytype",level:2},{value:"<code>skip_pyupgrade</code>",id:"skip_pyupgrade",level:2},{value:"<code>skip_ruff</code>",id:"skip_ruff",level:2},{value:"<code>skip_ruff_check</code>",id:"skip_ruff_check",level:2},{value:"<code>skip_ruff_format</code>",id:"skip_ruff_format",level:2},{value:"<code>skip_yapf</code>",id:"skip_yapf",level:2},{value:"<code>tags</code>",id:"tags",level:2}];function h(e){let r={a:"a",code:"code",em:"em",h2:"h2",hr:"hr",p:"p",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.p,{children:"A single Python source file."}),"\n",(0,n.jsxs)(r.p,{children:["Backend: ",(0,n.jsx)("span",{className:"color--primary",children:(0,n.jsx)(r.code,{children:"pants.backend.python"})})]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)("span",{className:o.A.options,children:[(0,n.jsx)(r.h2,{id:"source",children:(0,n.jsx)(r.code,{children:"source"})}),(0,n.jsxs)(d.A,{type_repr:"str",children:[(0,n.jsx)(r.p,{children:"A single file that belongs to this target."}),(0,n.jsxs)(r.p,{children:["Path is relative to the BUILD file's directory, e.g. ",(0,n.jsx)(r.code,{children:"source='example.ext'"}),"."]})]}),(0,n.jsx)(r.h2,{id:"dependencies",children:(0,n.jsx)(r.code,{children:"dependencies"})}),(0,n.jsxs)(d.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,n.jsxs)(r.p,{children:["Addresses to other targets that this target depends on, e.g. ",(0,n.jsx)(r.code,{children:"['helloworld/subdir:lib', 'helloworld/main.py:lib', '3rdparty:reqs#django']"}),"."]}),(0,n.jsxs)(r.p,{children:["This augments any dependencies inferred by Pants, such as by analyzing your imports. Use ",(0,n.jsx)(r.code,{children:"pants dependencies"})," or ",(0,n.jsx)(r.code,{children:"pants peek"})," on this target to get the final result."]}),(0,n.jsxs)(r.p,{children:["See ",(0,n.jsx)(r.a,{href:"https://www.pantsbuild.org/2.23/docs/using-pants/key-concepts/targets-and-build-files",children:"https://www.pantsbuild.org/2.23/docs/using-pants/key-concepts/targets-and-build-files"})," for more about how addresses are formed, including for generated targets. You can also run ",(0,n.jsx)(r.code,{children:"pants list ::"})," to find all addresses in your project, or ",(0,n.jsx)(r.code,{children:"pants list dir"})," to find all addresses defined in that directory."]}),(0,n.jsxs)(r.p,{children:["If the target is in the same BUILD file, you can leave off the BUILD file path, e.g. ",(0,n.jsx)(r.code,{children:":tgt"})," instead of ",(0,n.jsx)(r.code,{children:"helloworld/subdir:tgt"}),". For generated first-party addresses, use ",(0,n.jsx)(r.code,{children:"./"})," for the file path, e.g. ",(0,n.jsx)(r.code,{children:"./main.py:tgt"}),"; for all other generated targets, use ",(0,n.jsx)(r.code,{children:":tgt#generated_name"}),"."]}),(0,n.jsxs)(r.p,{children:["You may exclude dependencies by prefixing with ",(0,n.jsx)(r.code,{children:"!"}),", e.g. ",(0,n.jsx)(r.code,{children:"['!helloworld/subdir:lib', '!./sibling.txt']"}),". Ignores are intended for false positives with dependency inference; otherwise, simply leave off the dependency from the BUILD file."]})]}),(0,n.jsx)(r.h2,{id:"description",children:(0,n.jsx)(r.code,{children:"description"})}),(0,n.jsxs)(d.A,{type_repr:"str | None",default_repr:"None",children:[(0,n.jsx)(r.p,{children:"A human-readable description of the target."}),(0,n.jsxs)(r.p,{children:["Use ",(0,n.jsx)(r.code,{children:"pants list --documented ::"})," to see all targets with descriptions."]})]}),(0,n.jsx)(r.h2,{id:"interpreter_constraints",children:(0,n.jsx)(r.code,{children:"interpreter_constraints"})}),(0,n.jsxs)(d.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,n.jsx)(r.p,{children:"The Python interpreters this code is compatible with."}),(0,n.jsxs)(r.p,{children:["Each element should be written in pip-style format, e.g. ",(0,n.jsx)(r.code,{children:"CPython==2.7.*"})," or ",(0,n.jsx)(r.code,{children:"CPython>=3.6,<4"}),". You can leave off ",(0,n.jsx)(r.code,{children:"CPython"})," as a shorthand, e.g. ",(0,n.jsx)(r.code,{children:">=2.7"})," will be expanded to ",(0,n.jsx)(r.code,{children:"CPython>=2.7"}),"."]}),(0,n.jsxs)(r.p,{children:["Specify more than one element to OR the constraints, e.g. ",(0,n.jsx)(r.code,{children:"['PyPy==3.7.*', 'CPython==3.7.*']"})," means either PyPy 3.7 ",(0,n.jsx)(r.em,{children:"or"})," CPython 3.7."]}),(0,n.jsxs)(r.p,{children:["If the field is not set, it will default to the option ",(0,n.jsx)(r.code,{children:"[python].interpreter_constraints"}),"."]}),(0,n.jsxs)(r.p,{children:["See ",(0,n.jsx)(r.a,{href:"https://www.pantsbuild.org/2.23/docs/python/overview/interpreter-compatibility",children:"https://www.pantsbuild.org/2.23/docs/python/overview/interpreter-compatibility"})," for how these interpreter constraints are merged with the constraints of dependencies."]})]}),(0,n.jsx)(r.h2,{id:"resolve",children:(0,n.jsx)(r.code,{children:"resolve"})}),(0,n.jsxs)(d.A,{type_repr:"str | None",default_repr:"None",children:[(0,n.jsxs)(r.p,{children:["The resolve from ",(0,n.jsx)(r.code,{children:"[python].resolves"})," to use."]}),(0,n.jsxs)(r.p,{children:["If not defined, will default to ",(0,n.jsx)(r.code,{children:"[python].default_resolve"}),"."]}),(0,n.jsxs)(r.p,{children:["All dependencies must share the same value for their ",(0,n.jsx)(r.code,{children:"resolve"})," field."]})]}),(0,n.jsx)(r.h2,{id:"restartable",children:(0,n.jsx)(r.code,{children:"restartable"})}),(0,n.jsx)(d.A,{type_repr:"bool",default_repr:"False",children:(0,n.jsxs)(r.p,{children:["If true, runs of this target with the ",(0,n.jsx)(r.code,{children:"run"})," goal may be interrupted and restarted when its input files change."]})}),(0,n.jsx)(r.h2,{id:"run_goal_use_sandbox",children:(0,n.jsx)(r.code,{children:"run_goal_use_sandbox"})}),(0,n.jsxs)(d.A,{type_repr:"bool | None",default_repr:"None",children:[(0,n.jsxs)(r.p,{children:["Whether to use a sandbox when ",(0,n.jsx)(r.code,{children:"run"}),"ning this target. Defaults to ",(0,n.jsx)(r.code,{children:"[python].default_run_goal_use_sandbox"}),"."]}),(0,n.jsxs)(r.p,{children:["If true, runs of this target with the ",(0,n.jsx)(r.code,{children:"run"})," goal will copy the needed first-party sources into a temporary sandbox and run from there."]}),(0,n.jsxs)(r.p,{children:["If false, runs of this target with the ",(0,n.jsx)(r.code,{children:"run"})," goal will use the in-repo sources directly."]}),(0,n.jsxs)(r.p,{children:["Note that this field only applies when running a target with the ",(0,n.jsx)(r.code,{children:"run"})," goal. No other goals (such as ",(0,n.jsx)(r.code,{children:"test"}),", if applicable) consult this field."]}),(0,n.jsxs)(r.p,{children:["The former mode is more hermetic, and is closer to building and running the source as it were packaged in a ",(0,n.jsx)(r.code,{children:"pex_binary"}),'. Additionally, it may be necessary if your sources depend transitively on "generated" files which will be materialized in the sandbox in a source root, but are not in-repo.']}),(0,n.jsxs)(r.p,{children:["The latter mode is similar to creating, activating, and using a virtual environment when running your files. It may also be necessary if the source being run writes files into the repo and computes their location relative to the executed files. Django's ",(0,n.jsx)(r.code,{children:"makemigrations"})," command is an example of such a process."]})]}),(0,n.jsx)(r.h2,{id:"skip_add_trailing_comma",children:(0,n.jsx)(r.code,{children:"skip_add_trailing_comma"})}),(0,n.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.experimental.python.lint.add_trailing_comma",children:(0,n.jsx)(r.p,{children:"If true, don't run add-trailing-comma on this target's code."})}),(0,n.jsx)(r.h2,{id:"skip_autoflake",children:(0,n.jsx)(r.code,{children:"skip_autoflake"})}),(0,n.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.python.lint.autoflake",children:(0,n.jsx)(r.p,{children:"If true, don't run Autoflake on this target's code."})}),(0,n.jsx)(r.h2,{id:"skip_bandit",children:(0,n.jsx)(r.code,{children:"skip_bandit"})}),(0,n.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.python.lint.bandit",children:(0,n.jsx)(r.p,{children:"If true, don't run Bandit on this target's code."})}),(0,n.jsx)(r.h2,{id:"skip_black",children:(0,n.jsx)(r.code,{children:"skip_black"})}),(0,n.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.python.lint.black",children:(0,n.jsx)(r.p,{children:"If true, don't run Black on this target's code."})}),(0,n.jsx)(r.h2,{id:"skip_docformatter",children:(0,n.jsx)(r.code,{children:"skip_docformatter"})}),(0,n.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.python.lint.docformatter",children:(0,n.jsx)(r.p,{children:"If true, don't run Docformatter on this target's code."})}),(0,n.jsx)(r.h2,{id:"skip_flake8",children:(0,n.jsx)(r.code,{children:"skip_flake8"})}),(0,n.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.python.lint.flake8",children:(0,n.jsx)(r.p,{children:"If true, don't run Flake8 on this target's code."})}),(0,n.jsx)(r.h2,{id:"skip_isort",children:(0,n.jsx)(r.code,{children:"skip_isort"})}),(0,n.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.python.lint.isort",children:(0,n.jsx)(r.p,{children:"If true, don't run isort on this target's code."})}),(0,n.jsx)(r.h2,{id:"skip_mypy",children:(0,n.jsx)(r.code,{children:"skip_mypy"})}),(0,n.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.python.typecheck.mypy",children:(0,n.jsx)(r.p,{children:"If true, don't run MyPy on this target's code."})}),(0,n.jsx)(r.h2,{id:"skip_pydocstyle",children:(0,n.jsx)(r.code,{children:"skip_pydocstyle"})}),(0,n.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.python.lint.pydocstyle",children:(0,n.jsx)(r.p,{children:"If true, don't run pydocstyle on this target's code."})}),(0,n.jsx)(r.h2,{id:"skip_pylint",children:(0,n.jsx)(r.code,{children:"skip_pylint"})}),(0,n.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.python.lint.pylint",children:(0,n.jsx)(r.p,{children:"If true, don't run Pylint on this target's code."})}),(0,n.jsx)(r.h2,{id:"skip_pyright",children:(0,n.jsx)(r.code,{children:"skip_pyright"})}),(0,n.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.experimental.python.typecheck.pyright",children:(0,n.jsx)(r.p,{children:"If true, don't run Pyright on this target's code."})}),(0,n.jsx)(r.h2,{id:"skip_pytype",children:(0,n.jsx)(r.code,{children:"skip_pytype"})}),(0,n.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.experimental.python.typecheck.pytype",children:(0,n.jsx)(r.p,{children:"If true, don't run pytype on this target's code."})}),(0,n.jsx)(r.h2,{id:"skip_pyupgrade",children:(0,n.jsx)(r.code,{children:"skip_pyupgrade"})}),(0,n.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.python.lint.pyupgrade",children:(0,n.jsx)(r.p,{children:"If true, don't run pyupgrade on this target's code."})}),(0,n.jsx)(r.h2,{id:"skip_ruff",children:(0,n.jsx)(r.code,{children:"skip_ruff"})}),(0,n.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.experimental.python.lint.ruff.check",children:(0,n.jsx)(r.p,{children:"If True, do not run any Ruff tools on this target's code."})}),(0,n.jsx)(r.h2,{id:"skip_ruff_check",children:(0,n.jsx)(r.code,{children:"skip_ruff_check"})}),(0,n.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.experimental.python.lint.ruff.check",children:(0,n.jsx)(r.p,{children:"If true, don't run the ruff checker on this target's code."})}),(0,n.jsx)(r.h2,{id:"skip_ruff_format",children:(0,n.jsx)(r.code,{children:"skip_ruff_format"})}),(0,n.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.experimental.python.lint.ruff.format",children:(0,n.jsx)(r.p,{children:"If true, don't run the ruff formatter on this target's code."})}),(0,n.jsx)(r.h2,{id:"skip_yapf",children:(0,n.jsx)(r.code,{children:"skip_yapf"})}),(0,n.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.python.lint.yapf",children:(0,n.jsx)(r.p,{children:"If true, don't run yapf on this target's code."})}),(0,n.jsx)(r.h2,{id:"tags",children:(0,n.jsx)(r.code,{children:"tags"})}),(0,n.jsxs)(d.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,n.jsx)(r.p,{children:"Arbitrary strings to describe a target."}),(0,n.jsxs)(r.p,{children:["For example, you may tag some test targets with 'integration_test' so that you could run ",(0,n.jsx)(r.code,{children:"pants --tag='integration_test' test ::"})," to only run on targets with that tag."]})]})]})]})}function u(e={}){let{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},375002(e,r,t){t.d(r,{A:()=>s});let s={options:"options_nrbo"}},989898(e,r,t){t.d(r,{A:()=>n});var s=t(886070);function n({children:e,type_repr:r,default_repr:t,backend:n}){return(0,s.jsxs)("div",{className:"margin-bottom--lg",children:[(0,s.jsx)("code",{style:{color:"var(--pants-reference-option-repr)"},children:r}),(0,s.jsx)("br",{}),(0,s.jsxs)("div",{style:{paddingLeft:"2em"},children:[t&&(0,s.jsxs)("span",{children:["default:"," ",(0,s.jsx)("code",{style:{color:"var(--ifm-color-success)"},children:t})]}),!t&&(0,s.jsx)("span",{style:{color:"var(--ifm-color-success)"},children:"required"}),n&&(0,s.jsxs)("div",{children:["backend:"," ",(0,s.jsx)("code",{style:{color:"var(--ifm-color-success)"},children:n})]}),e]})]})}},848193(e,r,t){t.d(r,{R:()=>d,x:()=>o});var s=t(830758);let n={},i=s.createContext(n);function d(e){let r=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:d(e.components),s.createElement(i.Provider,{value:r},e.children)}},299961(e){e.exports=JSON.parse('{"id":"reference/targets/python_source","title":"python_source","description":"A single Python source file.\\n","source":"@site/versioned_docs/version-2.23/reference/targets/python_source.mdx","sourceDirName":"reference/targets","slug":"/reference/targets/python_source","permalink":"/2.23/reference/targets/python_source","draft":false,"unlisted":false,"tags":[],"version":"2.23","frontMatter":{"title":"python_source","description":"A single Python source file.\\n"},"sidebar":"referenceSidebar","previous":{"title":"python_requirements","permalink":"/2.23/reference/targets/python_requirements"},"next":{"title":"python_sources","permalink":"/2.23/reference/targets/python_sources"}}')}}]);