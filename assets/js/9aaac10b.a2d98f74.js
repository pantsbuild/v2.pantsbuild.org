"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["77926"],{719802(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>m,frontMatter:()=>s,metadata:()=>o,toc:()=>d});var o=t(466212),i=t(886070),a=t(848193),r=t(930250);let s={authors:["benjy"],tags:["concepts"]},c="The monorepo approach to code management",l={authorsImageUrls:[void 0]},d=[];function h(e){let n={a:"a",hr:"hr",p:"p",...(0,a.R)(),...e.components},{CaptionedImg:o}=n;return o||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("CaptionedImg",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o,{src:t(979930).A,children:(0,i.jsxs)(n.p,{children:["Photo by ",(0,i.jsx)(n.a,{href:"https://unsplash.com/@killerfvith?utm_source=ghost&utm_medium=referral&utm_campaign=api-credit",children:"Alex\nwong"}),"\n/\n",(0,i.jsx)(n.a,{href:"https://unsplash.com/?utm_source=ghost&utm_medium=referral&utm_campaign=api-credit",children:"Unsplash"})]})}),"\n",(0,i.jsx)(n.p,{children:"If you're responsible for your organization's codebase architecture, then at some point you have to make some emphatic choices about how to manage this growth in a scalable way. There are two common architectural alternatives to choose from..."}),"\n","\n",(0,i.jsx)(r.A,{type:"info",icon:"\u{1F4F0}",title:"",children:(0,i.jsxs)(n.p,{children:["This article was originally published by Software Development Times (",(0,i.jsx)(n.a,{href:"https://sdtimes.com/softwaredev/the-monorepo-approach-to-code-management/",children:"January\n18,\n2022"}),").\nReprinted with permission."]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"Codebases are as diverse, unique and interesting as the people who work on them. But almost all of them have this in common: they grow over time (the codebases, not the people). Teams expand, requirements grow, and time, of course, marches on; and so we end up with more developers writing more code to do more things. And while we've all experienced the joy of deleting large chunks of code, that rarely offsets the overall expansion of our codebases."}),"\n",(0,i.jsx)(n.p,{children:"If you're responsible for your organization's codebase architecture, then at some point you have to make some emphatic choices about how to manage this growth in a scalable way. \xa0There are two common architectural alternatives to choose from."}),"\n",(0,i.jsx)(n.p,{children:'One is the "multi-repo" architecture, in which we split the codebase into increasing numbers of small repos, along subteam or project boundaries. The other is the "monorepo," in which we maintain one large, growing repository containing code for many projects and libraries, with multiple teams collaborating across it.'}),"\n",(0,i.jsx)(n.p,{children:"The multi-repo approach can initially be tempting, because it seems so easy to implement. We just create more repos as we need them! We don't, at first, appear to need any special tooling, and we can give individual teams more autonomy in how they manage their code."}),"\n",(0,i.jsx)(n.p,{children:"Unfortunately, in practice the multi-repo architecture often leads to a brittle, inconsistent and change-resistant codebase. This in turn can encourage siloing in the engineering organization itself. In contrast, and perhaps counterintuitively, the monorepo approach is frequently a better, more flexible, more collaborative, long-term scaling solution."}),"\n",(0,i.jsx)(n.p,{children:"Why is this the case? Consider that the hard problem in codebase architecture involves managing changes in the presence of dependencies, and vice versa. And in a multi-repo architecture, repos consume code from other repos via published, versioned artifacts, which makes change propagation much harder."}),"\n",(0,i.jsx)(n.p,{children:"Specifically, what happens when we, the owners of repo A, need some changes in a consumed repo B? First we must find the gatekeepers of repo B and convince them to accept and publish the change under a new version. Then, in an ideal world, someone would find all the other consumers of repo B, upgrade them to this new version, and republish them. And now we must find the consumers of those initial consumers, upgrade and republish *them* against the new version, and so on, recursively and ad nauseam."})]})}function m(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},635363(e,n,t){t.d(n,{A:()=>o});let o={admonition:"admonition_LZeC",admonitionHeading:"admonitionHeading_SJYM",admonitionIcon:"admonitionIcon_iulS",admonitionContent:"admonitionContent_NJOy"}},979930(e,n,t){t.d(n,{A:()=>o});let o=t.p+"assets/images/splash-468adbc8f8263e23a40d34ee2c98e9e4.jpg"},355923(e,n,t){t.d(n,{A:()=>i});var o=t(886070);function i(e){return(0,o.jsx)("svg",{viewBox:"0 0 12 16",...e,children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"})})}t(830758)},606632(e,n,t){t.d(n,{A:()=>i});var o=t(886070);function i(e){return(0,o.jsx)("svg",{viewBox:"0 0 14 16",...e,children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})})}t(830758)},639932(e,n,t){t.d(n,{A:()=>i});var o=t(886070);function i(e){return(0,o.jsx)("svg",{viewBox:"0 0 14 16",...e,children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})})}t(830758)},176023(e,n,t){t.d(n,{A:()=>i});var o=t(886070);function i(e){return(0,o.jsx)("svg",{viewBox:"0 0 12 16",...e,children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})})}t(830758)},545098(e,n,t){t.d(n,{A:()=>i});var o=t(886070);function i(e){return(0,o.jsx)("svg",{viewBox:"0 0 16 16",...e,children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})})}t(830758)},980921(e,n,t){t.d(n,{A:()=>d});var o=t(886070);t(830758);var i=t(313526),a=t(911212),r=t(635363);function s({type:e,className:n,children:t}){return(0,o.jsx)("div",{className:(0,i.A)(a.G.common.admonition,a.G.common.admonitionType(e),r.A.admonition,n),children:t})}function c({icon:e,title:n}){return(0,o.jsxs)("div",{className:r.A.admonitionHeading,children:[(0,o.jsx)("span",{className:r.A.admonitionIcon,children:e}),n]})}function l({children:e}){return e?(0,o.jsx)("div",{className:r.A.admonitionContent,children:e}):null}function d(e){let{type:n,icon:t,title:i,children:a,className:r}=e;return(0,o.jsxs)(s,{type:n,className:r,children:[i||t?(0,o.jsx)(c,{title:i,icon:t}):null,(0,o.jsx)(l,{children:a})]})}},343822(e,n,t){t.d(n,{A:()=>l});var o=t(886070);t(830758);var i=t(313526),a=t(680754),r=t(980921),s=t(545098);let c={icon:(0,o.jsx)(s.A,{}),title:(0,o.jsx)(a.A,{id:"theme.admonition.caution",description:"The default label used for the Caution admonition (:::caution)",children:"caution"})};function l(e){return(0,o.jsx)(r.A,{...c,...e,className:(0,i.A)("alert alert--warning",e.className),children:e.children})}},284964(e,n,t){t.d(n,{A:()=>l});var o=t(886070);t(830758);var i=t(313526),a=t(680754),r=t(980921),s=t(355923);let c={icon:(0,o.jsx)(s.A,{}),title:(0,o.jsx)(a.A,{id:"theme.admonition.danger",description:"The default label used for the Danger admonition (:::danger)",children:"danger"})};function l(e){return(0,o.jsx)(r.A,{...c,...e,className:(0,i.A)("alert alert--danger",e.className),children:e.children})}},107407(e,n,t){t.d(n,{A:()=>l});var o=t(886070);t(830758);var i=t(313526),a=t(680754),r=t(980921),s=t(606632);let c={icon:(0,o.jsx)(s.A,{}),title:(0,o.jsx)(a.A,{id:"theme.admonition.info",description:"The default label used for the Info admonition (:::info)",children:"info"})};function l(e){return(0,o.jsx)(r.A,{...c,...e,className:(0,i.A)("alert alert--info",e.className),children:e.children})}},871151(e,n,t){t.d(n,{A:()=>l});var o=t(886070);t(830758);var i=t(313526),a=t(680754),r=t(980921),s=t(639932);let c={icon:(0,o.jsx)(s.A,{}),title:(0,o.jsx)(a.A,{id:"theme.admonition.note",description:"The default label used for the Note admonition (:::note)",children:"note"})};function l(e){return(0,o.jsx)(r.A,{...c,...e,className:(0,i.A)("alert alert--secondary",e.className),children:e.children})}},917722(e,n,t){t.d(n,{A:()=>l});var o=t(886070);t(830758);var i=t(313526),a=t(680754),r=t(980921),s=t(176023);let c={icon:(0,o.jsx)(s.A,{}),title:(0,o.jsx)(a.A,{id:"theme.admonition.tip",description:"The default label used for the Tip admonition (:::tip)",children:"tip"})};function l(e){return(0,o.jsx)(r.A,{...c,...e,className:(0,i.A)("alert alert--success",e.className),children:e.children})}},399455(e,n,t){t.d(n,{A:()=>l});var o=t(886070);t(830758);var i=t(313526),a=t(680754),r=t(980921),s=t(545098);let c={icon:(0,o.jsx)(s.A,{}),title:(0,o.jsx)(a.A,{id:"theme.admonition.warning",description:"The default label used for the Warning admonition (:::warning)",children:"warning"})};function l(e){return(0,o.jsx)(r.A,{...c,...e,className:(0,i.A)("alert alert--warning",e.className),children:e.children})}},769767(e,n,t){t.d(n,{A:()=>m});var o=t(886070);t(830758);var i=t(871151),a=t(917722),r=t(107407),s=t(399455),c=t(284964),l=t(343822);let d={note:i.A,tip:a.A,info:r.A,warning:s.A,danger:c.A},h={secondary:e=>(0,o.jsx)(i.A,{title:"secondary",...e}),important:e=>(0,o.jsx)(r.A,{title:"important",...e}),success:e=>(0,o.jsx)(a.A,{title:"success",...e}),caution:l.A},m={...d,...h}},930250(e,n,t){t.d(n,{A:()=>r});var o=t(886070);t(830758);var i=t(946586),a=t(769767);function r(e){var n;let t,r=(0,i.c)(e),s=(n=r.type,(t=a.A[n])||(console.warn(`No admonition component found for admonition type "${n}". Using Info as fallback.`),a.A.info));return(0,o.jsx)(s,{...r})}},946586(e,n,t){t.d(n,{c:()=>a});var o=t(886070),i=t(830758);function a(e){var n;let t,a,r,{mdxAdmonitionTitle:s,rest:c}=(n=e.children,a=(t=i.Children.toArray(n)).find(e=>i.isValidElement(e)&&"mdxAdmonitionTitle"===e.type),r=t.filter(e=>e!==a),{mdxAdmonitionTitle:a?.props.children,rest:r.length>0?(0,o.jsx)(o.Fragment,{children:r}):null}),l=e.title??s;return{...e,...l&&{title:l},children:c}}},848193(e,n,t){t.d(n,{R:()=>r,x:()=>s});var o=t(830758);let i={},a=o.createContext(i);function r(e){let n=o.useContext(a);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(a.Provider,{value:n},e.children)}},466212(e){e.exports=JSON.parse('{"permalink":"/blog/2022/03/09/the-monorepo-approach-to-code-management","editUrl":"https://github.com/pantsbuild/pantsbuild.org/edit/main/blog/2022-03-09-the-monorepo-approach-to-code-management/index.mdx","source":"@site/blog/2022-03-09-the-monorepo-approach-to-code-management/index.mdx","title":"The monorepo approach to code management","description":"Photo by [Alex","date":"2022-03-09T00:00:00.000Z","tags":[{"inline":true,"label":"concepts","permalink":"/blog/tags/concepts"}],"readingTime":2.51,"hasTruncateMarker":true,"authors":[{"name":"Benjy Weinberger","title":"Pants Co-creator and Maintainer","url":"https://github.com/benjyw","imageURL":"https://github.com/benjyw.png","key":"benjy","page":null}],"frontMatter":{"authors":["benjy"],"tags":["concepts"]},"unlisted":false,"prevItem":{"title":"Effective monorepos with Pants","permalink":"/blog/2022/03/15/effective-monorepos-with-pants"},"nextItem":{"title":"Pants 2.10 adds Apache Thrift support for Python","permalink":"/blog/2022/03/07/thrift-python"}}')}}]);