"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["331121"],{149444(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>d});var t=s(364268),i=s(886070),o=s(848193);let r={title:"Contribution overview",sidebar_position:0},a,l={},d=[{value:"Documentation Fixes",id:"documentation-fixes",level:2},{value:"Pants&#39;s tech stack",id:"pantss-tech-stack",level:2},{value:"First, share your plan",id:"first-share-your-plan",level:2},{value:"Design docs",id:"design-docs",level:2},{value:"Developing your change",id:"developing-your-change",level:2},{value:"Opening a pull request",id:"opening-a-pull-request",level:2},{value:"CI",id:"ci",level:3},{value:"Review feedback",id:"review-feedback",level:3},{value:"Release notes",id:"release-notes",level:2}];function c(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"The flow for making changes to Pants."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:["We welcome contributions of all types: from fixing typos to bug fixes to new features. For further questions about any of the below, please refer to the ",(0,i.jsx)(n.a,{href:"/community/members",children:"community overview"}),"."]}),"\n",(0,i.jsxs)(n.admonition,{title:"Help wanted: identifying bad error messages",type:"tip",children:[(0,i.jsx)(n.p,{children:"We strive\u2014but sometimes fail\u2014to make every error message easy to understand and to give insight into what went wrong and how to fix it."}),(0,i.jsxs)(n.p,{children:["If you ever encounter a confusing or mediocre error message, we would love your help to identify the error message. Please open a ",(0,i.jsx)(n.a,{href:"https://github.com/pantsbuild/pants/issues",children:"GitHub issue"})," with the original Pants command, the error message, and what you found confusing or think could be improved."]}),(0,i.jsx)(n.p,{children:"(If you'd be interested in then changing the code, we'd be happy to point you in the right direction!)"})]}),"\n",(0,i.jsx)(n.h2,{id:"documentation-fixes",children:"Documentation Fixes"}),"\n",(0,i.jsxs)(n.p,{children:["To suggest edits to Pants documentation, fork the ",(0,i.jsx)(n.a,{href:"https://github.com/pantsbuild/pants",children:"Pants repository"}),", make changes to files in the ",(0,i.jsx)(n.code,{children:"docs/"})," directory, and submit a PR against the ",(0,i.jsx)(n.code,{children:"main"})," branch. Address feedback from maintainers and, once approved, your changes will be incorporated into the official documentation."]}),"\n",(0,i.jsx)(n.h2,{id:"pantss-tech-stack",children:"Pants's tech stack"}),"\n",(0,i.jsx)(n.p,{children:"Most of Pants is written in Python 3. The majority of contributions touch this Python codebase."}),"\n",(0,i.jsx)(n.p,{children:"We rely on several Python features that you will want to acquaint yourself with:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://mypy.readthedocs.io/en/stable/",children:"Type hints and MyPy"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://realpython.com/python-data-classes/",children:"Dataclasses"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.a,{href:"https://www.python.org/dev/peps/pep-0492",children:[(0,i.jsx)(n.code,{children:"async"}),"/",(0,i.jsx)(n.code,{children:"await"})," coroutines"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["We do ",(0,i.jsx)(n.em,{children:"not"})," use ",(0,i.jsx)(n.code,{children:"asyncio"}),". The scheduler is implemented in Rust. We only use ",(0,i.jsx)(n.code,{children:"async"})," coroutines."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://realpython.com/primer-on-python-decorators/",children:"Decorators"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.geeksforgeeks.org/comprehensions-in-python/",children:"Comprehensions"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Pants's engine is written in Rust. See ",(0,i.jsx)(n.a,{href:"/2.26/docs/contributions/development/developing-rust",children:"Developing Rust"})," for a guide on making changes to the internals of Pants's engine."]}),"\n",(0,i.jsx)(n.h2,{id:"first-share-your-plan",children:"First, share your plan"}),"\n",(0,i.jsx)(n.p,{children:"Before investing your time into a code change, it helps to share your interest. This will allow us to give you initial feedback that will save you time, such as pointing you to related code."}),"\n",(0,i.jsxs)(n.p,{children:["To share your plan, please either open a ",(0,i.jsx)(n.a,{href:"https://github.com/pantsbuild/pants/issues",children:"GitHub issue"})," or message us on ",(0,i.jsx)(n.a,{href:"/community/getting-help#slack",children:"Slack"})," (you can start with the #general channel). Briefly describe the change you'd like to make, including a motivation for the change."]}),"\n",(0,i.jsx)(n.p,{children:'If we do not respond within 24 business hours, please gently ping us by commenting "ping" on your GitHub issue or messaging on Slack asking if someone could please take a look.'}),"\n",(0,i.jsxs)(n.admonition,{title:'Tip: Can you split out any "prework"?',type:"note",children:[(0,i.jsx)(n.p,{children:"If your change is big, such as adding a new feature, it can help to split it up into multiple pull requests. This makes it easier for us to review and to get passing CI."}),(0,i.jsx)(n.p,{children:"This is a reason we encourage you to share your plan with us - we can help you to scope out if it would make sense to split into multiple PRs."})]}),"\n",(0,i.jsx)(n.h2,{id:"design-docs",children:"Design docs"}),"\n",(0,i.jsx)(n.p,{children:"Changes that substantially impact the user experience, APIs, design or implementation, may benefit from a design doc that serves as a basis for discussion."}),"\n",(0,i.jsxs)(n.p,{children:["We store our design docs in ",(0,i.jsx)(n.a,{href:"https://drive.google.com/drive/folders/1LtA1EVPvalmfQ5AIDOqGRR3LV86_qCRZ",children:"this Google Drive folder"}),". If you want to write a design doc, ",(0,i.jsx)(n.a,{href:"/community/getting-help",children:"let us know"})," and if necessary we can give you write access to that folder."]}),"\n",(0,i.jsx)(n.p,{children:"We don't currently have any guidelines on the structure or format of design docs, so write those as you see fit."}),"\n",(0,i.jsx)(n.h2,{id:"developing-your-change",children:"Developing your change"}),"\n",(0,i.jsxs)(n.p,{children:["To begin, ",(0,i.jsx)(n.a,{href:"/2.26/docs/contributions/development/setting-up-pants",children:"set up Pants on your local machine"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"To run a test, run:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ pants test src/python/pants/util/frozendict_test.py\n"})}),"\n",(0,i.jsx)(n.p,{children:"Periodically, you will want to run MyPy and the autoformatters and linters:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Format un-committed changes\n$ pants --changed-since=HEAD fmt\n\n# Run the pre-push checks, including `check` and `lint`\n$ build-support/githooks/pre-push\n"})}),"\n",(0,i.jsxs)(n.p,{children:["See our ",(0,i.jsx)(n.a,{href:"/2.26/docs/contributions/development/style-guide",children:"Style guide"})," for some Python conventions we follow."]}),"\n",(0,i.jsxs)(n.admonition,{title:"You can share works in progress!",type:"note",children:[(0,i.jsx)(n.p,{children:"You do not need to fully finish your change before asking for feedback. We'd be eager to help you while iterating."}),(0,i.jsxs)(n.p,{children:['If doing this, please open your pull request as a "Draft" and prefix your PR title with "WIP". Then, comment on the PR asking for feedback and/or post a link to the PR in ',(0,i.jsx)(n.a,{href:"/community/members",children:"Slack"}),"."]})]}),"\n",(0,i.jsx)(n.h2,{id:"opening-a-pull-request",children:"Opening a pull request"}),"\n",(0,i.jsx)(n.p,{children:"When opening a pull request, start by providing a concise and descriptive title. It's okay if you aren't sure what to put - we can help you to reword it."}),"\n",(0,i.jsx)(n.p,{children:"Good titles:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Fix typo in ",(0,i.jsx)(n.code,{children:"strutil.py"})]}),"\n",(0,i.jsx)(n.li,{children:"Add Thrift code generator for Python"}),"\n",(0,i.jsxs)(n.li,{children:["Fix crash when running ",(0,i.jsx)(n.code,{children:"test"})," with Python 3.9"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Bad titles:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Fix bug"}),"\n",(0,i.jsx)(n.li,{children:"Fix #8313"}),"\n",(0,i.jsxs)(n.li,{children:["Add support for Thrift code generation by first adding the file ",(0,i.jsx)(n.code,{children:"codegen.py"}),", then hooking it up, and finally adding tests"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Then, include a description. You can use the default template if you'd like, or use a normal description instead. Link to any corresponding GitHub issues."}),"\n",(0,i.jsxs)(n.admonition,{title:"Tip: Review your own PR",type:"note",children:[(0,i.jsx)(n.p,{children:"It is often helpful to other reviewers if you proactively review your own code. Specifically, add comments to parts where you want extra attention."}),(0,i.jsx)(n.p,{children:"For example:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'"Do you know of a better way to do this? This felt clunky to write."'}),"\n",(0,i.jsx)(n.li,{children:'"This was really tricky to figure out because there are so many edge cases. I\'d appreciate extra attention here, please."'}),"\n",(0,i.jsxs)(n.li,{children:['"Note that I did not use a dataclass here because I do not want any of the methods like ',(0,i.jsx)(n.code,{children:"__eq__"}),' to be generated."']}),"\n"]})]}),"\n",(0,i.jsxs)(n.admonition,{title:"FYI: we squash merge",type:"note",children:[(0,i.jsx)(n.p,{children:"This means that the final commit message will come from your PR description, rather than your commit messages."}),(0,i.jsx)(n.p,{children:"Good commit messages are still very helpful for people reviewing your code; but, your PR description is what will show up in the changelog."})]}),"\n",(0,i.jsx)(n.h3,{id:"ci",children:"CI"}),"\n",(0,i.jsx)(n.p,{children:'We use GitHub Actions for CI. Look at the "Checks" tab of your PR.'}),"\n",(0,i.jsxs)(n.admonition,{title:"Flaky tests?",type:"note",children:[(0,i.jsx)(n.p,{children:"We unfortunately have some flaky tests. If CI fails and you believe it is not related to your change, please comment about the failure so that a maintainer may investigate and restart CI for you."}),(0,i.jsxs)(n.p,{children:["Alternatively, you can push an empty commit with ",(0,i.jsx)(n.code,{children:"git commit --allow-empty"})," to force CI to restart. Although we encourage you to still point out the flake to us."]})]}),"\n",(0,i.jsx)(n.h3,{id:"review-feedback",children:"Review feedback"}),"\n",(0,i.jsx)(n.p,{children:"One or more reviewers will leave feedback. If you are confused by any of the feedback, please do not be afraid to ask for clarification!"}),"\n",(0,i.jsx)(n.p,{children:'If we do not respond within 24 business hours, please gently ping us by commenting "ping" on your pull request or messaging on Slack asking if someone could please take a look.'}),"\n",(0,i.jsx)(n.p,{children:"Once one or more reviewers have approved\u2014and CI goes green\u2014a reviewer will merge your change."}),"\n",(0,i.jsxs)(n.admonition,{title:"When will your change be released?",type:"note",children:[(0,i.jsx)(n.p,{children:"Your change will be included in the next weekly dev release, which usually happens every Friday or Monday. If you fixed a bug, your change may also be cherry-picked into a release candidate from the prior release series."}),(0,i.jsxs)(n.p,{children:["See ",(0,i.jsx)(n.a,{href:"/2.26/docs/contributions/releases/release-strategy",children:"Release strategy"}),"."]})]}),"\n",(0,i.jsx)(n.h2,{id:"release-notes",children:"Release notes"}),"\n",(0,i.jsxs)(n.p,{children:["We maintain release notes as we go: every pull request should add or adjust the release notes if required. These release notes are files in ",(0,i.jsx)(n.code,{children:"docs/notes/"}),", grouped by release series; for example, ",(0,i.jsx)(n.code,{children:"docs/notes/2.22.x.md"})," includes the release notes for 2.22 releases."]}),"\n",(0,i.jsx)(n.p,{children:'The release note file is generally grouped by "backend". If you\'re not sure whether to add release notes, or where to put them, or how to phrase them, feel free to:'}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["look in other release notes files in ",(0,i.jsx)(n.code,{children:"docs/notes"})," for inspiration"]}),"\n",(0,i.jsxs)(n.li,{children:["ask in ",(0,i.jsx)(n.code,{children:"#development"})," on Slack"]}),"\n",(0,i.jsx)(n.li,{children:"open a pull request and ask the reviewers"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"New features and major bug fixes should definitely have release notes, but other changes can opt out. For example, fixes to features that aren't released or minor documentation fixes."}),"\n",(0,i.jsx)(n.p,{children:"We have guidance to walk us through this, so it's not a problem to forget. Pull request CI enforces that either:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["the PR release notes, by having changes in ",(0,i.jsx)(n.code,{children:"docs/notes/"})]}),"\n",(0,i.jsxs)(n.li,{children:["someone has opted out, by labelling the PR with ",(0,i.jsx)(n.code,{children:"release-notes:not-required"})," or ",(0,i.jsx)(n.code,{children:"category:internal"})," (the latter means that release notes are optional for all ",(0,i.jsx)(n.code,{children:"category:internal"})," PRs)."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["For minor releases, all GitHub release description will simply list all the commits save those with ",(0,i.jsx)(n.code,{children:"release-notes:not-required"})," or ",(0,i.jsx)(n.code,{children:"category:internal"}),"."]})]})}function h(e={}){let{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},848193(e,n,s){s.d(n,{R:()=>r,x:()=>a});var t=s(830758);let i={},o=t.createContext(i);function r(e){let n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(o.Provider,{value:n},e.children)}},364268(e){e.exports=JSON.parse('{"id":"docs/contributions/index","title":"Contribution overview","description":"The flow for making changes to Pants.","source":"@site/versioned_docs/version-2.26/docs/contributions/index.mdx","sourceDirName":"docs/contributions","slug":"/docs/contributions/","permalink":"/2.26/docs/contributions/","draft":false,"unlisted":false,"editUrl":"https://github.com/pantsbuild/pants/edit/main/docs/docs/contributions/index.mdx","tags":[],"version":"2.26","sidebarPosition":0,"frontMatter":{"title":"Contribution overview","sidebar_position":0},"sidebar":"docsSidebar","previous":{"title":"Upgrade tips","permalink":"/2.26/docs/releases/upgrade-tips"},"next":{"title":"Development","permalink":"/2.26/docs/contributions/development/"}}')}}]);