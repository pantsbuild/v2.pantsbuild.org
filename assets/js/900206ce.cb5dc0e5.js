"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["233837"],{978814(e,n,t){t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>l});var i=t(44177),o=t(886070),r=t(848193);let s={title:"Remote caching",sidebar_position:0},c,a={},l=[{value:"What is remote caching?",id:"what-is-remote-caching",level:2},{value:"Remote Execution API",id:"remote-execution-api",level:2},{value:"Server",id:"server",level:3},{value:"Pants Configuration",id:"pants-configuration",level:3},{value:"Reference",id:"reference",level:2}];function h(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"what-is-remote-caching",children:"What is remote caching?"}),"\n",(0,o.jsx)(n.p,{children:"Remote caching allows Pants to store and retrieve the results of process execution to and from a remote server, rather than only using your machine's local Pants cache. This allows Pants to efficiently share a cache across different runs and different machines, for example, all of your CI workers sharing the same fine-grained cache."}),"\n",(0,o.jsx)(n.p,{children:"Pants supports several remote caching providers:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://github.com/bazelbuild/remote-apis",children:"Remote Execution API"}),' ("REAPI"), which also supports ',(0,o.jsx)(n.a,{href:"/2.19/docs/using-pants/remote-caching-and-execution/remote-execution",children:"remote execution"})]}),"\n",(0,o.jsx)(n.li,{children:"GitHub Actions Cache"}),"\n",(0,o.jsx)(n.li,{children:"Local file system"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"remote-execution-api",children:"Remote Execution API"}),"\n",(0,o.jsx)(n.h3,{id:"server",children:"Server"}),"\n",(0,o.jsxs)(n.p,{children:["See the ",(0,o.jsx)(n.a,{href:"/2.19/docs/using-pants/remote-caching-and-execution/#server-compatibility",children:"REAPI server compatibility guide"})," for more information about REAPI-compatible caches."]}),"\n",(0,o.jsx)(n.h3,{id:"pants-configuration",children:"Pants Configuration"}),"\n",(0,o.jsx)(n.p,{children:"After you have either set up a REAPI cache server or obtained access to one, the next step is to point Pants to it so that Pants will use it to read and write process results."}),"\n",(0,o.jsxs)(n.p,{children:["For the following examples, assume that the REAPI server is running on ",(0,o.jsx)(n.code,{children:"cache.corp.example.com"}),' at port 8980 and that it is on an internal network. Also assume that the name of the REAPI instance is "main." At a minimum, you will need to configure ',(0,o.jsx)(n.code,{children:"pants.toml"})," as follows:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-toml",children:'[GLOBAL]\nremote_cache_read = true\nremote_cache_write = true\nremote_store_address = "grpc://build.corp.example.com:8980"\nremote_instance_name = "main"\n'})}),"\n",(0,o.jsxs)(n.p,{children:["If the endpoint is using TLS, then the ",(0,o.jsx)(n.code,{children:"remote_store_address"})," option would be specified with the ",(0,o.jsx)(n.code,{children:"grpcs://"})," scheme, i.e. ",(0,o.jsx)(n.code,{children:'"grpcs://cache.corp.example.com:8980"'}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"reference",children:"Reference"}),"\n",(0,o.jsxs)(n.p,{children:["Run ",(0,o.jsx)(n.code,{children:"pants help-advanced global"})," or refer to ",(0,o.jsx)(n.a,{href:"/2.19/reference/global-options",children:"Global options"}),". Most remote execution and caching options begin with the prefix ",(0,o.jsx)(n.code,{children:"--remote"}),"."]})]})}function d(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},848193(e,n,t){t.d(n,{R:()=>s,x:()=>c});var i=t(830758);let o={},r=i.createContext(o);function s(e){let n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:n},e.children)}},44177(e){e.exports=JSON.parse('{"id":"docs/using-pants/remote-caching-and-execution/remote-caching","title":"Remote caching","description":"---","source":"@site/versioned_docs/version-2.19/docs/using-pants/remote-caching-and-execution/remote-caching.mdx","sourceDirName":"docs/using-pants/remote-caching-and-execution","slug":"/docs/using-pants/remote-caching-and-execution/remote-caching","permalink":"/2.19/docs/using-pants/remote-caching-and-execution/remote-caching","draft":false,"unlisted":false,"editUrl":"https://github.com/pantsbuild/pants/edit/main/docs/docs/using-pants/remote-caching-and-execution/remote-caching.mdx","tags":[],"version":"2.19","sidebarPosition":0,"frontMatter":{"title":"Remote caching","sidebar_position":0},"sidebar":"docsSidebar","previous":{"title":"Remote caching & execution","permalink":"/2.19/docs/using-pants/remote-caching-and-execution/"},"next":{"title":"Remote execution","permalink":"/2.19/docs/using-pants/remote-caching-and-execution/remote-execution"}}')}}]);