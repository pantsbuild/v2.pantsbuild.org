"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["564992"],{925540(e,t,n){n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>l});var i=n(354546),s=n(886070),r=n(848193);let a={title:"Create initial BUILD files",sidebar_position:4},o,d={},l=[{value:"Formatting BUILD files with Black or Yapf",id:"formatting-build-files-with-black-or-yapf",level:2}];function c(e){let t={a:"a",code:"code",em:"em",h2:"h2",hr:"hr",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.hr,{}),"\n",(0,s.jsxs)(t.p,{children:["Many Pants operations require extra metadata in the form of ",(0,s.jsx)(t.a,{href:"/2.10/docs/using-pants/key-concepts/targets-and-build-files",children:(0,s.jsx)(t.em,{children:"targets"})}),", which are defined in ",(0,s.jsx)(t.code,{children:"BUILD"})," files."]}),"\n",(0,s.jsxs)(t.p,{children:["You can generate these BUILD files by running ",(0,s.jsx)(t.code,{children:"./pants tailor"}),":"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"\u276F ./pants tailor\nCreated scripts/BUILD:\n  - Add shell_sources target scripts\nCreated src/py/project/BUILD:\n  - Add python_sources target project\n  - Add python_tests target tests\nCreated src/go/BUILD:\n  - Add go_mod target mod\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Often, this will be all you need for Pants to work, thanks to sensible defaults and inference, like ",(0,s.jsx)(t.a,{href:"/2.10/docs/using-pants/key-concepts/targets-and-build-files",children:"inferring your dependencies"}),". Sometimes, though, you may need to or want to change certain fields, like setting a longer timeout on a test."]}),"\n",(0,s.jsxs)(t.p,{children:["You may also need to add some targets that Pants cannot generate, like ",(0,s.jsxs)(t.a,{href:"/2.10/docs/using-pants/assets-and-archives",children:[(0,s.jsx)(t.code,{children:"resources"})," and ",(0,s.jsx)(t.code,{children:"files"})]})," targets."]}),"\n",(0,s.jsxs)(t.p,{children:["We recommend running ",(0,s.jsx)(t.code,{children:"./pants tailor --check"})," in your ",(0,s.jsx)(t.a,{href:"/2.10/docs/using-pants/using-pants-in-ci",children:"continuous integration"})," so that you don't forget to add any targets and BUILD files."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"\u276F ./pants tailor --check\nWould create scripts/BUILD:\n  - Add shell_sources target scripts\n\nTo fix `tailor` failures, run `./pants tailor`.\n"})}),"\n",(0,s.jsxs)(t.p,{children:["To ignore false positives, set ",(0,s.jsx)(t.code,{children:"[tailor].ignore_paths"})," and ",(0,s.jsx)(t.code,{children:"[tailor].ignore_adding_targets"}),". See ",(0,s.jsx)(t.a,{href:"/2.10/reference/goals/tailor",children:"tailor"})," for more detail."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-toml",metastring:'title="pants.toml"',children:'[tailor]\nignore_paths = ["src/py/ignore_me/**"]\nignore_adding_targets = ["src/py/project:tgt"]\n'})}),"\n",(0,s.jsx)(t.h2,{id:"formatting-build-files-with-black-or-yapf",children:"Formatting BUILD files with Black or Yapf"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:"./pants run update-build-files"})," will format your BUILD files, using the ",(0,s.jsx)(t.a,{href:"https://black.readthedocs.io/en/stable/",children:"Black Python formatter"})," by default. The goal will also fix any safe Pants deprecations like renaming target types."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"\u276F ./pants update-build-files\nUpdated scripts/BUILD:\n  - Format with Black\n  - Rename `python_library` to `python_sources`\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Like ",(0,s.jsx)(t.code,{children:"tailor"}),", we recommend running ",(0,s.jsx)(t.code,{children:"./pants update-build-files --check"})," in your ",(0,s.jsx)(t.a,{href:"/2.10/docs/using-pants/using-pants-in-ci",children:"continuous integration"}),"."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"\u276F ./pants update-build-files --check\nWould update scripts/BUILD:\n  - Format with Black\n  - Rename `python_library` to `python_sources`\n\nTo fix `update-build-files` failures, run `./pants update-build-files`.\n"})}),"\n",(0,s.jsxs)(t.p,{children:["You can instead use ",(0,s.jsx)(t.a,{href:"https://pypi.org/project/yapf/",children:"Yapf"})," by setting ",(0,s.jsx)(t.code,{children:'[update-build-files].formatter = "yapf"'})," in ",(0,s.jsx)(t.code,{children:"pants.toml"}),"."]})]})}function p(e={}){let{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},848193(e,t,n){n.d(t,{R:()=>a,x:()=>o});var i=n(830758);let s={},r=i.createContext(s);function a(e){let t=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(r.Provider,{value:t},e.children)}},354546(e){e.exports=JSON.parse('{"id":"docs/getting-started/create-initial-build-files","title":"Create initial BUILD files","description":"---","source":"@site/versioned_docs/version-2.10/docs/getting-started/create-initial-build-files.mdx","sourceDirName":"docs/getting-started","slug":"/docs/getting-started/create-initial-build-files","permalink":"/2.10/docs/getting-started/create-initial-build-files","draft":false,"unlisted":false,"editUrl":"https://github.com/pantsbuild/pants/edit/main/docs/docs/getting-started/create-initial-build-files.mdx","tags":[],"version":"2.10","sidebarPosition":4,"frontMatter":{"title":"Create initial BUILD files","sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"Initial configuration","permalink":"/2.10/docs/getting-started/initial-configuration"},"next":{"title":"Example projects and repositories","permalink":"/2.10/docs/getting-started/example-projects-and-repositories"}}')}}]);