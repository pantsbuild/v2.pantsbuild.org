"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["931688"],{782752(e,n,r){r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>m,frontMatter:()=>t,metadata:()=>s,toc:()=>p});var s=r(979723),i=r(886070),o=r(848193),d=r(554707),l=r(375002);let t={title:"helm-infer",description:"Options controlling which dependencies will be inferred for Helm targets.\n"},c,a={},p=[{value:"Basic options",id:"basic-options",level:2},{value:"<code>external_docker_images</code>",id:"external_docker_images",level:3},{value:"<code>unowned_dependency_behavior</code>",id:"unowned_dependency_behavior",level:3},{value:"Advanced options",id:"advanced-options",level:2},{value:"<code>deployment_dependencies</code>",id:"deployment_dependencies",level:3},{value:"Deprecated options",id:"deprecated-options",level:2},{value:"Related subsystems",id:"related-subsystems",level:2}];function h(e){let n={code:"code",h2:"h2",h3:"h3",hr:"hr",p:"p",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"Options controlling which dependencies will be inferred for Helm targets."}),"\n",(0,i.jsxs)(n.p,{children:["Backend: ",(0,i.jsx)("span",{className:"color--primary",children:(0,i.jsx)(n.code,{children:"pants.backend.experimental.helm.check.kubeconform"})})]}),"\n",(0,i.jsxs)(n.p,{children:["Config section: ",(0,i.jsx)("span",{className:"color--primary",children:(0,i.jsx)(n.code,{children:"[helm-infer]"})})]}),"\n",(0,i.jsxs)("span",{className:l.A.options,children:[(0,i.jsx)(n.h2,{id:"basic-options",children:"Basic options"}),(0,i.jsx)(n.h3,{id:"external_docker_images",children:(0,i.jsx)(n.code,{children:"external_docker_images"})}),(0,i.jsxs)(d.A,{cli_repr:"--helm-infer-external-docker-images=\"['<str>', '<str>', ...]\"",env_repr:"PANTS_HELM_INFER_EXTERNAL_DOCKER_IMAGES",toml_repr:`[helm-infer]
external_docker_images = [
  '<str>',
  '<str>',
  ...,
]`,default_repr:"[]",children:[(0,i.jsx)(n.p,{children:"Docker image names that are not provided by targets in this repository and should be ignored for calculating dependencies."}),(0,i.jsxs)(n.p,{children:["For example, adding ",(0,i.jsx)(n.code,{children:"python"})," to this setting will cause Pants to not try to find the target ",(0,i.jsx)(n.code,{children:"python:3.10"})," in the following ",(0,i.jsx)(n.code,{children:"helm_deployment"}),":"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"&#x60;"}),' helm_deployment(\nname="my-deployment",\nchart="',":mychart",'",\nvalues={"container.image_ref": "python:3.10"},\n) ',(0,i.jsx)(n.code,{children:"&#x60;"})]}),(0,i.jsx)(n.p,{children:"Use Python fnmatch glob syntax (ex: 'docker.io/*') to disable this check for certain images or patterns. This will limit Pants's ability to warn on unknown docker images."})]}),(0,i.jsx)(n.h3,{id:"unowned_dependency_behavior",children:(0,i.jsx)(n.code,{children:"unowned_dependency_behavior"})}),(0,i.jsxs)(d.A,{cli_repr:"--helm-infer-unowned-dependency-behavior=<UnownedHelmDependencyUsage>",env_repr:"PANTS_HELM_INFER_UNOWNED_DEPENDENCY_BEHAVIOR",toml_repr:`[helm-infer]
unowned_dependency_behavior = <UnownedHelmDependencyUsage>`,one_of:"error, warning, ignore",default_repr:"error",children:[(0,i.jsx)(n.p,{children:"How to handle inferred dependencies that don't have an inferable owner."}),(0,i.jsx)(n.p,{children:"Usually when an import cannot be inferred, it represents an issue like Pants not being properly configured, e.g. targets not set up. Often, missing dependencies will result in confusing runtime errors where Docker images haven't been published, so this option can be helpful to error more eagerly."})]}),(0,i.jsx)(n.h2,{id:"advanced-options",children:"Advanced options"}),(0,i.jsx)(n.h3,{id:"deployment_dependencies",children:(0,i.jsx)(n.code,{children:"deployment_dependencies"})}),(0,i.jsx)(d.A,{cli_repr:"--[no-]helm-infer-deployment-dependencies",env_repr:"PANTS_HELM_INFER_DEPLOYMENT_DEPENDENCIES",toml_repr:`[helm-infer]
deployment_dependencies = <bool>`,default_repr:"True",children:(0,i.jsx)(n.p,{children:"If true, parse k8s manifests generated by helm to find dependencies on other targets like docker images."})}),(0,i.jsx)(n.h2,{id:"deprecated-options",children:"Deprecated options"}),(0,i.jsx)(n.p,{children:"None"}),(0,i.jsx)(n.h2,{id:"related-subsystems",children:"Related subsystems"}),(0,i.jsx)(n.p,{children:"None"})]})]})}function m(e={}){let{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},375002(e,n,r){r.d(n,{A:()=>s});let s={options:"options_nrbo"}},554707(e,n,r){r.d(n,{A:()=>d});var s=r(886070),i=r(384122),o=r(580830);function d({children:e,cli_repr:n,env_repr:r,toml_repr:d,one_of:l,default_repr:t,target_field_name:c,removal_version:a,removal_hint:p}){return(0,s.jsxs)("div",{className:"margin-bottom--lg",children:[(0,s.jsx)("code",{style:{color:"var(--pants-reference-option-repr)"},children:n}),(0,s.jsx)("br",{}),(0,s.jsx)("code",{style:{color:"var(--pants-reference-option-repr)"},children:r}),(0,s.jsx)("br",{}),(0,s.jsx)(i.A,{language:"toml",title:"pants.toml",children:d}),(0,s.jsxs)("div",{style:{paddingLeft:"2em"},children:[(0,s.jsxs)("span",{children:[l&&(0,s.jsxs)("span",{children:["one of:"," ",(0,s.jsx)("code",{style:{color:"var(--ifm-color-success)"},children:l}),(0,s.jsx)("br",{})]}),"default:"," ",(0,s.jsx)("span",{style:{color:"var(--ifm-color-success)"},children:(t||"").includes("\n")?(0,s.jsx)("pre",{className:"padding--sm",children:t}):(0,s.jsx)("code",{children:t})})]}),(0,s.jsx)("br",{}),a&&(0,s.jsxs)("span",{style:{color:"var(--ifm-color-danger-darkest)"},children:["Deprecated, will be removed in version: ",a,".",(0,s.jsx)("br",{}),p,(0,s.jsx)("br",{})]}),e,c&&(0,s.jsxs)("span",{children:["Can be overriden by field",(0,s.jsx)("code",{children:c})," on"," ",(0,s.jsx)(o.A,{to:"../targets/local_environment",children:(0,s.jsx)("code",{children:"local_environment"})}),","," ",(0,s.jsx)(o.A,{to:"../targets/docker_environment",children:(0,s.jsx)("code",{children:"docker_environment"})}),", or"," ",(0,s.jsx)(o.A,{to:"../targets/remote_environment",children:(0,s.jsx)("code",{children:"remote_environment"})}),"targets."]})]})]})}},979723(e){e.exports=JSON.parse('{"id":"reference/subsystems/helm-infer","title":"helm-infer","description":"Options controlling which dependencies will be inferred for Helm targets.\\n","source":"@site/versioned_docs/version-2.31/reference/subsystems/helm-infer.mdx","sourceDirName":"reference/subsystems","slug":"/reference/subsystems/helm-infer","permalink":"/prerelease/reference/subsystems/helm-infer","draft":false,"unlisted":false,"tags":[],"version":"2.31","frontMatter":{"title":"helm-infer","description":"Options controlling which dependencies will be inferred for Helm targets.\\n"},"sidebar":"referenceSidebar","previous":{"title":"hadolint","permalink":"/prerelease/reference/subsystems/hadolint"},"next":{"title":"helm-k8s-parser","permalink":"/prerelease/reference/subsystems/helm-k8s-parser"}}')}}]);