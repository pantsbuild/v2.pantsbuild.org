"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["191671"],{166711(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>l});var t=s(853704),i=s(886070),a=s(848193);let o={title:"Upgrade tips",sidebar_position:2},r,d={},l=[{value:"Upgrade one minor release at a time",id:"upgrade-one-minor-release-at-a-time",level:2},{value:"Ignore deprecation messages with <code>ignore_warnings</code>",id:"ignore-deprecation-messages-with-ignore_warnings",level:2},{value:"Check for updates to the <code>pants</code> script",id:"check-for-updates-to-the-pants-script",level:2},{value:"Find any bugs or issues?",id:"find-any-bugs-or-issues",level:2}];function c(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",hr:"hr",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"How we recommend staying up-to-date with Pants."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.admonition,{type:"note",children:[(0,i.jsxs)(n.mdxAdmonitionTitle,{children:["Reminder: change the ",(0,i.jsx)(n.code,{children:"pants_version"})," to upgrade"]}),(0,i.jsxs)(n.p,{children:["Change the ",(0,i.jsx)(n.code,{children:"pants_version"})," option in the ",(0,i.jsx)(n.code,{children:"[GLOBAL]"})," scope in your pants.toml to upgrade."]}),(0,i.jsxs)(n.p,{children:["You can see all releases at ",(0,i.jsx)(n.a,{href:"https://github.com/pantsbuild/pants/releases",children:"https://github.com/pantsbuild/pants/releases"}),"."]})]}),"\n",(0,i.jsx)(n.h2,{id:"upgrade-one-minor-release-at-a-time",children:"Upgrade one minor release at a time"}),"\n",(0,i.jsxs)(n.p,{children:["Per our ",(0,i.jsx)(n.a,{href:"/2.25/docs/releases/deprecation-policy",children:"Deprecation policy"}),", deprecations must last a minimum of one minor release. For example, something may be deprecated in 2.1.0 and then removed in 2.2.0."]}),"\n",(0,i.jsx)(n.p,{children:"This means that it is helpful to upgrade one minor release at a time so that you can see all deprecation warnings."}),"\n",(0,i.jsx)(n.p,{children:"You do not need to land every upgrade into your organization\u2014often, you will want to upgrade your organization multiple versions at a time, e.g. 2.1.0 to 2.4.0. But, when you are working on the upgrade locally, it is helpful to iterate one version at a time."}),"\n",(0,i.jsx)(n.p,{children:"First, see if Pants can automatically fix any safe deprecations for you:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# To avoid unrelated formatting changes, you may want to use `--no-fmt`.\n\u276F pants update-build-files --no-fmt ::\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You can add ",(0,i.jsx)(n.code,{children:"update-build-files"})," to your ",(0,i.jsx)(n.a,{href:"/2.25/docs/using-pants/using-pants-in-ci",children:"continuous integration"})," so that developers don't accidentally use removed features:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"\u276F pants update-build-files --check ::\n"})}),"\n",(0,i.jsx)(n.p,{children:"Then, see if there are any remaining deprecation warnings:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"\u276F pants\n\u276F pants list :: > /dev/null\n\u276F pants filedeps :: > /dev/null\n"})}),"\n",(0,i.jsxs)(n.p,{children:["It is also helpful to spot-check that your main commands like ",(0,i.jsx)(n.code,{children:"lint"}),", ",(0,i.jsx)(n.code,{children:"package"}),", and ",(0,i.jsx)(n.code,{children:"test"})," still work by running on a single target."]}),"\n",(0,i.jsxs)(n.admonition,{title:"Use dev releases for the newest",type:"note",children:[(0,i.jsxs)(n.p,{children:["As described in our ",(0,i.jsx)(n.a,{href:"/2.25/docs/contributions/releases/release-strategy",children:"Release strategy"}),", we make weekly dev releases with all the latest features and bug fixes we've been working on. While dev releases are less stable, they mean you get access to improvements sooner."]}),(0,i.jsxs)(n.p,{children:["If you encounter any blocking issues, you can easily roll back to a prior version by changing the ",(0,i.jsx)(n.code,{children:"pants_version"})," option. (Please let us know the issue by opening a ",(0,i.jsx)(n.a,{href:"https://github.com/pantsbuild/pants/issues",children:"GitHub issue"})," or messaging us on ",(0,i.jsx)(n.a,{href:"/community/members",children:"Slack"}),")."]})]}),"\n",(0,i.jsxs)(n.h2,{id:"ignore-deprecation-messages-with-ignore_warnings",children:["Ignore deprecation messages with ",(0,i.jsx)(n.code,{children:"ignore_warnings"})]}),"\n",(0,i.jsxs)(n.p,{children:["Sometimes when upgrading, you will not have time to fully fix the deprecation. The ",(0,i.jsx)(n.code,{children:"ignore_warnings"})," option allows you to silence those deprecations."]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"ignore_warnings"})," option expects a string with the start of the deprecation warning. You can also prefix the string with ",(0,i.jsx)(n.code,{children:"$regex$"})," to use a regex pattern instead of literal string matching."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'title="pants.toml"',children:"[GLOBAL]\nignore_warnings = [\n  \"DEPRECATED: option 'config' in scope 'flake8' will be removed\",\n  \"$regex$DEPRECATED:\\\\s*\",\n]\n"})}),"\n",(0,i.jsxs)(n.h2,{id:"check-for-updates-to-the-pants-script",children:["Check for updates to the ",(0,i.jsx)(n.code,{children:"pants"})," script"]}),"\n",(0,i.jsxs)(n.p,{children:["Run ",(0,i.jsx)(n.code,{children:"curl -L -o pants https://pantsbuild.github.io/setup/pants"})," to check if there have been any changes, e.g. adding support for running Pants with new Python interpreters."]}),"\n",(0,i.jsxs)(n.admonition,{type:"caution",children:[(0,i.jsxs)(n.mdxAdmonitionTitle,{children:["Consider migrating to the new ",(0,i.jsx)(n.code,{children:"pants"})," binary"]}),(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"pants"})," script is deprecated. The new ",(0,i.jsx)(n.code,{children:"pants"})," binary has many improvements over the script, including an embedded Python runtime. The ",(0,i.jsx)(n.a,{href:"/2.25/docs/getting-started/installing-pants",children:"installation page"})," has more details on how to migrate."]})]}),"\n",(0,i.jsx)(n.h2,{id:"find-any-bugs-or-issues",children:"Find any bugs or issues?"}),"\n",(0,i.jsxs)(n.p,{children:["Please either open a ",(0,i.jsx)(n.a,{href:"https://github.com/pantsbuild/pants/issues",children:"GitHub issue"})," or head over to ",(0,i.jsx)(n.a,{href:"/community/members",children:"Slack"}),". We'd be happy to help and would appreciate knowing about the issue!"]})]})}function p(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},848193(e,n,s){s.d(n,{R:()=>o,x:()=>r});var t=s(830758);let i={},a=t.createContext(i);function o(e){let n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(a.Provider,{value:n},e.children)}},853704(e){e.exports=JSON.parse('{"id":"docs/releases/upgrade-tips","title":"Upgrade tips","description":"How we recommend staying up-to-date with Pants.","source":"@site/versioned_docs/version-2.25/docs/releases/upgrade-tips.mdx","sourceDirName":"docs/releases","slug":"/docs/releases/upgrade-tips","permalink":"/2.25/docs/releases/upgrade-tips","draft":false,"unlisted":false,"editUrl":"https://github.com/pantsbuild/pants/edit/main/docs/docs/releases/upgrade-tips.mdx","tags":[],"version":"2.25","sidebarPosition":2,"frontMatter":{"title":"Upgrade tips","sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Deprecation policy","permalink":"/2.25/docs/releases/deprecation-policy"},"next":{"title":"Contribution overview","permalink":"/2.25/docs/contributions/"}}')}}]);