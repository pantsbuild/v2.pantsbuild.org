"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["567957"],{719263(e,t,s){s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>n,toc:()=>h});var n=s(971458),i=s(886070),r=s(848193),d=s(989898),o=s(375002);let l={title:"python_tests",description:"Generate a `python_test` target for each file in the `sources` field.\n"},a,c={},h=[{value:"<code>batch_compatibility_tag</code>",id:"batch_compatibility_tag",level:2},{value:"<code>dependencies</code>",id:"dependencies",level:2},{value:"<code>description</code>",id:"description",level:2},{value:"<code>environment</code>",id:"environment",level:2},{value:"<code>extra_env_vars</code>",id:"extra_env_vars",level:2},{value:"<code>interpreter_constraints</code>",id:"interpreter_constraints",level:2},{value:"<code>overrides</code>",id:"overrides",level:2},{value:"<code>resolve</code>",id:"resolve",level:2},{value:"<code>run_goal_use_sandbox</code>",id:"run_goal_use_sandbox",level:2},{value:"<code>runtime_package_dependencies</code>",id:"runtime_package_dependencies",level:2},{value:"<code>skip_add_trailing_comma</code>",id:"skip_add_trailing_comma",level:2},{value:"<code>skip_autoflake</code>",id:"skip_autoflake",level:2},{value:"<code>skip_bandit</code>",id:"skip_bandit",level:2},{value:"<code>skip_black</code>",id:"skip_black",level:2},{value:"<code>skip_docformatter</code>",id:"skip_docformatter",level:2},{value:"<code>skip_flake8</code>",id:"skip_flake8",level:2},{value:"<code>skip_isort</code>",id:"skip_isort",level:2},{value:"<code>skip_mypy</code>",id:"skip_mypy",level:2},{value:"<code>skip_pydocstyle</code>",id:"skip_pydocstyle",level:2},{value:"<code>skip_pylint</code>",id:"skip_pylint",level:2},{value:"<code>skip_pyupgrade</code>",id:"skip_pyupgrade",level:2},{value:"<code>skip_ruff</code>",id:"skip_ruff",level:2},{value:"<code>skip_tests</code>",id:"skip_tests",level:2},{value:"<code>skip_yapf</code>",id:"skip_yapf",level:2},{value:"<code>sources</code>",id:"sources",level:2},{value:"<code>stevedore_namespaces</code>",id:"stevedore_namespaces",level:2},{value:"<code>tags</code>",id:"tags",level:2},{value:"<code>timeout</code>",id:"timeout",level:2},{value:"<code>xdist_concurrency</code>",id:"xdist_concurrency",level:2}];function p(e){let t={a:"a",code:"code",em:"em",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.hr,{}),"\n",(0,i.jsxs)(t.p,{children:["Generate a ",(0,i.jsx)(t.code,{children:"python_test"})," target for each file in the ",(0,i.jsx)(t.code,{children:"sources"})," field."]}),"\n",(0,i.jsxs)(t.p,{children:["Backend: ",(0,i.jsx)("span",{className:"color--primary",children:(0,i.jsx)(t.code,{children:"pants.backend.python"})})]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsxs)("span",{className:o.A.options,children:[(0,i.jsx)(t.h2,{id:"batch_compatibility_tag",children:(0,i.jsx)(t.code,{children:"batch_compatibility_tag"})}),(0,i.jsxs)(d.A,{type_repr:"str | None",default_repr:"None",children:[(0,i.jsx)(t.p,{children:"An arbitrary value used to mark the test files belonging to this target as valid for batched execution."}),(0,i.jsxs)(t.p,{children:["It's ",(0,i.jsx)(t.em,{children:"sometimes"})," safe to run multiple ",(0,i.jsx)(t.code,{children:"python_test"}),"s within a single test runner process, and doing so can give significant wins by allowing reuse of expensive test setup / teardown logic. To opt into this behavior, set this field to an arbitrary non-empty string on all the ",(0,i.jsx)(t.code,{children:"python_test"})," targets that are safe/compatible to run in the same process."]}),(0,i.jsxs)(t.p,{children:["If this field is left unset on a target, the target is assumed to be incompatible with all others and will run in a dedicated ",(0,i.jsx)(t.code,{children:"pytest"})," process."]}),(0,i.jsxs)(t.p,{children:["If this field is set on a target, and its value is different from the value on some other test ",(0,i.jsx)(t.code,{children:"python_test"}),", then the two targets are explicitly incompatible and are guaranteed to not run in the same ",(0,i.jsx)(t.code,{children:"pytest"})," process."]}),(0,i.jsxs)(t.p,{children:["If this field is set on a target, and its value is the same as the value on some other ",(0,i.jsx)(t.code,{children:"python_test"}),", then the two targets are explicitly compatible and ",(0,i.jsx)(t.em,{children:"may"})," run in the same test runner process. Compatible tests may not end up in the same test runner batch if:"]}),(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:['There are "too many" compatible tests in a partition, as determined by the ',(0,i.jsx)(t.code,{children:"[test].batch_size"})," config parameter, or"]}),"\n",(0,i.jsxs)(t.li,{children:["Compatible tests have some incompatibility in Pants metadata (i.e. different ",(0,i.jsx)(t.code,{children:"resolve"}),"s or ",(0,i.jsx)(t.code,{children:"extra_env_vars"}),")."]}),"\n"]}),(0,i.jsxs)(t.p,{children:["When tests with the same ",(0,i.jsx)(t.code,{children:"batch_compatibility_tag"})," have incompatibilities in some other Pants metadata, they will be automatically split into separate batches. This way you can set a high-level ",(0,i.jsx)(t.code,{children:"batch_compatibility_tag"})," using ",(0,i.jsx)(t.code,{children:"__defaults__"})," and then have tests continue to work as you tweak BUILD metadata on specific targets."]})]}),(0,i.jsx)(t.h2,{id:"dependencies",children:(0,i.jsx)(t.code,{children:"dependencies"})}),(0,i.jsxs)(d.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,i.jsxs)(t.p,{children:["Addresses to other targets that this target depends on, e.g. ",(0,i.jsx)(t.code,{children:"['helloworld/subdir:lib', 'helloworld/main.py:lib', '3rdparty:reqs#django']"}),"."]}),(0,i.jsxs)(t.p,{children:["This augments any dependencies inferred by Pants, such as by analyzing your imports. Use ",(0,i.jsx)(t.code,{children:"pants dependencies"})," or ",(0,i.jsx)(t.code,{children:"pants peek"})," on this target to get the final result."]}),(0,i.jsxs)(t.p,{children:["See ",(0,i.jsx)(t.a,{href:"https://www.pantsbuild.org/v2.17/docs/targets",children:"https://www.pantsbuild.org/v2.17/docs/targets"})," for more about how addresses are formed, including for generated targets. You can also run ",(0,i.jsx)(t.code,{children:"pants list ::"})," to find all addresses in your project, or ",(0,i.jsx)(t.code,{children:"pants list dir"})," to find all addresses defined in that directory."]}),(0,i.jsxs)(t.p,{children:["If the target is in the same BUILD file, you can leave off the BUILD file path, e.g. ",(0,i.jsx)(t.code,{children:":tgt"})," instead of ",(0,i.jsx)(t.code,{children:"helloworld/subdir:tgt"}),". For generated first-party addresses, use ",(0,i.jsx)(t.code,{children:"./"})," for the file path, e.g. ",(0,i.jsx)(t.code,{children:"./main.py:tgt"}),"; for all other generated targets, use ",(0,i.jsx)(t.code,{children:":tgt#generated_name"}),"."]}),(0,i.jsxs)(t.p,{children:["You may exclude dependencies by prefixing with ",(0,i.jsx)(t.code,{children:"!"}),", e.g. ",(0,i.jsx)(t.code,{children:"['!helloworld/subdir:lib', '!./sibling.txt']"}),". Ignores are intended for false positives with dependency inference; otherwise, simply leave off the dependency from the BUILD file."]})]}),(0,i.jsx)(t.h2,{id:"description",children:(0,i.jsx)(t.code,{children:"description"})}),(0,i.jsxs)(d.A,{type_repr:"str | None",default_repr:"None",children:[(0,i.jsx)(t.p,{children:"A human-readable description of the target."}),(0,i.jsxs)(t.p,{children:["Use ",(0,i.jsx)(t.code,{children:"pants list --documented ::"})," to see all targets with descriptions."]})]}),(0,i.jsx)(t.h2,{id:"environment",children:(0,i.jsx)(t.code,{children:"environment"})}),(0,i.jsxs)(d.A,{type_repr:"str | None",default_repr:"'__local__'",children:[(0,i.jsx)(t.p,{children:"Specify which environment target to consume environment-sensitive options from."}),(0,i.jsxs)(t.p,{children:["Once environments are defined in ",(0,i.jsx)(t.code,{children:"[environments-preview].names"}),", you can specify the environment for this target by its name. Any fields that are defined in that environment will override the values from options set by ",(0,i.jsx)(t.code,{children:"pants.toml"}),", command line values, or environment variables."]}),(0,i.jsxs)(t.p,{children:["You can specify multiple valid environments by using ",(0,i.jsx)(t.code,{children:"parametrize"}),". If ",(0,i.jsx)(t.code,{children:"__local__"})," is specified, Pants will fall back to the ",(0,i.jsx)(t.code,{children:"local_environment"})," defined for the current platform, or no environment if no such environment exists."]})]}),(0,i.jsx)(t.h2,{id:"extra_env_vars",children:(0,i.jsx)(t.code,{children:"extra_env_vars"})}),(0,i.jsxs)(d.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,i.jsx)(t.p,{children:"Additional environment variables to include in test processes."}),(0,i.jsxs)(t.p,{children:["Entries are strings in the form ",(0,i.jsx)(t.code,{children:"ENV_VAR=value"})," to use explicitly; or just ",(0,i.jsx)(t.code,{children:"ENV_VAR"})," to copy the value of a variable in Pants's own environment."]}),(0,i.jsxs)(t.p,{children:["This will be merged with and override values from ",(0,i.jsx)(t.code,{children:"[test].extra_env_vars"}),"."]})]}),(0,i.jsx)(t.h2,{id:"interpreter_constraints",children:(0,i.jsx)(t.code,{children:"interpreter_constraints"})}),(0,i.jsxs)(d.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,i.jsx)(t.p,{children:"The Python interpreters this code is compatible with."}),(0,i.jsxs)(t.p,{children:["Each element should be written in pip-style format, e.g. ",(0,i.jsx)(t.code,{children:"CPython==2.7.*"})," or ",(0,i.jsx)(t.code,{children:"CPython>=3.6,<4"}),". You can leave off ",(0,i.jsx)(t.code,{children:"CPython"})," as a shorthand, e.g. ",(0,i.jsx)(t.code,{children:">=2.7"})," will be expanded to ",(0,i.jsx)(t.code,{children:"CPython>=2.7"}),"."]}),(0,i.jsxs)(t.p,{children:["Specify more than one element to OR the constraints, e.g. ",(0,i.jsx)(t.code,{children:"['PyPy==3.7.*', 'CPython==3.7.*']"})," means either PyPy 3.7 ",(0,i.jsx)(t.em,{children:"or"})," CPython 3.7."]}),(0,i.jsxs)(t.p,{children:["If the field is not set, it will default to the option ",(0,i.jsx)(t.code,{children:"[python].interpreter_constraints"}),"."]}),(0,i.jsxs)(t.p,{children:["See ",(0,i.jsx)(t.a,{href:"https://www.pantsbuild.org/v2.17/docs/python-interpreter-compatibility",children:"https://www.pantsbuild.org/v2.17/docs/python-interpreter-compatibility"})," for how these interpreter constraints are merged with the constraints of dependencies."]})]}),(0,i.jsx)(t.h2,{id:"overrides",children:(0,i.jsx)(t.code,{children:"overrides"})}),(0,i.jsxs)(d.A,{type_repr:"Dict[Union[str, Tuple[str, ...]], Dict[str, Any]] | None",default_repr:"None",children:[(0,i.jsxs)(t.p,{children:["Override the field values for generated ",(0,i.jsx)(t.code,{children:"python_test"})," targets."]}),(0,i.jsx)(t.p,{children:"Expects a dictionary of relative file paths and globs to a dictionary for the overrides. You may either use a string for a single path / glob, or a string tuple for multiple paths / globs. Each override is a dictionary of field names to the overridden value."}),(0,i.jsx)(t.p,{children:"For example:"}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:'overrides={\n    "foo_test.py": {"timeout": 120},\n    "bar_test.py": {"timeout": 200},\n    ("foo_test.py", "bar_test.py"): {"tags": ["slow_tests"]},\n}\n'})}),(0,i.jsxs)(t.p,{children:["File paths and globs are relative to the BUILD file's directory. Every overridden file is validated to belong to this target's ",(0,i.jsx)(t.code,{children:"sources"})," field."]}),(0,i.jsxs)(t.p,{children:["If you'd like to override a field's value for every ",(0,i.jsx)(t.code,{children:"python_test"})," target generated by this target, change the field directly on this target rather than using the ",(0,i.jsx)(t.code,{children:"overrides"})," field."]}),(0,i.jsx)(t.p,{children:"You can specify the same file name in multiple keys, so long as you don't override the same field more than one time for the file."})]}),(0,i.jsx)(t.h2,{id:"resolve",children:(0,i.jsx)(t.code,{children:"resolve"})}),(0,i.jsxs)(d.A,{type_repr:"str | None",default_repr:"None",children:[(0,i.jsxs)(t.p,{children:["The resolve from ",(0,i.jsx)(t.code,{children:"[python].resolves"})," to use."]}),(0,i.jsxs)(t.p,{children:["If not defined, will default to ",(0,i.jsx)(t.code,{children:"[python].default_resolve"}),"."]}),(0,i.jsxs)(t.p,{children:["All dependencies must share the same value for their ",(0,i.jsx)(t.code,{children:"resolve"})," field."]})]}),(0,i.jsx)(t.h2,{id:"run_goal_use_sandbox",children:(0,i.jsx)(t.code,{children:"run_goal_use_sandbox"})}),(0,i.jsxs)(d.A,{type_repr:"bool | None",default_repr:"None",children:[(0,i.jsxs)(t.p,{children:["Whether to use a sandbox when ",(0,i.jsx)(t.code,{children:"run"}),"ning this target. Defaults to ",(0,i.jsx)(t.code,{children:"[python].run_goal_use_sandbox"}),"."]}),(0,i.jsxs)(t.p,{children:["If true, runs of this target with the ",(0,i.jsx)(t.code,{children:"run"})," goal will copy the needed first-party sources into a temporary sandbox and run from there."]}),(0,i.jsxs)(t.p,{children:["If false, runs of this target with the ",(0,i.jsx)(t.code,{children:"run"})," goal will use the in-repo sources directly."]}),(0,i.jsxs)(t.p,{children:["The former mode is more hermetic, and is closer to building and running the source as it were packaged in a ",(0,i.jsx)(t.code,{children:"pex_binary"}),'. Additionally, it may be necessary if your sources depend transitively on "generated" files which will be materialized in the sandbox in a source root, but are not in-repo.']}),(0,i.jsxs)(t.p,{children:["The latter mode is similar to creating, activating, and using a virtual environment when running your files. It may also be necessary if the source being run writes files into the repo and computes their location relative to the executed files. Django's ",(0,i.jsx)(t.code,{children:"makemigrations"})," command is an example of such a process."]})]}),(0,i.jsx)(t.h2,{id:"runtime_package_dependencies",children:(0,i.jsx)(t.code,{children:"runtime_package_dependencies"})}),(0,i.jsxs)(d.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,i.jsxs)(t.p,{children:["Addresses to targets that can be built with the ",(0,i.jsx)(t.code,{children:"pants package"})," goal and whose resulting artifacts should be included in the test run."]}),(0,i.jsxs)(t.p,{children:["Pants will build the artifacts as if you had run ",(0,i.jsx)(t.code,{children:"pants package"}),". It will include the results in your test's chroot, using the same name they would normally have, but without the ",(0,i.jsx)(t.code,{children:"--distdir"})," prefix (e.g. ",(0,i.jsx)(t.code,{children:"dist/"}),")."]}),(0,i.jsxs)(t.p,{children:["You can include anything that can be built by ",(0,i.jsx)(t.code,{children:"pants package"}),", e.g. a ",(0,i.jsx)(t.code,{children:"pex_binary"}),", ",(0,i.jsx)(t.code,{children:"python_awslambda"}),", or an ",(0,i.jsx)(t.code,{children:"archive"}),"."]})]}),(0,i.jsx)(t.h2,{id:"skip_add_trailing_comma",children:(0,i.jsx)(t.code,{children:"skip_add_trailing_comma"})}),(0,i.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.experimental.python.lint.add_trailing_comma",children:(0,i.jsx)(t.p,{children:"If true, don't run add-trailing-comma on this target's code."})}),(0,i.jsx)(t.h2,{id:"skip_autoflake",children:(0,i.jsx)(t.code,{children:"skip_autoflake"})}),(0,i.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.python.lint.autoflake",children:(0,i.jsx)(t.p,{children:"If true, don't run Autoflake on this target's code."})}),(0,i.jsx)(t.h2,{id:"skip_bandit",children:(0,i.jsx)(t.code,{children:"skip_bandit"})}),(0,i.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.python.lint.bandit",children:(0,i.jsx)(t.p,{children:"If true, don't run Bandit on this target's code."})}),(0,i.jsx)(t.h2,{id:"skip_black",children:(0,i.jsx)(t.code,{children:"skip_black"})}),(0,i.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.python.lint.black",children:(0,i.jsx)(t.p,{children:"If true, don't run Black on this target's code."})}),(0,i.jsx)(t.h2,{id:"skip_docformatter",children:(0,i.jsx)(t.code,{children:"skip_docformatter"})}),(0,i.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.python.lint.docformatter",children:(0,i.jsx)(t.p,{children:"If true, don't run Docformatter on this target's code."})}),(0,i.jsx)(t.h2,{id:"skip_flake8",children:(0,i.jsx)(t.code,{children:"skip_flake8"})}),(0,i.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.python.lint.flake8",children:(0,i.jsx)(t.p,{children:"If true, don't run Flake8 on this target's code."})}),(0,i.jsx)(t.h2,{id:"skip_isort",children:(0,i.jsx)(t.code,{children:"skip_isort"})}),(0,i.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.python.lint.isort",children:(0,i.jsx)(t.p,{children:"If true, don't run isort on this target's code."})}),(0,i.jsx)(t.h2,{id:"skip_mypy",children:(0,i.jsx)(t.code,{children:"skip_mypy"})}),(0,i.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.python.typecheck.mypy",children:(0,i.jsx)(t.p,{children:"If true, don't run MyPy on this target's code."})}),(0,i.jsx)(t.h2,{id:"skip_pydocstyle",children:(0,i.jsx)(t.code,{children:"skip_pydocstyle"})}),(0,i.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.python.lint.pydocstyle",children:(0,i.jsx)(t.p,{children:"If true, don't run pydocstyle on this target's code."})}),(0,i.jsx)(t.h2,{id:"skip_pylint",children:(0,i.jsx)(t.code,{children:"skip_pylint"})}),(0,i.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.python.lint.pylint",children:(0,i.jsx)(t.p,{children:"If true, don't run Pylint on this target's code."})}),(0,i.jsx)(t.h2,{id:"skip_pyupgrade",children:(0,i.jsx)(t.code,{children:"skip_pyupgrade"})}),(0,i.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.python.lint.pyupgrade",children:(0,i.jsx)(t.p,{children:"If true, don't run pyupgrade on this target's code."})}),(0,i.jsx)(t.h2,{id:"skip_ruff",children:(0,i.jsx)(t.code,{children:"skip_ruff"})}),(0,i.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.experimental.python.lint.ruff",children:(0,i.jsx)(t.p,{children:"If true, don't run ruff on this target's code."})}),(0,i.jsx)(t.h2,{id:"skip_tests",children:(0,i.jsx)(t.code,{children:"skip_tests"})}),(0,i.jsx)(d.A,{type_repr:"bool",default_repr:"False",children:(0,i.jsx)(t.p,{children:"If true, don't run this target's tests."})}),(0,i.jsx)(t.h2,{id:"skip_yapf",children:(0,i.jsx)(t.code,{children:"skip_yapf"})}),(0,i.jsx)(d.A,{type_repr:"bool",default_repr:"False",backend:"pants.backend.python.lint.yapf",children:(0,i.jsx)(t.p,{children:"If true, don't run yapf on this target's code."})}),(0,i.jsx)(t.h2,{id:"sources",children:(0,i.jsx)(t.code,{children:"sources"})}),(0,i.jsxs)(d.A,{type_repr:"Iterable[str] | None",default_repr:"('test_*.py', '*_test.py', 'tests.py')",children:[(0,i.jsx)(t.p,{children:"A list of files and globs that belong to this target."}),(0,i.jsxs)(t.p,{children:["Paths are relative to the BUILD file's directory. You can ignore files/globs by prefixing them with ",(0,i.jsx)(t.code,{children:"!"}),"."]}),(0,i.jsxs)(t.p,{children:["Example: ",(0,i.jsx)(t.code,{children:"sources=['test_*.py', '*_test.py', 'tests.py']"})]})]}),(0,i.jsx)(t.h2,{id:"stevedore_namespaces",children:(0,i.jsx)(t.code,{children:"stevedore_namespaces"})}),(0,i.jsxs)(d.A,{type_repr:"Iterable[str] | None",default_repr:"None",backend:"pants.backend.experimental.python.framework.stevedore",children:[(0,i.jsx)(t.p,{children:"List the stevedore namespaces required by this target."}),(0,i.jsxs)(t.p,{children:["Code for all ",(0,i.jsx)(t.code,{children:"entry_points"})," on ",(0,i.jsx)(t.code,{children:"python_distribution"})," targets with these namespaces will be added as dependencies so that they are available on PYTHONPATH during tests. Note that this is only a subset of the ",(0,i.jsx)(t.code,{children:"python_distribution"}),"s dependencies, so the ",(0,i.jsx)(t.code,{children:"entry_points"})," only need to be defined on one ",(0,i.jsx)(t.code,{children:"python_distribution"})," even if the test only needs some of the ",(0,i.jsx)(t.code,{children:"entry_points"})," namespaces on it."]}),(0,i.jsxs)(t.p,{children:["Plus, an ",(0,i.jsx)(t.code,{children:"entry_points.txt"})," file will be generated in the sandbox so that each of the ",(0,i.jsx)(t.code,{children:"python_distribution"}),'s appear to be "installed". The ',(0,i.jsx)(t.code,{children:"entry_points.txt"})," file will only include the namespaces requested on this field. Without this, stevedore would not be able to look up plugins in the setuptools ",(0,i.jsx)(t.code,{children:"entry_points"})," metadata."]}),(0,i.jsxs)(t.p,{children:["NOTE: Each ",(0,i.jsx)(t.code,{children:"python_distribution"})," must opt-in to being included in this repo-wide inference by tagging the namespaces with ",(0,i.jsx)(t.code,{children:'stevedore_namespace("my.stevedore.extension")'}),"."]}),(0,i.jsxs)(t.p,{children:["The stevedore namespace format (",(0,i.jsx)(t.code,{children:"my.stevedore.extension"}),") is similar to a Python namespace."]})]}),(0,i.jsx)(t.h2,{id:"tags",children:(0,i.jsx)(t.code,{children:"tags"})}),(0,i.jsxs)(d.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,i.jsx)(t.p,{children:"Arbitrary strings to describe a target."}),(0,i.jsxs)(t.p,{children:["For example, you may tag some test targets with 'integration_test' so that you could run ",(0,i.jsx)(t.code,{children:"pants --tag='integration_test' test ::"})," to only run on targets with that tag."]})]}),(0,i.jsx)(t.h2,{id:"timeout",children:(0,i.jsx)(t.code,{children:"timeout"})}),(0,i.jsxs)(d.A,{type_repr:"int | None",default_repr:"None",children:[(0,i.jsx)(t.p,{children:"A timeout (in seconds) used by each test file belonging to this target."}),(0,i.jsxs)(t.p,{children:["If unset, will default to ",(0,i.jsx)(t.code,{children:"[test].timeout_default"}),"; if that option is also unset, then the test will never time out. Will never exceed ",(0,i.jsx)(t.code,{children:"[test].timeout_maximum"}),". Only applies if the option ",(0,i.jsx)(t.code,{children:"--test-timeouts"})," is set to true (the default)."]})]}),(0,i.jsx)(t.h2,{id:"xdist_concurrency",children:(0,i.jsx)(t.code,{children:"xdist_concurrency"})}),(0,i.jsxs)(d.A,{type_repr:"int | None",default_repr:"None",children:[(0,i.jsx)(t.p,{children:"Maximum number of CPUs to allocate to run each test file belonging to this target."}),(0,i.jsxs)(t.p,{children:["Tests are spread across multiple CPUs using ",(0,i.jsx)(t.code,{children:"pytest-xdist"})," (",(0,i.jsx)(t.a,{href:"https://pytest-xdist.readthedocs.io/en/latest/index.html",children:"https://pytest-xdist.readthedocs.io/en/latest/index.html"}),"). Use of ",(0,i.jsx)(t.code,{children:"pytest-xdist"})," must be enabled using the ",(0,i.jsx)(t.code,{children:"[pytest].xdist_enabled"})," option for this field to have an effect."]}),(0,i.jsxs)(t.p,{children:["If ",(0,i.jsx)(t.code,{children:"pytest-xdist"})," is enabled and this field is unset, Pants will attempt to derive the concurrency for test sources by counting the number of tests in each file."]}),(0,i.jsxs)(t.p,{children:["Set this field to ",(0,i.jsx)(t.code,{children:"0"})," to explicitly disable use of ",(0,i.jsx)(t.code,{children:"pytest-xdist"})," for a target."]})]})]})]})}function u(e={}){let{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},375002(e,t,s){s.d(t,{A:()=>n});let n={options:"options_nrbo"}},989898(e,t,s){s.d(t,{A:()=>i});var n=s(886070);function i({children:e,type_repr:t,default_repr:s,backend:i}){return(0,n.jsxs)("div",{className:"margin-bottom--lg",children:[(0,n.jsx)("code",{style:{color:"var(--pants-reference-option-repr)"},children:t}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{style:{paddingLeft:"2em"},children:[s&&(0,n.jsxs)("span",{children:["default:"," ",(0,n.jsx)("code",{style:{color:"var(--ifm-color-success)"},children:s})]}),!s&&(0,n.jsx)("span",{style:{color:"var(--ifm-color-success)"},children:"required"}),i&&(0,n.jsxs)("div",{children:["backend:"," ",(0,n.jsx)("code",{style:{color:"var(--ifm-color-success)"},children:i})]}),e]})]})}},848193(e,t,s){s.d(t,{R:()=>d,x:()=>o});var n=s(830758);let i={},r=n.createContext(i);function d(e){let t=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),n.createElement(r.Provider,{value:t},e.children)}},971458(e){e.exports=JSON.parse('{"id":"reference/targets/python_tests","title":"python_tests","description":"Generate a `python_test` target for each file in the `sources` field.\\n","source":"@site/versioned_docs/version-2.17/reference/targets/python_tests.mdx","sourceDirName":"reference/targets","slug":"/reference/targets/python_tests","permalink":"/2.17/reference/targets/python_tests","draft":false,"unlisted":false,"tags":[],"version":"2.17","frontMatter":{"title":"python_tests","description":"Generate a `python_test` target for each file in the `sources` field.\\n"},"sidebar":"referenceSidebar","previous":{"title":"python_test_utils","permalink":"/2.17/reference/targets/python_test_utils"},"next":{"title":"relocated_files","permalink":"/2.17/reference/targets/relocated_files"}}')}}]);