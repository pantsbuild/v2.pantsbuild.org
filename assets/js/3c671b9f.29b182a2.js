"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["119481"],{382718(e,s,t){t.r(s),t.d(s,{assets:()=>o,contentTitle:()=>l,default:()=>c,frontMatter:()=>a,metadata:()=>n,toc:()=>h});var n=t(634166),i=t(886070),r=t(848193);let a={title:"Release process",sidebar_position:1},l,o={},h=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"1. Create a PGP signing key",id:"1-create-a-pgp-signing-key",level:3},{value:"2. Add your PGP key to GitHub.",id:"2-add-your-pgp-key-to-github",level:3},{value:"3. Configure Git to use your PGP key.",id:"3-configure-git-to-use-your-pgp-key",level:3},{value:"4. Authenticate with the Github API",id:"4-authenticate-with-the-github-api",level:3},{value:"Step 1: Prepare the release",id:"step-1-prepare-the-release",level:2},{value:"0a. <code>dev0</code> - set up the release series",id:"0a-dev0---set-up-the-release-series",level:3},{value:"0b. <code>dev</code> - Check for any deprecations",id:"0b-dev---check-for-any-deprecations",level:3},{value:"0c. Release candidates - cherry-pick relevant changes",id:"0c-release-candidates---cherry-pick-relevant-changes",level:3},{value:"1. Prepare the changelog",id:"1-prepare-the-changelog",level:3},{value:"2. Update <code>CONTRIBUTORS.md</code>",id:"2-update-contributorsmd",level:3},{value:"3. Bump the <code>VERSION</code>",id:"3-bump-the-version",level:3},{value:"4. Post the prep to GitHub",id:"4-post-the-prep-to-github",level:3},{value:"5a. <code>a0</code> - create a new Git branch",id:"5a-a0---create-a-new-git-branch",level:3},{value:"Step 2: Update this docs site",id:"step-2-update-this-docs-site",level:2},{value:"<code>dev0</code> - set up the new version",id:"dev0---set-up-the-new-version",level:3},{value:"Sync the <code>docs/</code> content",id:"sync-the-docs-content",level:3},{value:"Regenerate the references",id:"regenerate-the-references",level:3},{value:"<code>stable</code> releases - Update the default docsite",id:"stable-releases---update-the-default-docsite",level:3},{value:"Step 3: Tag the release to build wheels",id:"step-3-tag-the-release-to-build-wheels",level:2},{value:"Step 4: Release a Pants PEX",id:"step-4-release-a-pants-pex",level:2},{value:"Step 5: Test the release",id:"step-5-test-the-release",level:2},{value:"Step 6: Announce the change",id:"step-6-announce-the-change",level:2},{value:"Sample emails for <code>pants-devel</code>",id:"sample-emails-for-pants-devel",level:3},{value:"Dev release",id:"dev-release",level:4},{value:"Alpha release",id:"alpha-release",level:4},{value:"Release candidate",id:"release-candidate",level:4},{value:"Stable release",id:"stable-release",level:4},{value:"When Things Go Wrong",id:"when-things-go-wrong",level:2},{value:"https://binaries.pantsbuild.com outage / missing wheels",id:"httpsbinariespantsbuildcom-outage--missing-wheels",level:4}];function d(e){let s={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.p,{children:"How to release a new version of Pants and its plugins."}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.p,{children:["This page covers the nitty-gritty of executing a release, and is probably only interesting for maintainers. If you're interested in when and why Pants is released, please see the ",(0,i.jsx)(s.a,{href:"/2.17/docs/contributions/releases/release-strategy",children:"Release strategy"})," page."]}),"\n",(0,i.jsx)(s.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsx)(s.h3,{id:"1-create-a-pgp-signing-key",children:"1. Create a PGP signing key"}),"\n",(0,i.jsx)(s.p,{children:"If you already have one, you can reuse it."}),"\n",(0,i.jsxs)(s.p,{children:["You likely want to use the gpg implementation of pgp. On macOS, you can ",(0,i.jsx)(s.code,{children:"brew install gpg"}),". Once gpg is installed, generate a new key: ",(0,i.jsx)(s.a,{href:"https://docs.github.com/en/github/authenticating-to-github/generating-a-new-gpg-key",children:"https://docs.github.com/en/github/authenticating-to-github/generating-a-new-gpg-key"}),"."]}),"\n",(0,i.jsx)(s.p,{children:"Please use a password for your key!"}),"\n",(0,i.jsx)(s.h3,{id:"2-add-your-pgp-key-to-github",children:"2. Add your PGP key to GitHub."}),"\n",(0,i.jsxs)(s.p,{children:["See ",(0,i.jsx)(s.a,{href:"https://docs.github.com/en/github/authenticating-to-github/adding-a-new-gpg-key-to-your-github-account",children:"https://docs.github.com/en/github/authenticating-to-github/adding-a-new-gpg-key-to-your-github-account"}),"."]}),"\n",(0,i.jsx)(s.h3,{id:"3-configure-git-to-use-your-pgp-key",children:"3. Configure Git to use your PGP key."}),"\n",(0,i.jsxs)(s.p,{children:["See ",(0,i.jsx)(s.a,{href:"https://docs.github.com/en/github/authenticating-to-github/telling-git-about-your-signing-key",children:"https://docs.github.com/en/github/authenticating-to-github/telling-git-about-your-signing-key"}),"."]}),"\n",(0,i.jsx)(s.p,{children:"Note: the last step is required on macOS."}),"\n",(0,i.jsx)(s.h3,{id:"4-authenticate-with-the-github-api",children:"4. Authenticate with the Github API"}),"\n",(0,i.jsxs)(s.p,{children:["Ensure that you have a ",(0,i.jsx)(s.a,{href:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token",children:"personal access token"})," for your Github account in your ",(0,i.jsx)(s.code,{children:".netrc"})," file."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"machine api.github.com\n    login <username>\n    password <token>\n"})}),"\n",(0,i.jsx)(s.h2,{id:"step-1-prepare-the-release",children:"Step 1: Prepare the release"}),"\n",(0,i.jsx)(s.p,{children:"The release is automated, outside of these steps:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"Removing any completed deprecations"}),"\n",(0,i.jsx)(s.li,{children:"Changelog preparation"}),"\n",(0,i.jsx)(s.li,{children:"CONTRIBUTOR.md updates"}),"\n",(0,i.jsx)(s.li,{children:"Version bumping"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"These steps always happen in the release branch."}),"\n",(0,i.jsxs)(s.p,{children:["For ",(0,i.jsx)(s.code,{children:"dev"})," and ",(0,i.jsx)(s.code,{children:"a0"})," releases, the release branch is ",(0,i.jsx)(s.code,{children:"main"}),". For all other release candidates and stable releases, the release branch is that respective version's branch, e.g. ",(0,i.jsx)(s.code,{children:"2.8.x"})," or ",(0,i.jsx)(s.code,{children:"2.9.x"}),"."]}),"\n",(0,i.jsxs)(s.h3,{id:"0a-dev0---set-up-the-release-series",children:["0a. ",(0,i.jsx)(s.code,{children:"dev0"})," - set up the release series"]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Create a new file in ",(0,i.jsx)(s.code,{children:" src/python/pants/notes"}),", e.g. create ",(0,i.jsx)(s.code,{children:"src/python/pants/notes/2.9.x.md"}),".","\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Copy the title and template over from the prior release, e.g. ",(0,i.jsx)(s.code,{children:"2.8.x.md"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["Add the new file to ",(0,i.jsx)(s.code,{children:"pants.toml"})," in the ",(0,i.jsx)(s.code,{children:"release_notes"})," section."]}),"\n"]}),"\n",(0,i.jsxs)(s.h3,{id:"0b-dev---check-for-any-deprecations",children:["0b. ",(0,i.jsx)(s.code,{children:"dev"})," - Check for any deprecations"]}),"\n",(0,i.jsx)(s.p,{children:"Your release will fail if there are any deprecated things that should now be removed. Usually, the person who deprecated the feature should have already removed the stale code, but they may have forgotten."}),"\n",(0,i.jsxs)(s.p,{children:["To check for this, search for the version you are releasing. For example, with ",(0,i.jsx)(s.a,{href:"https://github.com/BurntSushi/ripgrep",children:"ripgrep"}),", run ",(0,i.jsx)(s.code,{children:"rg -C3 2.9.0.dev0"}),"."]}),"\n",(0,i.jsx)(s.p,{children:"If there are things that must be removed, you can either:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"Ping the person who made the deprecation to ask them to remove it."}),"\n",(0,i.jsx)(s.li,{children:"Remove it yourself, either in the release prep or as a precursor PR."}),"\n",(0,i.jsx)(s.li,{children:"Bump the removal date back by one dev release."}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"0c-release-candidates---cherry-pick-relevant-changes",children:"0c. Release candidates - cherry-pick relevant changes"}),"\n",(0,i.jsxs)(s.p,{children:["Cherry-pick all changes labeled ",(0,i.jsx)(s.code,{children:"needs-cherrypick"})," with the relevant milestone for the stable branch, e.g. the milestone ",(0,i.jsx)(s.code,{children:"2.9.x"}),"."]}),"\n",(0,i.jsx)(s.p,{children:"These pull requests must have been merged into main first, so they will already be closed."}),"\n",(0,i.jsx)(s.p,{children:"To cherry-pick, for example, from 2.9.x:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"git fetch https://github.com/pantsbuild/pants 2.9.x"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"git checkout -b <new-branch-name> FETCH_HEAD"})}),"\n",(0,i.jsxs)(s.li,{children:["Find the commit SHA by running ",(0,i.jsx)(s.code,{children:"git log main"})," or looking in GitHub: ",(0,i.jsx)(s.a,{href:"https://github.com/pantsbuild/pants/commits/main",children:"https://github.com/pantsbuild/pants/commits/main"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"git cherry-pick <sha>"}),", using the SHA from the previous step."]}),"\n",(0,i.jsxs)(s.li,{children:["Open a pull request to merge into the release branch, e.g. ",(0,i.jsx)(s.code,{children:"2.9.x"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Do not push directly to the release branch. All changes should be added through a pull request."}),"\n",(0,i.jsxs)(s.p,{children:["After a commit has been cherry-picked, remove the ",(0,i.jsx)(s.code,{children:"needs-cherrypick"})," label and remove it from the release milestone."]}),"\n",(0,i.jsx)(s.h3,{id:"1-prepare-the-changelog",children:"1. Prepare the changelog"}),"\n",(0,i.jsxs)(s.p,{children:["Update the release page in ",(0,i.jsx)(s.code,{children:"src/python/pants/notes"})," for this release series, e.g. update ",(0,i.jsx)(s.code,{children:"src/python/pants/notes/2.9.x.md"}),"."]}),"\n",(0,i.jsxs)(s.p,{children:["Run ",(0,i.jsx)(s.code,{children:"git fetch --all --tags"})," to be sure you have the latest release tags available locally."]}),"\n",(0,i.jsxs)(s.p,{children:["From the release branch, run ",(0,i.jsx)(s.code,{children:"pants run build-support/bin/changelog.py -- --prior 2.9.0.dev0 --new 2.9.0.dev1"})," with the relevant versions."]}),"\n",(0,i.jsxs)(s.p,{children:["This will generate the sections to copy into the release notes. Delete any empty sections. Do not paste the ",(0,i.jsx)(s.code,{children:"Internal"})," section into the notes file. Instead, paste into a comment on the prep PR."]}),"\n",(0,i.jsx)(s.p,{children:"You are encouraged to fix typos and tweak change descriptions for clarity to users. Ensure that there is exactly one blank line between descriptions, headers etc."}),"\n",(0,i.jsxs)(s.admonition,{title:"See any weird PR titles?",type:"note",children:[(0,i.jsx)(s.p,{children:"Sometimes, committers accidentally use the wrong title when squashing and merging because GitHub pulls the title from the commit title when there is only one commit."}),(0,i.jsx)(s.p,{children:'If you see a vague or strange title like "fix bug", open the original PR to see if the PR title is more descriptive. If it is, please use the more descriptive title instead.'})]}),"\n",(0,i.jsxs)(s.h3,{id:"2-update-contributorsmd",children:["2. Update ",(0,i.jsx)(s.code,{children:"CONTRIBUTORS.md"})]}),"\n",(0,i.jsxs)(s.p,{children:["Run ",(0,i.jsx)(s.code,{children:"pants run build-support/bin/contributors.py"})]}),"\n",(0,i.jsx)(s.p,{children:"Take note of any new contributors since the last release so that you can give a shoutout in the announcement email."}),"\n",(0,i.jsxs)(s.p,{children:["If this is a stable release, then you can use ",(0,i.jsx)(s.code,{children:"git diff"})," to find all new contributors since the previous stable release, to give them all a shoutout in the stable release email. E.g.,"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"git diff release_2.8.0..release_2.9.0 CONTRIBUTORS.md\n"})}),"\n",(0,i.jsxs)(s.h3,{id:"3-bump-the-version",children:["3. Bump the ",(0,i.jsx)(s.code,{children:"VERSION"})]}),"\n",(0,i.jsxs)(s.p,{children:["Change ",(0,i.jsx)(s.code,{children:"src/python/pants/VERSION"})," to the new release, e.g. ",(0,i.jsx)(s.code,{children:"2.12.0.dev0"}),". If you encounter an ",(0,i.jsx)(s.code,{children:"a0"})," version on ",(0,i.jsx)(s.code,{children:"main"}),", then the next release will be for a new release series (i.e. you'll bump from ",(0,i.jsx)(s.code,{children:"2.12.0a0"})," to ",(0,i.jsx)(s.code,{children:"2.13.0.dev0"}),")."]}),"\n",(0,i.jsx)(s.h3,{id:"4-post-the-prep-to-github",children:"4. Post the prep to GitHub"}),"\n",(0,i.jsxs)(s.p,{children:["Open a pull request on GitHub to merge into the release branch. Post the PR to the ",(0,i.jsx)(s.code,{children:"#development"})," in Slack."]}),"\n",(0,i.jsx)(s.p,{children:"Merge once approved and green."}),"\n",(0,i.jsxs)(s.h3,{id:"5a-a0---create-a-new-git-branch",children:["5a. ",(0,i.jsx)(s.code,{children:"a0"})," - create a new Git branch"]}),"\n",(0,i.jsxs)(s.p,{children:["For example, if you're releasing ",(0,i.jsx)(s.code,{children:"2.9.0a0"}),", create the branch ",(0,i.jsx)(s.code,{children:"2.9.x"})," by running the below. Make sure you are on your release commit before doing this."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"$ git checkout -b 2.9.x\n$ git push upstream 2.9.x\n"})}),"\n",(0,i.jsx)(s.h2,{id:"step-2-update-this-docs-site",children:"Step 2: Update this docs site"}),"\n",(0,i.jsxs)(s.p,{children:["Note that this step can currently only be performed by a subset of maintainers due to a paid maximum number of seats. If you do not have a readme.com account, contact someone in the ",(0,i.jsx)(s.code,{children:"#maintainers-confidential"})," channel in Slack to help out."]}),"\n",(0,i.jsxs)(s.h3,{id:"dev0---set-up-the-new-version",children:[(0,i.jsx)(s.code,{children:"dev0"})," - set up the new version"]}),"\n",(0,i.jsxs)(s.p,{children:["Go to the ",(0,i.jsx)(s.a,{href:"https://dash.readme.com/",children:"documentation dashboard"}),'. In the top left dropdown, where it says the current version, click "Manage versions". Click "Add new version" and use a "v" with the minor release number, e.g. "v2.9". Fork from the prior release. Mark this new version as public by clicking on "Is public?"']}),"\n",(0,i.jsxs)(s.h3,{id:"sync-the-docs-content",children:["Sync the ",(0,i.jsx)(s.code,{children:"docs/"})," content"]}),"\n",(0,i.jsxs)(s.p,{children:["See the ",(0,i.jsx)(s.code,{children:"docs/NOTES.md"})," for instructions setting up the the necessary Node tooling your first time.\nYou'll need to 1st login as outlined there via some variant of ",(0,i.jsx)(s.code,{children:"npx rdme login --2fa --project pants ..."}),".\nOn the relevant release branch, run ",(0,i.jsx)(s.code,{children:"npx rdme docs docs/markdown --version v<pants major>.<pants minor>"}),"; e.g: ",(0,i.jsx)(s.code,{children:"npx rdme docs docs/markdown --version v2.8"}),"."]}),"\n",(0,i.jsx)(s.h3,{id:"regenerate-the-references",children:"Regenerate the references"}),"\n",(0,i.jsxs)(s.p,{children:["Still on the relevant release branch, run ",(0,i.jsx)(s.code,{children:"pants run build-support/bin/generate_docs.py -- --sync --api-key <key>"})," with your key from ",(0,i.jsx)(s.a,{href:"https://dash.readme.com/project/pants/v2.8/api-key",children:"https://dash.readme.com/project/pants/v2.8/api-key"}),"."]}),"\n",(0,i.jsxs)(s.h3,{id:"stable-releases---update-the-default-docsite",children:[(0,i.jsx)(s.code,{children:"stable"})," releases - Update the default docsite"]}),"\n",(0,i.jsxs)(s.p,{children:['The first stable release of a branch should update the "default" version of the docsite. For example: when releasing the stable ',(0,i.jsx)(s.code,{children:"2.9.0"}),", the docsite would be changed to pointing from ",(0,i.jsx)(s.code,{children:"v2.8"})," to pointing to ",(0,i.jsx)(s.code,{children:"v2.9"})," by default."]}),"\n",(0,i.jsxs)(s.p,{children:["Also, update the ",(0,i.jsx)(s.a,{href:"/versions",children:"Changelog"}),'\'s "highlights" column with a link to the blog summarizing the release. See the section "Announce the release" below for more info on the blog.']}),"\n",(0,i.jsx)(s.admonition,{title:"Don't have edit access?",type:"caution",children:(0,i.jsxs)(s.p,{children:["Ping someone in the ",(0,i.jsx)(s.code,{children:"#maintainers-confidential"}),' channel in Slack to be added. Alternatively, you can "Suggest edits" in the top right corner.']})}),"\n",(0,i.jsx)(s.h2,{id:"step-3-tag-the-release-to-build-wheels",children:"Step 3: Tag the release to build wheels"}),"\n",(0,i.jsxs)(s.p,{children:["Once you have merged the ",(0,i.jsx)(s.code,{children:"VERSION"})," bump \u2014 which will be on ",(0,i.jsx)(s.code,{children:"main"})," for ",(0,i.jsx)(s.code,{children:"dev"})," and ",(0,i.jsx)(s.code,{children:"a0"})," releases and the release branch for release candidates \u2014 you should tag the release commit to trigger wheel building and PyPI publishing."]}),"\n",(0,i.jsx)(s.p,{children:"First, ensure that you are on your release branch at your version bump commit."}),"\n",(0,i.jsx)(s.admonition,{title:"Tip: if new commits have landed after your release commit",type:"note",children:(0,i.jsxs)(s.p,{children:["You can reset to your release commit by running ",(0,i.jsx)(s.code,{children:"git reset --hard <sha>"}),"."]})}),"\n",(0,i.jsx)(s.p,{children:"Then, run:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"./build-support/bin/release.sh tag-release\n"})}),"\n",(0,i.jsxs)(s.p,{children:["This will tag the release with your PGP key, and push the tag to origin, which will kick off a ",(0,i.jsxs)(s.a,{href:"https://github.com/pantsbuild/pants/actions/workflows/release.yaml",children:[(0,i.jsx)(s.code,{children:"Release"})," job"]})," to build the wheels and publish them to PyPI."]}),"\n",(0,i.jsx)(s.h2,{id:"step-4-release-a-pants-pex",children:"Step 4: Release a Pants PEX"}),"\n",(0,i.jsxs)(s.p,{children:["After the ",(0,i.jsxs)(s.a,{href:"https://github.com/pantsbuild/pants/actions/workflows/release.yaml",children:[(0,i.jsx)(s.code,{children:"Release"})," job"]}),' for your tag has completed, you should additionally build and publish the "universal" PEX to Github.']}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"PANTS_PEX_RELEASE=STABLE ./build-support/bin/release.sh build-universal-pex\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Then go to ",(0,i.jsx)(s.a,{href:"https://github.com/pantsbuild/pants/tags",children:"https://github.com/pantsbuild/pants/tags"}),", find your release's tag, click ",(0,i.jsx)(s.code,{children:"Edit tag"}),", and upload the PEX located at ",(0,i.jsx)(s.code,{children:"dist/pex.pants.<version>.pex"}),"."]}),"\n",(0,i.jsx)(s.h2,{id:"step-5-test-the-release",children:"Step 5: Test the release"}),"\n",(0,i.jsx)(s.p,{children:"Run this script as a basic smoke test:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"./build-support/bin/release.sh test-release\n"})}),"\n",(0,i.jsxs)(s.p,{children:["You should also ",(0,i.jsx)(s.a,{href:"https://pypi.org/pypi/pantsbuild.pants",children:"check PyPI"}),' to ensure everything looks good. Click "Release history" to find the version you released, then click it and confirm the changelog is correct on the "Project description" page and that the ',(0,i.jsx)(s.code,{children:"macOS"})," and ",(0,i.jsx)(s.code,{children:"manylinux"}),' wheels show up in the "Download files" page.']}),"\n",(0,i.jsxs)(s.p,{children:["You should also check ",(0,i.jsx)(s.a,{href:"https://github.com/pantsbuild/pants/releases",children:"GitHub Releases"}),' to ensure everything looks good. Find the version you released, then click it and confirm that the "Assets" list includes PEXes for macOS and Linux.']}),"\n",(0,i.jsx)(s.h2,{id:"step-6-announce-the-change",children:"Step 6: Announce the change"}),"\n",(0,i.jsx)(s.p,{children:"Announce the release to:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["the ",(0,i.jsx)(s.a,{href:"https://groups.google.com/forum/#!forum/pants-devel",children:"pants-devel"})," list"]}),"\n",(0,i.jsxs)(s.li,{children:["the ",(0,i.jsx)(s.code,{children:"#announce"})," channel in Slack"]}),"\n"]}),"\n",(0,i.jsxs)(s.h3,{id:"sample-emails-for-pants-devel",children:["Sample emails for ",(0,i.jsx)(s.code,{children:"pants-devel"})]}),"\n",(0,i.jsxs)(s.p,{children:["You can get a contributor list by running the following, where ",(0,i.jsx)(s.code,{children:"<tag>"})," is the tag for the prior release (eg: ",(0,i.jsx)(s.code,{children:"release_2.9.0.dev0"}),"):"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"pants run ./build-support/bin/contributors.py -- -s <tag>\n"})}),"\n",(0,i.jsx)(s.admonition,{title:"Update the links in these templates!",type:"danger",children:(0,i.jsx)(s.p,{children:'When copy pasting these templates, please always check that all versions match the relevant release. When adding a link, use "Test this link" to ensure that it loads properly.'})}),"\n",(0,i.jsx)(s.h4,{id:"dev-release",children:"Dev release"}),"\n",(0,i.jsxs)(s.p,{children:["If the release series' ",(0,i.jsx)(s.code,{children:".dev0"})," has already been released, reply to that email thread for the rest of the ",(0,i.jsx)(s.code,{children:"dev"})," releases."]}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsx)(s.p,{children:"Subject: [dev release] pantsbuild.pants 2.9.0.dev0"}),"\n",(0,i.jsxs)(s.p,{children:["The first weekly dev release for the ",(0,i.jsx)(s.code,{children:"2.9"})," series is now available ",(0,i.jsx)(s.a,{href:"https://pypi.org/project/pantsbuild.pants/2.9.0.dev0/",children:"on PyPI"}),"! Please visit the release page to see the changelog."]}),"\n",(0,i.jsx)(s.p,{children:"Thank you to this week's contributors:"}),"\n",(0,i.jsx)(s.p,{children:"Eustolia Palledino\nAhmad Wensel\nRae Efird\nNiki Fitch"}),"\n",(0,i.jsxs)(s.p,{children:["And a special shout-out to first-time contributor Niki Fitch, with the PR ",(0,i.jsx)(s.a,{href:"https://github.com/pantsbuild/pants/pull/9441",children:(0,i.jsx)(s.code,{children:"Upgrade Rust to 1.63 (#9441)"})}),". Thank you for your contribution!"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsxs)(s.em,{children:["(For more information on how Pants is released, please see the ",(0,i.jsx)(s.a,{href:"/2.17/docs/contributions/releases/release-strategy",children:"release strategy"})," page.)"]})}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"alpha-release",children:"Alpha release"}),"\n",(0,i.jsxs)(s.p,{children:["Reply to the email thread for the series' ",(0,i.jsx)(s.code,{children:"dev"})," releases."]}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsx)(s.p,{children:"Subject: [alpha release] pantsbuild.pants 2.9.0a0"}),"\n",(0,i.jsxs)(s.p,{children:["The first alpha release for ",(0,i.jsx)(s.code,{children:"2.9.0"})," is now available ",(0,i.jsx)(s.a,{href:"https://pypi.org/project/pantsbuild.pants/2.9.0a0/",children:"on PyPI"}),"! Please visit the release page to see the changelog."]}),"\n",(0,i.jsxs)(s.p,{children:["Although alpha releases have not received any vetting beyond what a ",(0,i.jsx)(s.code,{children:"dev"})," release receives, they are the first release for their stable branch, and are worth trying out to help report bugs before we start release candidates."]}),"\n",(0,i.jsx)(s.p,{children:"Thank you to everyone who contributed patches in this cycle!"}),"\n",(0,i.jsx)(s.p,{children:"Niki Fitch\nMario Rozell"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsxs)(s.em,{children:["(For more information on how Pants is released, please see the ",(0,i.jsx)(s.a,{href:"/2.17/docs/contributions/releases/release-strategy",children:"release strategy"})," page.)"]})}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"release-candidate",children:"Release candidate"}),"\n",(0,i.jsxs)(s.p,{children:["Create a new email thread for ",(0,i.jsx)(s.code,{children:"rc0"}),". For other ",(0,i.jsx)(s.code,{children:"rc"}),"s, reply to the email thread for the rest of the patch's release candidates. That is, bundle ",(0,i.jsx)(s.code,{children:"2.9.0"})," release candidates together, and ",(0,i.jsx)(s.code,{children:"2.8.1"})," candidates together, etc."]}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsx)(s.p,{children:"Subject: [release candidate] pantsbuild.pants 2.9.0rc1"}),"\n",(0,i.jsxs)(s.p,{children:["The second release candidate for ",(0,i.jsx)(s.code,{children:"2.9.0"})," is now available ",(0,i.jsx)(s.a,{href:"https://pypi.org/project/pantsbuild.pants/2.9.0rc1/",children:"on PyPI"}),"! Please visit the release page to see the changelog."]}),"\n",(0,i.jsx)(s.p,{children:"Thank you to everyone who tested the previous release, and thank you to the folks who contributed patches!"}),"\n",(0,i.jsx)(s.p,{children:"Niki Fitch\nMario Rozell"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsxs)(s.em,{children:["(For more information on how Pants is released, please see the ",(0,i.jsx)(s.a,{href:"https://www.pantsbuild.org/v2.11/docs/release-strategy",children:"release strategy"})," page.)"]})}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"stable-release",children:"Stable release"}),"\n",(0,i.jsxs)(s.p,{children:["For the first stable release in the series, first, write a blog post to summarize the series using ",(0,i.jsx)(s.a,{href:"https://pants.ghost.io/ghost/#/site",children:"https://pants.ghost.io/ghost/#/site"}),". Please coordinate by posting to #development in Slack. If writing is not your thing, you can ask in ",(0,i.jsx)(s.code,{children:"#maintainers"})," or ",(0,i.jsx)(s.code,{children:"#development"})," if another Pants contributor would be willing to write the blog."]}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsx)(s.p,{children:"Subject: [stable release] pantsbuild.pants 2.9.0"}),"\n",(0,i.jsxs)(s.p,{children:["The first stable release of the ",(0,i.jsx)(s.code,{children:"2.9"})," series is now available ",(0,i.jsx)(s.a,{href:"https://pypi.org/project/pantsbuild.pants/2.9.0/",children:"on PyPI"}),"!"]}),"\n",(0,i.jsxs)(s.p,{children:["See our ",(0,i.jsx)(s.a,{href:"https://blog.pantsbuild.org/introducing-pants-build-2-9-0/",children:"blog post"})," summarizing the release series, or the more detailed changelog on the release page."]}),"\n",(0,i.jsx)(s.p,{children:"Thanks to all of the contributors to the 2.9 series!"}),"\n",(0,i.jsx)(s.p,{children:"Eustolia Palledino\nAhmad Wensel\nRae Efird\nNiki Fitch\nMario Rozell"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsxs)(s.em,{children:["(For more information on how Pants is released, please see the ",(0,i.jsx)(s.a,{href:"/2.17/docs/contributions/releases/release-strategy",children:"release strategy"})," page.)"]})}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"when-things-go-wrong",children:"When Things Go Wrong"}),"\n",(0,i.jsx)(s.p,{children:"From time to time, a release will fail. It's a complex process. The first thing to do after you've\nexhausted your knowledge and debugging skills or patience is to contact others. You might reach out\nto the development or maintainers channels on Pantbuild Slack in the absence of other ideas about\nwhom to ask for help."}),"\n",(0,i.jsx)(s.p,{children:"Some issues are well known or well understood, and they are documented here."}),"\n",(0,i.jsxs)(s.h4,{id:"httpsbinariespantsbuildcom-outage--missing-wheels",children:[(0,i.jsx)(s.a,{href:"https://binaries.pantsbuild.com",children:"https://binaries.pantsbuild.com"})," outage / missing wheels"]}),"\n",(0,i.jsxs)(s.p,{children:["The ",(0,i.jsx)(s.a,{href:"https://binaries.pantsbuild.com",children:"https://binaries.pantsbuild.com"})," site is an S3 bucket that houses Pantsbuild wheels generated in\nCI and used as part of the release process. If there are missing wheels or the wheels can't be\nfetched due to connectivity issues or an S3 outage, you'll learn about this through the release\nscript erroring out. The script is idempotent; so you can just run it again, potentially waiting\nlonger for wheels to be built in CI or outages to clear."]}),"\n",(0,i.jsxs)(s.p,{children:["When the release script finishes, it creates and pushes a release tag. This will trigger a ",(0,i.jsx)(s.a,{href:"https://github.com/pantsbuild/pants/blob/main/.github/workflows/release.yaml",children:"release\nGitHub workflow"})," that\ncould ~silently error later if there were to be an S3 outage. This job currently is responsible for\npushing a file mapping the release tag to the commit it tags out to\n",(0,i.jsx)(s.code,{children:"https://binaries.pantsbuild.com/tags/pantsbuild.pants/<tag>"}),". If the tag is missing, it should be\nfixed by running the following in an environment where you have both ",(0,i.jsx)(s.code,{children:"AWS_ACCESS_KEY_ID"})," and\n",(0,i.jsx)(s.code,{children:"AWS_SECRET_ACCESS_KEY"})," of an account that has permissions to push to the Pantsbuild S3 bucket:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"pants run build-support/bin/backfill_s3_release_tag_mappings.py -- \\\n   --aws-cli-symlink-path $HOME/bin\n"})}),"\n",(0,i.jsxs)(s.p,{children:["If this sounds mysterious or new to you, you probably don't have such an account and should ask for\nhelp from other maintainers. You may want to adjust the ",(0,i.jsx)(s.code,{children:"--aws-cli-symlink-path"})," to your liking as\nwell, consult ",(0,i.jsx)(s.code,{children:"--help"})," for more information."]})]})}function c(e={}){let{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},848193(e,s,t){t.d(s,{R:()=>a,x:()=>l});var n=t(830758);let i={},r=n.createContext(i);function a(e){let s=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),n.createElement(r.Provider,{value:s},e.children)}},634166(e){e.exports=JSON.parse('{"id":"docs/contributions/releases/release-process","title":"Release process","description":"How to release a new version of Pants and its plugins.","source":"@site/versioned_docs/version-2.17/docs/contributions/releases/release-process.mdx","sourceDirName":"docs/contributions/releases","slug":"/docs/contributions/releases/release-process","permalink":"/2.17/docs/contributions/releases/release-process","draft":false,"unlisted":false,"editUrl":"https://github.com/pantsbuild/pants/edit/main/docs/docs/contributions/releases/release-process.mdx","tags":[],"version":"2.17","sidebarPosition":1,"frontMatter":{"title":"Release process","sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Release strategy","permalink":"/2.17/docs/contributions/releases/release-strategy"},"next":{"title":"GitHub Actions macOS ARM64 runners","permalink":"/2.17/docs/contributions/releases/github-actions-macos-arm64-runners"}}')}}]);