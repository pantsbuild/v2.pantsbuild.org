"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["429002"],{723047(e,n,a){a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var s=a(875539),i=a(886070),t=a(848193);let r={title:"package.json",sidebar_position:3},o,c={},d=[{value:"Package manager",id:"package-manager",level:3},{value:"Testing",id:"testing",level:3},{value:"Packaging",id:"packaging",level:3}];function l(e){let n={a:"a",admonition:"admonition",code:"code",h3:"h3",hr:"hr",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"package.json parsing and scripts integration"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:["As mentioned in the ",(0,i.jsx)(n.a,{href:"/2.23/docs/javascript/overview/",children:"overview introduction"}),", Pants's approach to enable support for Javascript is to\nbe a thin caching layer on top of your current tooling."]}),"\n",(0,i.jsxs)(n.p,{children:["Refer to the ",(0,i.jsx)(n.a,{href:"https://github.com/pantsbuild/example-javascript",children:"example repository"})," for example usage."]}),"\n",(0,i.jsx)(n.h3,{id:"package-manager",children:"Package manager"}),"\n",(0,i.jsxs)(n.p,{children:["Pants uses ",(0,i.jsx)(n.code,{children:"corepack"})," to manage package manager versions and installation. Like ",(0,i.jsx)(n.code,{children:"corepack"}),', Pants respects\nthe experimental "packageManager" feature in ',(0,i.jsx)(n.code,{children:"package.json"})," files."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="package.json"',children:'{\n    "name": "@my-company/pkg",\n    "packageManager": "yarn@1.22.22"\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["this setting will ensure that all scripts invoked for this package.json, and any\n",(0,i.jsx)(n.a,{href:"/2.23/docs/javascript/overview/workspaces",children:"workspaces managed by this package.json"})," will use this particular version of ",(0,i.jsx)(n.code,{children:"yarn"}),".\nIt can be more convenient to define a project level\n",(0,i.jsx)(n.a,{href:"/2.23/docs/javascript/overview/enabling-javascript-support#setting-up-a-package-manager",children:"package manager"}),"."]}),"\n",(0,i.jsxs)(n.admonition,{type:"tip",children:[(0,i.jsxs)(n.mdxAdmonitionTitle,{children:["Choosing between ",(0,i.jsx)(n.code,{children:"pants.toml"})," or ",(0,i.jsx)(n.code,{children:"package.json"})," for package manager version configuration"]}),(0,i.jsxs)(n.p,{children:["In general, if your team runs all tooling via Pants, using ",(0,i.jsx)(n.code,{children:"pants.toml"}),' reduces boilerplate in cases where you maintain\nmultiple packages. If your team mixes usage of Pants and "bare" package manager invocations, package.json#packageManager\nis the safer option.']})]}),"\n",(0,i.jsx)(n.h3,{id:"testing",children:"Testing"}),"\n",(0,i.jsxs)(n.p,{children:["By default Pants assumes a ",(0,i.jsx)(n.code,{children:"package_json"})," target mapping a ",(0,i.jsx)(n.code,{children:"package.json"})," includes a test script, e.g."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="package.json"',children:'{\n    "name": "@my-company/pkg",\n    "scripts": {\n        "test": "jest"\n    },\n    "devDependencies": {\n        "jest": "^29.5.0"\n    }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["and will use this script to execute your tests when running ",(0,i.jsx)(n.code,{children:"pants test ::"}),".\nSee ",(0,i.jsx)(n.a,{href:"/2.23/docs/using-pants/key-concepts/goals#goal-arguments",children:"Goal arguments"})," for the normal techniques for telling Pants what to\nrun on."]}),"\n",(0,i.jsxs)(n.p,{children:["To enable configurability, the build symbol ",(0,i.jsx)(n.a,{href:"../../../reference/build-file-symbols/node_test_script",children:(0,i.jsx)(n.code,{children:"node_test_script"})}),'\ncontains options for changing the entry point from "test", and to enable coverage reporting.']}),"\n",(0,i.jsx)(n.h3,{id:"packaging",children:"Packaging"}),"\n",(0,i.jsxs)(n.p,{children:["Similarly, build scripts can be introduced to Pants via the\n",(0,i.jsx)(n.a,{href:"../../../reference/build-file-symbols/node_build_script",children:(0,i.jsx)(n.code,{children:"node_build_script"})})," build symbol. This is intended to be used\nas a way to introduce artifacts generated via bundlers and/or compilers installed and ran via your package manager.\nThe result can the be consumed by other targets as either ",(0,i.jsx)(n.code,{children:"resource"}),"-targets that can be depended on,\nor as a package for the ",(0,i.jsx)(n.a,{href:"/2.23/docs/docker/",children:"docker backend"}),"."]})]})}function p(e={}){let{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},848193(e,n,a){a.d(n,{R:()=>r,x:()=>o});var s=a(830758);let i={},t=s.createContext(i);function r(e){let n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(t.Provider,{value:n},e.children)}},875539(e){e.exports=JSON.parse('{"id":"docs/javascript/overview/package","title":"package.json","description":"package.json parsing and scripts integration","source":"@site/versioned_docs/version-2.23/docs/javascript/overview/package.mdx","sourceDirName":"docs/javascript/overview","slug":"/docs/javascript/overview/package","permalink":"/2.23/docs/javascript/overview/package","draft":false,"unlisted":false,"editUrl":"https://github.com/pantsbuild/pants/edit/main/docs/docs/javascript/overview/package.mdx","tags":[],"version":"2.23","sidebarPosition":3,"frontMatter":{"title":"package.json","sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"Lockfiles","permalink":"/2.23/docs/javascript/overview/lockfiles"},"next":{"title":"Plugins overview","permalink":"/2.23/docs/writing-plugins/overview"}}')}}]);