"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["359816"],{827816(e,r,t){t.r(r),t.d(r,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>p});var s=t(607127),i=t(886070),o=t(848193),n=t(554707),d=t(375002);let l={title:"test",description:"Run tests.\n"},a,c={},p=[{value:"Basic options",id:"basic-options",level:2},{value:"<code>debug</code>",id:"debug",level:3},{value:"<code>debug_adapter</code>",id:"debug_adapter",level:3},{value:"<code>extra_env_vars</code>",id:"extra_env_vars",level:3},{value:"<code>force</code>",id:"force",level:3},{value:"<code>open_coverage</code>",id:"open_coverage",level:3},{value:"<code>output</code>",id:"output",level:3},{value:"<code>shard</code>",id:"shard",level:3},{value:"<code>timeouts</code>",id:"timeouts",level:3},{value:"<code>use_coverage</code>",id:"use_coverage",level:3},{value:"Advanced options",id:"advanced-options",level:2},{value:"<code>report</code>",id:"report",level:3},{value:"<code>report_dir</code>",id:"report_dir",level:3},{value:"<code>timeout_default</code>",id:"timeout_default",level:3},{value:"<code>timeout_maximum</code>",id:"timeout_maximum",level:3},{value:"Deprecated options",id:"deprecated-options",level:2},{value:"Related subsystems",id:"related-subsystems",level:2}];function h(e){let r={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"pants test [args]\n"})}),"\n",(0,i.jsx)(r.p,{children:"Run tests."}),"\n",(0,i.jsxs)(r.p,{children:["Backend: ",(0,i.jsx)("span",{className:"color--primary",children:(0,i.jsx)(r.code,{children:"pants.core"})})]}),"\n",(0,i.jsxs)(r.p,{children:["Config section: ",(0,i.jsx)("span",{className:"color--primary",children:(0,i.jsx)(r.code,{children:"[test]"})})]}),"\n",(0,i.jsxs)("span",{className:d.A.options,children:[(0,i.jsx)(r.h2,{id:"basic-options",children:"Basic options"}),(0,i.jsx)(r.h3,{id:"debug",children:(0,i.jsx)(r.code,{children:"debug"})}),(0,i.jsx)(n.A,{cli_repr:"--[no-]test-debug",env_repr:"PANTS_TEST_DEBUG",toml_repr:`[test]
debug = <bool>`,default_repr:"False",children:(0,i.jsx)(r.p,{children:"Run tests sequentially in an interactive process. This is necessary, for example, when you add breakpoints to your code."})}),(0,i.jsx)(r.h3,{id:"debug_adapter",children:(0,i.jsx)(r.code,{children:"debug_adapter"})}),(0,i.jsxs)(n.A,{cli_repr:"--[no-]test-debug-adapter",env_repr:"PANTS_TEST_DEBUG_ADAPTER",toml_repr:`[test]
debug_adapter = <bool>`,default_repr:"False",children:[(0,i.jsxs)(r.p,{children:["Run tests sequentially in an interactive process, using a Debug Adapter (",(0,i.jsx)(r.a,{href:"https://microsoft.github.io/debug-adapter-protocol/",children:"https://microsoft.github.io/debug-adapter-protocol/"}),") for the language if supported."]}),(0,i.jsx)(r.p,{children:"The interactive process used will be immediately blocked waiting for a client before continuing."}),(0,i.jsx)(r.p,{children:"This option implies --debug."})]}),(0,i.jsx)(r.h3,{id:"extra_env_vars",children:(0,i.jsx)(r.code,{children:"extra_env_vars"})}),(0,i.jsx)(n.A,{cli_repr:"--test-extra-env-vars=\"['<str>', '<str>', ...]\"",env_repr:"PANTS_TEST_EXTRA_ENV_VARS",toml_repr:`[test]
extra_env_vars = [
  '<str>',
  '<str>',
  ...,
]`,default_repr:"[]",children:(0,i.jsxs)(r.p,{children:["Additional environment variables to include in test processes. Entries are strings in the form ",(0,i.jsx)(r.code,{children:"ENV_VAR=value"})," to use explicitly; or just ",(0,i.jsx)(r.code,{children:"ENV_VAR"})," to copy the value of a variable in Pants's own environment."]})}),(0,i.jsx)(r.h3,{id:"force",children:(0,i.jsx)(r.code,{children:"force"})}),(0,i.jsx)(n.A,{cli_repr:"--[no-]test-force",env_repr:"PANTS_TEST_FORCE",toml_repr:`[test]
force = <bool>`,default_repr:"False",children:(0,i.jsx)(r.p,{children:"Force the tests to run, even if they could be satisfied from cache."})}),(0,i.jsx)(r.h3,{id:"open_coverage",children:(0,i.jsx)(r.code,{children:"open_coverage"})}),(0,i.jsx)(n.A,{cli_repr:"--[no-]test-open-coverage",env_repr:"PANTS_TEST_OPEN_COVERAGE",toml_repr:`[test]
open_coverage = <bool>`,default_repr:"False",children:(0,i.jsx)(r.p,{children:"If a coverage report file is generated, open it on the local system if the system supports this."})}),(0,i.jsx)(r.h3,{id:"output",children:(0,i.jsx)(r.code,{children:"output"})}),(0,i.jsx)(n.A,{cli_repr:"--test-output=<ShowOutput>",env_repr:"PANTS_TEST_OUTPUT",toml_repr:`[test]
output = <ShowOutput>`,one_of:"all, failed, none",default_repr:"failed",children:(0,i.jsx)(r.p,{children:"Show stdout/stderr for these tests."})}),(0,i.jsx)(r.h3,{id:"shard",children:(0,i.jsx)(r.code,{children:"shard"})}),(0,i.jsxs)(n.A,{cli_repr:"--test-shard=<str>",env_repr:"PANTS_TEST_SHARD",toml_repr:`[test]
shard = <str>`,default_repr:"",children:[(0,i.jsx)(r.p,{children:'A shard specification of the form "k/N", where N is a positive integer and k is a non-negative integer less than N.'}),(0,i.jsx)(r.p,{children:"If set, the request input targets will be deterministically partitioned into N disjoint subsets of roughly equal size, and only the k'th subset will be used, with all others discarded."}),(0,i.jsx)(r.p,{children:"Useful for splitting large numbers of test files across multiple machines in CI. For example, you can run three shards with --shard=0/3, --shard=1/3, --shard=2/3."}),(0,i.jsx)(r.p,{children:"Note that the shards are roughly equal in size as measured by number of files. No attempt is made to consider the size of different files, the time they have taken to run in the past, or other such sophisticated measures."})]}),(0,i.jsx)(r.h3,{id:"timeouts",children:(0,i.jsx)(r.code,{children:"timeouts"})}),(0,i.jsx)(n.A,{cli_repr:"--[no-]test-timeouts",env_repr:"PANTS_TEST_TIMEOUTS",toml_repr:`[test]
timeouts = <bool>`,default_repr:"True",children:(0,i.jsxs)(r.p,{children:["Enable test target timeouts. If timeouts are enabled then test targets with a ",(0,i.jsx)(r.code,{children:"timeout="})," parameter set on their target will time out after the given number of seconds if not completed. If no timeout is set, then either the default timeout is used or no timeout is configured."]})}),(0,i.jsx)(r.h3,{id:"use_coverage",children:(0,i.jsx)(r.code,{children:"use_coverage"})}),(0,i.jsx)(n.A,{cli_repr:"--[no-]test-use-coverage",env_repr:"PANTS_TEST_USE_COVERAGE",toml_repr:`[test]
use_coverage = <bool>`,default_repr:"False",children:(0,i.jsx)(r.p,{children:"Generate a coverage report if the test runner supports it."})}),(0,i.jsx)(r.h2,{id:"advanced-options",children:"Advanced options"}),(0,i.jsx)(r.h3,{id:"report",children:(0,i.jsx)(r.code,{children:"report"})}),(0,i.jsx)(n.A,{cli_repr:"--[no-]test-report",env_repr:"PANTS_TEST_REPORT",toml_repr:`[test]
report = <bool>`,default_repr:"False",children:(0,i.jsx)(r.p,{children:"Write test reports to --report-dir."})}),(0,i.jsx)(r.h3,{id:"report_dir",children:(0,i.jsx)(r.code,{children:"report_dir"})}),(0,i.jsx)(n.A,{cli_repr:"--test-report-dir=<str>",env_repr:"PANTS_TEST_REPORT_DIR",toml_repr:`[test]
report_dir = <str>`,default_repr:"{distdir}/test/reports",children:(0,i.jsx)(r.p,{children:"Path to write test reports to. Must be relative to the build root."})}),(0,i.jsx)(r.h3,{id:"timeout_default",children:(0,i.jsx)(r.code,{children:"timeout_default"})}),(0,i.jsx)(n.A,{cli_repr:"--test-timeout-default=<int>",env_repr:"PANTS_TEST_TIMEOUT_DEFAULT",toml_repr:`[test]
timeout_default = <int>`,default_repr:"None",children:(0,i.jsxs)(r.p,{children:["The default timeout (in seconds) for a test target if the ",(0,i.jsx)(r.code,{children:"timeout"})," field is not set on the target."]})}),(0,i.jsx)(r.h3,{id:"timeout_maximum",children:(0,i.jsx)(r.code,{children:"timeout_maximum"})}),(0,i.jsx)(n.A,{cli_repr:"--test-timeout-maximum=<int>",env_repr:"PANTS_TEST_TIMEOUT_MAXIMUM",toml_repr:`[test]
timeout_maximum = <int>`,default_repr:"None",children:(0,i.jsx)(r.p,{children:"The maximum timeout (in seconds) that may be used on a test target."})}),(0,i.jsx)(r.h2,{id:"deprecated-options",children:"Deprecated options"}),(0,i.jsx)(r.p,{children:"None"}),(0,i.jsx)(r.h2,{id:"related-subsystems",children:"Related subsystems"}),(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/2.14/reference/subsystems/debug-adapter",children:"debug-adapter"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/2.14/reference/subsystems/filter",children:"filter"})}),"\n"]})]})]})}function u(e={}){let{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},375002(e,r,t){t.d(r,{A:()=>s});let s={options:"options_nrbo"}},554707(e,r,t){t.d(r,{A:()=>n});var s=t(886070),i=t(384122),o=t(580830);function n({children:e,cli_repr:r,env_repr:t,toml_repr:n,one_of:d,default_repr:l,target_field_name:a,removal_version:c,removal_hint:p}){return(0,s.jsxs)("div",{className:"margin-bottom--lg",children:[(0,s.jsx)("code",{style:{color:"var(--pants-reference-option-repr)"},children:r}),(0,s.jsx)("br",{}),(0,s.jsx)("code",{style:{color:"var(--pants-reference-option-repr)"},children:t}),(0,s.jsx)("br",{}),(0,s.jsx)(i.A,{language:"toml",title:"pants.toml",children:n}),(0,s.jsxs)("div",{style:{paddingLeft:"2em"},children:[(0,s.jsxs)("span",{children:[d&&(0,s.jsxs)("span",{children:["one of:"," ",(0,s.jsx)("code",{style:{color:"var(--ifm-color-success)"},children:d}),(0,s.jsx)("br",{})]}),"default:"," ",(0,s.jsx)("span",{style:{color:"var(--ifm-color-success)"},children:(l||"").includes("\n")?(0,s.jsx)("pre",{className:"padding--sm",children:l}):(0,s.jsx)("code",{children:l})})]}),(0,s.jsx)("br",{}),c&&(0,s.jsxs)("span",{style:{color:"var(--ifm-color-danger-darkest)"},children:["Deprecated, will be removed in version: ",c,".",(0,s.jsx)("br",{}),p,(0,s.jsx)("br",{})]}),e,a&&(0,s.jsxs)("span",{children:["Can be overriden by field",(0,s.jsx)("code",{children:a})," on"," ",(0,s.jsx)(o.A,{to:"../targets/local_environment",children:(0,s.jsx)("code",{children:"local_environment"})}),","," ",(0,s.jsx)(o.A,{to:"../targets/docker_environment",children:(0,s.jsx)("code",{children:"docker_environment"})}),", or"," ",(0,s.jsx)(o.A,{to:"../targets/remote_environment",children:(0,s.jsx)("code",{children:"remote_environment"})}),"targets."]})]})]})}},607127(e){e.exports=JSON.parse('{"id":"reference/goals/test","title":"test","description":"Run tests.\\n","source":"@site/versioned_docs/version-2.14/reference/goals/test.mdx","sourceDirName":"reference/goals","slug":"/reference/goals/test","permalink":"/2.14/reference/goals/test","draft":false,"unlisted":false,"tags":[],"version":"2.14","frontMatter":{"title":"test","description":"Run tests.\\n"},"sidebar":"referenceSidebar","previous":{"title":"tailor","permalink":"/2.14/reference/goals/tailor"},"next":{"title":"update-build-files","permalink":"/2.14/reference/goals/update-build-files"}}')}}]);