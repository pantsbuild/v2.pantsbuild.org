"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["617675"],{246946(e,n,a){a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>h});var i=a(48762),r=a(886070),s=a(848193),t=a(685008),l=a(637180);let o={title:"Tagging Docker images",sidebar_position:1},d,c={},h=[{value:"Configuring registries",id:"configuring-registries",level:2},{value:"Setting a repository name",id:"setting-a-repository-name",level:2},{value:"Tagging images",id:"tagging-images",level:2},{value:"Using env vars to include dynamic data in tags",id:"using-env-vars-to-include-dynamic-data-in-tags",level:2},{value:"Providing additional image tags with a plugin",id:"providing-additional-image-tags-with-a-plugin",level:2},{value:"All together: Registries, Repositories and Tags",id:"all-together-registries-repositories-and-tags",level:2},{value:"String interpolation using placeholder values",id:"string-interpolation-using-placeholder-values",level:2},{value:"Retrieving the tags of a packaged image",id:"retrieving-the-tags-of-a-packaged-image",level:2}];function g(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",hr:"hr",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"How to set registry, repository and tag names on your images"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"configuring-registries",children:"Configuring registries"}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.code,{children:"docker_image"})," target takes an optional ",(0,r.jsx)(n.code,{children:"registries"})," field, whose value is a list of registry endpoints and aliases:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="src/example/BUILD"',children:'docker_image(\n    name="demo",\n    registries=[\n        "reg1.company.internal",\n        "@company-registry2",\n    ]\n)\n'})}),"\n",(0,r.jsx)(n.p,{children:"When publishing this image, it will be pushed to these registries by default."}),"\n",(0,r.jsxs)(n.p,{children:["In order to provide registry specific configuration, add them to the Pants configuration under\n",(0,r.jsx)(n.code,{children:"[docker.registries.<alias>]"})," and refer to them by their alias from the ",(0,r.jsx)(n.code,{children:"docker_image"})," targets,\nusing a ",(0,r.jsx)(n.code,{children:"@"})," prefix."]}),"\n",(0,r.jsxs)(n.p,{children:["Options for ",(0,r.jsx)(n.code,{children:"registries"})," in ",(0,r.jsx)(n.code,{children:"pants.toml"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"address"})," - The registry endpoint."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"default"})," - Use this registry for all ",(0,r.jsx)(n.code,{children:"docker_image"})," targets that does not provide a value for\nthe ",(0,r.jsx)(n.code,{children:"registries"})," field. Multiple registries may be used as default at the same time."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"extra_image_tags"})," - Registry specific version tags to apply to the image when using this\nregistry."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"repository"})," - Format the repository part of the image name for this image. See ",(0,r.jsx)(n.a,{href:"#setting-a-repository-name",children:"Setting a\nrepository name"})," for details of this option."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"skip_push"})," - Do not push images to this registry during ",(0,r.jsx)(n.code,{children:"pants publish"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"use_local_alias"})," - Use the registry alias as a shorter name to use locally such as when running\nan image, useful if the address is unwieldy long. When building images using ",(0,r.jsx)(n.code,{children:"pants package"}),",\nthe image will be tagged with all image names for the target where as when simply running an\nimage with ",(0,r.jsx)(n.code,{children:"pants run"})," only the shorter image name will be tagged avoid cluttering the Docker\nimages repository. The shorter image names are automatically skipped for any push operations."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Example:"}),"\n",(0,r.jsxs)(t.A,{groupId:"code-examples",children:[(0,r.jsx)(l.A,{value:"pants.toml",label:"pants.toml",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",metastring:'tab={"label":"pants.toml"}',children:'[docker.registries.company-registry1]\naddress = "reg1.company.internal"\ndefault = true\nextra_image_tags = ["dev"]\n\n[docker.registries.company-registry2]\naddress = "reg2.company.internal"\nskip_push = true\n\n[docker.registries.company-registry3]\naddress = "reg3.company.internal"\nrepository = "{parent_directory}/{name}"\nuse_local_alias = true\n'})})}),(0,r.jsx)(l.A,{value:"src/example/build",label:"src/example/BUILD",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'tab={"label":"src/example/BUILD"}',children:'docker_image(name="demo")\n\n# This is equivalent to the previous target,\n# since company-registry1 is the default registry:\ndocker_image(\n    name="demo",\n    registries=["@company-registry1"],\n)\n\n# You can mix named and direct registry references.\ndocker_image(\n    name="demo2",\n    registries=[\n        "@company-registry2",\n        "ext-registry.company-b.net:8443",\n    ]\n)\n'})})})]}),"\n",(0,r.jsx)(n.h2,{id:"setting-a-repository-name",children:"Setting a repository name"}),"\n",(0,r.jsxs)(n.p,{children:["In Docker parlance, an image is identified by a ",(0,r.jsx)(n.em,{children:"repository"})," and one or more ",(0,r.jsx)(n.em,{children:"tags"})," within that repository."]}),"\n",(0,r.jsxs)(n.p,{children:["You set a repository name using the ",(0,r.jsx)(n.code,{children:"repository"})," field on ",(0,r.jsx)(n.code,{children:"docker_image"}),":"]}),"\n",(0,r.jsx)(t.A,{groupId:"code-examples",children:(0,r.jsx)(l.A,{value:"src/example/build",label:"src/example/BUILD",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'tab={"label":"src/example/BUILD"}',children:'docker_image(\n    name="demo",\n    repository="example/demo",\n)\n'})})})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"$ pants package src/example:demo\n# Will build the image: example/demo:latest\n"})}),"\n",(0,r.jsxs)(n.p,{children:["To use a repository only for a specific registry, provide a ",(0,r.jsx)(n.code,{children:"repository"})," value in the registry\nconfiguration, and this can contain placeholders in curly braces that will be interpolated for each\nimage name."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",metastring:'title="pants.toml"',children:'[docker.registries.demo]\naddress = "reg.company.internal"\nrepository = "example/{name}"\n'})}),"\n",(0,r.jsxs)(n.p,{children:["You can also specify a default repository name in config, and this name can contain placeholders in\ncurly braces that will be interpolated for each ",(0,r.jsx)(n.code,{children:"docker_image"}),":"]}),"\n",(0,r.jsxs)(t.A,{groupId:"code-examples",children:[(0,r.jsx)(l.A,{value:"pants.toml",label:"pants.toml",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",metastring:'tab={"label":"pants.toml"}',children:'[docker]\ndefault_repository = "{directory}/{name}"\n'})})}),(0,r.jsx)(l.A,{value:"src/example/build",label:"src/example/BUILD",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'tab={"label":"src/example/BUILD"}',children:'docker_image(\n    name="demo",\n)\n'})})})]}),"\n",(0,r.jsx)(n.p,{children:"The default placeholders are:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"{name}"}),": The name of the ",(0,r.jsx)(n.code,{children:"docker_image"})," target."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"{directory}"}),": The folder name of the docker_image's BUILD file."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"{parent_directory}"}),": The parent folder name of ",(0,r.jsx)(n.code,{children:"{directory}"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"{full_directory}"}),": The full path to the BUILD file."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"{build_args.ARG_NAME}"}),": Each defined Docker build arg is available for interpolation under the ",(0,r.jsx)(n.code,{children:"build_args."})," prefix."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"{default_repository}"}),": The default repository from configuration."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"{target_repository}"}),": The repository on the ",(0,r.jsx)(n.code,{children:"docker_image"})," if provided, otherwise the default repository."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Since repository names often conform to patterns like these, this can save you on some boilerplate\nby allowing you to omit the ",(0,r.jsx)(n.code,{children:"repository"})," field on each ",(0,r.jsx)(n.code,{children:"docker_image"}),". But you can always override\nthis field on specific ",(0,r.jsx)(n.code,{children:"docker_image"})," targets, of course. In fact, you can use these placeholders in\nthe ",(0,r.jsx)(n.code,{children:"repository"})," field as well, if you find that helpful."]}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"#string-interpolation-using-placeholder-values",children:"String interpolation using placeholder values"})," for more information."]}),"\n",(0,r.jsx)(n.h2,{id:"tagging-images",children:"Tagging images"}),"\n",(0,r.jsxs)(n.p,{children:["When Docker builds images, it can tag them with a set of tags. Pants will apply the tags listed in\nthe ",(0,r.jsx)(n.code,{children:"image_tags"})," field of ",(0,r.jsx)(n.code,{children:"docker_image"}),", and any additional tags if defined from the registry\nconfiguration (see ",(0,r.jsx)(n.a,{href:"#configuring-registries",children:"Configuring registries"}),")."]}),"\n",(0,r.jsxs)(n.p,{children:["(Note that the field is named ",(0,r.jsx)(n.code,{children:"image_tags"})," and not just ",(0,r.jsx)(n.code,{children:"tags"}),", because Pants has ",(0,r.jsx)(n.a,{href:"../../reference/targets/target#tags",children:"its own tags\nconcept"}),", which is unrelated.)"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="src/example/BUILD"',children:'docker_image(\n    name="demo",\n    repository="example/demo",\n    image_tags=["1.2", "example"]\n)\n'})}),"\n",(0,r.jsxs)(n.p,{children:["When pants builds the ",(0,r.jsx)(n.code,{children:"src/example:demo"})," target, a single image will be built, with two tags applied:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"example/demo:1.2"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"example/demo:example"})}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["It's often useful to keep versions of derived images and their base images in sync. Pants helps you\nout with this by interpolating tags referenced in ",(0,r.jsx)(n.code,{children:"FROM"})," commands in your Dockerfile into the\n",(0,r.jsx)(n.code,{children:"image_tags"})," in the corresponding ",(0,r.jsx)(n.code,{children:"docker_image"}),":"]}),"\n",(0,r.jsxs)(t.A,{groupId:"code-examples",children:[(0,r.jsx)(l.A,{value:"src/example/build",label:"src/example/BUILD",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'tab={"label":"src/example/BUILD"}',children:'# These three are equivalent\ndocker_image(name="demo1", image_tags=["{tags.upstream}"])\ndocker_image(name="demo1", image_tags=["{tags.stage0}"])\n# The first FROM may also be referred to as "baseimage"\ndocker_image(name="demo1", image_tags=["{tags.baseimage}"])\n\n# Any stage my be used, and being a format string, you may add extra text as well.\ndocker_image(name="demo1", image_tags=["{tags.stage1}-custom-suffix"])\n'})})}),(0,r.jsx)(l.A,{value:"src/example/dockerfile",label:"src/example/Dockerfile",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",metastring:'tab={"label":"src/example/Dockerfile"}',children:"FROM upstream:1.2 as upstream\n# ...\nFROM scratch\n# ...\n"})})})]}),"\n",(0,r.jsx)(n.p,{children:"This way you can specify a version just once, on the base image, and the derived images will\nautomatically acquire the same version."}),"\n",(0,r.jsxs)(n.p,{children:["You may also use any Docker build arguments (when configured as described in ",(0,r.jsx)(n.a,{href:"../docker#build-arguments",children:"Docker build\narguments"}),") for interpolation into the ",(0,r.jsx)(n.code,{children:"image_tags"})," in the corresponding\n",(0,r.jsx)(n.code,{children:"docker_image"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="src/example/BUILD"',children:'docker_image(image_tags=["{build_args.ARG_NAME}"])\n'})}),"\n",(0,r.jsx)(n.h2,{id:"using-env-vars-to-include-dynamic-data-in-tags",children:"Using env vars to include dynamic data in tags"}),"\n",(0,r.jsx)(n.p,{children:"You can interpolate dynamic data, such as the current Git commit sha, in an image tag, using environment variables and Docker build args."}),"\n",(0,r.jsxs)(n.p,{children:["For example, you can declare a custom build arg, either in ",(0,r.jsx)(n.code,{children:"extra_build_args"})," for a specific ",(0,r.jsx)(n.code,{children:"docker_image"})," target, or for all ",(0,r.jsx)(n.code,{children:"docker_image"})," targets in ",(0,r.jsx)(n.code,{children:"pants.toml"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# pants.toml\n[docker]\nbuild_args = ["GIT_COMMIT"]\n'})}),"\n",(0,r.jsx)(n.p,{children:"and use this build arg in the image tag:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# src/example/BUILD\ndocker_image(name="demo", image_tags=["1.2-{build_args.GIT_COMMIT}"])\n'})}),"\n",(0,r.jsx)(n.p,{children:"Then, if you run Pants with the data set in an environment variable of the same name:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"$ GIT_COMMIT=$(git rev-parse HEAD) pants package src/example:demo\n"})}),"\n",(0,r.jsx)(n.p,{children:"the value from the environment will be used."}),"\n",(0,r.jsxs)(n.admonition,{title:"Generating dynamic tags in a plugin",type:"note",children:[(0,r.jsxs)(n.p,{children:["If you don't want to use the environment variable method described above, you'll need to write some custom plugin code. Don't hesitate to ",(0,r.jsx)(n.a,{href:"/community/getting-help",children:"reach out"})," for help with this."]}),(0,r.jsx)(n.p,{children:"We are looking into making some common dynamic data, such as the git sha, automatically available in the core Docker plugin in the future."})]}),"\n",(0,r.jsx)(n.h2,{id:"providing-additional-image-tags-with-a-plugin",children:"Providing additional image tags with a plugin"}),"\n",(0,r.jsx)(n.p,{children:"For cases where more customization is required and using environment variables and interpolation is\nnot enough, the next option is to write a plugin to provide additional tags when building images."}),"\n",(0,r.jsx)(n.p,{children:"Demonstrated with an example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="example/plugin.py"',children:'from pants.backend.docker.target_types import DockerImageTagsRequest, DockerImageTags\nfrom pants.engine.unions import UnionRule\nfrom pants.engine.rules import rule, collect_rules\nfrom pants.engine.target import Target\n\n\nclass CustomDockerImageTagsRequest(DockerImageTagsRequest):\n    @classmethod\n    def is_applicable(cls, target: Target) -> bool:\n        # Optional. Opt-out on a per target basis.\n        if some-condition:\n            return False\n        else:\n            return True\n\n\n@rule\nasync def custom_image_tags(request: CustomDockerImageTagsRequest) -> DockerImageTags:\n    custom_tags = ["some", "tags"]\n    return DockerImageTags(custom_tags)\n\n\ndef rules():\n    return (\n        *collect_rules(),\n        UnionRule(DockerImageTagsRequest, CustomDockerImageTagsRequest),\n    )\n'})}),"\n",(0,r.jsx)(n.h2,{id:"all-together-registries-repositories-and-tags",children:"All together: Registries, Repositories and Tags"}),"\n",(0,r.jsx)(n.p,{children:"To illustrate how all the above work together, this target:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="src/example/BUILD"',children:'docker_image(\n    name="demo",\n    repository="example/demo",\n    registries=["reg1", "reg2"],\n    image_tags=["1.0", "latest"]\n)\n'})}),"\n",(0,r.jsx)(n.p,{children:"Will create a single image with these full names:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"reg1/example/demo:1.0\nreg1/example/demo:latest\nreg2/example/demo:1.0\nreg2/example/demo:latest\n"})}),"\n",(0,r.jsx)(n.h2,{id:"string-interpolation-using-placeholder-values",children:"String interpolation using placeholder values"}),"\n",(0,r.jsxs)(n.p,{children:["As we've seen above, some fields of the ",(0,r.jsx)(n.code,{children:"docker_image"})," support replacing placeholder values in curly braces with variable text, such as a build arg or base image tag for instance."]}),"\n",(0,r.jsx)(n.p,{children:"The interpolation context (the available placeholder values) depends on which field it is used in. These are the common values available for all fields:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"{tags.<stage>}"}),": The tag of a base image (the ",(0,r.jsx)(n.code,{children:"FROM"})," instruction) for a particular stage in the ",(0,r.jsx)(n.code,{children:"Dockerfile"}),". The ",(0,r.jsx)(n.code,{children:"<stage>"})," is either ",(0,r.jsx)(n.code,{children:"stageN"})," where ",(0,r.jsx)(n.code,{children:"N"})," is the numeric index of the stage, starting at ",(0,r.jsx)(n.code,{children:"0"}),". The first stage, ",(0,r.jsx)(n.code,{children:"stage0"}),", is also available under the pseudonym ",(0,r.jsx)(n.code,{children:"baseimage"}),". If the stage is named (",(0,r.jsx)(n.code,{children:"FROM image AS my_stage"}),"), then the tag value is also available under that name: ",(0,r.jsx)(n.code,{children:"{tags.my_stage}"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"{build_args.ARG_NAME}"}),": Each defined Docker build arg is available for interpolation under the ",(0,r.jsx)(n.code,{children:"build_args."})," prefix."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"{pants.hash}"}),": This is a unique hash value calculated from all input sources and the ",(0,r.jsx)(n.code,{children:"Dockerfile"}),". It is effectively a hash of the Docker build context. See note below regarding its stability guarantee."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"#setting-a-repository-name",children:"Setting a repository name"})," for placeholders specific to the ",(0,r.jsx)(n.code,{children:"repository"})," field."]}),"\n",(0,r.jsxs)(n.admonition,{type:"note",children:[(0,r.jsxs)(n.mdxAdmonitionTitle,{children:["The ",(0,r.jsx)(n.code,{children:"{pants.hash}"})," stability guarantee"]}),(0,r.jsxs)(n.p,{children:["The calculated hash value ",(0,r.jsx)(n.em,{children:"may"})," change between stable versions of Pants for the otherwise same input sources."]})]}),"\n",(0,r.jsx)(n.h2,{id:"retrieving-the-tags-of-a-packaged-image",children:"Retrieving the tags of a packaged image"}),"\n",(0,r.jsxs)(n.p,{children:["When a docker image is packaged, metadata about the resulting image is output to a JSON file artefact. This includes the image ID, as well as the full names that the image was tagged with. This file is written in the same manner as outputs of other packageable targets and available for later steps (for example, a test with ",(0,r.jsx)(n.code,{children:"runtime_package_dependencies"})," including the docker image target) or in ",(0,r.jsx)(n.code,{children:"dist/"})," after ",(0,r.jsx)(n.code,{children:"pants package"}),". By default, this is available at ",(0,r.jsx)(n.code,{children:"path.to.target/target_name.docker-info.json"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"The structure of this JSON file is:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'{\n    "version": 1, // always 1, until a breaking change is made to this schema\n    "image_id": "sha256:..." // the local Image ID of the computed image\n    "registries": [ // info about each registry used for this image\n        {\n            "alias": "name", // set if the registry is configured in pants.toml, or null if not\n            "address": "reg.invalid", // the address of the registry itself\n            "repository": "the/repo", // the repository used for the image within the registry\n            "tags": [\n                {\n                    "template": "tag-{...}", // the tag before substituting any placeholders\n                    "tag": "tag-some-value", // the fully-substituted tag, actually used to tag the image\n                    "uses_local_alias": false, // if this tag used the local alias for the registry or not\n                    "name": "reg.invalid/the/repo:tag-some-value", // the full name that the image was tagged with\n                }\n            ]\n        }\n    ]\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"This JSON file can be used to retrieve the exact name to place into cloud deploy templates or to use for running locally, especially when using tags with placeholders."})]})}function m(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(g,{...e})}):g(e)}},753348(e,n,a){a.d(n,{A:()=>i});let i={tabItem:"tabItem_mHvh"}},618264(e,n,a){a.d(n,{A:()=>i});let i={tabList:"tabList_sFbf",tabItem:"tabItem_UVfV"}},637180(e,n,a){a.d(n,{A:()=>t});var i=a(886070);a(830758);var r=a(313526),s=a(753348);function t({children:e,hidden:n,className:a}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.A)(s.A.tabItem,a),hidden:n,children:e})}},685008(e,n,a){a.d(n,{A:()=>u});var i=a(886070),r=a(830758),s=a(313526),t=a(911212),l=a(274875),o=a(106632),d=a(189223),c=a(618264);function h({className:e,block:n,selectedValue:a,selectValue:r,tabValues:t}){let o=[],{blockElementScrollPositionUntilNextRender:d}=(0,l.a_)(),h=e=>{let n=e.currentTarget,i=t[o.indexOf(n)].value;i!==a&&(d(n),r(i))},g=e=>{let n=null;switch(e.key){case"Enter":h(e);break;case"ArrowRight":{let a=o.indexOf(e.currentTarget)+1;n=o[a]??o[0];break}case"ArrowLeft":{let a=o.indexOf(e.currentTarget)-1;n=o[a]??o[o.length-1]}}n?.focus()};return(0,i.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},e),children:t.map(({value:e,label:n,attributes:r})=>(0,i.jsx)("li",{role:"tab",tabIndex:a===e?0:-1,"aria-selected":a===e,ref:e=>{o.push(e)},onKeyDown:g,onClick:h,...r,className:(0,s.A)("tabs__item",c.A.tabItem,r?.className,{"tabs__item--active":a===e}),children:n??e},e))})}function g({lazy:e,children:n,selectedValue:a}){let t=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){let e=t.find(e=>e.props.value===a);return e?(0,r.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,i.jsx)("div",{className:"margin-top--md",children:t.map((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==a}))})}function m(e){let n=(0,o.u)(e);return(0,i.jsxs)("div",{className:(0,s.A)(t.G.tabs.container,"tabs-container",c.A.tabList),children:[(0,i.jsx)(h,{...n,...e}),(0,i.jsx)(g,{...n,...e})]})}function u(e){let n=(0,d.A)();return(0,i.jsx)(m,{...e,children:(0,o.v)(e.children)},String(n))}},106632(e,n,a){a.d(n,{u:()=>h,v:()=>d});var i=a(830758),r=a(325557),s=a(363717),t=a(125740),l=a(574229),o=a(270367);function d(e){return i.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){let{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function c({value:e,tabValues:n}){return n.some(n=>n.value===e)}function h(e){let n,{defaultValue:a,queryString:h=!1,groupId:g}=e,m=function(e){let{values:n,children:a}=e;return(0,i.useMemo)(()=>{let e=n??d(a).map(({props:{value:e,label:n,attributes:a,default:i}})=>({value:e,label:n,attributes:a,default:i})),i=(0,l.XI)(e,(e,n)=>e.value===n.value);if(i.length>0)throw Error(`Docusaurus error: Duplicate values "${i.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return e},[n,a])}(e),[u,p]=(0,i.useState)(()=>(function({defaultValue:e,tabValues:n}){if(0===n.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!c({value:e,tabValues:n}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}let a=n.find(e=>e.default)??n[0];if(!a)throw Error("Unexpected error: 0 tabValues");return a.value})({defaultValue:a,tabValues:m})),[x,f]=function({queryString:e=!1,groupId:n}){let a=(0,r.W6)(),s=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,t.aZ)(s),(0,i.useCallback)(e=>{if(!s)return;let n=new URLSearchParams(a.location.search);n.set(s,e),a.replace({...a.location,search:n.toString()})},[s,a])]}({queryString:h,groupId:g}),[j,y]=function({groupId:e}){let n=e?`docusaurus.tab.${e}`:null,[a,r]=(0,o.Dv)(n);return[a,(0,i.useCallback)(e=>{n&&r.set(e)},[n,r])]}({groupId:g}),b=c({value:n=x??j,tabValues:m})?n:null;return(0,s.A)(()=>{b&&p(b)},[b]),{selectedValue:u,selectValue:(0,i.useCallback)(e=>{if(!c({value:e,tabValues:m}))throw Error(`Can't select invalid tab value=${e}`);p(e),f(e),y(e)},[f,y,m]),tabValues:m}}},848193(e,n,a){a.d(n,{R:()=>t,x:()=>l});var i=a(830758);let r={},s=i.createContext(r);function t(e){let n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(s.Provider,{value:n},e.children)}},48762(e){e.exports=JSON.parse('{"id":"docs/docker/tagging-docker-images","title":"Tagging Docker images","description":"How to set registry, repository and tag names on your images","source":"@site/docs/docs/docker/tagging-docker-images.mdx","sourceDirName":"docs/docker","slug":"/docs/docker/tagging-docker-images","permalink":"/dev/docs/docker/tagging-docker-images","draft":false,"unlisted":false,"editUrl":"https://github.com/pantsbuild/pants/edit/main/docs/docs/docker/tagging-docker-images.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Tagging Docker images","sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Docker overview","permalink":"/dev/docs/docker/"},"next":{"title":"Kubernetes","permalink":"/dev/docs/kubernetes/"}}')}}]);