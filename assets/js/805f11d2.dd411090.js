"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["170987"],{88595(e,n,s){s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var i=s(674358),l=s(886070),t=s(848193);let o={title:"Options",sidebar_position:2},a,r={},d=[{value:"Option scopes",id:"option-scopes",level:2},{value:"Setting options",id:"setting-options",level:2},{value:"Command-line flags",id:"command-line-flags",level:3},{value:"Environment variables",id:"environment-variables",level:3},{value:"Config file entries",id:"config-file-entries",level:3},{value:"Config file interpolation",id:"config-file-interpolation",level:4},{value:"Option types",id:"option-types",level:2},{value:"String and integer values",id:"string-and-integer-values",level:3},{value:"Command-line flags:",id:"command-line-flags-1",level:4},{value:"Environment variables:",id:"environment-variables-1",level:4},{value:"Config file entries:",id:"config-file-entries-1",level:4},{value:"Boolean values",id:"boolean-values",level:3},{value:"Command-line flags:",id:"command-line-flags-2",level:4},{value:"Environment variables:",id:"environment-variables-2",level:4},{value:"Config file entries:",id:"config-file-entries-2",level:4},{value:"List values",id:"list-values",level:3},{value:"Command-line flags:",id:"command-line-flags-3",level:4},{value:"Environment variables:",id:"environment-variables-3",level:4},{value:"Config file entries:",id:"config-file-entries-3",level:4},{value:"Add/remove semantics",id:"addremove-semantics",level:4},{value:"Dict values",id:"dict-values",level:3},{value:"Command-line flags:",id:"command-line-flags-4",level:4},{value:"Environment variables:",id:"environment-variables-4",level:4},{value:"Config file entries:",id:"config-file-entries-4",level:4},{value:"Add/replace semantics",id:"addreplace-semantics",level:4},{value:"Reading individual option values from files",id:"reading-individual-option-values-from-files",level:2},{value:"<code>.pants.rc</code> file",id:"pantsrc-file",level:2},{value:"<code>.pants.bootstrap</code> file",id:"pantsbootstrap-file",level:2}];function c(e){let n={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.p,{children:"A deep dive into how options may be configured."}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"option-scopes",children:"Option scopes"}),"\n",(0,l.jsxs)(n.p,{children:["Options are partitioned into named ",(0,l.jsx)(n.em,{children:"scopes"}),"."]}),"\n",(0,l.jsxs)(n.p,{children:["Some system-wide options belong in the ",(0,l.jsx)(n.em,{children:"global scope"}),". For example, the ",(0,l.jsx)(n.code,{children:"--level"})," option, which controls the logging level, is in the global scope."]}),"\n",(0,l.jsxs)(n.p,{children:["Other options belong to a ",(0,l.jsx)(n.em,{children:"subsystem scope"}),". A ",(0,l.jsx)(n.em,{children:"subsystem"})," is simply a collection of related options, in a scope. For example, the ",(0,l.jsx)(n.code,{children:"pytest"})," subsystem contains options related to ",(0,l.jsx)(n.a,{href:"/2.25/reference/subsystems/pytest",children:"Python's test framework pytest"}),"."]}),"\n",(0,l.jsx)(n.h2,{id:"setting-options",children:"Setting options"}),"\n",(0,l.jsx)(n.p,{children:"Every option can be set in the following ways, in order of precedence:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Via a command line flag."}),"\n",(0,l.jsx)(n.li,{children:"In an environment variable."}),"\n",(0,l.jsxs)(n.li,{children:["In a config file (",(0,l.jsx)(n.code,{children:"pants.toml"}),")."]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"If an option isn't set in one of these ways, it will take on a default value."}),"\n",(0,l.jsxs)(n.p,{children:["You can inspect both the current value and the default value by using ",(0,l.jsx)(n.code,{children:"pants help $scope"})," or ",(0,l.jsx)(n.code,{children:"pants help-advanced $scope"}),", e.g. ",(0,l.jsx)(n.code,{children:"pants help global"}),"."]}),"\n",(0,l.jsx)(n.h3,{id:"command-line-flags",children:"Command-line flags"}),"\n",(0,l.jsx)(n.p,{children:"Global options are set using an unqualified flag:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pants --level=debug ...\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Subsystem options are set by providing the flag, with the name prefixed with the lower-case scope name and a dash. So for the option ",(0,l.jsx)(n.code,{children:"--root-patterns"})," in the scope ",(0,l.jsx)(n.code,{children:"source"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pants --source-root-patterns=\"['^ext']\"\n"})}),"\n",(0,l.jsx)(n.h3,{id:"environment-variables",children:"Environment variables"}),"\n",(0,l.jsxs)(n.p,{children:["Global options are set using the environment variable ",(0,l.jsx)(n.code,{children:"PANTS_{OPTION_NAME}"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"PANTS_LEVEL=debug pants ...\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Subsystem options are set using the environment variable",(0,l.jsx)(n.br,{}),"\n",(0,l.jsx)(n.code,{children:"PANTS_{SCOPE}_{OPTION_NAME}"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"PANTS_SOURCE_ROOT_PATTERNS=\"['^ext']\" pants ...\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Note that the scope and option name are upper-cased, and any dashes in the option flag name are converted to underscores: ",(0,l.jsx)(n.code,{children:"--multiword-name"})," becomes ",(0,l.jsx)(n.code,{children:"MULTIWORD_NAME"}),"."]}),"\n",(0,l.jsx)(n.h3,{id:"config-file-entries",children:"Config file entries"}),"\n",(0,l.jsxs)(n.p,{children:["Global options are set in the ",(0,l.jsx)(n.code,{children:"GLOBAL"})," section of the config file:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",metastring:'title="pants.toml"',children:'[GLOBAL]\nlevel = "debug"\n'})}),"\n",(0,l.jsx)(n.p,{children:"Subsystem options are set in the section named for their scope:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",metastring:'title="pants.toml"',children:'[source]\nroot_patterns = ["/src/python"]\n'})}),"\n",(0,l.jsxs)(n.p,{children:["Note that any dashes in the option flag name are converted to underscores: ",(0,l.jsx)(n.code,{children:"--multiword-name"})," becomes ",(0,l.jsx)(n.code,{children:"multiword_name"}),"."]}),"\n",(0,l.jsx)(n.h4,{id:"config-file-interpolation",children:"Config file interpolation"}),"\n",(0,l.jsxs)(n.p,{children:["A string value in a config file can contain placeholders of the form ",(0,l.jsx)(n.code,{children:"%(key)s"}),", which will be replaced with a corresponding value. The ",(0,l.jsx)(n.code,{children:"key"})," can be one of:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"A string-valued option in the DEFAULT section of the same config file."}),"\n",(0,l.jsx)(n.li,{children:"A string-valued option in the same section of the config file as the value containing the placeholder."}),"\n",(0,l.jsxs)(n.li,{children:["Any environment variable, prefixed with ",(0,l.jsx)(n.code,{children:"env."}),": ",(0,l.jsx)(n.code,{children:"%(env.ENV_VAR)s"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["The following special values:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"%(buildroot)s"}),": absolute path to the root of your repository."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"%(homedir)s"}),": equivalent to ",(0,l.jsx)(n.code,{children:"$HOME"})," or ",(0,l.jsx)(n.code,{children:"~"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"%(user)s"}),": the current user's username, obtained from the system password file."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"%(pants_workdir)s"}),": the absolute path of the global option ",(0,l.jsx)(n.code,{children:"--pants-workdir"}),", which defaults\nto ",(0,l.jsx)(n.code,{children:"{buildroot}/.pants.d/"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"%(pants_distdir)s"}),": the absolute path of the global option ",(0,l.jsx)(n.code,{children:"--pants-distdir"}),", which defaults\nto ",(0,l.jsx)(n.code,{children:"{buildroot}/dist/"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"An interpolated value may itself contain placeholders, that will be recursively interpolated."}),"\n",(0,l.jsx)(n.p,{children:"For example:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",metastring:'title="pants.toml"',children:'[DEFAULT]\ndomain = "my.domain"\n\n[python-repos]\nrepo_host = "repo.%(domain)s"\nindexes.add = ["https://%(env.PY_REPO)s@%(repo_host)s/index"]\n'})}),"\n",(0,l.jsxs)(n.p,{children:["Learn more about exporting environment variables in the ",(0,l.jsx)(n.a,{href:"#pantsbootstrap-file",children:(0,l.jsx)(n.code,{children:".pants.bootstrap"})}),")\nBash script that is sourced before Pants runs."]}),"\n",(0,l.jsx)(n.h2,{id:"option-types",children:"Option types"}),"\n",(0,l.jsx)(n.p,{children:"Every option has a type, and any values you set must be of that type."}),"\n",(0,l.jsx)(n.p,{children:"The option types are:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"string"}),"\n",(0,l.jsx)(n.li,{children:"integer"}),"\n",(0,l.jsx)(n.li,{children:"bool"}),"\n",(0,l.jsx)(n.li,{children:"list"}),"\n",(0,l.jsx)(n.li,{children:"dict"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"A list-valued option may also declare a specific type for its members (e.g., a list of strings, or a list of integers)."}),"\n",(0,l.jsx)(n.h3,{id:"string-and-integer-values",children:"String and integer values"}),"\n",(0,l.jsx)(n.p,{children:"Standalone string and integer values are written without quotes. Any quotes will be considered part of the value, after shell escaping."}),"\n",(0,l.jsx)(n.h4,{id:"command-line-flags-1",children:"Command-line flags:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pants --scope-intopt=42\npants --scope-stropt=qux\n"})}),"\n",(0,l.jsx)(n.h4,{id:"environment-variables-1",children:"Environment variables:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"PANTS_SCOPE_INTOPT=42\nPANTS_SCOPE_STROPT=qux\n"})}),"\n",(0,l.jsx)(n.h4,{id:"config-file-entries-1",children:"Config file entries:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",metastring:'title="pants.toml"',children:'[scope]\nintopt = 42\nstropt = "qux"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"boolean-values",children:"Boolean values"}),"\n",(0,l.jsxs)(n.p,{children:["Boolean values can be specified using the special strings ",(0,l.jsx)(n.code,{children:"true"})," and ",(0,l.jsx)(n.code,{children:"false"}),". When specifying them via command-line flags you can also use the ",(0,l.jsx)(n.code,{children:"--boolopt/--no-boolopt"})," syntax."]}),"\n",(0,l.jsx)(n.h4,{id:"command-line-flags-2",children:"Command-line flags:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pants --scope-boolopt=true\npants --scope-boolopt\npants --no-scope-boolopt\n"})}),"\n",(0,l.jsx)(n.h4,{id:"environment-variables-2",children:"Environment variables:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"PANTS_SCOPE_BOOLOPT=true\n"})}),"\n",(0,l.jsx)(n.h4,{id:"config-file-entries-2",children:"Config file entries:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",metastring:'title="pants.toml"',children:"[scope]\nboolopt = true\n"})}),"\n",(0,l.jsx)(n.h3,{id:"list-values",children:"List values"}),"\n",(0,l.jsx)(n.p,{children:"List values are parsed as Python list literals, so you must quote string values, and you may need to apply shell-level quoting and/or escaping, as required."}),"\n",(0,l.jsx)(n.h4,{id:"command-line-flags-3",children:"Command-line flags:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pants --scope-listopt=\"['foo','bar']\"\n"})}),"\n",(0,l.jsxs)(n.p,{children:["You can also leave off the ",(0,l.jsx)(n.code,{children:"[]"})," to ",(0,l.jsx)(n.em,{children:"append"})," elements. So we can rewrite the above to:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pants --scope-listopt=foo --scope-listopt=bar\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Appending will add to any values from lower-precedence sources, such as config files (",(0,l.jsx)(n.code,{children:"pants.toml"}),") and possibly Pants's ",(0,l.jsx)(n.code,{children:"default"}),". Otherwise, using ",(0,l.jsx)(n.code,{children:"[]"})," will override any lower-precedence sources."]}),"\n",(0,l.jsx)(n.h4,{id:"environment-variables-3",children:"Environment variables:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"PANTS_SCOPE_LISTOPT=\"['foo','bar']\"\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Like with command-line flags, you can leave off the ",(0,l.jsx)(n.code,{children:"[]"})," to ",(0,l.jsx)(n.em,{children:"append"})," elements:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"PANTS_SCOPE_LISTOPT=foo\n"})}),"\n",(0,l.jsx)(n.h4,{id:"config-file-entries-3",children:"Config file entries:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",metastring:'title="pants.toml"',children:"[scope]\nlistopt = [\n  'foo',\n  'bar'\n]\n"})}),"\n",(0,l.jsx)(n.h4,{id:"addremove-semantics",children:"Add/remove semantics"}),"\n",(0,l.jsx)(n.p,{children:"List values have some extra semantics:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["A value can be preceded by ",(0,l.jsx)(n.code,{children:"+"}),", which will ",(0,l.jsx)(n.em,{children:"append"})," the elements to the value obtained from lower-precedence sources."]}),"\n",(0,l.jsxs)(n.li,{children:["A value can be preceded by ",(0,l.jsx)(n.code,{children:"-"}),", which will ",(0,l.jsx)(n.em,{children:"remove"})," the elements from the value obtained from lower-precedence sources."]}),"\n",(0,l.jsxs)(n.li,{children:["Multiple ",(0,l.jsx)(n.code,{children:"+"})," and ",(0,l.jsx)(n.code,{children:"-"})," values can be provided, separated by commas."]}),"\n",(0,l.jsxs)(n.li,{children:["Otherwise, the value ",(0,l.jsx)(n.em,{children:"replaces"})," the one obtained from lower-precedence sources."]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["For example, if the value of ",(0,l.jsx)(n.code,{children:"--listopt"})," in ",(0,l.jsx)(n.code,{children:"scope"})," is set to ",(0,l.jsx)(n.code,{children:"[1, 2]"})," in a config file, then"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'pants --scope-listopt="+[3,4]"\n'})}),"\n",(0,l.jsxs)(n.p,{children:["will set the value to ",(0,l.jsx)(n.code,{children:"[1, 2, 3, 4]"}),"."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'pants --scope-listopt="-[1],+[3,4]"\n'})}),"\n",(0,l.jsxs)(n.p,{children:["will set the value to ",(0,l.jsx)(n.code,{children:"[2, 3, 4]"}),", and"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'pants --scope-listopt="[3,4]"\n'})}),"\n",(0,l.jsxs)(n.p,{children:["will set the value to ",(0,l.jsx)(n.code,{children:"[3, 4]"}),"."]}),"\n",(0,l.jsxs)(n.admonition,{title:"Add/remove syntax in .toml files",type:"note",children:[(0,l.jsx)(n.p,{children:"The +/- syntax works in .toml files, but the entire value must be quoted:"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",metastring:'title="pants.toml"',children:'[scope]\nlistopt = "+[1,2],-[3,4]"\n'})}),(0,l.jsx)(n.p,{children:"This means that TOML treats the value as a string, instead of a TOML list."}),(0,l.jsx)(n.p,{children:"Alternatively, you can use this syntactic sugar, which allows the values to be regular TOML lists:"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",metastring:'title="pants.toml"',children:"[scope]\nlistopt.add = [1, 2]\nlistopt.remove = [3, 4]\n"})}),(0,l.jsxs)(n.p,{children:["But note that this only works in Pants's ",(0,l.jsx)(n.code,{children:".toml"})," config files, not in environment variables or command-line flags."]})]}),"\n",(0,l.jsx)(n.h3,{id:"dict-values",children:"Dict values"}),"\n",(0,l.jsx)(n.p,{children:"Dict values are parsed as Python dict literals on the command-line and environment variables, so you must quote string keys and values, and you may need to apply shell-level quoting and/or escaping, as required."}),"\n",(0,l.jsx)(n.h4,{id:"command-line-flags-4",children:"Command-line flags:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pants --scope-dictopt=\"{'foo':1,'bar':2}\"\n"})}),"\n",(0,l.jsx)(n.h4,{id:"environment-variables-4",children:"Environment variables:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"PANTS_SCOPE_DICTOPT=\"{'foo':1,'bar':2}\"\n"})}),"\n",(0,l.jsx)(n.h4,{id:"config-file-entries-4",children:"Config file entries:"}),"\n",(0,l.jsxs)(n.p,{children:["You can use TOML's ",(0,l.jsx)(n.a,{href:"https://toml.io/en/v1.0.0#inline-table",children:"nested table features"}),". These are equivalent:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",metastring:'title="pants.toml"',children:"[scope]\ndictopt = { foo = 1, bar = 2}\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",metastring:'title="pants.toml"',children:"[scope.dictopt]\nfoo = 1\nbar = 2\n"})}),"\n",(0,l.jsx)(n.p,{children:"You can also use a string literal. Note the quotes:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",metastring:'title="pants.toml"',children:'[scope]\ndictopt = """{\n \'foo\': 1,\n \'bar\': 2,\n}"""\n'})}),"\n",(0,l.jsx)(n.h4,{id:"addreplace-semantics",children:"Add/replace semantics"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["A value can be preceded by ",(0,l.jsx)(n.code,{children:"+"}),", which will ",(0,l.jsx)(n.em,{children:"update"})," the value obtained from lower-precedence sources with the entries."]}),"\n",(0,l.jsxs)(n.li,{children:["Otherwise, the value ",(0,l.jsx)(n.em,{children:"replaces"})," the one obtained from lower-precedence sources."]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["For example, if the value of ",(0,l.jsx)(n.code,{children:"--dictopt"})," in ",(0,l.jsx)(n.code,{children:"scope"})," is set to ",(0,l.jsx)(n.code,{children:"{'foo', 1, 'bar': 2}"})," in a config file, then"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pants --scope-dictopt=\"+{'foo':42,'baz':3}\"\n"})}),"\n",(0,l.jsxs)(n.p,{children:["will set the value to ",(0,l.jsx)(n.code,{children:"{'foo': 42, 'bar': 2, 'baz': 3}"}),", and"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pants --scope-dictopt=\"{'foo':42,'baz':3}\"\n"})}),"\n",(0,l.jsxs)(n.p,{children:["will set the value to ",(0,l.jsx)(n.code,{children:"{'foo': 42, 'baz': 3}"}),"."]}),"\n",(0,l.jsx)(n.h2,{id:"reading-individual-option-values-from-files",children:"Reading individual option values from files"}),"\n",(0,l.jsxs)(n.p,{children:["If an option value is too large or elaborate to use directly, or if you don't want to hard-code\nvalues directly in ",(0,l.jsx)(n.code,{children:"pants.toml"}),", you can set the value of any option to the string\n",(0,l.jsx)(n.code,{children:"@relative/path/from/repo/root/to/file"})," (note the leading ",(0,l.jsx)(n.code,{children:"@"}),"), and the value will be read\nfrom that file."]}),"\n",(0,l.jsxs)(n.p,{children:["If the file name ends with ",(0,l.jsx)(n.code,{children:".json"})," or ",(0,l.jsx)(n.code,{children:".yaml"})," then the file will be parsed as the relevant\nformat, which is useful for list- and dict-valued options."]}),"\n",(0,l.jsx)(n.p,{children:"Otherwise, the file is parsed as a literal as described above for each option type."}),"\n",(0,l.jsxs)(n.p,{children:["Normally, the file must exist, and it is an error if it doesn't.\nTo avoid an error when the file doesn't exist, add a ",(0,l.jsx)(n.code,{children:"?"})," after ",(0,l.jsx)(n.code,{children:"@"}),", for example:\n",(0,l.jsx)(n.code,{children:"@?path/that/may/not/exist"})," -  this will treat the config value in question as not\nbeing set when the file does not exist."]}),"\n",(0,l.jsx)(n.p,{children:"Note that you can use this feature on the command-line, in an env var, or in a config file:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",metastring:'title="pants.toml"',children:'[scope]\nopt = "@path/to/file.json"\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"PANTS_SCOPE_OPTION=@path/to/file.json\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'pants --scope-option="@path/to/file.json"\n'})}),"\n",(0,l.jsxs)(n.h2,{id:"pantsrc-file",children:[(0,l.jsx)(n.code,{children:".pants.rc"})," file"]}),"\n",(0,l.jsxs)(n.p,{children:["You can set up personal Pants config files, using the same TOML syntax as ",(0,l.jsx)(n.code,{children:"pants.toml"}),". By default, Pants looks for the paths ",(0,l.jsx)(n.code,{children:"/etc/pantsrc"}),", ",(0,l.jsx)(n.code,{children:"~/.pants.rc"}),", and ",(0,l.jsx)(n.code,{children:".pants.rc"})," in the repository root."]}),"\n",(0,l.jsx)(n.p,{children:"For example:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",metastring:'title=".pants.rc"',children:'[python]\n# Even though our repository uses 3.8+, because I have an M1,\n# I must use Python 3.9+.\ninterpreter_constraints = ["==3.9.*"]\n'})}),"\n",(0,l.jsxs)(n.p,{children:["If you want to ban this feature, set ",(0,l.jsx)(n.code,{children:"[GLOBAL].pantsrc = false"})," in ",(0,l.jsx)(n.code,{children:"pants.toml"}),"."]}),"\n",(0,l.jsxs)(n.h2,{id:"pantsbootstrap-file",children:[(0,l.jsx)(n.code,{children:".pants.bootstrap"})," file"]}),"\n",(0,l.jsxs)(n.p,{children:["If you need to set default values for environment variables without requiring all users to define them in the local\nenvironment, you can export them in the ",(0,l.jsx)(n.code,{children:".pants.bootstrap"})," Bash script. This file needs to be placed in the root of your\nworkspace, and it is going to be sourced before invoking any Pants goal."]}),"\n",(0,l.jsx)(n.p,{children:"You can also add to this file any Bash code you want to execute before Pants runs, and any environment variables\ndeclared in this file are going to be available to any process that Pants launcher binary may start."}),"\n",(0,l.jsx)(n.p,{children:"For example:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",metastring:'title=".pants.bootstrap"',children:'# these variables are defined in our CI agents,\n# but this is set to support local development\nexport DOCKER_DEFAULT_REPO="https://hub.docker.com/"\nexport GIT_COMMIT="$(git rev-parse HEAD)"\n'})}),"\n",(0,l.jsxs)(n.p,{children:["If you want to learn more about how\n",(0,l.jsx)(n.a,{href:"../../getting-started/installing-pants#the-pants-binarys-implementation",children:"Pants launcher binary"})," works, see\nthe ",(0,l.jsx)(n.a,{href:"https://github.com/pantsbuild/scie-pants",children:"scie-pants"})," project."]})]})}function h(e={}){let{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},848193(e,n,s){s.d(n,{R:()=>o,x:()=>a});var i=s(830758);let l={},t=i.createContext(l);function o(e){let n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),i.createElement(t.Provider,{value:n},e.children)}},674358(e){e.exports=JSON.parse('{"id":"docs/using-pants/key-concepts/options","title":"Options","description":"A deep dive into how options may be configured.","source":"@site/versioned_docs/version-2.25/docs/using-pants/key-concepts/options.mdx","sourceDirName":"docs/using-pants/key-concepts","slug":"/docs/using-pants/key-concepts/options","permalink":"/2.25/docs/using-pants/key-concepts/options","draft":false,"unlisted":false,"editUrl":"https://github.com/pantsbuild/pants/edit/main/docs/docs/using-pants/key-concepts/options.mdx","tags":[],"version":"2.25","sidebarPosition":2,"frontMatter":{"title":"Options","sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Targets and BUILD files","permalink":"/2.25/docs/using-pants/key-concepts/targets-and-build-files"},"next":{"title":"Backends","permalink":"/2.25/docs/using-pants/key-concepts/backends"}}')}}]);