"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["797997"],{259183(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>g,frontMatter:()=>a,metadata:()=>i,toc:()=>h});var i=r(766581),s=r(886070),t=r(848193),l=r(989898),o=r(375002);let a={title:"go_binary",description:"A Go binary.\n"},d,c={},h=[{value:"<code>asan</code>",id:"asan",level:2},{value:"<code>assembler_flags</code>",id:"assembler_flags",level:2},{value:"<code>cgo_enabled</code>",id:"cgo_enabled",level:2},{value:"<code>compiler_flags</code>",id:"compiler_flags",level:2},{value:"<code>description</code>",id:"description",level:2},{value:"<code>environment</code>",id:"environment",level:2},{value:"<code>linker_flags</code>",id:"linker_flags",level:2},{value:"<code>main</code>",id:"main",level:2},{value:"<code>msan</code>",id:"msan",level:2},{value:"<code>output_path</code>",id:"output_path",level:2},{value:"<code>race</code>",id:"race",level:2},{value:"<code>restartable</code>",id:"restartable",level:2},{value:"<code>tags</code>",id:"tags",level:2}];function p(e){let n={a:"a",code:"code",h2:"h2",hr:"hr",li:"li",p:"p",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:"A Go binary."}),"\n",(0,s.jsxs)(n.p,{children:["Backend: ",(0,s.jsx)("span",{className:"color--primary",children:(0,s.jsx)(n.code,{children:"pants.backend.experimental.go"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)("span",{className:o.A.options,children:[(0,s.jsx)(n.h2,{id:"asan",children:(0,s.jsx)(n.code,{children:"asan"})}),(0,s.jsxs)(l.A,{type_repr:"bool | None",default_repr:"None",children:[(0,s.jsx)(n.p,{children:'Enable interoperation between Go code and the C/C++ "address sanitizer."'}),(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"https://github.com/google/sanitizers/wiki/AddressSanitizer",children:"https://github.com/google/sanitizers/wiki/AddressSanitizer"})," for additional information about the C/C++ address sanitizer."]})]}),(0,s.jsx)(n.h2,{id:"assembler_flags",children:(0,s.jsx)(n.code,{children:"assembler_flags"})}),(0,s.jsxs)(l.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,s.jsxs)(n.p,{children:["Extra flags to pass to the Go assembler (i.e., ",(0,s.jsx)(n.code,{children:"go tool asm"}),") when assembling Go-format assembly code."]}),(0,s.jsx)(n.p,{children:"Note: These flags will not be added to gcc/clang-format assembly that is assembled in packages using Cgo."}),(0,s.jsx)(n.p,{children:"This field can be specified on several different target types:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["On ",(0,s.jsx)(n.code,{children:"go_mod"})," targets, the assembler flags are used when building any package involving the module including both first-party (i.e., ",(0,s.jsx)(n.code,{children:"go_package"})," targets) and third-party dependencies."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["On ",(0,s.jsx)(n.code,{children:"go_binary"})," targets, the assembler flags are used when building any packages comprising that binary including third-party dependencies. These assembler flags will be added after any assembler flags added by any ",(0,s.jsx)(n.code,{children:"assembler_flags"})," field set on the applicable ",(0,s.jsx)(n.code,{children:"go_mod"})," target."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["On ",(0,s.jsx)(n.code,{children:"go_package"})," targets, the assembler flags are used only for building that specific package and not for any other package. These assembler flags will be added after any assembler flags added by any ",(0,s.jsx)(n.code,{children:"assembler_flags"})," field set on the applicable ",(0,s.jsx)(n.code,{children:"go_mod"})," target or applicable ",(0,s.jsx)(n.code,{children:"go_binary"})," target."]}),"\n"]}),"\n"]}),(0,s.jsxs)(n.p,{children:["Run ",(0,s.jsx)(n.code,{children:"go doc cmd/asm"})," to see the flags supported by ",(0,s.jsx)(n.code,{children:"go tool asm"}),"."]})]}),(0,s.jsx)(n.h2,{id:"cgo_enabled",children:(0,s.jsx)(n.code,{children:"cgo_enabled"})}),(0,s.jsxs)(l.A,{type_repr:"bool | None",default_repr:"None",children:[(0,s.jsx)(n.p,{children:"Enable Cgo support, which allows Go and C code to interact. This option must be enabled for any packages making use of Cgo to actually be compiled with Cgo support."}),(0,s.jsxs)(n.p,{children:["This field can be specified on several different target types, including ",(0,s.jsx)(n.code,{children:"go_binary"})," and ",(0,s.jsx)(n.code,{children:"go_mod"})," target types. If this field is specified on a ",(0,s.jsx)(n.code,{children:"go_binary"})," target, then that instance takes precedence over other configuration when building the applicable executable. The applicable ",(0,s.jsx)(n.code,{children:"go_mod"})," target will be checked next as a fallback. Finally, if neither target specifies this field, then the value will be taken from the value of the ",(0,s.jsx)(n.code,{children:"[golang].cgo_enabled"})," option. (Note: That option will be deprecated in a future Pants version.)"]}),(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"https://go.dev/blog/cgo",children:"https://go.dev/blog/cgo"})," and ",(0,s.jsx)(n.a,{href:"https://pkg.go.dev/cmd/cgo",children:"https://pkg.go.dev/cmd/cgo"})," for additional information about Cgo."]})]}),(0,s.jsx)(n.h2,{id:"compiler_flags",children:(0,s.jsx)(n.code,{children:"compiler_flags"})}),(0,s.jsxs)(l.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,s.jsxs)(n.p,{children:["Extra flags to pass to the Go compiler (i.e., ",(0,s.jsx)(n.code,{children:"go tool compile"}),") when compiling Go code."]}),(0,s.jsx)(n.p,{children:"This field can be specified on several different target types:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["On ",(0,s.jsx)(n.code,{children:"go_mod"})," targets, the compiler flags are used when compiling any package involving the module including both first-party (i.e., ",(0,s.jsx)(n.code,{children:"go_package"})," targets) and third-party dependencies."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["On ",(0,s.jsx)(n.code,{children:"go_binary"})," targets, the compiler flags are used when compiling any packages comprising that binary including third-party dependencies. These compiler flags will be added after any compiler flags added by any ",(0,s.jsx)(n.code,{children:"compiler_flags"})," field set on the applicable ",(0,s.jsx)(n.code,{children:"go_mod"})," target."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["On ",(0,s.jsx)(n.code,{children:"go_package"})," targets, the compiler flags are used only for compiling that specific package and not for any other package. These compiler flags will be added after any compiler flags added by any ",(0,s.jsx)(n.code,{children:"compiler_flags"})," field set on the applicable ",(0,s.jsx)(n.code,{children:"go_mod"})," target or applicable ",(0,s.jsx)(n.code,{children:"go_binary"})," target."]}),"\n"]}),"\n"]}),(0,s.jsxs)(n.p,{children:["Run ",(0,s.jsx)(n.code,{children:"go doc cmd/compile"})," to see the flags supported by ",(0,s.jsx)(n.code,{children:"go tool compile"}),"."]})]}),(0,s.jsx)(n.h2,{id:"description",children:(0,s.jsx)(n.code,{children:"description"})}),(0,s.jsxs)(l.A,{type_repr:"str | None",default_repr:"None",children:[(0,s.jsx)(n.p,{children:"A human-readable description of the target."}),(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"pants list --documented ::"})," to see all targets with descriptions."]})]}),(0,s.jsx)(n.h2,{id:"environment",children:(0,s.jsx)(n.code,{children:"environment"})}),(0,s.jsxs)(l.A,{type_repr:"str | None",default_repr:"'__local__'",children:[(0,s.jsx)(n.p,{children:"Specify which environment target to consume environment-sensitive options from."}),(0,s.jsxs)(n.p,{children:["Once environments are defined in ",(0,s.jsx)(n.code,{children:"[environments-preview].names"}),", you can specify the environment for this target by its name. Any fields that are defined in that environment will override the values from options set by ",(0,s.jsx)(n.code,{children:"pants.toml"}),", command line values, or environment variables."]}),(0,s.jsxs)(n.p,{children:["You can specify multiple valid environments by using ",(0,s.jsx)(n.code,{children:"parametrize"}),". If ",(0,s.jsx)(n.code,{children:"__local__"})," is specified, Pants will fall back to the ",(0,s.jsx)(n.code,{children:"local_environment"})," defined for the current platform, or no environment if no such environment exists."]})]}),(0,s.jsx)(n.h2,{id:"linker_flags",children:(0,s.jsx)(n.code,{children:"linker_flags"})}),(0,s.jsxs)(l.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,s.jsxs)(n.p,{children:["Extra flags to pass to the Go linker (i.e., ",(0,s.jsx)(n.code,{children:"go tool link"}),") when linking Go binaries."]}),(0,s.jsx)(n.p,{children:"This field can be specified on several different target types:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["On ",(0,s.jsx)(n.code,{children:"go_mod"})," targets, the linker flags are used when linking any binary involving the module including both ",(0,s.jsx)(n.code,{children:"go_binary"})," targets and test binaries for ",(0,s.jsx)(n.code,{children:"go_package"})," targets within the module."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["On ",(0,s.jsx)(n.code,{children:"go_binary"})," targets, the linker flags are used when linking that binary. These linker flags will be added after any linker flags added by any ",(0,s.jsx)(n.code,{children:"linker_flags"})," field set on the applicable ",(0,s.jsx)(n.code,{children:"go_mod"})," target."]}),"\n"]}),"\n"]}),(0,s.jsxs)(n.p,{children:["Run ",(0,s.jsx)(n.code,{children:"go doc cmd/link"})," to see the flags supported by ",(0,s.jsx)(n.code,{children:"go tool link"}),"."]})]}),(0,s.jsx)(n.h2,{id:"main",children:(0,s.jsx)(n.code,{children:"main"})}),(0,s.jsxs)(l.A,{type_repr:"str | None",default_repr:"None",children:[(0,s.jsxs)(n.p,{children:["Address of the ",(0,s.jsx)(n.code,{children:"go_package"})," with the ",(0,s.jsx)(n.code,{children:"main"})," for this binary."]}),(0,s.jsxs)(n.p,{children:["If not specified, will default to the ",(0,s.jsx)(n.code,{children:"go_package"})," for the same directory as this target's BUILD file. You should usually rely on this default."]})]}),(0,s.jsx)(n.h2,{id:"msan",children:(0,s.jsx)(n.code,{children:"msan"})}),(0,s.jsxs)(l.A,{type_repr:"bool | None",default_repr:"None",children:[(0,s.jsx)(n.p,{children:'Enable interoperation between Go code and the C/C++ "memory sanitizer."'}),(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"https://github.com/google/sanitizers/wiki/MemorySanitizer",children:"https://github.com/google/sanitizers/wiki/MemorySanitizer"})," for additional information about the C/C++ memory sanitizer."]})]}),(0,s.jsx)(n.h2,{id:"output_path",children:(0,s.jsx)(n.code,{children:"output_path"})}),(0,s.jsxs)(l.A,{type_repr:"str | None",default_repr:"None",children:[(0,s.jsx)(n.p,{children:"Where the built asset should be located."}),(0,s.jsxs)(n.p,{children:["If undefined, this will use the path to the BUILD file, followed by the target name. For example, ",(0,s.jsx)(n.code,{children:"src/python/project:app"})," would be ",(0,s.jsx)(n.code,{children:"src.python.project/app.ext"}),"."]}),(0,s.jsxs)(n.p,{children:["When running ",(0,s.jsx)(n.code,{children:"pants package"}),", this path will be prefixed by ",(0,s.jsx)(n.code,{children:"--distdir"})," (e.g. ",(0,s.jsx)(n.code,{children:"dist/"}),")."]}),(0,s.jsx)(n.p,{children:"Warning: setting this value risks naming collisions with other package targets you may have."})]}),(0,s.jsx)(n.h2,{id:"race",children:(0,s.jsx)(n.code,{children:"race"})}),(0,s.jsxs)(l.A,{type_repr:"bool | None",default_repr:"None",children:[(0,s.jsx)(n.p,{children:"Enable compiling the binary with the Go data race detector."}),(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"https://go.dev/doc/articles/race_detector",children:"https://go.dev/doc/articles/race_detector"})," for additional information about the Go data race detector."]})]}),(0,s.jsx)(n.h2,{id:"restartable",children:(0,s.jsx)(n.code,{children:"restartable"})}),(0,s.jsx)(l.A,{type_repr:"bool",default_repr:"False",children:(0,s.jsxs)(n.p,{children:["If true, runs of this target with the ",(0,s.jsx)(n.code,{children:"run"})," goal may be interrupted and restarted when its input files change."]})}),(0,s.jsx)(n.h2,{id:"tags",children:(0,s.jsx)(n.code,{children:"tags"})}),(0,s.jsxs)(l.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,s.jsx)(n.p,{children:"Arbitrary strings to describe a target."}),(0,s.jsxs)(n.p,{children:["For example, you may tag some test targets with 'integration_test' so that you could run ",(0,s.jsx)(n.code,{children:"pants --tag='integration_test' test ::"})," to only run on targets with that tag."]})]})]})]})}function g(e={}){let{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},375002(e,n,r){r.d(n,{A:()=>i});let i={options:"options_nrbo"}},989898(e,n,r){r.d(n,{A:()=>s});var i=r(886070);function s({children:e,type_repr:n,default_repr:r,backend:s}){return(0,i.jsxs)("div",{className:"margin-bottom--lg",children:[(0,i.jsx)("code",{style:{color:"var(--pants-reference-option-repr)"},children:n}),(0,i.jsx)("br",{}),(0,i.jsxs)("div",{style:{paddingLeft:"2em"},children:[r&&(0,i.jsxs)("span",{children:["default:"," ",(0,i.jsx)("code",{style:{color:"var(--ifm-color-success)"},children:r})]}),!r&&(0,i.jsx)("span",{style:{color:"var(--ifm-color-success)"},children:"required"}),s&&(0,i.jsxs)("div",{children:["backend:"," ",(0,i.jsx)("code",{style:{color:"var(--ifm-color-success)"},children:s})]}),e]})]})}},848193(e,n,r){r.d(n,{R:()=>l,x:()=>o});var i=r(830758);let s={},t=i.createContext(s);function l(e){let n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(t.Provider,{value:n},e.children)}},766581(e){e.exports=JSON.parse('{"id":"reference/targets/go_binary","title":"go_binary","description":"A Go binary.\\n","source":"@site/versioned_docs/version-2.20/reference/targets/go_binary.mdx","sourceDirName":"reference/targets","slug":"/reference/targets/go_binary","permalink":"/2.20/reference/targets/go_binary","draft":false,"unlisted":false,"tags":[],"version":"2.20","frontMatter":{"title":"go_binary","description":"A Go binary.\\n"},"sidebar":"referenceSidebar","previous":{"title":"files","permalink":"/2.20/reference/targets/files"},"next":{"title":"go_mod","permalink":"/2.20/reference/targets/go_mod"}}')}}]);