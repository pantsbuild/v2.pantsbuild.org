"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["322455"],{137409(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>s,metadata:()=>o,toc:()=>h});var o=t(898011),i=t(886070),r=t(848193),l=t(685008),a=t(637180);let s={title:"Google Cloud Functions",sidebar_position:3},c,d={},h=[{value:"Step 1: Activate the Python Google Cloud Function backend",id:"step-1-activate-the-python-google-cloud-function-backend",level:2},{value:"Step 2: Define a <code>python_google_cloud_function </code> target",id:"step-2-define-a-python_google_cloud_function--target",level:2},{value:"Specifying a runtime explicitly",id:"specifying-a-runtime-explicitly",level:3},{value:"Step 3: Run <code>package</code>",id:"step-3-run-package",level:2},{value:"Step 4: Upload to Google Cloud",id:"step-4-upload-to-google-cloud",level:2},{value:"Advanced: Using PEX directly",id:"advanced-using-pex-directly",level:2},{value:"Migrating from Pants 2.16 and earlier",id:"migrating-from-pants-216-and-earlier",level:2}];function u(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Create a Cloud Function with Python."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"Pants can create a Google Cloud Function-compatible zip file or directory from your Python code, allowing you to develop your functions in your repository."}),"\n",(0,i.jsx)(n.admonition,{title:"FYI: how Pants does this",type:"note",children:(0,i.jsxs)(n.p,{children:["Under-the-hood, Pants uses the ",(0,i.jsx)(n.a,{href:"https://github.com/pex-tool/pex",children:"PEX"})," project, to select the appropriate third-party requirements and first-party sources and lay them out in a zip file or directory, in the format recommended by Google Cloud Functions."]})}),"\n",(0,i.jsx)(n.h2,{id:"step-1-activate-the-python-google-cloud-function-backend",children:"Step 1: Activate the Python Google Cloud Function backend"}),"\n",(0,i.jsxs)(n.p,{children:["Add this to your ",(0,i.jsx)(n.code,{children:"pants.toml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'title="pants.toml"',children:'[GLOBAL]\nbackend_packages.add = [\n  "pants.backend.google_cloud_function.python",\n  "pants.backend.python",\n]\n'})}),"\n",(0,i.jsxs)(n.p,{children:["This adds the new ",(0,i.jsx)(n.code,{children:"python_google_cloud_function"})," target, which you can confirm by running ",(0,i.jsx)(n.code,{children:"pants help python_google_cloud_function "})]}),"\n",(0,i.jsxs)(n.h2,{id:"step-2-define-a-python_google_cloud_function--target",children:["Step 2: Define a ",(0,i.jsx)(n.code,{children:"python_google_cloud_function "})," target"]}),"\n",(0,i.jsxs)(n.p,{children:["First, add your Cloud function in a Python file like you would ",(0,i.jsx)(n.a,{href:"https://cloud.google.com/functions/docs/first-python",children:"normally do with Google Cloud Functions"}),", such as creating a function ",(0,i.jsx)(n.code,{children:"def my_handler_name(event, context)"})," for event-based functions."]}),"\n",(0,i.jsxs)(n.p,{children:["Then, in your BUILD file, make sure that you have a ",(0,i.jsx)(n.code,{children:"python_source"})," or ",(0,i.jsx)(n.code,{children:"python_sources"})," target with the handler file included in the ",(0,i.jsx)(n.code,{children:"sources"})," field. You can use ",(0,i.jsx)(n.a,{href:"/2.23/docs/getting-started/initial-configuration#5-generate-build-files",children:(0,i.jsx)(n.code,{children:"pants tailor ::"})})," to automate this."]}),"\n",(0,i.jsxs)(n.p,{children:["Add a ",(0,i.jsx)(n.code,{children:"python_google_cloud_function"})," target and define ",(0,i.jsx)(n.code,{children:"handler"})," and ",(0,i.jsx)(n.code,{children:"type"})," fields. The ",(0,i.jsx)(n.code,{children:"type"})," should be either ",(0,i.jsx)(n.code,{children:'"event"'})," or ",(0,i.jsx)(n.code,{children:'"http"'}),".  The ",(0,i.jsx)(n.code,{children:"handler"})," has the form ",(0,i.jsx)(n.code,{children:"handler_file.py:handler_func"}),", which Pants will convert into a well-formed entry point. Alternatively, you can set ",(0,i.jsx)(n.code,{children:"handler"})," to the format ",(0,i.jsx)(n.code,{children:"path.to.module:handler_func"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"For example:"}),"\n",(0,i.jsxs)(l.A,{groupId:"code-examples",children:[(0,i.jsx)(a.A,{value:"project/build",label:"project/BUILD",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'tab={"label":"project/BUILD"}',children:'# The default `sources` field will include our handler file.\npython_sources(name="lib")\n\npython_google_cloud_function(\n    name="cloud_function",\n    # Pants will convert this to `project.google_cloud_function_example:example_handler`.\n    handler="google_cloud_function_example.py:example_handler",\n    type="event",\n)\n'})})}),(0,i.jsx)(a.A,{value:"project/google_cloud_function_example.py",label:"project/google_cloud_function_example.py",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'tab={"label":"project/google_cloud_function_example.py"}',children:'def example_handler(event, context):\n    print("Hello Google Cloud Function!")\n'})})})]}),"\n",(0,i.jsxs)(n.p,{children:["Pants will use ",(0,i.jsx)(n.a,{href:"/2.23/docs/using-pants/key-concepts/targets-and-build-files",children:"dependency inference"})," based on the ",(0,i.jsx)(n.code,{children:"handler"})," field, which you can confirm by running ",(0,i.jsx)(n.code,{children:"pants dependencies path/to:cloud_function"}),". You can also manually add to the ",(0,i.jsx)(n.code,{children:"dependencies"})," field."]}),"\n",(0,i.jsxs)(n.p,{children:["You can optionally set the ",(0,i.jsx)(n.code,{children:"output_path"})," field to change the generated zip file's path."]}),"\n",(0,i.jsx)(n.admonition,{title:"Using layout",type:"tip",children:(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.a,{href:"/2.23/reference/targets/python_google_cloud_function#layout",children:"layout"})," to determine whether to build a ",(0,i.jsx)(n.code,{children:".zip"})," file or a directory"]})}),"\n",(0,i.jsxs)(n.admonition,{type:"caution",children:[(0,i.jsxs)(n.mdxAdmonitionTitle,{children:["Use ",(0,i.jsx)(n.code,{children:"resource"})," instead of ",(0,i.jsx)(n.code,{children:"file"})]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"file"})," / ",(0,i.jsx)(n.code,{children:"files"})," targets will not be included in the built Cloud Function because filesystem APIs like ",(0,i.jsx)(n.code,{children:"open()"})," would not load them as expected. Instead, use the ",(0,i.jsx)(n.code,{children:"resource"})," / ",(0,i.jsx)(n.code,{children:"resources"})," target. See ",(0,i.jsx)(n.a,{href:"/2.23/docs/using-pants/assets-and-archives",children:"Assets and archives"})," for further explanation."]})]}),"\n",(0,i.jsx)(n.h3,{id:"specifying-a-runtime-explicitly",children:"Specifying a runtime explicitly"}),"\n",(0,i.jsx)(n.p,{children:"When building an Cloud function artifact, Pants and the underlying Pex tool need to know details about target runtime to be able to choose appropriate artifacts for third-party dependencies that have native code. These details can be inferred or provided in three ways, from highest precedence to lowest precedence:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["An explicit value for ",(0,i.jsxs)(n.a,{href:"/2.23/reference/targets/python_google_cloud_function#complete_platforms",children:["the ",(0,i.jsx)(n.code,{children:"complete_platforms"})," field"]}),'. The "complete platforms" are the underlying source of truth.']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="BUILD"',children:'file(name="gcf-platform", source="gcf-platform.json")\n\npython_google_cloud_function(\n    name="cloud_function",\n    handler="google_cloud_function_example.py:example_handler",\n    type="event",\n    # Explicit complete platforms:\n    complete_platforms=[":gcf-platform"],\n)\n'})}),"\n",(0,i.jsx)(n.p,{children:"If needed, this file can be generated for a specific Cloud Function runtime using the function below:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="gcf-complete-platform-generator.py"',children:'import subprocess\nimport json\n\nimport functions_framework\n\n@functions_framework.http\ndef generate_pex_complete_platforms(request):\n    subprocess.run(\n        "python -m pip install --target=/tmp/pex pex",\n        shell=True,\n        check=True,\n    )\n    result = subprocess.run(\n        "PYTHONPATH=/tmp/pex /tmp/pex/bin/pex3 interpreter inspect --markers --tags",\n        shell=True,\n        capture_output=True,\n        text=True,\n    )\n    return result.stdout\n'})}),"\n",(0,i.jsxs)(n.p,{children:["If you run this function in the Cloud Function testing environment, it will print out a formatted JSON object to the console. You can then copy this JSON object and add it to a file named ",(0,i.jsx)(n.code,{children:"gcf-platform.json"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["An explicit value for ",(0,i.jsxs)(n.a,{href:"/2.23/reference/targets/python_google_cloud_function#runtime",children:["the ",(0,i.jsx)(n.code,{children:"runtime"})," field"]}),': Pants uses this to pick an appropriate "complete platforms" value, from options that Pants has pre-packaged. These are static exports from docker images provided by GCP, relying on the environment being relatively stable. (If Pants doesn\'t have an appropriate "complete platforms" default built-in, you will be prompted to use option 1 above.)']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="BUILD"',children:'python_google_cloud_function(\n    name="cloud_function",\n    handler="google_cloud_function_example.py:example_handler",\n    type="event",\n    # Explicit runtime, `complete_platforms` taken from Pants\' built-in defaults:\n    runtime="python312",\n)\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Inferred from ",(0,i.jsx)(n.a,{href:"/2.23/docs/python/overview/interpreter-compatibility",children:"the relevant interpreter constraints"}),": the interpreter constraints may unambiguously imply a value for the ",(0,i.jsx)(n.code,{children:"runtime"})," and thus ",(0,i.jsx)(n.code,{children:"complete_platforms"})," fields. For example, ",(0,i.jsx)(n.code,{children:'interpreter_constaints = ["==3.12.*"]'})," implies ",(0,i.jsx)(n.code,{children:'runtime="python312"'}),". This only works with interpreter constraints that cover all patch versions of a given minor release series: ",(0,i.jsx)(n.code,{children:">=3.11,<3.13"})," is too wide (it covers both 3.11 and 3.12), while ",(0,i.jsx)(n.code,{children:"==3.12.0"})," is too specific (GCF's ",(0,i.jsx)(n.code,{children:"python312"})," runtime may not use that exact patch version)."]}),"\n",(0,i.jsxs)(l.A,{groupId:"code-examples",children:[(0,i.jsx)(a.A,{value:"pants.toml",label:"pants.toml",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'tab={"label":"pants.toml"}',children:'[python]\ninterpreter_constraints = ["==3.12.*"]\n'})})}),(0,i.jsx)(a.A,{value:"project/build",label:"project/BUILD",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'tab={"label":"project/BUILD"}',children:'python_google_cloud_function(\n    name="cloud_function",\n    handler="google_cloud_function_example.py:example_handler",\n    type="event",\n    # `runtime` inferred and `complete_platforms` from built-in defaults\n)\n'})})})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["This guide is written using the last option, but you can add ",(0,i.jsx)(n.code,{children:"runtime"})," or ",(0,i.jsx)(n.code,{children:"complete_platforms"})," to any examples using the ",(0,i.jsx)(n.code,{children:"python_google_cloud_function"})," target."]}),"\n",(0,i.jsxs)(n.h2,{id:"step-3-run-package",children:["Step 3: Run ",(0,i.jsx)(n.code,{children:"package"})]}),"\n",(0,i.jsxs)(n.p,{children:["Now run ",(0,i.jsx)(n.code,{children:"pants package"})," on your ",(0,i.jsx)(n.code,{children:"python_google_cloud_function"})," target to create a zipped file."]}),"\n",(0,i.jsx)(n.p,{children:"For example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ pants package project/:cloud_function\nWrote dist/project/cloud_function.zip\n  Handler: handler\n"})}),"\n",(0,i.jsxs)(n.admonition,{title:"Running from macOS and failing to build?",type:"caution",children:[(0,i.jsxs)(n.p,{children:["Cloud Functions must run on Linux, so Pants tells PEX and Pip to build for Linux when resolving your third party dependencies. This means that you can only use pre-built ",(0,i.jsx)(n.a,{href:"https://packaging.python.org/glossary/#term-wheel",children:"wheels"})," (bdists). If your project requires any source distributions (",(0,i.jsx)(n.a,{href:"https://packaging.python.org/glossary/#term-source-distribution-or-sdist",children:"sdists"}),") that must be built locally, PEX and pip will fail to run."]}),(0,i.jsxs)(n.p,{children:["If this happens, you must either change your dependencies to only use dependencies with pre-built ",(0,i.jsx)(n.a,{href:"https://pythonwheels.com",children:"wheels"})," or find a Linux environment to run ",(0,i.jsx)(n.code,{children:"pants package"}),"."]})]}),"\n",(0,i.jsxs)(n.admonition,{title:'"Encountering collisions" errors and failing to build?',type:"caution",children:[(0,i.jsxs)(n.p,{children:["If a build fails with an error like ",(0,i.jsx)(n.code,{children:"Encountered collisions populating ... from PEX at faas_repository.pex:"}),", listing one or more files with different ",(0,i.jsx)(n.code,{children:"sha1"}),' hashes, this likely means your dependencies package files in unexpected locations, outside their "scoped" directory (for instance, a package ',(0,i.jsx)(n.code,{children:"example-pkg"})," typically only includes files within ",(0,i.jsx)(n.code,{children:"example_pkg/"})," and ",(0,i.jsx)(n.code,{children:"example_pkg-*.dist-info/"})," directories). When multiple dependencies do this, those files can have exactly matching file paths but different contents, and so it is impossible to create a GCF artifact: which of the files should be installed and which should be ignored? Resolving this requires human intervention to understand whether any of those files are important, and hence PEX emits an error rather than making an (arbitrary) choice that may result in confusing and/or broken behaviour at runtime."]}),(0,i.jsxs)(n.p,{children:["Most commonly this seems to happen with metadata like a README or LICENSE file, or test files (in a ",(0,i.jsx)(n.code,{children:"tests/"})," subdirectory), which are likely not important at runtime. In these cases, the collision can be worked around by adding ",(0,i.jsxs)(n.a,{href:"/2.23/reference/targets/python_google_cloud_function#pex3_venv_create_extra_args",children:["a ",(0,i.jsx)(n.code,{children:'pex3_venv_create_extra_args=["--collisions-ok"]'})," field"]})," to the ",(0,i.jsx)(n.code,{children:"python_google_cloud_function"})," target."]}),(0,i.jsx)(n.p,{children:"A better solution is to work with the dependencies to stop them from packaging files outside their scoped directories."})]}),"\n",(0,i.jsx)(n.h2,{id:"step-4-upload-to-google-cloud",children:"Step 4: Upload to Google Cloud"}),"\n",(0,i.jsxs)(n.p,{children:["You can use any of the various Google Cloud methods to upload your zip file or directory, such as the Google Cloud console or the ",(0,i.jsx)(n.a,{href:"https://cloud.google.com/functions/docs/deploying/filesystem#deploy_using_the_gcloud_tool",children:"Google Cloud CLI"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["You must specify the ",(0,i.jsx)(n.code,{children:"--entry-point"})," as ",(0,i.jsx)(n.code,{children:"handler"}),". This is a re-export of the function referred to by the ",(0,i.jsx)(n.code,{children:"handler"})," field of the target."]}),"\n",(0,i.jsxs)(n.p,{children:["For example, if using ",(0,i.jsx)(n.code,{children:'layout="flat"'}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"gcloud functions deploy --source=dist/project/cloud_function --entry-point=handler --trigger-topic=<TOPIC> --runtime=python38 <FUNCTION_NAME>\n"})}),"\n",(0,i.jsx)(n.h2,{id:"advanced-using-pex-directly",children:"Advanced: Using PEX directly"}),"\n",(0,i.jsxs)(n.p,{children:["In the rare case where you need access to PEX features, such as dynamic selection of dependencies, a PEX file created by ",(0,i.jsx)(n.code,{children:"pex_binary"})," can be used as a Google Cloud Function package directly. A PEX file is a carefully constructed zip file, and can be understood natively by Google Cloud Functions. Note: using ",(0,i.jsx)(n.code,{children:"pex_binary"})," results in larger packages and slower cold starts and is likely to be less convenient than using ",(0,i.jsx)(n.code,{children:"python_google_cloud_function"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["The handler of a ",(0,i.jsx)(n.code,{children:"pex_binary"})," is not re-exported at the fixed ",(0,i.jsx)(n.code,{children:"main.handler"})," path, and the Google Cloud Function handler must be configured as the ",(0,i.jsx)(n.code,{children:"__pex__"})," pseudo-package followed by the handler's normal module path (for instance, if the handler is in ",(0,i.jsx)(n.code,{children:"some/module/path.py"})," within ",(0,i.jsx)(n.a,{href:"/2.23/docs/using-pants/key-concepts/source-roots",children:"a source root"}),", then use ",(0,i.jsx)(n.code,{children:"__pex__.some.module.path"}),"). This may require being configured via ",(0,i.jsx)(n.a,{href:"https://cloud.google.com/docs/buildpacks/service-specific-configs#google_function_source",children:(0,i.jsx)(n.code,{children:"GOOGLE_FUNCTION_SOURCE"})}),". The ",(0,i.jsx)(n.code,{children:"__pex__"})," pseudo-package ensures dependencies are initialized before running any of your code."]}),"\n",(0,i.jsx)(n.p,{children:"For example:"}),"\n",(0,i.jsxs)(l.A,{groupId:"code-examples",children:[(0,i.jsx)(a.A,{value:"project/build",label:"project/BUILD",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'tab={"label":"project/BUILD"}',children:'python_sources()\n\npex_binary(\n    name="gcf",\n    entry_point="gcf_example.py",\n    # specify an appropriate platform for the targeted GCF runtime:\n    complete_platforms=["path/to:platform-json-target"],\n)\n'})})}),(0,i.jsx)(a.A,{value:"project/gcf_example.py",label:"project/gcf_example.py",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'tab={"label":"project/gcf_example.py"}',children:'def example_handler(event, context):\n    print("Hello GCF!")\n'})})})]}),"\n",(0,i.jsxs)(n.p,{children:["Then, use ",(0,i.jsx)(n.code,{children:"pants package project:gcf"}),", and upload the resulting ",(0,i.jsx)(n.code,{children:"project/gcf.pex"})," to Google Cloud Functions. You will need to specify the handler as ",(0,i.jsx)(n.code,{children:"example_handler"})," and set ",(0,i.jsx)(n.code,{children:"GOOGLE_FUNCTION_SOURCE=__pex__.gcf_example"})," (assuming ",(0,i.jsx)(n.code,{children:"project"})," is a ",(0,i.jsx)(n.a,{href:"/2.23/docs/using-pants/key-concepts/source-roots",children:"source root"}),")."]}),"\n",(0,i.jsx)(n.h2,{id:"migrating-from-pants-216-and-earlier",children:"Migrating from Pants 2.16 and earlier"}),"\n",(0,i.jsx)(n.p,{children:"Pants implemented a new way to package Google Cloud Functions in 2.17, which became the only option in 2.19, resulting in smaller packages and faster cold starts. This involves some changes:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["In Pants 2.16 and earlier, Pants used the ",(0,i.jsx)(n.a,{href:"https://github.com/pantsbuild/lambdex",children:"Lambdex"})," project. First, Pants would convert your code into a ",(0,i.jsx)(n.a,{href:"/2.23/docs/python/overview/pex",children:"Pex file"})," and then use Lambdex to adapt this to be better understood by GCF by adding a shim handler. This shim handler first triggers the Pex initialization to choose and unzip dependencies, during initialization."]}),"\n",(0,i.jsx)(n.li,{children:"In Pants 2.17, the use of Lambdex was deprecated, in favour of choosing the appropriate dependencies ahead of time, as described above, without needing to do this on each cold start. This results in a zip file laid out in the format recommended by GCF, and includes a re-export of the handler."}),"\n",(0,i.jsx)(n.li,{children:"In Pants 2.18, the new behaviour is now the default behaviour."}),"\n",(0,i.jsx)(n.li,{children:"In Pants 2.19 and later, the old Lambdex behaviour has been entirely removed."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["If your code can be packaged without warnings using Pants 2.18, no change is required when upgrading to Pants 2.19 (except removing the ",(0,i.jsx)(n.code,{children:"[lambdex]"})," section in ",(0,i.jsx)(n.code,{children:"pants.toml"})," if that still remains). If not, ",(0,i.jsx)(n.a,{href:"/v2.18/docs/google-cloud-function-python#migrating-from-pants-216-and-earlier",children:"follow its instructions"})," to upgrade to Pants 2.18 fully first, and upgrade to Pants 2.19 after that."]}),"\n",(0,i.jsxs)(n.p,{children:["If you encounter a bug with the new behaviour, ",(0,i.jsx)(n.a,{href:"https://github.com/pantsbuild/pants/issues/new/choose",children:"please let us know"}),". If you require advanced PEX features, ",(0,i.jsxs)(n.a,{href:"#advanced-using-pex-directly",children:["switch to using ",(0,i.jsx)(n.code,{children:"pex_binary"})," directly"]}),"."]})]})}function p(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},753348(e,n,t){t.d(n,{A:()=>o});let o={tabItem:"tabItem_mHvh"}},618264(e,n,t){t.d(n,{A:()=>o});let o={tabList:"tabList_sFbf",tabItem:"tabItem_UVfV"}},637180(e,n,t){t.d(n,{A:()=>l});var o=t(886070);t(830758);var i=t(313526),r=t(753348);function l({children:e,hidden:n,className:t}){return(0,o.jsx)("div",{role:"tabpanel",className:(0,i.A)(r.A.tabItem,t),hidden:n,children:e})}},685008(e,n,t){t.d(n,{A:()=>f});var o=t(886070),i=t(830758),r=t(313526),l=t(911212),a=t(274875),s=t(106632),c=t(189223),d=t(618264);function h({className:e,block:n,selectedValue:t,selectValue:i,tabValues:l}){let s=[],{blockElementScrollPositionUntilNextRender:c}=(0,a.a_)(),h=e=>{let n=e.currentTarget,o=l[s.indexOf(n)].value;o!==t&&(c(n),i(o))},u=e=>{let n=null;switch(e.key){case"Enter":h(e);break;case"ArrowRight":{let t=s.indexOf(e.currentTarget)+1;n=s[t]??s[0];break}case"ArrowLeft":{let t=s.indexOf(e.currentTarget)-1;n=s[t]??s[s.length-1]}}n?.focus()};return(0,o.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},e),children:l.map(({value:e,label:n,attributes:i})=>(0,o.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{s.push(e)},onKeyDown:u,onClick:h,...i,className:(0,r.A)("tabs__item",d.A.tabItem,i?.className,{"tabs__item--active":t===e}),children:n??e},e))})}function u({lazy:e,children:n,selectedValue:t}){let l=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){let e=l.find(e=>e.props.value===t);return e?(0,i.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,o.jsx)("div",{className:"margin-top--md",children:l.map((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==t}))})}function p(e){let n=(0,s.u)(e);return(0,o.jsxs)("div",{className:(0,r.A)(l.G.tabs.container,"tabs-container",d.A.tabList),children:[(0,o.jsx)(h,{...n,...e}),(0,o.jsx)(u,{...n,...e})]})}function f(e){let n=(0,c.A)();return(0,o.jsx)(p,{...e,children:(0,s.v)(e.children)},String(n))}},106632(e,n,t){t.d(n,{u:()=>h,v:()=>c});var o=t(830758),i=t(325557),r=t(363717),l=t(125740),a=t(574229),s=t(270367);function c(e){return o.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,o.isValidElement)(e)&&function(e){let{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function d({value:e,tabValues:n}){return n.some(n=>n.value===e)}function h(e){let n,{defaultValue:t,queryString:h=!1,groupId:u}=e,p=function(e){let{values:n,children:t}=e;return(0,o.useMemo)(()=>{let e=n??c(t).map(({props:{value:e,label:n,attributes:t,default:o}})=>({value:e,label:n,attributes:t,default:o})),o=(0,a.XI)(e,(e,n)=>e.value===n.value);if(o.length>0)throw Error(`Docusaurus error: Duplicate values "${o.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return e},[n,t])}(e),[f,g]=(0,o.useState)(()=>(function({defaultValue:e,tabValues:n}){if(0===n.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!d({value:e,tabValues:n}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}let t=n.find(e=>e.default)??n[0];if(!t)throw Error("Unexpected error: 0 tabValues");return t.value})({defaultValue:t,tabValues:p})),[m,x]=function({queryString:e=!1,groupId:n}){let t=(0,i.W6)(),r=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,l.aZ)(r),(0,o.useCallback)(e=>{if(!r)return;let n=new URLSearchParams(t.location.search);n.set(r,e),t.replace({...t.location,search:n.toString()})},[r,t])]}({queryString:h,groupId:u}),[y,j]=function({groupId:e}){let n=e?`docusaurus.tab.${e}`:null,[t,i]=(0,s.Dv)(n);return[t,(0,o.useCallback)(e=>{n&&i.set(e)},[n,i])]}({groupId:u}),b=d({value:n=m??y,tabValues:p})?n:null;return(0,r.A)(()=>{b&&g(b)},[b]),{selectedValue:f,selectValue:(0,o.useCallback)(e=>{if(!d({value:e,tabValues:p}))throw Error(`Can't select invalid tab value=${e}`);g(e),x(e),j(e)},[x,j,p]),tabValues:p}}},848193(e,n,t){t.d(n,{R:()=>l,x:()=>a});var o=t(830758);let i={},r=o.createContext(i);function l(e){let n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),o.createElement(r.Provider,{value:n},e.children)}},898011(e){e.exports=JSON.parse('{"id":"docs/python/integrations/google-cloud-functions","title":"Google Cloud Functions","description":"Create a Cloud Function with Python.","source":"@site/versioned_docs/version-2.23/docs/python/integrations/google-cloud-functions.mdx","sourceDirName":"docs/python/integrations","slug":"/docs/python/integrations/google-cloud-functions","permalink":"/2.23/docs/python/integrations/google-cloud-functions","draft":false,"unlisted":false,"editUrl":"https://github.com/pantsbuild/pants/edit/main/docs/docs/python/integrations/google-cloud-functions.mdx","tags":[],"version":"2.23","sidebarPosition":3,"frontMatter":{"title":"Google Cloud Functions","sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"AWS Lambda","permalink":"/2.23/docs/python/integrations/aws-lambda"},"next":{"title":"PyOxidizer","permalink":"/2.23/docs/python/integrations/pyoxidizer"}}')}}]);