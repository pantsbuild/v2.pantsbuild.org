"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["346037"],{536945(e,t,n){n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>f,frontMatter:()=>a,metadata:()=>s,toc:()=>h});var s=n(688102),r=n(886070),i=n(848193),l=n(685008),o=n(637180);let a={title:"Linters, formatters and fixers",sidebar_position:4},c,d={},h=[{value:"Activating linters and formatters",id:"activating-linters-and-formatters",level:2},{value:"Configuring the tools, for example, adding plugins",id:"configuring-the-tools-for-example-adding-plugins",level:2},{value:"Running only certain formatters, fixers or linters",id:"running-only-certain-formatters-fixers-or-linters",level:2},{value:"Tip: only run over changed files",id:"tip-only-run-over-changed-files",level:2},{value:"Tips for specific tools",id:"tips-for-specific-tools",level:2},{value:"Order of <code>backend_packages</code> matters for <code>fmt</code> and <code>fix</code>",id:"order-of-backend_packages-matters-for-fmt-and-fix",level:3},{value:"Bandit, Flake8, Pylint and Ruff: report files",id:"bandit-flake8-pylint-and-ruff-report-files",level:3},{value:"Pylint and Flake8: how to add first-party plugins",id:"pylint-and-flake8-how-to-add-first-party-plugins",level:3},{value:"Bandit: less verbose logging",id:"bandit-less-verbose-logging",level:3},{value:"Black and isort can work together",id:"black-and-isort-can-work-together",level:3},{value:"Pyupgrade: specify which Python version to target",id:"pyupgrade-specify-which-python-version-to-target",level:3},{value:"isort: possible issues with its import classifier algorithm",id:"isort-possible-issues-with-its-import-classifier-algorithm",level:3},{value:"Black and isort: excluding files",id:"black-and-isort-excluding-files",level:3}];function p(e){let t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"How to activate and use the Python linters, formatters and fixers bundled with Pants."}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsxs)(t.admonition,{title:"Benefit of Pants: consistent interface",type:"tip",children:[(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"pants lint"}),", ",(0,r.jsx)(t.code,{children:"pants fmt"})," and ",(0,r.jsx)(t.code,{children:"pants fix"})," will consistently and correctly run all your linters, formatters and fixers. No need to remember how to invoke each tool, and no need to write custom scripts."]}),(0,r.jsx)(t.p,{children:"This consistent interface even works with multiple languages, like running Python linters at the same time as Go, Shell, Java, and Scala."})]}),"\n",(0,r.jsxs)(t.admonition,{title:"Benefit of Pants: concurrency",type:"tip",children:[(0,r.jsx)(t.p,{children:"Pants does several things to speed up running formatters and linters:"}),(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Automatically configures tools that support concurrency (e.g. a ",(0,r.jsx)(t.code,{children:"--jobs"})," option) based on your number of cores and what else is already running."]}),"\n",(0,r.jsxs)(t.li,{children:["Runs everything in parallel with the ",(0,r.jsx)(t.code,{children:"lint"})," goal (although not the ",(0,r.jsx)(t.code,{children:"fmt"})," goal, which pipes the results of one formatter to the next for correctness)."]}),"\n",(0,r.jsxs)(t.li,{children:["Runs in batches of 256 files by default, which gives parallelism even for tools that don't have a ",(0,r.jsx)(t.code,{children:"--jobs"})," option. This also increases cache reuse."]}),"\n"]})]}),"\n",(0,r.jsx)(t.h2,{id:"activating-linters-and-formatters",children:"Activating linters and formatters"}),"\n",(0,r.jsxs)(t.p,{children:["Linter/formatter/fixer support is implemented in separate ",(0,r.jsx)(t.a,{href:"/2.29/docs/using-pants/key-concepts/backends",children:"backends"})," so that they are easy to opt in to individually:"]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Backend"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Tool"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"../../../reference/subsystems/bandit",children:(0,r.jsx)(t.code,{children:"pants.backend.python.lint.bandit"})})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.a,{href:"https://bandit.readthedocs.io/en/latest/",children:"Bandit"}),": security linter"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"../../../reference/subsystems/black",children:(0,r.jsx)(t.code,{children:"pants.backend.python.lint.black"})})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.a,{href:"https://black.readthedocs.io/en/stable/",children:"Black"}),": code formatter"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"../../../reference/subsystems/docformatter",children:(0,r.jsx)(t.code,{children:"pants.backend.python.lint.docformatter"})})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.a,{href:"https://pypi.org/project/docformatter/",children:"Docformatter"}),": docstring formatter"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"../../../reference/subsystems/flake8",children:(0,r.jsx)(t.code,{children:"pants.backend.python.lint.flake8"})})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.a,{href:"https://flake8.pycqa.org/en/latest/",children:"Flake8"}),": style and bug linter"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"../../../reference/subsystems/isort",children:(0,r.jsx)(t.code,{children:"pants.backend.python.lint.isort"})})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.a,{href:"https://readthedocs.org/projects/isort/",children:"isort"}),": import statement formatter"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"../../../reference/subsystems/pydocstyle",children:(0,r.jsx)(t.code,{children:"pants.backend.python.lint.pydocstyle"})})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.a,{href:"https://pypi.org/project/pydocstyle/",children:"Pydocstyle"}),": docstring linter"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"../../../reference/subsystems/pylint",children:(0,r.jsx)(t.code,{children:"pants.backend.python.lint.pylint"})})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.a,{href:"https://pylint.pycqa.org/",children:"Pylint"}),": style and bug linter"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"../../../reference/subsystems/yapf",children:(0,r.jsx)(t.code,{children:"pants.backend.python.lint.yapf"})})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.a,{href:"https://github.com/google/yapf",children:"Yapf"}),": code formatter"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"../../../reference/subsystems/autoflake",children:(0,r.jsx)(t.code,{children:"pants.backend.python.lint.autoflake"})})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.a,{href:"https://github.com/myint/autoflake",children:"Autoflake"}),": remove unused imports"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"../../../reference/subsystems/pyupgrade",children:(0,r.jsx)(t.code,{children:"pants.backend.python.lint.pyupgrade"})})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.a,{href:"https://github.com/asottile/pyupgrade",children:"Pyupgrade"}),": automatically update code to use modern Python idioms like ",(0,r.jsx)(t.code,{children:"f-strings"})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"../../../reference/subsystems/ruff",children:(0,r.jsx)(t.code,{children:"pants.backend.experimental.python.lint.ruff.check"})})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.a,{href:"https://docs.astral.sh/ruff/linter/",children:"Ruff (for linting)"}),": an extremely fast Python linter, written in Rust."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"../../../reference/subsystems/ruff",children:(0,r.jsx)(t.code,{children:"pants.backend.experimental.python.lint.ruff.format"})})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.a,{href:"https://docs.astral.sh/ruff/formatter/",children:"Ruff (for formatting)"}),": an extremely fast Python code formatter, written in Rust."]})]})]})]}),"\n",(0,r.jsxs)(t.p,{children:["To enable, add the appropriate backends in ",(0,r.jsx)(t.code,{children:"pants.toml"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-toml",metastring:'title="pants.toml"',children:"[GLOBAL]\n...\nbackend_packages = [\n  'pants.backend.python',\n  'pants.backend.python.lint.black',\n  'pants.backend.python.lint.isort',\n]\n"})}),"\n",(0,r.jsxs)(t.p,{children:["You should now be able to run ",(0,r.jsx)(t.a,{href:"../../../reference/goals/lint",children:(0,r.jsx)(t.code,{children:"pants lint"})}),", and possibly ",(0,r.jsx)(t.a,{href:"../../../reference/goals/fmt",children:(0,r.jsx)(t.code,{children:"pants fmt"})})," or ",(0,r.jsx)(t.a,{href:"../../../reference/goals/fix",children:(0,r.jsx)(t.code,{children:"pants fix"})}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"$ pants lint src/py/project.py\n17:54:32.51 [INFO] Completed: lint - Flake8 succeeded.\n17:54:32.70 [INFO] Completed: lint - Black succeeded.\nAll done! \u2728 \u{1F370} \u2728\n1 file would be left unchanged.\n\n17:54:33.91 [INFO] Completed: lint - isort succeeded.\n\n\u2713 Black succeeded.\n\u2713 Flake8 succeeded.\n\u2713 isort succeeded.\n"})}),"\n",(0,r.jsx)(t.admonition,{title:"How to activate MyPy",type:"note",children:(0,r.jsxs)(t.p,{children:["MyPy is run with the ",(0,r.jsx)(t.a,{href:"/2.29/docs/python/goals/check",children:"check goal"}),", rather than ",(0,r.jsx)(t.code,{children:"lint"}),"."]})}),"\n",(0,r.jsx)(t.h2,{id:"configuring-the-tools-for-example-adding-plugins",children:"Configuring the tools, for example, adding plugins"}),"\n",(0,r.jsx)(t.p,{children:"You can configure each formatter, fixer and linter using these options:"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Option"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"What it does"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"interpreter_constraints"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["What interpreter to run the tool with. (",(0,r.jsx)(t.code,{children:"bandit"}),", ",(0,r.jsx)(t.code,{children:"flake8"}),", and ",(0,r.jsx)(t.code,{children:"pylint"})," determine this based on your ",(0,r.jsx)(t.a,{href:"/2.29/docs/python/overview/interpreter-compatibility",children:"code's interpreter constraints"}),".)"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"args"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Any command-line arguments you want to pass to the tool."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"config"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Path to a config file. Useful if the file is in a non-standard location such that it cannot be auto-discovered."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"install_from_resolve"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["Name of a custom resolve to use for tool versions and plugins. See ",(0,r.jsx)(t.a,{href:"/2.29/docs/python/overview/lockfiles#lockfiles-for-tools",children:"Lockfiles for tools"}),"."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"requirements"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["Optional subset of requirements to install from the custom resolve for this formatter or linter. See ",(0,r.jsx)(t.a,{href:"/2.29/docs/python/overview/lockfiles#lockfiles-for-tools",children:"Lockfiles for tools"}),"."]})]})]})]}),"\n",(0,r.jsx)(t.p,{children:"For example:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-toml",metastring:'title="pants.toml"',children:'[docformatter]\nargs = ["--wrap-summaries=100", "--wrap-descriptions=100"]\n\n[python.resolves]\n# A custom resolve that updates the version and adds a custom plugin.\nflake8 = "3rdparty/python/flake8.lock"\n\n[flake8]\n# Load a config file in a non-standard location.\nconfig = "build-support/flake8"\ninstall_from_resolve = "flake8"\n'})}),"\n",(0,r.jsx)(t.p,{children:"Then set up the resolve's inputs:"}),"\n",(0,r.jsxs)(l.A,{groupId:"code-examples",children:[(0,r.jsx)(o.A,{value:"3rdparty/python/build",label:"3rdparty/python/BUILD",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",metastring:'tab={"label":"3rdparty/python/BUILD"}',children:'python_requirements(\n    source="flake8-requirements.txt",\n    resolve="flake8",\n)\n'})})}),(0,r.jsx)(o.A,{value:"3rdparty/python/flake8-requirements.txt",label:"3rdparty/python/flake8-requirements.txt",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-text",metastring:'tab={"label":"3rdparty/python/flake8-requirements.txt"}',children:"flake8==6.0.0\nflake8-bugbear>=23.3.23\n"})})})]}),"\n",(0,r.jsx)(t.p,{children:"And generate its custom lockfile:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",metastring:'title="Bash"',children:"$ pants generate-lockfiles --resolve=flake8\n16:00:39.26 [INFO] Completed: Generate lockfile for flake8\n16:00:39.29 [INFO] Wrote lockfile for the resolve `flake8` to 3rdparty/python/flake8.lock\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Run ",(0,r.jsx)(t.code,{children:"pants help-advanced black"}),", ",(0,r.jsx)(t.code,{children:"pants help-advanced flake8"}),", and so on for more information."]}),"\n",(0,r.jsxs)(t.admonition,{title:"Config files are normally auto-discovered",type:"note",children:[(0,r.jsx)(t.p,{children:"For tools that autodiscover config files\u2014such as Black, isort, Flake8, and Pylint\u2014Pants will include any relevant config files in the process's sandbox when running the tool."}),(0,r.jsxs)(t.p,{children:["If your config file is in a non-standard location, you must instead set the ",(0,r.jsx)(t.code,{children:"--config"})," option, e.g. ",(0,r.jsx)(t.code,{children:"[isort].config"}),". This will ensure that the config file is included in the process's sandbox and Pants will instruct the tool to load the config."]})]}),"\n",(0,r.jsx)(t.h2,{id:"running-only-certain-formatters-fixers-or-linters",children:"Running only certain formatters, fixers or linters"}),"\n",(0,r.jsxs)(t.p,{children:["To temporarily skip a tool, use the ",(0,r.jsx)(t.code,{children:"--skip"})," option for that tool. For example, run:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"\u276F  pants --black-skip --flake8-skip lint ::\n"})}),"\n",(0,r.jsxs)(t.p,{children:["You can also use the ",(0,r.jsx)(t.code,{children:"--lint-only"}),", ",(0,r.jsx)(t.code,{children:"--fmt-only"})," or ",(0,r.jsx)(t.code,{children:"--fix-only"})," options with the names of the tools:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'\u276F pants lint --only=black ::\n\n# To run several, you can use either approach:\n\u276F pants fmt --only=black --only=isort ::\n\u276F pants fmt --only=\'["black", "isort"]\' ::\n'})}),"\n",(0,r.jsxs)(t.p,{children:["You can also skip for certain targets with the ",(0,r.jsx)(t.code,{children:"skip_<tool>"})," fields, which can be useful for ",(0,r.jsx)(t.a,{href:"https://www.youtube.com/watch?v=BOhcdRsmv0s",children:"incrementally adopting new tools"}),". For example:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",metastring:'title="project/BUILD"',children:'python_sources(\n    name="lib",\n    # Skip Black for all non-test files in this folder.\n    skip_black=True,\n    overrides={\n        "strutil.py": {"skip_flake8": True},\n        ("docutil.py", "dirutil.py"): {"skip_isort": True},\n    },\n)\n\npython_tests(\n    name="tests",\n    # Skip isort for all the test files in this folder.\n    skip_isort=True,\n)\n'})}),"\n",(0,r.jsxs)(t.p,{children:["When you run ",(0,r.jsx)(t.code,{children:"pants fmt"}),", ",(0,r.jsx)(t.code,{children:"pants fix"})," and ",(0,r.jsx)(t.code,{children:"pants lint"}),", Pants will ignore any files belonging to skipped targets."]}),"\n",(0,r.jsx)(t.h2,{id:"tip-only-run-over-changed-files",children:"Tip: only run over changed files"}),"\n",(0,r.jsx)(t.p,{children:"With formatters and linters, there is usually no need to rerun on files that have not changed."}),"\n",(0,r.jsxs)(t.p,{children:["Use the option ",(0,r.jsx)(t.code,{children:"--changed-since"})," to get much better performance, like this:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"\u276F pants --changed-since=HEAD fmt\n"})}),"\n",(0,r.jsx)(t.p,{children:"or"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"\u276F pants --changed-since=main lint\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Pants will find which files have changed and only run over those files. See ",(0,r.jsx)(t.a,{href:"/2.29/docs/using-pants/advanced-target-selection",children:"Advanced target selection"})," for more information."]}),"\n",(0,r.jsx)(t.h2,{id:"tips-for-specific-tools",children:"Tips for specific tools"}),"\n",(0,r.jsxs)(t.h3,{id:"order-of-backend_packages-matters-for-fmt-and-fix",children:["Order of ",(0,r.jsx)(t.code,{children:"backend_packages"})," matters for ",(0,r.jsx)(t.code,{children:"fmt"})," and ",(0,r.jsx)(t.code,{children:"fix"})]}),"\n",(0,r.jsxs)(t.p,{children:["Pants will run formatters and fixers in the order in which they appear in the ",(0,r.jsx)(t.code,{children:"backend_packages"})," option."]}),"\n",(0,r.jsx)(t.p,{children:"For example, you likely want to put Autoflake (which removes unused imports) before Black and Isort, which will format your import statements."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-toml",metastring:'title="pants.toml"',children:'[GLOBAL]\nbackend_packages = [\n    # Note that we want Autoflake to run before Black and isort,\n    # so it must appear first.\n    "pants.backend.python.experimental.autoflake",\n    "pants.backend.python.black",\n    "pants.backend.python.isort",\n]\n'})}),"\n",(0,r.jsx)(t.h3,{id:"bandit-flake8-pylint-and-ruff-report-files",children:"Bandit, Flake8, Pylint and Ruff: report files"}),"\n",(0,r.jsx)(t.p,{children:"Flake8, Bandit, Pylint and Ruff can generate report files saved to disk."}),"\n",(0,r.jsxs)(t.p,{children:["For Pants to properly preserve the reports, instruct the tools to write to the ",(0,r.jsx)(t.code,{children:"reports/"})," folder\nby updating their config files, or ",(0,r.jsx)(t.code,{children:"--flake8-args"}),", ",(0,r.jsx)(t.code,{children:"--bandit-args"}),", ",(0,r.jsx)(t.code,{children:"--pylint-args"})," and ",(0,r.jsx)(t.code,{children:"--ruff-args"}),". For\nexample, in your ",(0,r.jsx)(t.code,{children:"pants.toml"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-toml",children:'[bandit]\nargs = ["--output=reports/report.txt"]\n\n[flake8]\nargs = ["--output-file=reports/report.txt"]\n\n[pylint]\nargs = ["--output-format=text:reports/report.txt"]\n\n[ruff]\nargs = ["--output-file=reports/report.txt"]\n'})}),"\n",(0,r.jsxs)(t.p,{children:["Pants will copy all reports into the folder ",(0,r.jsx)(t.code,{children:"dist/lint/<linter_name>"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"pylint-and-flake8-how-to-add-first-party-plugins",children:"Pylint and Flake8: how to add first-party plugins"}),"\n",(0,r.jsxs)(t.p,{children:["See ",(0,r.jsx)(t.a,{href:"/2.29/reference/subsystems/pylint#source_plugins",children:(0,r.jsx)(t.code,{children:"[pylint].source_plugins"})})," and ",(0,r.jsx)(t.a,{href:"/2.29/reference/subsystems/flake8#source_plugins",children:(0,r.jsx)(t.code,{children:"[flake8].source_plugins"})})," for instructions to add plugins written by you."]}),"\n",(0,r.jsx)(t.h3,{id:"bandit-less-verbose-logging",children:"Bandit: less verbose logging"}),"\n",(0,r.jsxs)(t.p,{children:["Bandit output can be extremely verbose, including on successful runs. You may want to use its ",(0,r.jsx)(t.code,{children:"--quiet"})," option, which will turn off output for successful runs but keep it for failures."]}),"\n",(0,r.jsxs)(t.p,{children:["For example, you can set this in your ",(0,r.jsx)(t.code,{children:"pants.toml"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-toml",children:'[bandit]\nargs = ["--quiet"]\n'})}),"\n",(0,r.jsx)(t.h3,{id:"black-and-isort-can-work-together",children:"Black and isort can work together"}),"\n",(0,r.jsxs)(t.p,{children:["If you use both ",(0,r.jsx)(t.code,{children:"black"})," and ",(0,r.jsx)(t.code,{children:"isort"}),", you most likely will need to tell ",(0,r.jsx)(t.code,{children:"isort"})," to work in a mode compatible with ",(0,r.jsx)(t.code,{children:"black"}),". It is also a good idea to ensure they use the same line length. This requires tool specific configuration, which could go into ",(0,r.jsx)(t.code,{children:"pyproject.toml"})," for example:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-toml",children:'# pyproject.toml\n[tool.isort]\nprofile = "black"\nline_length = 100\n\n[tool.black]\nline-length = 100\n'})}),"\n",(0,r.jsx)(t.h3,{id:"pyupgrade-specify-which-python-version-to-target",children:"Pyupgrade: specify which Python version to target"}),"\n",(0,r.jsx)(t.p,{children:"You must tell Pyupgrade which version of Python to target, like this:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-toml",children:'# pants.toml\n[pyupgrade]\nargs = ["--py36-plus"]\n'})}),"\n",(0,r.jsx)(t.h3,{id:"isort-possible-issues-with-its-import-classifier-algorithm",children:"isort: possible issues with its import classifier algorithm"}),"\n",(0,r.jsxs)(t.p,{children:["Some Pants users had to explicitly set ",(0,r.jsx)(t.code,{children:'default_section = "THIRDPARTY"'})," to get iSort 5 to correctly classify their first-party imports, even though this is the default value."]}),"\n",(0,r.jsx)(t.p,{children:"They report that this config works for them:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-toml",children:'# pyproject.toml\n[tool.isort]\nknown_first_party = ["my_org"]\ndefault_section = "THIRDPARTY"\n'})}),"\n",(0,r.jsxs)(t.p,{children:["You may also want to try downgrading to iSort 4.x by setting ",(0,r.jsx)(t.code,{children:'version = "isort>=4.6,<5"'})," in the ",(0,r.jsx)(t.code,{children:"[isort]"})," options scope."]}),"\n",(0,r.jsx)(t.h3,{id:"black-and-isort-excluding-files",children:"Black and isort: excluding files"}),"\n",(0,r.jsxs)(t.p,{children:["Although it is possible to skip linters for individual targets using ",(0,r.jsx)(t.code,{children:"skip_"})," parameters, sometimes an entire category of files needs to be excluded, e.g. generated files with a prefix or suffix. This can be done by configuring those tools directly within ",(0,r.jsx)(t.code,{children:"pyproject.toml"}),"."]}),"\n",(0,r.jsxs)(t.p,{children:["In order to exclude files from being formatted by Black and isort, it may be necessary to tell those tools to respect skip configuration options. Since Pants runs these tools on individual files rather than directories, they often run on every Python file in spite of the intuitive skip arguments. See e.g. ",(0,r.jsx)(t.a,{href:"https://stackoverflow.com/a/73296261",children:"this post"})," from the Black maintainers."]}),"\n",(0,r.jsx)(t.p,{children:"Pants users report that this config works for them:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-toml",children:"# pyproject.toml\n[tool.isort]\n# tell isort to respect skip_glob\nfilter_files = true\n# in particular, extend_skip_glob doesn't seem to work under Pants isort\nskip_glob = [\n    \"**/*_skip_me.py\",\n    \"**/*_skip_me.pyi\",\n]\n\n[tool.black]\n# in particular, extend-exclude and exclude will not work\nforce-exclude='''\n^(\n    .*_skip_me\\.py(i)?\n)$\n'''\n"})})]})}function f(e={}){let{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},753348(e,t,n){n.d(t,{A:()=>s});let s={tabItem:"tabItem_mHvh"}},618264(e,t,n){n.d(t,{A:()=>s});let s={tabList:"tabList_sFbf",tabItem:"tabItem_UVfV"}},637180(e,t,n){n.d(t,{A:()=>l});var s=n(886070);n(830758);var r=n(313526),i=n(753348);function l({children:e,hidden:t,className:n}){return(0,s.jsx)("div",{role:"tabpanel",className:(0,r.A)(i.A.tabItem,n),hidden:t,children:e})}},685008(e,t,n){n.d(t,{A:()=>u});var s=n(886070),r=n(830758),i=n(313526),l=n(911212),o=n(274875),a=n(106632),c=n(189223),d=n(618264);function h({className:e,block:t,selectedValue:n,selectValue:r,tabValues:l}){let a=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.a_)(),h=e=>{let t=e.currentTarget,s=l[a.indexOf(t)].value;s!==n&&(c(t),r(s))},p=e=>{let t=null;switch(e.key){case"Enter":h(e);break;case"ArrowRight":{let n=a.indexOf(e.currentTarget)+1;t=a[n]??a[0];break}case"ArrowLeft":{let n=a.indexOf(e.currentTarget)-1;t=a[n]??a[a.length-1]}}t?.focus()};return(0,s.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":t},e),children:l.map(({value:e,label:t,attributes:r})=>(0,s.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{a.push(e)},onKeyDown:p,onClick:h,...r,className:(0,i.A)("tabs__item",d.A.tabItem,r?.className,{"tabs__item--active":n===e}),children:t??e},e))})}function p({lazy:e,children:t,selectedValue:n}){let l=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){let e=l.find(e=>e.props.value===n);return e?(0,r.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,s.jsx)("div",{className:"margin-top--md",children:l.map((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==n}))})}function f(e){let t=(0,a.u)(e);return(0,s.jsxs)("div",{className:(0,i.A)(l.G.tabs.container,"tabs-container",d.A.tabList),children:[(0,s.jsx)(h,{...t,...e}),(0,s.jsx)(p,{...t,...e})]})}function u(e){let t=(0,c.A)();return(0,s.jsx)(f,{...e,children:(0,a.v)(e.children)},String(t))}},106632(e,t,n){n.d(t,{u:()=>h,v:()=>c});var s=n(830758),r=n(325557),i=n(363717),l=n(125740),o=n(574229),a=n(270367);function c(e){return s.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,s.isValidElement)(e)&&function(e){let{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function d({value:e,tabValues:t}){return t.some(t=>t.value===e)}function h(e){let t,{defaultValue:n,queryString:h=!1,groupId:p}=e,f=function(e){let{values:t,children:n}=e;return(0,s.useMemo)(()=>{let e=t??c(n).map(({props:{value:e,label:t,attributes:n,default:s}})=>({value:e,label:t,attributes:n,default:s})),s=(0,o.XI)(e,(e,t)=>e.value===t.value);if(s.length>0)throw Error(`Docusaurus error: Duplicate values "${s.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return e},[t,n])}(e),[u,x]=(0,s.useState)(()=>(function({defaultValue:e,tabValues:t}){if(0===t.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!d({value:e,tabValues:t}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}let n=t.find(e=>e.default)??t[0];if(!n)throw Error("Unexpected error: 0 tabValues");return n.value})({defaultValue:n,tabValues:f})),[m,g]=function({queryString:e=!1,groupId:t}){let n=(0,r.W6)(),i=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,l.aZ)(i),(0,s.useCallback)(e=>{if(!i)return;let t=new URLSearchParams(n.location.search);t.set(i,e),n.replace({...n.location,search:t.toString()})},[i,n])]}({queryString:h,groupId:p}),[y,j]=function({groupId:e}){let t=e?`docusaurus.tab.${e}`:null,[n,r]=(0,a.Dv)(t);return[n,(0,s.useCallback)(e=>{t&&r.set(e)},[t,r])]}({groupId:p}),b=d({value:t=m??y,tabValues:f})?t:null;return(0,i.A)(()=>{b&&x(b)},[b]),{selectedValue:u,selectValue:(0,s.useCallback)(e=>{if(!d({value:e,tabValues:f}))throw Error(`Can't select invalid tab value=${e}`);x(e),g(e),j(e)},[g,j,f]),tabValues:f}}},848193(e,t,n){n.d(t,{R:()=>l,x:()=>o});var s=n(830758);let r={},i=s.createContext(r);function l(e){let t=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(i.Provider,{value:t},e.children)}},688102(e){e.exports=JSON.parse('{"id":"docs/python/overview/linters-and-formatters","title":"Linters, formatters and fixers","description":"How to activate and use the Python linters, formatters and fixers bundled with Pants.","source":"@site/versioned_docs/version-2.29/docs/python/overview/linters-and-formatters.mdx","sourceDirName":"docs/python/overview","slug":"/docs/python/overview/linters-and-formatters","permalink":"/2.29/docs/python/overview/linters-and-formatters","draft":false,"unlisted":false,"editUrl":"https://github.com/pantsbuild/pants/edit/main/docs/docs/python/overview/linters-and-formatters.mdx","tags":[],"version":"2.29","sidebarPosition":4,"frontMatter":{"title":"Linters, formatters and fixers","sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"Interpreter compatibility","permalink":"/2.29/docs/python/overview/interpreter-compatibility"},"next":{"title":"PEX","permalink":"/2.29/docs/python/overview/pex"}}')}}]);