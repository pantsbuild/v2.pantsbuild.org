"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["465179"],{833983(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var o=t(843584),r=t(886070),s=t(848193);let i={title:"Setting up an IDE",sidebar_position:10},a,d={},l=[{value:"First-party sources",id:"first-party-sources",level:2},{value:"Third-party dependencies (Python)",id:"third-party-dependencies-python",level:2},{value:"Generated code",id:"generated-code",level:2},{value:"Remote debugging",id:"remote-debugging",level:2},{value:"IDE integrations",id:"ide-integrations",level:2}];function c(e){let n={a:"a",code:"code",h2:"h2",hr:"hr",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:"If you use a code-aware editor or IDE, such as PyCharm or VSCode, you may want to set it up to understand your code layout and dependencies. This will allow it to perform code navigation, auto-completion and other features that rely on code comprehension."}),"\n",(0,r.jsx)(n.h2,{id:"first-party-sources",children:"First-party sources"}),"\n",(0,r.jsxs)(n.p,{children:["To get your editor to understand the repo's first-party sources, you will probably need to tell it about the repo's ",(0,r.jsx)(n.a,{href:"/2.11/docs/using-pants/key-concepts/source-roots",children:"source roots"}),". You can list those with:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"$ ./pants roots\n"})}),"\n",(0,r.jsx)(n.p,{children:"and then apply the corresponding IDE concept."}),"\n",(0,r.jsxs)(n.p,{children:['For example, in PyCharm you would mark each source root as a "Sources" folder. See ',(0,r.jsx)(n.a,{href:"https://www.jetbrains.com/help/pycharm/configuring-project-structure.html",children:"Configuring Project Structure"})," to learn more."]}),"\n",(0,r.jsxs)(n.p,{children:["In VSCode, the Python extension will look for a file named ",(0,r.jsx)(n.code,{children:".env"})," in the current workspace folder. If the file is found, then it will be loaded and evaluated. For Python, this file can be used to set the ",(0,r.jsx)(n.code,{children:"PYTHONPATH"})," variable. Having this file makes it possible to jump to definitions in the source code across multiple projects. It also makes cross-project refactoring possible."]}),"\n",(0,r.jsxs)(n.p,{children:["For Python, to generate the ",(0,r.jsx)(n.code,{children:".env"})," file containing all the source roots, you can use something like this:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"$ ROOTS=$(./pants roots --roots-sep=' ')\n$ python3 -c \"print('PYTHONPATH=\\\"./' + ':./'.join(\\\"${ROOTS}\\\".split()) + ':\\$PYTHONPATH\\\"')\" > .env\n"})}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"https://code.visualstudio.com/docs/python/environments#_use-of-the-pythonpath-variable",children:"Use of the PYTHONPATH variable"})," to learn more about using the ",(0,r.jsx)(n.code,{children:"PYTHONPATH"})," variable in VSCode."]}),"\n",(0,r.jsx)(n.h2,{id:"third-party-dependencies-python",children:"Third-party dependencies (Python)"}),"\n",(0,r.jsx)(n.p,{children:"To get your editor to understand the repo's third-party dependencies, you will probably want to point it at a virtualenv containing those dependencies."}),"\n",(0,r.jsxs)(n.p,{children:["You can use the ",(0,r.jsx)(n.code,{children:"export"})," goal to create a suitable virtualenv."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u276F ./pants export ::\nWrote virtualenv for the resolve 'python-default' (using CPython==3.9.*) to dist/export/python/virtualenvs/python-default\n"})}),"\n",(0,r.jsxs)(n.p,{children:["If you are using the ",(0,r.jsx)(n.a,{href:"/2.11/docs/python/overview/third-party-dependencies",children:'"resolves" feature for Python lockfiles'}),"\u2014which we strongly recommend\u2014Pants will write the virtualenv to ",(0,r.jsx)(n.code,{children:"dist/export/python/virtualenvs/<resolve-name>"}),". If you have multiple resolves, this means that Pants will create one virtualenv per resolve. You can then point your IDE to whichever resolve you want to load at the time."]}),"\n",(0,r.jsx)(n.h2,{id:"generated-code",children:"Generated code"}),"\n",(0,r.jsxs)(n.p,{children:["If you're using ",(0,r.jsx)(n.a,{href:"/2.11/reference/targets/protobuf_source",children:"Protobuf and gRPC"}),", you may want your editor to be able to index and navigate the generated source code."]}),"\n",(0,r.jsxs)(n.p,{children:["Normally Pants treats generated code as an internal byproduct, and doesn't expose it. But you can run the ",(0,r.jsx)(n.code,{children:"export-codegen"})," goal to generate code to a well-known output location for consumption:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"$ ./pants export-codegen ::\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The generated code will be written to ",(0,r.jsx)(n.code,{children:"dist/codegen"}),", and you can now add them as sources in the IDE. For example, in PyCharm you would mark ",(0,r.jsx)(n.code,{children:"dist/codegen"}),' as a "Sources" folder.']}),"\n",(0,r.jsx)(n.p,{children:"Warning: you will have to manually rerun this goal when changes are made."}),"\n",(0,r.jsx)(n.h2,{id:"remote-debugging",children:"Remote debugging"}),"\n",(0,r.jsx)(n.p,{children:"You can use PyCharm to debug code running under Pants."}),"\n",(0,r.jsxs)(n.p,{children:["See the following links for instructions on how to do so under the ",(0,r.jsx)(n.a,{href:"/2.11/docs/python/goals/test",children:"test goal"})," and under the ",(0,r.jsx)(n.a,{href:"/2.11/docs/python/goals/run",children:"run goal"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"ide-integrations",children:"IDE integrations"}),"\n",(0,r.jsxs)(n.p,{children:["We have not yet developed tight IDE integrations, such as a PyCharm plugin or a VSCode extension, that would allow the IDE to run Pants on your behalf. If you're interested in developing this functionality for your favorite IDE, ",(0,r.jsx)(n.a,{href:"/community/members",children:"let us know"}),"!"]})]})}function h(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},848193(e,n,t){t.d(n,{R:()=>i,x:()=>a});var o=t(830758);let r={},s=o.createContext(r);function i(e){let n=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(s.Provider,{value:n},e.children)}},843584(e){e.exports=JSON.parse('{"id":"docs/using-pants/setting-up-an-ide","title":"Setting up an IDE","description":"---","source":"@site/versioned_docs/version-2.11/docs/using-pants/setting-up-an-ide.mdx","sourceDirName":"docs/using-pants","slug":"/docs/using-pants/setting-up-an-ide","permalink":"/2.11/docs/using-pants/setting-up-an-ide","draft":false,"unlisted":false,"editUrl":"https://github.com/pantsbuild/pants/edit/main/docs/docs/using-pants/setting-up-an-ide.mdx","tags":[],"version":"2.11","sidebarPosition":10,"frontMatter":{"title":"Setting up an IDE","sidebar_position":10},"sidebar":"docsSidebar","previous":{"title":"Remote execution","permalink":"/2.11/docs/using-pants/remote-caching-and-execution/remote-execution"},"next":{"title":"Python overview","permalink":"/2.11/docs/python/overview/"}}')}}]);