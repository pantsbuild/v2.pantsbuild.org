"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["653904"],{739532(e,t,s){s.r(t),s.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>d,metadata:()=>r,toc:()=>p});var r=s(792969),i=s(886070),n=s(848193),o=s(554707),l=s(375002);let d={title:"pytest",description:"The pytest Python test framework (https://docs.pytest.org/).\n"},c,a={},p=[{value:"Basic options",id:"basic-options",level:2},{value:"<code>args</code>",id:"args",level:3},{value:"<code>timeouts</code>",id:"timeouts",level:3},{value:"Advanced options",id:"advanced-options",level:2},{value:"<code>config_discovery</code>",id:"config_discovery",level:3},{value:"<code>execution_slot_var</code>",id:"execution_slot_var",level:3},{value:"<code>junit_family</code>",id:"junit_family",level:3},{value:"<code>junit_xml_dir</code>",id:"junit_xml_dir",level:3},{value:"<code>pytest_plugins</code>",id:"pytest_plugins",level:3},{value:"<code>timeout_default</code>",id:"timeout_default",level:3},{value:"<code>timeout_maximum</code>",id:"timeout_maximum",level:3},{value:"<code>version</code>",id:"version",level:3},{value:"Deprecated options",id:"deprecated-options",level:2},{value:"Related subsystems",id:"related-subsystems",level:2}];function h(e){let t={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",p:"p",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.hr,{}),"\n",(0,i.jsxs)(t.p,{children:["The pytest Python test framework (",(0,i.jsx)(t.a,{href:"https://docs.pytest.org/",children:"https://docs.pytest.org/"}),")."]}),"\n",(0,i.jsxs)(t.p,{children:["Backend: ",(0,i.jsx)("span",{className:"color--primary",children:"``"})]}),"\n",(0,i.jsxs)(t.p,{children:["Config section: ",(0,i.jsx)("span",{className:"color--primary",children:(0,i.jsx)(t.code,{children:"[pytest]"})})]}),"\n",(0,i.jsxs)("span",{className:l.A.options,children:[(0,i.jsx)(t.h2,{id:"basic-options",children:"Basic options"}),(0,i.jsx)(t.h3,{id:"args",children:(0,i.jsx)(t.code,{children:"args"})}),(0,i.jsx)(o.A,{cli_repr:'--pytest-args="[<shell_str>, <shell_str>, ...]", ... -- [<shell_str> [<shell_str> [...]]]',env_repr:"PANTS_PYTEST_ARGS",toml_repr:`[pytest]
args = [
  <shell_str>,
  <shell_str>,
  ...,
]`,default_repr:"[]",children:(0,i.jsxs)(t.p,{children:["Arguments to pass directly to Pytest, e.g. ",(0,i.jsx)(t.code,{children:'--pytest-args="-k test_foo --quiet"'})]})}),(0,i.jsx)(t.h3,{id:"timeouts",children:(0,i.jsx)(t.code,{children:"timeouts"})}),(0,i.jsx)(o.A,{cli_repr:"--[no-]pytest-timeouts",env_repr:"PANTS_PYTEST_TIMEOUTS",toml_repr:`[pytest]
timeouts = <bool>`,default_repr:"True",children:(0,i.jsx)(t.p,{children:"Enable test target timeouts. If timeouts are enabled then test targets with a timeout= parameter set on their target will time out after the given number of seconds if not completed. If no timeout is set, then either the default timeout is used or no timeout is configured."})}),(0,i.jsx)(t.h2,{id:"advanced-options",children:"Advanced options"}),(0,i.jsx)(t.h3,{id:"config_discovery",children:(0,i.jsx)(t.code,{children:"config_discovery"})}),(0,i.jsx)(o.A,{cli_repr:"--[no-]pytest-config-discovery",env_repr:"PANTS_PYTEST_CONFIG_DISCOVERY",toml_repr:`[pytest]
config_discovery = <bool>`,default_repr:"True",children:(0,i.jsxs)(t.p,{children:["If true, Pants will include all relevant Pytest config files (e.g. ",(0,i.jsx)(t.code,{children:"pytest.ini"}),") during runs. See ",(0,i.jsx)(t.a,{href:"https://docs.pytest.org/en/stable/customize.html#finding-the-rootdir",children:"https://docs.pytest.org/en/stable/customize.html#finding-the-rootdir"})," for where config files should be located for Pytest to discover them."]})}),(0,i.jsx)(t.h3,{id:"execution_slot_var",children:(0,i.jsx)(t.code,{children:"execution_slot_var"})}),(0,i.jsx)(o.A,{cli_repr:"--pytest-execution-slot-var=<str>",env_repr:"PANTS_PYTEST_EXECUTION_SLOT_VAR",toml_repr:`[pytest]
execution_slot_var = <str>`,default_repr:"None",children:(0,i.jsx)(t.p,{children:"If a non-empty string, the process execution slot id (an integer) will be exposed to tests under this environment variable name."})}),(0,i.jsx)(t.h3,{id:"junit_family",children:(0,i.jsx)(t.code,{children:"junit_family"})}),(0,i.jsx)(o.A,{cli_repr:"--pytest-junit-family=<str>",env_repr:"PANTS_PYTEST_JUNIT_FAMILY",toml_repr:`[pytest]
junit_family = <str>`,default_repr:"xunit2",children:(0,i.jsxs)(t.p,{children:["The format of the generated XML file. See ",(0,i.jsx)(t.a,{href:"https://docs.pytest.org/en/latest/reference.html#confval-junit_family",children:"https://docs.pytest.org/en/latest/reference.html#confval-junit_family"}),"."]})}),(0,i.jsx)(t.h3,{id:"junit_xml_dir",children:(0,i.jsx)(t.code,{children:"junit_xml_dir"})}),(0,i.jsx)(o.A,{cli_repr:"--pytest-junit-xml-dir=<DIR>",env_repr:"PANTS_PYTEST_JUNIT_XML_DIR",toml_repr:`[pytest]
junit_xml_dir = <DIR>`,default_repr:"None",children:(0,i.jsx)(t.p,{children:"Specifying a directory causes Junit XML result files to be emitted under that dir for each test run."})}),(0,i.jsx)(t.h3,{id:"pytest_plugins",children:(0,i.jsx)(t.code,{children:"pytest_plugins"})}),(0,i.jsx)(o.A,{cli_repr:"--pytest-pytest-plugins=\"['<str>', '<str>', ...]\"",env_repr:"PANTS_PYTEST_PYTEST_PLUGINS",toml_repr:`[pytest]
pytest_plugins = [
  '<str>',
  '<str>',
  ...,
]`,default_repr:`[
  "pytest-cov>=2.10.1,<2.12"
]`,children:(0,i.jsx)(t.p,{children:"Requirement strings for any plugins or additional requirements you'd like to use."})}),(0,i.jsx)(t.h3,{id:"timeout_default",children:(0,i.jsx)(t.code,{children:"timeout_default"})}),(0,i.jsx)(o.A,{cli_repr:"--pytest-timeout-default=<int>",env_repr:"PANTS_PYTEST_TIMEOUT_DEFAULT",toml_repr:`[pytest]
timeout_default = <int>`,default_repr:"None",children:(0,i.jsxs)(t.p,{children:["The default timeout (in seconds) for a test target if the ",(0,i.jsx)(t.code,{children:"timeout"})," field is not set on the target."]})}),(0,i.jsx)(t.h3,{id:"timeout_maximum",children:(0,i.jsx)(t.code,{children:"timeout_maximum"})}),(0,i.jsx)(o.A,{cli_repr:"--pytest-timeout-maximum=<int>",env_repr:"PANTS_PYTEST_TIMEOUT_MAXIMUM",toml_repr:`[pytest]
timeout_maximum = <int>`,default_repr:"None",children:(0,i.jsxs)(t.p,{children:["The maximum timeout (in seconds) that may be used on a ",(0,i.jsx)(t.code,{children:"python_tests"})," target."]})}),(0,i.jsx)(t.h3,{id:"version",children:(0,i.jsx)(t.code,{children:"version"})}),(0,i.jsx)(o.A,{cli_repr:"--pytest-version=<str>",env_repr:"PANTS_PYTEST_VERSION",toml_repr:`[pytest]
version = <str>`,default_repr:"pytest>=6.0.1,<6.3",children:(0,i.jsx)(t.p,{children:"Requirement string for Pytest."})}),(0,i.jsx)(t.h2,{id:"deprecated-options",children:"Deprecated options"}),(0,i.jsx)(t.p,{children:"None"}),(0,i.jsx)(t.h2,{id:"related-subsystems",children:"Related subsystems"}),(0,i.jsx)(t.p,{children:"None"})]})]})}function u(e={}){let{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},375002(e,t,s){s.d(t,{A:()=>r});let r={options:"options_nrbo"}},554707(e,t,s){s.d(t,{A:()=>o});var r=s(886070),i=s(384122),n=s(580830);function o({children:e,cli_repr:t,env_repr:s,toml_repr:o,one_of:l,default_repr:d,target_field_name:c,removal_version:a,removal_hint:p}){return(0,r.jsxs)("div",{className:"margin-bottom--lg",children:[(0,r.jsx)("code",{style:{color:"var(--pants-reference-option-repr)"},children:t}),(0,r.jsx)("br",{}),(0,r.jsx)("code",{style:{color:"var(--pants-reference-option-repr)"},children:s}),(0,r.jsx)("br",{}),(0,r.jsx)(i.A,{language:"toml",title:"pants.toml",children:o}),(0,r.jsxs)("div",{style:{paddingLeft:"2em"},children:[(0,r.jsxs)("span",{children:[l&&(0,r.jsxs)("span",{children:["one of:"," ",(0,r.jsx)("code",{style:{color:"var(--ifm-color-success)"},children:l}),(0,r.jsx)("br",{})]}),"default:"," ",(0,r.jsx)("span",{style:{color:"var(--ifm-color-success)"},children:(d||"").includes("\n")?(0,r.jsx)("pre",{className:"padding--sm",children:d}):(0,r.jsx)("code",{children:d})})]}),(0,r.jsx)("br",{}),a&&(0,r.jsxs)("span",{style:{color:"var(--ifm-color-danger-darkest)"},children:["Deprecated, will be removed in version: ",a,".",(0,r.jsx)("br",{}),p,(0,r.jsx)("br",{})]}),e,c&&(0,r.jsxs)("span",{children:["Can be overriden by field",(0,r.jsx)("code",{children:c})," on"," ",(0,r.jsx)(n.A,{to:"../targets/local_environment",children:(0,r.jsx)("code",{children:"local_environment"})}),","," ",(0,r.jsx)(n.A,{to:"../targets/docker_environment",children:(0,r.jsx)("code",{children:"docker_environment"})}),", or"," ",(0,r.jsx)(n.A,{to:"../targets/remote_environment",children:(0,r.jsx)("code",{children:"remote_environment"})}),"targets."]})]})]})}},792969(e){e.exports=JSON.parse('{"id":"reference/subsystems/pytest","title":"pytest","description":"The pytest Python test framework (https://docs.pytest.org/).\\n","source":"@site/versioned_docs/version-2.6/reference/subsystems/pytest.mdx","sourceDirName":"reference/subsystems","slug":"/reference/subsystems/pytest","permalink":"/2.6/reference/subsystems/pytest","draft":false,"unlisted":false,"tags":[],"version":"2.6","frontMatter":{"title":"pytest","description":"The pytest Python test framework (https://docs.pytest.org/).\\n"},"sidebar":"referenceSidebar","previous":{"title":"pylint","permalink":"/2.6/reference/subsystems/pylint"},"next":{"title":"python-infer","permalink":"/2.6/reference/subsystems/python-infer"}}')}}]);