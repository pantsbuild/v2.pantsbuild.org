"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["721689"],{28704(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var s=t(5642),a=t(886070),o=t(848193);let r={title:"Goals",sidebar_position:0},i,c={},l=[{value:"Running goals",id:"running-goals",level:2},{value:"Goal arguments",id:"goal-arguments",level:2},{value:"Goal options",id:"goal-options",level:3}];function d(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"The commands Pants runs."}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsxs)(n.p,{children:["Pants commands are known as ",(0,a.jsx)(n.em,{children:"goals"}),", such as ",(0,a.jsx)(n.code,{children:"test"})," and ",(0,a.jsx)(n.code,{children:"lint"}),"."]}),"\n",(0,a.jsx)(n.p,{children:"To see the current list of goals, run:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"\u276F pants help goals\n"})}),"\n",(0,a.jsxs)(n.p,{children:["You'll see more goals activated as you activate more ",(0,a.jsx)(n.a,{href:"/2.20/docs/using-pants/key-concepts/backends",children:"backends"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"running-goals",children:"Running goals"}),"\n",(0,a.jsx)(n.p,{children:"For example:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"\u276F pants count-loc project/app_test.py\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nLanguage                 Files     Lines   Blanks  Comments     Code Complexity\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nPython                       1       374       16        19      339          6\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nTotal                        1       374       16        19      339          6\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n"})}),"\n",(0,a.jsx)(n.p,{children:"You can also run multiple goals in a single run of Pants, in which case they will run sequentially:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Format all code, and then test it:\n\u276F pants fmt test ::\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Finally, Pants supports running goals in a ",(0,a.jsx)(n.code,{children:"--loop"}),". In this mode, all goals specified will run sequentially, and then Pants will wait until a relevant file has changed to try running them again."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Re-run linters and testing continuously as files or their dependencies change:\n\u276F pants --loop lint test project/app_test.py\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Use ",(0,a.jsx)(n.code,{children:"Ctrl+C"})," to exit the ",(0,a.jsx)(n.code,{children:"--loop"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"goal-arguments",children:"Goal arguments"}),"\n",(0,a.jsx)(n.p,{children:"Most goals require arguments to know what to work on."}),"\n",(0,a.jsx)(n.p,{children:"You can use several argument types:"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Argument type"}),(0,a.jsx)(n.th,{children:"Semantics"}),(0,a.jsx)(n.th,{children:"Example"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"File path"}),(0,a.jsx)(n.td,{children:"Match the file"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"pants test project/tests.py"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Directory path"}),(0,a.jsx)(n.td,{children:"Match everything in the directory"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"pants test project/utils"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsxs)(n.td,{children:[(0,a.jsx)(n.code,{children:"::"})," globs"]}),(0,a.jsx)(n.td,{children:"Match everything in the directory and below"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"pants test project::"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.a,{href:"/2.20/docs/using-pants/key-concepts/targets-and-build-files",children:"Target addresses"})}),(0,a.jsx)(n.td,{children:"Match the target"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"pants package project:tests"})})]})]})]}),"\n",(0,a.jsxs)(n.p,{children:["You can combine argument types, e.g. ",(0,a.jsx)(n.code,{children:"pants fmt src/go:: src/py/app.py"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["You can address targets from the root of the repository by using plain ",(0,a.jsx)(n.code,{children:"::"})," and ",(0,a.jsx)(n.code,{children:":"}),". For example, ",(0,a.jsx)(n.code,{children:"pants package ::"})," would produce artifacts for all packages declared in the whole repository and ",(0,a.jsx)(n.code,{children:"pants package :"})," would produce artifacts only for those packages that are declared in the root directory of the repository."]}),"\n",(0,a.jsxs)(n.p,{children:["To ignore something, prefix the argument with ",(0,a.jsx)(n.code,{children:"-"}),". For example, ",(0,a.jsx)(n.code,{children:"pants test :: -project/integration_tests"})," will run all your tests except for those in the directory ",(0,a.jsx)(n.code,{children:"project/integration_tests"})," and ",(0,a.jsx)(n.code,{children:"pants package project:: -project:"})," will package all targets in the subdirectories of the ",(0,a.jsx)(n.code,{children:"project"})," directory, recursively, except for those declared directly under the ",(0,a.jsx)(n.code,{children:"project"})," directory."]}),"\n",(0,a.jsx)(n.admonition,{title:"Tip: advanced target selection, such as running over changed files",type:"note",children:(0,a.jsxs)(n.p,{children:["See ",(0,a.jsx)(n.a,{href:"/2.20/docs/using-pants/advanced-target-selection",children:"Advanced target selection"})," for alternative techniques to specify which files/targets to run on."]})}),"\n",(0,a.jsx)(n.h3,{id:"goal-options",children:"Goal options"}),"\n",(0,a.jsxs)(n.p,{children:["Many goals also have ",(0,a.jsx)(n.a,{href:"/2.20/docs/using-pants/key-concepts/options",children:"options"})," to change how they behave. Every option in Pants can be set via an environment variable, config file, and the command line."]}),"\n",(0,a.jsxs)(n.p,{children:["To see if a goal has any options, run ",(0,a.jsx)(n.code,{children:"pants help $goal"})," or ",(0,a.jsx)(n.code,{children:"pants help-advanced $goal"}),". See ",(0,a.jsx)(n.a,{href:"/community/getting-help",children:"Command Line Help"})," for more information."]}),"\n",(0,a.jsx)(n.p,{children:"For example:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"\u276F pants help test\n17:20:14.24 [INFO] Remote cache/execution options updated: reinitializing scheduler...\n17:20:15.36 [INFO] Scheduler initialized.\n\n`test` goal options\n-------------------\n\nRun tests.\n\nConfig section: [test]\n\n  --[no-]test-debug\n  PANTS_TEST_DEBUG\n  debug\n      default: False\n      current value: False\n      Run tests sequentially in an interactive process. This is necessary, for example, when you\n      add breakpoints to your code.\n\n...\n"})}),"\n",(0,a.jsx)(n.p,{children:"You can then use the option by prefixing it with the goal name:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"pants --test-debug test project/app_test.py\n"})}),"\n",(0,a.jsx)(n.p,{children:"You can also put the option after the file/target arguments:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"pants test project/app_test.py --test-debug\n"})}),"\n",(0,a.jsx)(n.p,{children:"As a shorthand, if you put the option after the goal and before the file/target arguments, you can leave off the goal name in the flag:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"pants test --debug project/app_test.py\n"})})]})}function h(e={}){let{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},848193(e,n,t){t.d(n,{R:()=>r,x:()=>i});var s=t(830758);let a={},o=s.createContext(a);function r(e){let n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(o.Provider,{value:n},e.children)}},5642(e){e.exports=JSON.parse('{"id":"docs/using-pants/key-concepts/goals","title":"Goals","description":"The commands Pants runs.","source":"@site/versioned_docs/version-2.20/docs/using-pants/key-concepts/goals.mdx","sourceDirName":"docs/using-pants/key-concepts","slug":"/docs/using-pants/key-concepts/goals","permalink":"/2.20/docs/using-pants/key-concepts/goals","draft":false,"unlisted":false,"editUrl":"https://github.com/pantsbuild/pants/edit/main/docs/docs/using-pants/key-concepts/goals.mdx","tags":[],"version":"2.20","sidebarPosition":0,"frontMatter":{"title":"Goals","sidebar_position":0},"sidebar":"docsSidebar","previous":{"title":"Key concepts","permalink":"/2.20/docs/using-pants/key-concepts/"},"next":{"title":"Targets and BUILD files","permalink":"/2.20/docs/using-pants/key-concepts/targets-and-build-files"}}')}}]);