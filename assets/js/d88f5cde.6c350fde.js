"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["823413"],{331471(e,n,t){t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>f,frontMatter:()=>d,metadata:()=>s,toc:()=>h});var s=t(253871),i=t(886070),r=t(848193),o=t(989898),l=t(375002);let d={title:"nfpm_content_file",description:"A file (of any type) that should be copied into an nFPM package.\n"},c,a={},h=[{value:"<code>dst</code>",id:"dst",level:2},{value:"<code>content_type</code>",id:"content_type",level:2},{value:"<code>dependencies</code>",id:"dependencies",level:2},{value:"<code>description</code>",id:"description",level:2},{value:"<code>file_group</code>",id:"file_group",level:2},{value:"<code>file_mode</code>",id:"file_mode",level:2},{value:"<code>file_mtime</code>",id:"file_mtime",level:2},{value:"<code>file_owner</code>",id:"file_owner",level:2},{value:"<code>source</code>",id:"source",level:2},{value:"<code>src</code>",id:"src",level:2},{value:"<code>tags</code>",id:"tags",level:2}];function p(e){let n={a:"a",code:"code",h2:"h2",hr:"hr",li:"li",p:"p",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"A file (of any type) that should be copied into an nFPM package."}),"\n",(0,i.jsx)(n.p,{children:"The file comes from either the 'source' field or from any of the targets listed in the 'dependencies' field. The file may be a workspace file, a generated file, or even a package."}),"\n",(0,i.jsx)(n.p,{children:"The '<class 'pants.backend.nfpm.fields.contents.NfpmContentSrcField'>' field tells nFPM where the file is in the sandbox. The '<class 'pants.backend.nfpm.fields.contents.NfpmContentDstField'>' field tells nFPM where the file should be installed by the nFPM-generated package."}),"\n",(0,i.jsxs)(n.p,{children:["Backend: ",(0,i.jsx)("span",{className:"color--primary",children:(0,i.jsx)(n.code,{children:"pants.backend.experimental.nfpm"})})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)("span",{className:l.A.options,children:[(0,i.jsx)(n.h2,{id:"dst",children:(0,i.jsx)(n.code,{children:"dst"})}),(0,i.jsxs)(o.A,{type_repr:"str",children:[(0,i.jsx)(n.p,{children:"The absolute install path for a packaged file."}),(0,i.jsx)(n.p,{children:"When the package gets installed, the file from 'src' will be installed using the absolute path in 'dst'."}),(0,i.jsx)(n.p,{children:"This path is an absolute path on the file system where the package will be installed."})]}),(0,i.jsx)(n.h2,{id:"content_type",children:(0,i.jsx)(n.code,{children:"content_type"})}),(0,i.jsxs)(o.A,{type_repr:"'' | 'config' | 'config|noreplace' | 'doc' | 'license' | 'readme' | None",default_repr:"''",children:[(0,i.jsx)(n.p,{children:"The nFPM content type for the packaged file."}),(0,i.jsx)(n.p,{children:"The content type can be either"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"'': a normal file (the default), or"}),"\n",(0,i.jsx)(n.li,{children:"'config': a config file."}),"\n"]}),(0,i.jsx)(n.p,{children:"For RPM packaged files, the content type can also be one of:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"'config|noreplace',"}),"\n",(0,i.jsx)(n.li,{children:"'doc',"}),"\n",(0,i.jsx)(n.li,{children:"'license', and"}),"\n",(0,i.jsx)(n.li,{children:"'readme'."}),"\n"]}),(0,i.jsxs)(n.p,{children:["The 'config|noreplace' type is used for RPM's ",(0,i.jsx)(n.code,{children:"%config(noreplace)"})," option. For packagers other than RPM, using 'config|noreplace' is the same as 'config' and the remaining RPM-specific types are the same as '', a normal file."]}),(0,i.jsx)(n.p,{children:"This field only supports file-specific nFPM content types. Please use these targets for non-file content:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["For 'dir' content, use targets ",(0,i.jsx)(n.code,{children:"nfpm_content_dir"})," and ",(0,i.jsx)(n.code,{children:"nfpm_content_dirs"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["For 'symlink' content, use targets ",(0,i.jsx)(n.code,{children:"nfpm_content_symlink"})," and ",(0,i.jsx)(n.code,{children:"nfpm_content_symlinks"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["For RPM 'ghost' content, use field 'ghost_contents' on target ",(0,i.jsx)(n.code,{children:"nfpm_rpm_package"}),"."]}),"\n"]}),(0,i.jsx)(n.p,{children:"The nFPM 'tree' content type is not supported. Before passing the list of package contents to nFPM, pants expands target generators and any globs, so the 'tree' content type does not make sense."})]}),(0,i.jsx)(n.h2,{id:"dependencies",children:(0,i.jsx)(n.code,{children:"dependencies"})}),(0,i.jsxs)(o.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,i.jsxs)(n.p,{children:["Addresses to other targets that this target depends on, e.g. ",(0,i.jsx)(n.code,{children:"['helloworld/subdir:lib', 'helloworld/main.py:lib', '3rdparty:reqs#django']"}),"."]}),(0,i.jsxs)(n.p,{children:["This augments any dependencies inferred by Pants, such as by analyzing your imports. Use ",(0,i.jsx)(n.code,{children:"pants dependencies"})," or ",(0,i.jsx)(n.code,{children:"pants peek"})," on this target to get the final result."]}),(0,i.jsxs)(n.p,{children:["See ",(0,i.jsx)(n.a,{href:"https://www.pantsbuild.org/2.26/docs/using-pants/key-concepts/targets-and-build-files",children:"https://www.pantsbuild.org/2.26/docs/using-pants/key-concepts/targets-and-build-files"})," for more about how addresses are formed, including for generated targets. You can also run ",(0,i.jsx)(n.code,{children:"pants list ::"})," to find all addresses in your project, or ",(0,i.jsx)(n.code,{children:"pants list dir"})," to find all addresses defined in that directory."]}),(0,i.jsxs)(n.p,{children:["If the target is in the same BUILD file, you can leave off the BUILD file path, e.g. ",(0,i.jsx)(n.code,{children:":tgt"})," instead of ",(0,i.jsx)(n.code,{children:"helloworld/subdir:tgt"}),". For generated first-party addresses, use ",(0,i.jsx)(n.code,{children:"./"})," for the file path, e.g. ",(0,i.jsx)(n.code,{children:"./main.py:tgt"}),"; for all other generated targets, use ",(0,i.jsx)(n.code,{children:":tgt#generated_name"}),"."]}),(0,i.jsxs)(n.p,{children:["You may exclude dependencies by prefixing with ",(0,i.jsx)(n.code,{children:"!"}),", e.g. ",(0,i.jsx)(n.code,{children:"['!helloworld/subdir:lib', '!./sibling.txt']"}),". Ignores are intended for false positives with dependency inference; otherwise, simply leave off the dependency from the BUILD file."]})]}),(0,i.jsx)(n.h2,{id:"description",children:(0,i.jsx)(n.code,{children:"description"})}),(0,i.jsxs)(o.A,{type_repr:"str | None",default_repr:"None",children:[(0,i.jsx)(n.p,{children:"A human-readable description of the target."}),(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"pants list --documented ::"})," to see all targets with descriptions."]})]}),(0,i.jsx)(n.h2,{id:"file_group",children:(0,i.jsx)(n.code,{children:"file_group"})}),(0,i.jsxs)(o.A,{type_repr:"str | None",default_repr:"'root'",children:[(0,i.jsx)(n.p,{children:"Name of the group that should own this packaged file or directory."}),(0,i.jsxs)(n.p,{children:["This is like the GROUP arg in chown: ",(0,i.jsx)(n.a,{href:"https://www.mankier.com/1/chown",children:"https://www.mankier.com/1/chown"})]})]}),(0,i.jsx)(n.h2,{id:"file_mode",children:(0,i.jsx)(n.code,{children:"file_mode"})}),(0,i.jsxs)(o.A,{type_repr:"int | str | None",default_repr:"None",children:[(0,i.jsx)(n.p,{children:"A file mode as a numeric octal, an string octal, or a symbolic representation."}),(0,i.jsx)(n.p,{children:"NB: In most cases, you should set this field and not rely on the default value. Pants only tracks the executable bit for workspace files. So, this field defaults to 0o755 for executable files and 0o644 for files that are not executable."}),(0,i.jsxs)(n.p,{children:["You may specify the file mode as: an octal, an octal string, or a symbolic string. If you specify a numeric octal (not as a string), make sure to include python's octal prefix: ",(0,i.jsx)(n.code,{children:"0o"})," like in ",(0,i.jsx)(n.code,{children:"0o644"}),". If you specify the octal as a string, the ",(0,i.jsx)(n.code,{children:"Oo"})," prefix is optional (like ",(0,i.jsx)(n.code,{children:"644"}),'). If you specify a symbolic file mode string, you must provide 9 characters with "-" in place of any absent permissions (like ',(0,i.jsx)(n.code,{children:"'rw-r--r--'"}),")."]}),(0,i.jsx)(n.p,{children:"For example to specify world readable/executable and user writable, these are equivalent:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"0o755"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"'755'"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"'rwxr-xr-x'"})}),"\n"]}),(0,i.jsx)(n.p,{children:"Another example for a file with read/write permissions for only the user:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"0o600"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"'600'"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"'rw-------'"})}),"\n"]}),(0,i.jsx)(n.p,{children:"Another example for a file with the group sticky bit set:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"0o2660"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"'2660'"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"'rw-rwS---'"})}),"\n"]}),(0,i.jsxs)(n.p,{children:["WARNING: If you forget to include the ",(0,i.jsx)(n.code,{children:"0o"})," prefix on a numeric octal, then it will be interpreted as an integer which is probably not what you want. For example, ",(0,i.jsx)(n.code,{children:"755"})," (no quotes) will be processed as ",(0,i.jsx)(n.code,{children:"0o1363"})," (symbolically that would be '-wxrw--wt') which is probably not what you intended. Pants cannot detect errors like this, so be careful to either use a string or include the ",(0,i.jsx)(n.code,{children:"0o"})," octal prefix."]})]}),(0,i.jsx)(n.h2,{id:"file_mtime",children:(0,i.jsx)(n.code,{children:"file_mtime"})}),(0,i.jsxs)(o.A,{type_repr:"str | None",default_repr:"'1980-01-01T00:00:00Z'",children:[(0,i.jsx)(n.p,{children:"The file modification time as an RFC 3339 formatted string."}),(0,i.jsx)(n.p,{children:"For example: 2008-01-02T15:04:05Z"}),(0,i.jsxs)(n.p,{children:["The format is defined in RFC 3339: ",(0,i.jsx)(n.a,{href:"https://rfc-editor.org/rfc/rfc3339.html",children:"https://rfc-editor.org/rfc/rfc3339.html"})]}),(0,i.jsx)(n.p,{children:"Though nFPM supports pulling mtime from the src file or directory in most cases, the pants nfpm backend does not support this. Reading the mtime from the filesystem is problematic because Pants does not track the mtime of files and does not propagate any file mtime into the sandboxes. Reasons for this include: git does not track mtime, timestamps like mtime cause many issues for reproducible packaging builds, and reproducible builds are required for pants to provide its fine-grained caches."}),(0,i.jsxs)(n.p,{children:["The default value is '1980-01-01T00:00:00Z'. You may also override the default value by setting ",(0,i.jsx)(n.code,{children:"[nfpm].default_mtime"})," in ",(0,i.jsx)(n.code,{children:"pants.toml"}),", or by setting the ",(0,i.jsx)(n.code,{children:"SOURCE_DATE_EPOCH"})," environment variable."]}),(0,i.jsxs)(n.p,{children:["See also: ",(0,i.jsx)(n.a,{href:"https://reproducible-builds.org/docs/timestamps/",children:"https://reproducible-builds.org/docs/timestamps/"})]})]}),(0,i.jsx)(n.h2,{id:"file_owner",children:(0,i.jsx)(n.code,{children:"file_owner"})}),(0,i.jsxs)(o.A,{type_repr:"str | None",default_repr:"'root'",children:[(0,i.jsx)(n.p,{children:"Username that should own this packaged file or directory."}),(0,i.jsxs)(n.p,{children:["This is like the OWNER arg in chown: ",(0,i.jsx)(n.a,{href:"https://www.mankier.com/1/chown",children:"https://www.mankier.com/1/chown"})]})]}),(0,i.jsx)(n.h2,{id:"source",children:(0,i.jsx)(n.code,{children:"source"})}),(0,i.jsxs)(o.A,{type_repr:"str | None",default_repr:"None",children:[(0,i.jsx)(n.p,{children:"A file that should be copied into an nFPM package (optional)."}),(0,i.jsx)(n.p,{children:"Either specify a file with 'source', or use 'dependencies' to add a dependency on the target that owns the file."}),(0,i.jsx)(n.p,{children:"If both 'src' and 'source' are populated, then the file in 'source' will be placed in the sandbox at the 'src' path (similar to how the 'relocated_files' target works)."})]}),(0,i.jsx)(n.h2,{id:"src",children:(0,i.jsx)(n.code,{children:"src"})}),(0,i.jsxs)(o.A,{type_repr:"str | None",default_repr:"None",children:[(0,i.jsx)(n.p,{children:"A file path that should be included in the package."}),(0,i.jsx)(n.p,{children:"When the package gets installed, the file from 'src' will be installed using the absolute path in 'dst'."}),(0,i.jsx)(n.p,{children:"This path should be relative to the sandbox. The path should point to a generated file or a real file sourced from the workspace."}),(0,i.jsx)(n.p,{children:"Either 'src' or 'source' is required. If the 'source' field is provided, then the 'src' defaults to the file referenced in the 'source' field."}),(0,i.jsx)(n.p,{children:"If both 'src' and 'source' are populated, then the file in 'source' will be placed in the sandbox at the 'src' path (similar to how the 'relocated_files' target works)."})]}),(0,i.jsx)(n.h2,{id:"tags",children:(0,i.jsx)(n.code,{children:"tags"})}),(0,i.jsxs)(o.A,{type_repr:"Iterable[str] | None",default_repr:"None",children:[(0,i.jsx)(n.p,{children:"Arbitrary strings to describe a target."}),(0,i.jsxs)(n.p,{children:["For example, you may tag some test targets with 'integration_test' so that you could run ",(0,i.jsx)(n.code,{children:"pants --tag='integration_test' test ::"})," to only run on targets with that tag."]})]})]})]})}function f(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},375002(e,n,t){t.d(n,{A:()=>s});let s={options:"options_nrbo"}},989898(e,n,t){t.d(n,{A:()=>i});var s=t(886070);function i({children:e,type_repr:n,default_repr:t,backend:i}){return(0,s.jsxs)("div",{className:"margin-bottom--lg",children:[(0,s.jsx)("code",{style:{color:"var(--pants-reference-option-repr)"},children:n}),(0,s.jsx)("br",{}),(0,s.jsxs)("div",{style:{paddingLeft:"2em"},children:[t&&(0,s.jsxs)("span",{children:["default:"," ",(0,s.jsx)("code",{style:{color:"var(--ifm-color-success)"},children:t})]}),!t&&(0,s.jsx)("span",{style:{color:"var(--ifm-color-success)"},children:"required"}),i&&(0,s.jsxs)("div",{children:["backend:"," ",(0,s.jsx)("code",{style:{color:"var(--ifm-color-success)"},children:i})]}),e]})]})}},848193(e,n,t){t.d(n,{R:()=>o,x:()=>l});var s=t(830758);let i={},r=s.createContext(i);function o(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:n},e.children)}},253871(e){e.exports=JSON.parse('{"id":"reference/targets/nfpm_content_file","title":"nfpm_content_file","description":"A file (of any type) that should be copied into an nFPM package.\\n","source":"@site/versioned_docs/version-2.26/reference/targets/nfpm_content_file.mdx","sourceDirName":"reference/targets","slug":"/reference/targets/nfpm_content_file","permalink":"/2.26/reference/targets/nfpm_content_file","draft":false,"unlisted":false,"tags":[],"version":"2.26","frontMatter":{"title":"nfpm_content_file","description":"A file (of any type) that should be copied into an nFPM package.\\n"},"sidebar":"referenceSidebar","previous":{"title":"nfpm_content_dirs","permalink":"/2.26/reference/targets/nfpm_content_dirs"},"next":{"title":"nfpm_content_files","permalink":"/2.26/reference/targets/nfpm_content_files"}}')}}]);