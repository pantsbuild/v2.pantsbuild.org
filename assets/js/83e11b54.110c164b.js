"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["507389"],{663858(e,t,n){n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>l,frontMatter:()=>s,metadata:()=>i,toc:()=>h});var i=n(259314),o=n(886070),r=n(848193);let s={title:"Remote caching",sidebar_position:0},a,c={},h=[{value:"What is remote caching?",id:"what-is-remote-caching",level:2},{value:"Setup",id:"setup",level:2},{value:"Server",id:"server",level:3},{value:"Pants Configuration",id:"pants-configuration",level:3},{value:"Reference",id:"reference",level:2}];function d(e){let t={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.hr,{}),"\n",(0,o.jsx)(t.h2,{id:"what-is-remote-caching",children:"What is remote caching?"}),"\n",(0,o.jsxs)(t.p,{children:["Remote caching allows Pants to store and retrieve the results of process execution to and from a remote server that complies with the ",(0,o.jsx)(t.a,{href:"https://github.com/bazelbuild/remote-apis",children:"Remote Execution API"}),' standard ("REAPI"), rather than only using your machine\'s local Pants cache. This allows Pants to share a cache across different runs and different machines, for example, all of your CI workers sharing the same fine-grained cache.']}),"\n",(0,o.jsx)(t.h2,{id:"setup",children:"Setup"}),"\n",(0,o.jsx)(t.h3,{id:"server",children:"Server"}),"\n",(0,o.jsxs)(t.p,{children:["Remote caching requires the availability of a REAPI-compatible cache. See the ",(0,o.jsx)(t.a,{href:"/2.15/docs/using-pants/remote-caching-and-execution/#server-compatibility",children:"REAPI server compatibility guide"})," for more information."]}),"\n",(0,o.jsx)(t.h3,{id:"pants-configuration",children:"Pants Configuration"}),"\n",(0,o.jsx)(t.p,{children:"After you have either set up a REAPI cache server or obtained access to one, the next step is to point Pants to it so that Pants will use it to read and write process results."}),"\n",(0,o.jsxs)(t.p,{children:["For the following examples, assume that the REAPI server is running on ",(0,o.jsx)(t.code,{children:"cache.corp.example.com"}),' at port 8980 and that it is on an internal network. Also assume that the name of the REAPI instance is "main." At a minimum, you will need to configure ',(0,o.jsx)(t.code,{children:"pants.toml"})," as follows:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-toml",children:'[GLOBAL]\nremote_cache_read = true\nremote_cache_write = true\nremote_store_address = "grpc://build.corp.example.com:8980"\nremote_instance_name = "main"\n'})}),"\n",(0,o.jsxs)(t.p,{children:["If the endpoint is using TLS, then the ",(0,o.jsx)(t.code,{children:"remote_store_address"})," option would be specified with the ",(0,o.jsx)(t.code,{children:"grpcs://"})," scheme, i.e. ",(0,o.jsx)(t.code,{children:'"grpcs://cache.corp.example.com:8980"'}),"."]}),"\n",(0,o.jsx)(t.h2,{id:"reference",children:"Reference"}),"\n",(0,o.jsxs)(t.p,{children:["Run ",(0,o.jsx)(t.code,{children:"pants help-advanced global"})," or refer to ",(0,o.jsx)(t.a,{href:"/2.15/reference/global-options",children:"Global options"}),". Most remote execution and caching options begin with the prefix ",(0,o.jsx)(t.code,{children:"--remote"}),"."]})]})}function l(e={}){let{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},848193(e,t,n){n.d(t,{R:()=>s,x:()=>a});var i=n(830758);let o={},r=i.createContext(o);function s(e){let t=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:t},e.children)}},259314(e){e.exports=JSON.parse('{"id":"docs/using-pants/remote-caching-and-execution/remote-caching","title":"Remote caching","description":"---","source":"@site/versioned_docs/version-2.15/docs/using-pants/remote-caching-and-execution/remote-caching.mdx","sourceDirName":"docs/using-pants/remote-caching-and-execution","slug":"/docs/using-pants/remote-caching-and-execution/remote-caching","permalink":"/2.15/docs/using-pants/remote-caching-and-execution/remote-caching","draft":false,"unlisted":false,"editUrl":"https://github.com/pantsbuild/pants/edit/main/docs/docs/using-pants/remote-caching-and-execution/remote-caching.mdx","tags":[],"version":"2.15","sidebarPosition":0,"frontMatter":{"title":"Remote caching","sidebar_position":0},"sidebar":"docsSidebar","previous":{"title":"Remote caching & execution","permalink":"/2.15/docs/using-pants/remote-caching-and-execution/"},"next":{"title":"Remote execution","permalink":"/2.15/docs/using-pants/remote-caching-and-execution/remote-execution"}}')}}]);