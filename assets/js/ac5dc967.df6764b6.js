"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["81154"],{368650(e,s,n){n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>y,frontMatter:()=>l,metadata:()=>o,toc:()=>h});var o=n(649107),r=n(886070),t=n(848193),i=n(554707),d=n(375002);let l={title:"python-build-standalone-python-provider",description:"A subsystem for Pants-provided Python leveraging Python Build Standalone (or PBS) (https://gregoryszorc.com/docs/python-build-standalone/main/).\n"},a,c={},h=[{value:"Basic options",id:"basic-options",level:2},{value:"<code>release_constraints</code>",id:"release_constraints",level:3},{value:"Advanced options",id:"advanced-options",level:2},{value:"<code>known_python_versions</code>",id:"known_python_versions",level:3},{value:"Deprecated options",id:"deprecated-options",level:2},{value:"Related subsystems",id:"related-subsystems",level:2}];function p(e){let s={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.p,{children:["A subsystem for Pants-provided Python leveraging Python Build Standalone (or PBS) (",(0,r.jsx)(s.a,{href:"https://gregoryszorc.com/docs/python-build-standalone/main/",children:"https://gregoryszorc.com/docs/python-build-standalone/main/"}),")."]}),"\n",(0,r.jsx)(s.p,{children:"Enabling this subsystem will switch Pants from trying to find an appropriate Python on your system to using PBS to download the correct Python(s)."}),"\n",(0,r.jsx)(s.p,{children:'The Pythons provided by PBS will be used to run any "user" code (your Python code as well as any Python-based tools you use, like black or pylint). The Pythons are also read-only to ensure they remain hermetic across runs of different tools and code.'}),"\n",(0,r.jsxs)(s.p,{children:["The Pythons themselves are stored in your ",(0,r.jsx)(s.code,{children:"named_caches_dir"}),": ",(0,r.jsx)(s.a,{href:"https://www.pantsbuild.org/docs/reference-global#named_caches_dir",children:"https://www.pantsbuild.org/docs/reference-global#named_caches_dir"})," under ",(0,r.jsx)(s.code,{children:"python_build_standalone/<version>"}),". Wiping the relevant version directory (with ",(0,r.jsx)(s.code,{children:"sudo rm -rf"}),") will force a re-download of Python."]}),"\n",(0,r.jsxs)(s.p,{children:["WARNING: PBS does have some behavior quirks, most notably that it has some hardcoded references to build-time paths (such as constants that are found in the ",(0,r.jsx)(s.code,{children:"sysconfig"})," module). These paths may be used when trying to compile some extension modules from source."]}),"\n",(0,r.jsxs)(s.p,{children:["For more info, see ",(0,r.jsx)(s.a,{href:"https://gregoryszorc.com/docs/python-build-standalone/main/quirks.html",children:"https://gregoryszorc.com/docs/python-build-standalone/main/quirks.html"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["Backend: ",(0,r.jsx)("span",{className:"color--primary",children:(0,r.jsx)(s.code,{children:"pants.backend.python.providers.experimental.python_build_standalone"})})]}),"\n",(0,r.jsxs)(s.p,{children:["Config section: ",(0,r.jsx)("span",{className:"color--primary",children:(0,r.jsx)(s.code,{children:"[python-build-standalone-python-provider]"})})]}),"\n",(0,r.jsxs)("span",{className:d.A.options,children:[(0,r.jsx)(s.h2,{id:"basic-options",children:"Basic options"}),(0,r.jsx)(s.h3,{id:"release_constraints",children:(0,r.jsx)(s.code,{children:"release_constraints"})}),(0,r.jsx)(i.A,{cli_repr:"--python-build-standalone-python-provider-release-constraints=<str>",env_repr:"PANTS_PYTHON_BUILD_STANDALONE_PYTHON_PROVIDER_RELEASE_CONSTRAINTS",toml_repr:`[python-build-standalone-python-provider]
release_constraints = <str>`,default_repr:"None",children:(0,r.jsxs)(s.p,{children:['Version constraints on the PBS "release" version to ensure only matching PBS releases are considered.\nConstraints should be specfied using operators like ',(0,r.jsx)(s.code,{children:">="}),", ",(0,r.jsx)(s.code,{children:"<="}),", ",(0,r.jsx)(s.code,{children:">"}),", ",(0,r.jsx)(s.code,{children:"<"}),", ",(0,r.jsx)(s.code,{children:"=="}),", or ",(0,r.jsx)(s.code,{children:"!="})," in a similar\nmanner to Python interpreter constraints: e.g., ",(0,r.jsx)(s.code,{children:">=20241201"})," or ",(0,r.jsx)(s.code,{children:">=20241201,<20250101"}),"."]})}),(0,r.jsx)(s.h2,{id:"advanced-options",children:"Advanced options"}),(0,r.jsx)(s.h3,{id:"known_python_versions",children:(0,r.jsx)(s.code,{children:"known_python_versions"})}),(0,r.jsxs)(i.A,{cli_repr:"--python-build-standalone-python-provider-known-python-versions=\"['<str>', '<str>', ...]\"",env_repr:"PANTS_PYTHON_BUILD_STANDALONE_PYTHON_PROVIDER_KNOWN_PYTHON_VERSIONS",toml_repr:`[python-build-standalone-python-provider]
known_python_versions = [
  '<str>',
  '<str>',
  ...,
]`,default_repr:"<Metadata for versions: 3.10.11, 3.10.12, 3.10.13, 3.10.14, 3.10.15, 3.10.16, 3.10.2, 3.10.3, 3.10.4, 3.10.5, 3.10.6, 3.10.7, 3.10.8, 3.10.9, 3.11.1, 3.11.10, 3.11.11, 3.11.3, 3.11.4, 3.11.5, 3.11.6, 3.11.7, 3.11.8, 3.11.9, 3.12.0, 3.12.1, 3.12.2, 3.12.3, 3.12.4, 3.12.5, 3.12.6, 3.12.7, 3.12.8, 3.12.9, 3.13.0, 3.13.1, 3.13.2, 3.8.12, 3.8.13, 3.8.14, 3.8.15, 3.8.16, 3.8.17, 3.8.18, 3.8.19, 3.8.20, 3.9.10, 3.9.11, 3.9.12, 3.9.13, 3.9.14, 3.9.15, 3.9.16, 3.9.17, 3.9.18, 3.9.19, 3.9.20, 3.9.21>",children:[(0,r.jsx)(s.p,{children:"Known versions to verify downloads against."}),(0,r.jsxs)(s.p,{children:["Each element is a pipe-separated string of either ",(0,r.jsx)(s.code,{children:"py_version+pbs_release_tag|platform|sha256|length|url"})," or\n",(0,r.jsx)(s.code,{children:"sha256|length|url"}),", where:"]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"py_version"})," is the Python version string"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"pbs_release_tag"})," is the PBS release tag (i.e., the PBS-specific version)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"platform"})," is one of ",(0,r.jsx)(s.code,{children:"[linux_arm64,linux_x86_64,macos_arm64,macos_x86_64]"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"sha256"})," is the 64-character hex representation of the expected sha256\ndigest of the download file, as emitted by ",(0,r.jsx)(s.code,{children:"shasum -a 256"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"length"})," is the expected length of the download file in bytes, as emitted by\n",(0,r.jsx)(s.code,{children:"wc -c"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"url"})," is the download URL to the ",(0,r.jsx)(s.code,{children:".tar.gz"})," archive"]}),"\n"]}),(0,r.jsxs)(s.p,{children:["E.g., ",(0,r.jsx)(s.code,{children:"3.1.2|macos_x86_64|6d0f18cd84b918c7b3edd0203e75569e0c7caecb1367bbbe409b44e28514f5be|42813|https://<URL>"}),"\nor ",(0,r.jsx)(s.code,{children:"https://<URL>|6d0f18cd84b918c7b3edd0203e75569e0c7caecb1367bbbe409b44e28514f5be|42813"}),"."]}),(0,r.jsxs)(s.p,{children:["Values are space-stripped, so pipes can be indented for readability if necessary. If the three field\nformat is used, then Pants will infer the ",(0,r.jsx)(s.code,{children:"py_version"}),", ",(0,r.jsx)(s.code,{children:"pbs_release_tag"}),", and ",(0,r.jsx)(s.code,{children:"platform"})," fields from\nthe URL. With the five field format, one or more of ",(0,r.jsx)(s.code,{children:"py_version"}),", ",(0,r.jsx)(s.code,{children:"pbs_release_tag"}),", and ",(0,r.jsx)(s.code,{children:"platform"}),"\nmay be left blank if Pants can infer the field from the URL."]}),(0,r.jsx)(s.p,{children:"Additionally, any versions you specify here will override the default Pants metadata for\nthat version."})]}),(0,r.jsx)(s.h2,{id:"deprecated-options",children:"Deprecated options"}),(0,r.jsx)(s.p,{children:"None"}),(0,r.jsx)(s.h2,{id:"related-subsystems",children:"Related subsystems"}),(0,r.jsx)(s.p,{children:"None"})]})]})}function y(e={}){let{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},375002(e,s,n){n.d(s,{A:()=>o});let o={options:"options_nrbo"}},554707(e,s,n){n.d(s,{A:()=>i});var o=n(886070),r=n(384122),t=n(580830);function i({children:e,cli_repr:s,env_repr:n,toml_repr:i,one_of:d,default_repr:l,target_field_name:a,removal_version:c,removal_hint:h}){return(0,o.jsxs)("div",{className:"margin-bottom--lg",children:[(0,o.jsx)("code",{style:{color:"var(--pants-reference-option-repr)"},children:s}),(0,o.jsx)("br",{}),(0,o.jsx)("code",{style:{color:"var(--pants-reference-option-repr)"},children:n}),(0,o.jsx)("br",{}),(0,o.jsx)(r.A,{language:"toml",title:"pants.toml",children:i}),(0,o.jsxs)("div",{style:{paddingLeft:"2em"},children:[(0,o.jsxs)("span",{children:[d&&(0,o.jsxs)("span",{children:["one of:"," ",(0,o.jsx)("code",{style:{color:"var(--ifm-color-success)"},children:d}),(0,o.jsx)("br",{})]}),"default:"," ",(0,o.jsx)("span",{style:{color:"var(--ifm-color-success)"},children:(l||"").includes("\n")?(0,o.jsx)("pre",{className:"padding--sm",children:l}):(0,o.jsx)("code",{children:l})})]}),(0,o.jsx)("br",{}),c&&(0,o.jsxs)("span",{style:{color:"var(--ifm-color-danger-darkest)"},children:["Deprecated, will be removed in version: ",c,".",(0,o.jsx)("br",{}),h,(0,o.jsx)("br",{})]}),e,a&&(0,o.jsxs)("span",{children:["Can be overriden by field",(0,o.jsx)("code",{children:a})," on"," ",(0,o.jsx)(t.A,{to:"../targets/local_environment",children:(0,o.jsx)("code",{children:"local_environment"})}),","," ",(0,o.jsx)(t.A,{to:"../targets/docker_environment",children:(0,o.jsx)("code",{children:"docker_environment"})}),", or"," ",(0,o.jsx)(t.A,{to:"../targets/remote_environment",children:(0,o.jsx)("code",{children:"remote_environment"})}),"targets."]})]})]})}},649107(e){e.exports=JSON.parse('{"id":"reference/subsystems/python-build-standalone-python-provider","title":"python-build-standalone-python-provider","description":"A subsystem for Pants-provided Python leveraging Python Build Standalone (or PBS) (https://gregoryszorc.com/docs/python-build-standalone/main/).\\n","source":"@site/versioned_docs/version-2.25/reference/subsystems/python-build-standalone-python-provider.mdx","sourceDirName":"reference/subsystems","slug":"/reference/subsystems/python-build-standalone-python-provider","permalink":"/2.25/reference/subsystems/python-build-standalone-python-provider","draft":false,"unlisted":false,"tags":[],"version":"2.25","frontMatter":{"title":"python-build-standalone-python-provider","description":"A subsystem for Pants-provided Python leveraging Python Build Standalone (or PBS) (https://gregoryszorc.com/docs/python-build-standalone/main/).\\n"},"sidebar":"referenceSidebar","previous":{"title":"python-bootstrap","permalink":"/2.25/reference/subsystems/python-bootstrap"},"next":{"title":"python-grpclib-protobuf","permalink":"/2.25/reference/subsystems/python-grpclib-protobuf"}}')}}]);