"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["9881"],{306529(e,t,s){s.r(t),s.d(t,{assets:()=>a,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>n,toc:()=>d});var n=s(493095),r=s(886070),l=s(848193);let i={title:"Add a formatter",sidebar_position:1},o,a={},d=[{value:"1. Install your formatter",id:"1-install-your-formatter",level:2},{value:"2. Set up <code>LanguageFmtTargets</code> and <code>FmtRequest</code>",id:"2-set-up-languagefmttargets-and-fmtrequest",level:2},{value:"3. Set up a <code>FieldSet</code> and <code>FmtRequest</code>/<code>LintRequest</code>",id:"3-set-up-a-fieldset-and-fmtrequestlintrequest",level:2},{value:"4. Create <code>fmt</code> and <code>lint</code> rules",id:"4-create-fmt-and-lint-rules",level:2},{value:"5. Add tests (optional)",id:"5-add-tests-optional",level:2}];function u(e){let t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",hr:"hr",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["How to add a new formatter to the ",(0,r.jsx)(t.code,{children:"fmt"})," and ",(0,r.jsx)(t.code,{children:"lint"})," goals."]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsxs)(t.p,{children:["In Pants, every formatter is (typically) also a linter, meaning that if you can run a tool with ",(0,r.jsx)(t.code,{children:"./pants fmt"}),", you can run the same tool in check-only mode with ",(0,r.jsx)(t.code,{children:"./pants lint"}),". Start by skimming ",(0,r.jsx)(t.a,{href:"/2.8/docs/writing-plugins/common-plugin-tasks/add-a-linter",children:"Add a linter"})," to familiarize yourself with how linters work."]}),"\n",(0,r.jsx)(t.admonition,{title:"Example repository",type:"note",children:(0,r.jsxs)(t.p,{children:["This guide walks through each step of adding shfmt. See ",(0,r.jsx)(t.a,{href:"https://github.com/pantsbuild/example-plugin/blob/main/pants-plugins/examples/bash/lint/shfmt",children:"here"})," for the final result."]})}),"\n",(0,r.jsx)(t.p,{children:"This guide assumes that you are running a formatter that already exists outside of Pants as a stand-alone binary, such as running Black or Prettier."}),"\n",(0,r.jsxs)(t.p,{children:["If you are instead writing your own formatting logic inline, you can skip Step 1. In Step 4, you will not need to use ",(0,r.jsx)(t.code,{children:"Process"}),"."]}),"\n",(0,r.jsx)(t.h2,{id:"1-install-your-formatter",children:"1. Install your formatter"}),"\n",(0,r.jsxs)(t.p,{children:["There are several ways for Pants to install your formatter. See ",(0,r.jsx)(t.a,{href:"/2.8/docs/writing-plugins/the-rules-api/installing-tools",children:"Installing tools"}),". This example will use ",(0,r.jsx)(t.code,{children:"ExternalTool"})," because there is already a pre-compiled binary for shfmt."]}),"\n",(0,r.jsxs)(t.p,{children:["You will also likely want to register some options, like ",(0,r.jsx)(t.code,{children:"--config"}),", ",(0,r.jsx)(t.code,{children:"--skip"}),", and ",(0,r.jsx)(t.code,{children:"--args"}),". Options are registered through a ",(0,r.jsx)(t.a,{href:"/2.8/docs/writing-plugins/the-rules-api/options-and-subsystems",children:(0,r.jsx)(t.code,{children:"Subsystem"})}),". If you are using ",(0,r.jsx)(t.code,{children:"ExternalTool"}),", this is already a subclass of ",(0,r.jsx)(t.code,{children:"Subsystem"}),". Otherwise, create a subclass of ",(0,r.jsx)(t.code,{children:"Subsystem"}),". Then, set the class property ",(0,r.jsx)(t.code,{children:"options_scope"})," to the name of the tool, e.g. ",(0,r.jsx)(t.code,{children:'"shfmt"'})," or ",(0,r.jsx)(t.code,{children:'"prettier"'}),". Finally, add options via the class method ",(0,r.jsx)(t.code,{children:"register_options()"}),"."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'from pants.core.util_rules.external_tool import ExternalTool\nfrom pants.engine.platform import Platform\nfrom pants.option.custom_types import file_option, shell_str\n\n\nclass Shfmt(ExternalTool):\n    """An autoformatter for shell scripts (https://github.com/mvdan/sh)."""\n\n    options_scope = "shfmt"\n    default_version = "v3.2.4"\n    default_known_versions = [\n        "v3.2.4|macos_arm64 |e70fc42e69debe3e400347d4f918630cdf4bf2537277d672bbc43490387508ec|2998546",\n        "v3.2.4|macos_x86_64|43a0461a1b54070ddc04fbbf1b78f7861ee39a65a61f5466d15a39c4aba4f917|2980208",\n        "v3.2.4|linux_arm64 |6474d9cc08a1c9fe2ef4be7a004951998e3067d46cf55a011ddd5ff7bfab3de6|2752512",\n        "v3.2.4|linux_x86_64|3f5a47f8fec27fae3e06d611559a2063f5d27e4b9501171dde9959b8c60a3538|2797568",\n    ]\n\n    # We set this because we need the mapping for both `generate_exe` and `generate_url`.\n    platform_mapping = {\n        "macos_arm64": "darwin_arm64",\n        "macos_x86_64": "darwin_amd64",\n        "linux_arm64": "linux_arm64",\n        "linux_x86_64": "linux_amd64",\n    }\n\n    @classmethod\n    def register_options(cls, register):\n        super().register_options(register)\n        register(\n            "--skip",\n            type=bool,\n            default=False,\n            help="Don\'t use shfmt when running `./pants fmt` or `./pants lint`.",\n        )\n        register(\n            "--args",\n            type=list,\n            member_type=shell_str,\n            help=(\n                "Arguments to pass directly to shfmt, e.g. `--shfmt-args=\'-i 2\'`.\'"\n            ),\n        )\n        register(\n            "--config",\n            type=list,\n            member_type=file_option,\n            advanced=True,\n            help="Path to `.editorconfig` file. This must be relative to the build root.",\n        )\n\n    def generate_url(self, plat: Platform) -> str:\n        plat_str = self.platform_mapping[plat.value]\n        return (\n            f"https://github.com/mvdan/sh/releases/download/{self.version}/"\n            f"shfmt_{self.version}_{plat_str}"\n        )\n\n    def generate_exe(self, plat: Platform) -> str:\n        plat_str = self.platform_mapping[plat.value]\n        return f"./shfmt_{self.version}_{plat_str}"\n'})}),"\n",(0,r.jsxs)(t.h2,{id:"2-set-up-languagefmttargets-and-fmtrequest",children:["2. Set up ",(0,r.jsx)(t.code,{children:"LanguageFmtTargets"})," and ",(0,r.jsx)(t.code,{children:"FmtRequest"})]}),"\n",(0,r.jsx)(t.p,{children:"Unlike linters and test runners, formatters cannot safely run in parallel because they might overwrite each other. Instead, Pants runs formatters sequentially."}),"\n",(0,r.jsxs)(t.p,{children:["However, it is safe to run formatters belonging to different languages in parallel, such as a Java formatter at the same time as a Python formatter. So, Pants groups formatters by languages via the type ",(0,r.jsx)(t.code,{children:"LanguageFmtTargets"}),". Within each language, the formatters will run sequentially, but across languages, they may run in parallel."]}),"\n",(0,r.jsx)(t.admonition,{title:"New Python formatters can skip this step",type:"note",children:(0,r.jsxs)(t.p,{children:["Pants already defines ",(0,r.jsx)(t.code,{children:"PythonFmtTargets"})," and ",(0,r.jsx)(t.code,{children:"PythonFmtRequest"}),", which are both defined in ",(0,r.jsx)(t.code,{children:"pants.backend.python.lint.python_fmt"}),"."]})}),"\n",(0,r.jsxs)(t.p,{children:["To add support for a new language, copy the below code into a new file like ",(0,r.jsx)(t.code,{children:"shell_formatters.py"}),", but change the names of the ",(0,r.jsx)(t.code,{children:"LanguageFmtTargets"}),", ",(0,r.jsx)(t.code,{children:"LanguageFmtRequest"}),", and the rule to match your new language. Update the ",(0,r.jsx)(t.code,{children:"LanguageFmtTargets.required_fields"})," class property, and update the body of the rule to use your language."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:"from dataclasses import dataclass\nfrom typing import Iterable\n\nfrom pants.core.goals.fmt import FmtResult, LanguageFmtResults, LanguageFmtTargets\nfrom pants.core.goals.style_request import StyleRequest\nfrom pants.core.util_rules.source_files import SourceFiles, SourceFilesRequest\nfrom pants.engine.fs import Digest, Snapshot\nfrom pants.engine.rules import Get, collect_rules, rule\nfrom pants.engine.unions import UnionMembership, UnionRule, union\n\nfrom examples.shell.target_types import ShellSourceField\n\n\n@dataclass(frozen=True)\nclass ShellFmtTargets(LanguageFmtTargets):\n    required_fields = (ShellSourceField,)\n\n\n@union\nclass ShellFmtRequest(StyleRequest):\n    pass\n\n\n@rule\nasync def format_shell_targets(\n    shell_fmt_targets: ShellFmtTargets, union_membership: UnionMembership\n) -> LanguageFmtResults:\n    original_sources = await Get(\n        SourceFiles,\n        SourceFilesRequest(target[ShellSourceField] for target in shell_fmt_targets.targets),\n    )\n    prior_formatter_result = original_sources.snapshot\n\n    results = []\n    fmt_request_types: Iterable[type[StyleRequest]] = union_membership[ShellFmtRequest]\n    for fmt_request_type in fmt_request_types:\n        request = fmt_request_type(\n            (\n                fmt_request_type.field_set_type.create(target)\n                for target in shell_fmt_targets.targets\n                if fmt_request_type.field_set_type.is_applicable(target)\n            ),\n            prior_formatter_result=prior_formatter_result,\n        )\n        if not request.field_sets:\n            continue\n        result = await Get(FmtResult, ShellFmtRequest, request)\n        results.append(result)\n        if result.did_change:\n            prior_formatter_result = await Get(Snapshot, Digest, result.output)\n    return LanguageFmtResults(\n        tuple(results),\n        input=original_sources.snapshot.digest,\n        output=prior_formatter_result.digest,\n    )\n\n\ndef rules():\n    return [*collect_rules(), UnionRule(LanguageFmtTargets, ShellFmtTargets)]\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Note that we use ",(0,r.jsx)(t.code,{children:"await Get(FmtResult, ShellFmtRequest)"})," in a ",(0,r.jsx)(t.code,{children:"for"})," loop. Normally, you should use ",(0,r.jsx)(t.code,{children:"await MultiGet()"})," instead of a ",(0,r.jsx)(t.code,{children:"for"})," loop, but we must use a ",(0,r.jsx)(t.code,{children:"for"})," loop here to run sequentially."]}),"\n",(0,r.jsxs)(t.h2,{id:"3-set-up-a-fieldset-and-fmtrequestlintrequest",children:["3. Set up a ",(0,r.jsx)(t.code,{children:"FieldSet"})," and ",(0,r.jsx)(t.code,{children:"FmtRequest"}),"/",(0,r.jsx)(t.code,{children:"LintRequest"})]}),"\n",(0,r.jsxs)(t.p,{children:["As described in ",(0,r.jsx)(t.a,{href:"/2.8/docs/writing-plugins/the-rules-api/rules-and-the-target-api",children:"Rules and the Target API"}),", a ",(0,r.jsx)(t.code,{children:"FieldSet"})," is a way to tell Pants which ",(0,r.jsx)(t.code,{children:"Field"}),"s you care about targets having for your plugin to work."]}),"\n",(0,r.jsxs)(t.p,{children:["Usually, you should add a subclass of ",(0,r.jsx)(t.code,{children:"SourcesField"})," to the class property ",(0,r.jsx)(t.code,{children:"required_fields"}),", such as ",(0,r.jsx)(t.code,{children:"ShellSourceField"})," or ",(0,r.jsx)(t.code,{children:"PythonSourceField"}),". This means that your linter will run on any target with that sources field or a subclass of it."]}),"\n",(0,r.jsxs)(t.p,{children:["Create a new dataclass that subclasses ",(0,r.jsx)(t.code,{children:"FieldSet"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:"from dataclasses import dataclass\n\nfrom pants.engine.target import FieldSet\n\n...\n\n@dataclass(frozen=True)\nclass ShfmtFieldSet(FieldSet):\n    required_fields = (ShellSourceField,)\n\n    sources: ShellSourceField\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Then, hook this up to a new subclass of both ",(0,r.jsx)(t.code,{children:"LintRequest"})," ",(0,r.jsx)(t.em,{children:"and"})," the ",(0,r.jsx)(t.code,{children:"FmtRequest"})," you set up in step 2 for your language, such as ",(0,r.jsx)(t.code,{children:"ShellFmtRequest"})," or ",(0,r.jsx)(t.code,{children:"PythonFmtRequest"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:"from pants.core.goals.lint import LintRequest\n\n...\n\nclass ShfmtRequest(ShellFmtRequest, LintRequest):\n    field_set_type = ShfmtFieldSet\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Finally, register your new ",(0,r.jsx)(t.code,{children:"LintRequest"}),"/",(0,r.jsx)(t.code,{children:"FmtRequest"})," with two ",(0,r.jsxs)(t.a,{href:"/2.8/docs/writing-plugins/the-rules-api/union-rules-advanced",children:[(0,r.jsx)(t.code,{children:"UnionRule"}),"s"]})," so that Pants knows your formatter exists:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:"from pants.engine.unions import UnionRule\n\n...\n\ndef rules():\n    return [\n      	*collect_rules(),\n        UnionRule(ShellFmtRequest, ShfmtRequest),\n        UnionRule(LintRequest, ShfmtRequest),\n    ]\n"})}),"\n",(0,r.jsxs)(t.h2,{id:"4-create-fmt-and-lint-rules",children:["4. Create ",(0,r.jsx)(t.code,{children:"fmt"})," and ",(0,r.jsx)(t.code,{children:"lint"})," rules"]}),"\n",(0,r.jsxs)(t.p,{children:["You will need rules for both ",(0,r.jsx)(t.code,{children:"fmt"})," and ",(0,r.jsx)(t.code,{children:"lint"}),". Both rules should take the ",(0,r.jsx)(t.code,{children:"LintRequest"}),"/",(0,r.jsx)(t.code,{children:"FmtRequest"})," from step 3 (e.g. ",(0,r.jsx)(t.code,{children:"ShfmtRequest"}),") as a parameter. The ",(0,r.jsx)(t.code,{children:"fmt"})," rule should return ",(0,r.jsx)(t.code,{children:"FmtResult"}),", and the ",(0,r.jsx)(t.code,{children:"lint"})," rule should return ",(0,r.jsx)(t.code,{children:"LintResults"}),"."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'@rule(desc="Format with shfmt")\nasync def shfmt_fmt(request: ShfmtRequest, shfmt: Shfmt) -> FmtResult:\n    ...\n    return FmtResult(...)\n\n\n@rule(desc="Lint with shfmt")\nasync def shfmt_lint(request: ShfmtRequest, shfmt: Shfmt) -> LintResults:\n    ...\n    return LintResults()\n'})}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"fmt"})," and ",(0,r.jsx)(t.code,{children:"lint"})," rules will be very similar, except that a) the ",(0,r.jsx)(t.code,{children:"argv"})," to your ",(0,r.jsx)(t.code,{children:"Process"})," will be different, b) for ",(0,r.jsx)(t.code,{children:"lint"}),", you should use ",(0,r.jsx)(t.code,{children:"await Get(FallibleProcessResult, Process)"})," so that you tolerate failures, whereas ",(0,r.jsx)(t.code,{children:"fmt"})," should use ",(0,r.jsx)(t.code,{children:"await Get(ProcessResult, Process)"}),". To avoid duplication between the ",(0,r.jsx)(t.code,{children:"fmt"})," and ",(0,r.jsx)(t.code,{children:"lint"})," rules, you should set up a helper ",(0,r.jsx)(t.code,{children:"setup"})," rule, along with dataclasses for ",(0,r.jsx)(t.code,{children:"SetupRequest"})," and ",(0,r.jsx)(t.code,{children:"Setup"}),"."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'@dataclass(frozen=True)\nclass SetupRequest:\n    request: ShfmtRequest\n    check_only: bool\n\n\n@dataclass(frozen=True)\nclass Setup:\n    process: Process\n    original_digest: Digest\n\n\n@rule(level=LogLevel.DEBUG)\nasync def setup_shfmt(setup_request: SetupRequest, shfmt: Shfmt) -> Setup:\n    download_shfmt_get = Get(\n        DownloadedExternalTool,\n        ExternalToolRequest,\n        shfmt.get_request(Platform.current),\n    )\n\n    # If the user specified `--shfmt-config`, we must search for the file they specified with\n    # `PathGlobs` to include it in the `input_digest`. We error if the file cannot be found.\n    config_digest_get = Get(\n        Digest,\n        PathGlobs(\n            globs=[shfmt.options.config] if shfmt.options.config else [],\n            glob_match_error_behavior=GlobMatchErrorBehavior.error,\n            description_of_origin="the option `--shfmt-config`",\n        ),\n    )\n\n    source_files_get= Get(\n        SourceFiles,\n        SourceFilesRequest(\n            field_set.source for field_set in setup_request.request.field_sets\n        ),\n    )\n\n    downloaded_shfmt, config_digest, source_files = await MultiGet(\n        download_shfmt_get, config_digest_get, source_files_get\n    )\n\n    # If we were given an input digest from a previous formatter for the source files, then we\n    # should use that input digest instead of the one we read from the filesystem.\n    source_files_snapshot = (\n        source_files.snapshot\n        if setup_request.request.prior_formatter_result is None\n        else setup_request.request.prior_formatter_result\n    )\n\n    input_digest = await Get(\n        Digest,\n        MergeDigests(\n            (source_files_snapshot.digest, downloaded_shfmt.digest, config_digest)\n        ),\n    )\n\n    argv = [\n        downloaded_shfmt.exe,\n        "-d" if setup_request.check_only else "-w",\n        *shfmt.options.args,\n        *source_files_snapshot.files,\n    ]\n    process = Process(\n        argv=argv,\n        input_digest=input_digest,\n        output_files=source_files_snapshot.files,\n        description=f"Run shfmt on {pluralize(len(setup_request.request.field_sets), \'file\')}.",\n        level=LogLevel.DEBUG,\n    )\n    return Setup(process, original_digest=source_files_snapshot.digest)\n\n\n@rule(desc="Format with shfmt", level=LogLevel.DEBUG)\nasync def shfmt_fmt(request: ShfmtRequest, shfmt: Shfmt) -> FmtResult:\n    if shfmt.options.skip:\n        return FmtResult.skip(formatter_name="shfmt")\n    setup = await Get(Setup, SetupRequest(request, check_only=False))\n    result = await Get(ProcessResult, Process, setup.process)\n    return FmtResult.from_process_result(\n        result, original_digest=setup.original_digest, formatter_name="shfmt"\n    )\n\n\n@rule(desc="Lint with shfmt", level=LogLevel.DEBUG)\nasync def shfmt_lint(request: ShfmtRequest, shfmt: Shfmt) -> LintResults:\n    if shfmt.options.skip:\n        return LintResults([], linter_name="shfmt")\n    setup = await Get(Setup, SetupRequest(request, check_only=True))\n    result = await Get(FallibleProcessResult, Process, setup.process)\n    return LintResults(\n        [LintResult.from_fallible_process_result(result)], linter_name="shfmt"\n    )\n'})}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"FmtRequest"}),"/",(0,r.jsx)(t.code,{children:"LintRequest"})," has a property called ",(0,r.jsx)(t.code,{children:".field_sets"}),", which stores a collection of the ",(0,r.jsx)(t.code,{children:"FieldSet"}),"s defined in step 2. Each ",(0,r.jsx)(t.code,{children:"FieldSet"})," corresponds to a single target. Pants will have already validated that there is at least one valid ",(0,r.jsx)(t.code,{children:"FieldSet"}),", so you can expect ",(0,r.jsx)(t.code,{children:"ShfmtRequest.field_sets"})," to have 1-n ",(0,r.jsx)(t.code,{children:"FieldSet"})," instances."]}),"\n",(0,r.jsxs)(t.p,{children:["If you have a ",(0,r.jsx)(t.code,{children:"--skip"})," option, you should check if it was used at the beginning of your ",(0,r.jsx)(t.code,{children:"fmt"})," and ",(0,r.jsx)(t.code,{children:"lint"})," rules and, if so, to early return an empty ",(0,r.jsx)(t.code,{children:"LintResults()"})," and return ",(0,r.jsx)(t.code,{children:"FmtResult.skip()"}),"."]}),"\n",(0,r.jsxs)(t.p,{children:["Use ",(0,r.jsx)(t.code,{children:"Get(SourceFiles, SourceFilesRequest)"})," to get all the sources you want to run your linter on. However, you should check if the ",(0,r.jsx)(t.code,{children:"FmtRequest.prior_formatter_result"})," is set, and if so, use that value instead. This ensures that the result of any previous formatters is used, rather than the original source files."]}),"\n",(0,r.jsxs)(t.p,{children:["If you used ",(0,r.jsx)(t.code,{children:"ExternalTool"})," in step 1, you will use ",(0,r.jsx)(t.code,{children:"Get(DownloadedExternalTool, ExternalToolRequest)"})," in the ",(0,r.jsx)(t.code,{children:"setup"})," rule to install the tool."]}),"\n",(0,r.jsxs)(t.p,{children:["If you have a ",(0,r.jsx)(t.code,{children:"--config"})," option, you should use ",(0,r.jsx)(t.code,{children:"Get(Digest, PathGlobs)"})," to find the config file and include it in the ",(0,r.jsx)(t.code,{children:"input_digest"}),"."]}),"\n",(0,r.jsxs)(t.p,{children:["Use ",(0,r.jsx)(t.code,{children:"Get(Digest, MergeDigests)"})," to combine the different inputs together, such as merging the source files, config file, and downloaded tool."]}),"\n",(0,r.jsxs)(t.p,{children:["Finally, update your plugin's ",(0,r.jsx)(t.code,{children:"register.py"})," to activate this file's rules. Note that we must register the rules added in Step 2, as well."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",metastring:'title="pants-plugins/shell/register.py"',children:"from shell import shell_formatters, shfmt\n\n\ndef rules():\n    return [*shell_formatters.rules(), *shfmt.rules()]\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Now, when you run ",(0,r.jsx)(t.code,{children:"./pants fmt ::"})," or ",(0,r.jsx)(t.code,{children:"./pants lint ::"}),", your new formatter should run."]}),"\n",(0,r.jsx)(t.h2,{id:"5-add-tests-optional",children:"5. Add tests (optional)"}),"\n",(0,r.jsxs)(t.p,{children:["Refer to ",(0,r.jsx)(t.a,{href:"/2.8/docs/writing-plugins/the-rules-api/testing-plugins",children:"Testing rules"}),"."]})]})}function c(e={}){let{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},848193(e,t,s){s.d(t,{R:()=>i,x:()=>o});var n=s(830758);let r={},l=n.createContext(r);function i(e){let t=n.useContext(l);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(l.Provider,{value:t},e.children)}},493095(e){e.exports=JSON.parse('{"id":"docs/writing-plugins/common-plugin-tasks/add-a-formatter","title":"Add a formatter","description":"How to add a new formatter to the fmt and lint goals.","source":"@site/versioned_docs/version-2.8/docs/writing-plugins/common-plugin-tasks/add-a-formatter.mdx","sourceDirName":"docs/writing-plugins/common-plugin-tasks","slug":"/docs/writing-plugins/common-plugin-tasks/add-a-formatter","permalink":"/2.8/docs/writing-plugins/common-plugin-tasks/add-a-formatter","draft":false,"unlisted":false,"editUrl":"https://github.com/pantsbuild/pants/edit/main/docs/docs/writing-plugins/common-plugin-tasks/add-a-formatter.mdx","tags":[],"version":"2.8","sidebarPosition":1,"frontMatter":{"title":"Add a formatter","sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Add a linter","permalink":"/2.8/docs/writing-plugins/common-plugin-tasks/add-a-linter"},"next":{"title":"Add a typechecker","permalink":"/2.8/docs/writing-plugins/common-plugin-tasks/add-a-typechecker"}}')}}]);