"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["100634"],{702161(e,r,t){t.r(r),t.d(r,{assets:()=>p,contentTitle:()=>c,default:()=>_,frontMatter:()=>a,metadata:()=>s,toc:()=>d});var s=t(622965),n=t(886070),o=t(848193),i=t(554707),l=t(375002);let a={title:"python-setup",description:"A Python environment.\n"},c,p={},d=[{value:"Basic options",id:"basic-options",level:2},{value:"Advanced options",id:"advanced-options",level:2},{value:"<code>interpreter_constraints</code>",id:"interpreter_constraints",level:3},{value:"<code>interpreter_search_paths</code>",id:"interpreter_search_paths",level:3},{value:"<code>requirement_constraints</code>",id:"requirement_constraints",level:3},{value:"<code>resolve_all_constraints</code>",id:"resolve_all_constraints",level:3},{value:"<code>resolver_http_cache_ttl</code>",id:"resolver_http_cache_ttl",level:3},{value:"<code>resolver_jobs</code>",id:"resolver_jobs",level:3},{value:"<code>resolver_manylinux</code>",id:"resolver_manylinux",level:3},{value:"Deprecated options",id:"deprecated-options",level:2},{value:"<code>interpreter_cache_dir</code>",id:"interpreter_cache_dir",level:3},{value:"<code>platforms</code>",id:"platforms",level:3},{value:"<code>resolver_allow_prereleases</code>",id:"resolver_allow_prereleases",level:3},{value:"<code>resolver_cache_dir</code>",id:"resolver_cache_dir",level:3},{value:"Related subsystems",id:"related-subsystems",level:2}];function h(e){let r={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.p,{children:"A Python environment."}),"\n",(0,n.jsxs)(r.p,{children:["Backend: ",(0,n.jsx)("span",{className:"color--primary",children:"``"})]}),"\n",(0,n.jsxs)(r.p,{children:["Config section: ",(0,n.jsx)("span",{className:"color--primary",children:(0,n.jsx)(r.code,{children:"[python-setup]"})})]}),"\n",(0,n.jsxs)("span",{className:l.A.options,children:[(0,n.jsx)(r.h2,{id:"basic-options",children:"Basic options"}),(0,n.jsx)(r.p,{children:"None"}),(0,n.jsx)(r.h2,{id:"advanced-options",children:"Advanced options"}),(0,n.jsx)(r.h3,{id:"interpreter_constraints",children:(0,n.jsx)(r.code,{children:"interpreter_constraints"})}),(0,n.jsx)(i.A,{cli_repr:'--python-setup-interpreter-constraints="[<requirement>, <requirement>, ...]"',env_repr:"PANTS_PYTHON_SETUP_INTERPRETER_CONSTRAINTS",toml_repr:`[python-setup]
interpreter_constraints = [
  <requirement>,
  <requirement>,
  ...,
]`,default_repr:`[
  "CPython>=3.6"
]`,children:(0,n.jsxs)(r.p,{children:["Constrain the selected Python interpreter. Specify with requirement syntax, e.g. 'CPython>=2.7,<3' (A CPython interpreter with version >=2.7 AND version <3)or 'PyPy' (A pypy interpreter of any version). Multiple constraint strings will be ORed together. These constraints are used as the default value for the ",(0,n.jsx)(r.code,{children:"compatibility"})," field of Python targets."]})}),(0,n.jsx)(r.h3,{id:"interpreter_search_paths",children:(0,n.jsx)(r.code,{children:"interpreter_search_paths"})}),(0,n.jsxs)(i.A,{cli_repr:'--python-setup-interpreter-search-paths="[<binary-paths>, <binary-paths>, ...]"',env_repr:"PANTS_PYTHON_SETUP_INTERPRETER_SEARCH_PATHS",toml_repr:`[python-setup]
interpreter_search_paths = [
  <binary-paths>,
  <binary-paths>,
  ...,
]`,default_repr:`[
  "<PYENV>",
  "<PATH>"
]`,children:[(0,n.jsx)(r.p,{children:"A list of paths to search for Python interpreters that match your project's interpreter constraints. You can specify absolute paths to interpreter binaries and/or to directories containing interpreter binaries. The order of entries does not matter. The following special strings are supported:"}),(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:'"<PATH>", the contents of the PATH env var'}),"\n",(0,n.jsx)(r.li,{children:'"<PYENV>", all Python versions under $(pyenv root)/versions'}),"\n",(0,n.jsx)(r.li,{children:'"<PYENV_LOCAL>", the Pyenv interpreter with the version in BUILD_ROOT/.python-version'}),"\n",(0,n.jsx)(r.li,{children:'"<PEXRC>", paths in the PEX_PYTHON_PATH variable in /etc/pexrc or ~/.pexrc'}),"\n"]})]}),(0,n.jsx)(r.h3,{id:"requirement_constraints",children:(0,n.jsx)(r.code,{children:"requirement_constraints"})}),(0,n.jsx)(i.A,{cli_repr:"--python-setup-requirement-constraints=<file_option>",env_repr:"PANTS_PYTHON_SETUP_REQUIREMENT_CONSTRAINTS",toml_repr:`[python-setup]
requirement_constraints = <file_option>`,default_repr:"None",children:(0,n.jsxs)(r.p,{children:["When resolving third-party requirements, use this constraints file to determine which versions to use. See ",(0,n.jsx)(r.a,{href:"https://pip.pypa.io/en/stable/user_guide/#constraints-files",children:"https://pip.pypa.io/en/stable/user_guide/#constraints-files"})," for more information on the format of constraint files and how constraints are applied in Pex and pip."]})}),(0,n.jsx)(r.h3,{id:"resolve_all_constraints",children:(0,n.jsx)(r.code,{children:"resolve_all_constraints"})}),(0,n.jsxs)(i.A,{cli_repr:"--python-setup-resolve-all-constraints=<ResolveAllConstraintsOption>",env_repr:"PANTS_PYTHON_SETUP_RESOLVE_ALL_CONSTRAINTS",toml_repr:`[python-setup]
resolve_all_constraints = <ResolveAllConstraintsOption>`,one_of:"never, nondeployables, always",default_repr:"nondeployables",children:[(0,n.jsx)(r.p,{children:"If set, and the requirements of the code being operated on are a subset of the constraints file, then the entire constraints file will be used instead of the subset. If unset, or any requirement of the code being operated on is not in the constraints file, each subset will be independently resolved as needed, which is more correct - work is only invalidated if a requirement it actually depends on changes - but also a lot slower, due to the extra resolving."}),(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"never"})," will always use proper subsets, regardless of the goal being run."]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"nondeployables"})," will use proper subsets for ",(0,n.jsx)(r.code,{children:"./pants package"}),", but otherwise attempt to use a single resolve."]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"always"})," will always attempt to use a single resolve."]}),"\n"]}),(0,n.jsx)(r.p,{children:"Requires [python-setup].requirement_constraints to be set."})]}),(0,n.jsx)(r.h3,{id:"resolver_http_cache_ttl",children:(0,n.jsx)(r.code,{children:"resolver_http_cache_ttl"})}),(0,n.jsx)(i.A,{cli_repr:"--python-setup-resolver-http-cache-ttl=<int>",env_repr:"PANTS_PYTHON_SETUP_RESOLVER_HTTP_CACHE_TTL",toml_repr:`[python-setup]
resolver_http_cache_ttl = <int>`,default_repr:"3600",children:(0,n.jsx)(r.p,{children:"The maximum time (in seconds) for items in the HTTP cache. When the cache expires,the PEX resolver will make network requests to see if new versions of your requirements are available."})}),(0,n.jsx)(r.h3,{id:"resolver_jobs",children:(0,n.jsx)(r.code,{children:"resolver_jobs"})}),(0,n.jsx)(i.A,{cli_repr:"--python-setup-resolver-jobs=<int>",env_repr:"PANTS_PYTHON_SETUP_RESOLVER_JOBS",toml_repr:`[python-setup]
resolver_jobs = <int>`,default_repr:"32",children:(0,n.jsxs)(r.p,{children:["The maximum number of concurrent jobs to build wheels with. Because Pants can run multiple subprocesses in parallel, the maximum total parallelism will be ",(0,n.jsx)(r.code,{children:"--process-execution-{local,remote}-parallelism x --python-setup-resolver-jobs"}),". Setting this option higher may result in better parallelism, but, if set too high, may result in starvation and Out of Memory errors."]})}),(0,n.jsx)(r.h3,{id:"resolver_manylinux",children:(0,n.jsx)(r.code,{children:"resolver_manylinux"})}),(0,n.jsx)(i.A,{cli_repr:"--python-setup-resolver-manylinux=<str>",env_repr:"PANTS_PYTHON_SETUP_RESOLVER_MANYLINUX",toml_repr:`[python-setup]
resolver_manylinux = <str>`,default_repr:"manylinux2014",children:(0,n.jsx)(r.p,{children:"Whether to allow resolution of manylinux wheels when resolving requirements for foreign linux platforms. The value should be a manylinux platform upper bound, e.g.: 'manylinux2010', or else the string 'no' to disallow."})}),(0,n.jsx)(r.h2,{id:"deprecated-options",children:"Deprecated options"}),(0,n.jsx)(r.h3,{id:"interpreter_cache_dir",children:(0,n.jsx)(r.code,{children:"interpreter_cache_dir"})}),(0,n.jsx)(i.A,{cli_repr:"--python-setup-interpreter-cache-dir=<dir>",env_repr:"PANTS_PYTHON_SETUP_INTERPRETER_CACHE_DIR",toml_repr:`[python-setup]
interpreter_cache_dir = <dir>`,default_repr:"None",removal_version:"2.1.0.dev0",removal_hint:"The option `--python-setup-interpreter-cache-dir` does not do anything anymore.Instead, use the global option `--named-caches-dir`.",children:(0,n.jsx)(r.p,{children:"The parent directory for the interpreter cache. If unspecified, a standard path under the workdir is used."})}),(0,n.jsx)(r.h3,{id:"platforms",children:(0,n.jsx)(r.code,{children:"platforms"})}),(0,n.jsx)(i.A,{cli_repr:'--python-setup-platforms="[<platform>, <platform>, ...]"',env_repr:"PANTS_PYTHON_SETUP_PLATFORMS",toml_repr:`[python-setup]
platforms = [
  <platform>,
  <platform>,
  ...,
]`,default_repr:`[
  "current"
]`,removal_version:"2.1.0.dev0",removal_hint:"The option `--python-setup-platforms` does not do anything anymore. Instead, explicitly set the `platforms` field on each `pex_binary` target.",children:(0,n.jsx)(r.p,{children:"A list of platforms to be supported by this Python environment. Each platformis a string, as returned by pkg_resources.get_supported_platform()."})}),(0,n.jsx)(r.h3,{id:"resolver_allow_prereleases",children:(0,n.jsx)(r.code,{children:"resolver_allow_prereleases"})}),(0,n.jsx)(i.A,{cli_repr:"--[no-]python-setup-resolver-allow-prereleases",env_repr:"PANTS_PYTHON_SETUP_RESOLVER_ALLOW_PRERELEASES",toml_repr:`[python-setup]
resolver_allow_prereleases = <bool>`,default_repr:"None",removal_version:"2.1.0.dev0",removal_hint:"The option `--python-setup-resolver-allow-prereleases` does not no anything. To use a pre-release, explicitly use that pre-release version in your requirement string, e.g. `my_dist==99.0.dev0`.",children:(0,n.jsx)(r.p,{children:"Whether to include pre-releases when resolving requirements."})}),(0,n.jsx)(r.h3,{id:"resolver_cache_dir",children:(0,n.jsx)(r.code,{children:"resolver_cache_dir"})}),(0,n.jsx)(i.A,{cli_repr:"--python-setup-resolver-cache-dir=<dir>",env_repr:"PANTS_PYTHON_SETUP_RESOLVER_CACHE_DIR",toml_repr:`[python-setup]
resolver_cache_dir = <dir>`,default_repr:"None",removal_version:"2.1.0.dev0",removal_hint:"The option `--python-setup-resolver-cache-dir` does not do anything anymore. Instead, use the global option `--named-caches-dir`.",children:(0,n.jsx)(r.p,{children:"The parent directory for the requirement resolver cache. If unspecified, a standard path under the workdir is used."})}),(0,n.jsx)(r.h2,{id:"related-subsystems",children:"Related subsystems"}),(0,n.jsx)(r.p,{children:"None"})]})]})}function _(e={}){let{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},375002(e,r,t){t.d(r,{A:()=>s});let s={options:"options_nrbo"}},554707(e,r,t){t.d(r,{A:()=>i});var s=t(886070),n=t(384122),o=t(580830);function i({children:e,cli_repr:r,env_repr:t,toml_repr:i,one_of:l,default_repr:a,target_field_name:c,removal_version:p,removal_hint:d}){return(0,s.jsxs)("div",{className:"margin-bottom--lg",children:[(0,s.jsx)("code",{style:{color:"var(--pants-reference-option-repr)"},children:r}),(0,s.jsx)("br",{}),(0,s.jsx)("code",{style:{color:"var(--pants-reference-option-repr)"},children:t}),(0,s.jsx)("br",{}),(0,s.jsx)(n.A,{language:"toml",title:"pants.toml",children:i}),(0,s.jsxs)("div",{style:{paddingLeft:"2em"},children:[(0,s.jsxs)("span",{children:[l&&(0,s.jsxs)("span",{children:["one of:"," ",(0,s.jsx)("code",{style:{color:"var(--ifm-color-success)"},children:l}),(0,s.jsx)("br",{})]}),"default:"," ",(0,s.jsx)("span",{style:{color:"var(--ifm-color-success)"},children:(a||"").includes("\n")?(0,s.jsx)("pre",{className:"padding--sm",children:a}):(0,s.jsx)("code",{children:a})})]}),(0,s.jsx)("br",{}),p&&(0,s.jsxs)("span",{style:{color:"var(--ifm-color-danger-darkest)"},children:["Deprecated, will be removed in version: ",p,".",(0,s.jsx)("br",{}),d,(0,s.jsx)("br",{})]}),e,c&&(0,s.jsxs)("span",{children:["Can be overriden by field",(0,s.jsx)("code",{children:c})," on"," ",(0,s.jsx)(o.A,{to:"../targets/local_environment",children:(0,s.jsx)("code",{children:"local_environment"})}),","," ",(0,s.jsx)(o.A,{to:"../targets/docker_environment",children:(0,s.jsx)("code",{children:"docker_environment"})}),", or"," ",(0,s.jsx)(o.A,{to:"../targets/remote_environment",children:(0,s.jsx)("code",{children:"remote_environment"})}),"targets."]})]})]})}},622965(e){e.exports=JSON.parse('{"id":"reference/subsystems/python-setup","title":"python-setup","description":"A Python environment.\\n","source":"@site/versioned_docs/version-2.0/reference/subsystems/python-setup.mdx","sourceDirName":"reference/subsystems","slug":"/reference/subsystems/python-setup","permalink":"/2.0/reference/subsystems/python-setup","draft":false,"unlisted":false,"tags":[],"version":"2.0","frontMatter":{"title":"python-setup","description":"A Python environment.\\n"},"sidebar":"referenceSidebar","previous":{"title":"python-repos","permalink":"/2.0/reference/subsystems/python-repos"},"next":{"title":"reporting","permalink":"/2.0/reference/subsystems/reporting"}}')}}]);