"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["258734"],{890184(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>j,frontMatter:()=>c,metadata:()=>r,toc:()=>p});var r=s(487329),o=s(886070),i=s(848193),t=s(554707),d=s(375002);let c={title:"nodejs-infer",description:"Options controlling which dependencies will be inferred for javascript targets.\n"},l,a={},p=[{value:"Basic options",id:"basic-options",level:2},{value:"<code>imports</code>",id:"imports",level:3},{value:"<code>package_json_entry_points</code>",id:"package_json_entry_points",level:3},{value:"<code>unowned_dependency_behavior</code>",id:"unowned_dependency_behavior",level:3},{value:"Advanced options",id:"advanced-options",level:2},{value:"Deprecated options",id:"deprecated-options",level:2},{value:"Related subsystems",id:"related-subsystems",level:2}];function h(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",p:"p",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.p,{children:"Options controlling which dependencies will be inferred for javascript targets."}),"\n",(0,o.jsxs)(n.p,{children:["Backend: ",(0,o.jsx)("span",{className:"color--primary",children:(0,o.jsx)(n.code,{children:"pants.backend.experimental.javascript.lint.prettier"})})]}),"\n",(0,o.jsxs)(n.p,{children:["Config section: ",(0,o.jsx)("span",{className:"color--primary",children:(0,o.jsx)(n.code,{children:"[nodejs-infer]"})})]}),"\n",(0,o.jsxs)("span",{className:d.A.options,children:[(0,o.jsx)(n.h2,{id:"basic-options",children:"Basic options"}),(0,o.jsx)(n.h3,{id:"imports",children:(0,o.jsx)(n.code,{children:"imports"})}),(0,o.jsxs)(t.A,{cli_repr:"--[no-]nodejs-infer-imports",env_repr:"PANTS_NODEJS_INFER_IMPORTS",toml_repr:`[nodejs-infer]
imports = <bool>`,default_repr:"True",children:[(0,o.jsx)(n.p,{children:"Infer a target's imported dependencies by parsing import statements from sources."}),(0,o.jsxs)(n.p,{children:["To ignore a false positive, you can either put ",(0,o.jsx)(n.code,{children:"// pants: no-infer-dep"})," on the line of the import or put ",(0,o.jsx)(n.code,{children:"!{bad_address}"})," in the ",(0,o.jsx)(n.code,{children:"dependencies"})," field of your target."]})]}),(0,o.jsx)(n.h3,{id:"package_json_entry_points",children:(0,o.jsx)(n.code,{children:"package_json_entry_points"})}),(0,o.jsxs)(t.A,{cli_repr:"--[no-]nodejs-infer-package-json-entry-points",env_repr:"PANTS_NODEJS_INFER_PACKAGE_JSON_ENTRY_POINTS",toml_repr:`[nodejs-infer]
package_json_entry_points = <bool>`,default_repr:"True",children:[(0,o.jsxs)(n.p,{children:["Infer a ",(0,o.jsx)(n.code,{children:"package_json"}),"'s dependencies by parsing entry point statements from the package.json file."]}),(0,o.jsxs)(n.p,{children:["To ignore a false positive, you can put ",(0,o.jsx)(n.code,{children:"!{bad_address}"})," in the ",(0,o.jsx)(n.code,{children:"dependencies"})," field of the ",(0,o.jsx)(n.code,{children:"package_json"})," target."]}),(0,o.jsxs)(n.p,{children:["See ",(0,o.jsx)(n.a,{href:"https://nodejs.org/api/packages.html#package-entry-points",children:"https://nodejs.org/api/packages.html#package-entry-points"})," and\n",(0,o.jsx)(n.a,{href:"https://docs.npmjs.com/cli/v9/configuring-npm/package-json#browser",children:"https://docs.npmjs.com/cli/v9/configuring-npm/package-json#browser"}),"."]})]}),(0,o.jsx)(n.h3,{id:"unowned_dependency_behavior",children:(0,o.jsx)(n.code,{children:"unowned_dependency_behavior"})}),(0,o.jsxs)(t.A,{cli_repr:"--nodejs-infer-unowned-dependency-behavior=<UnownedDependencyUsage>",env_repr:"PANTS_NODEJS_INFER_UNOWNED_DEPENDENCY_BEHAVIOR",toml_repr:`[nodejs-infer]
unowned_dependency_behavior = <UnownedDependencyUsage>`,one_of:"error, warning, ignore",default_repr:"warning",children:[(0,o.jsx)(n.p,{children:"How to handle imports that don't have an inferable owner."}),(0,o.jsxs)(n.p,{children:["Usually when an import cannot be inferred, it represents an issue like Pants not being properly configured, e.g. targets not set up. Often, missing dependencies will result in confusing runtime errors like ",(0,o.jsx)(n.code,{children:"Error: ENOENT: no such file or directory"}),", so this option can be helpful to error more eagerly."]}),(0,o.jsxs)(n.p,{children:["To ignore any false positives, add ",(0,o.jsx)(n.code,{children:"// pants: no-infer-dep"})," to the line of the import"]})]}),(0,o.jsx)(n.h2,{id:"advanced-options",children:"Advanced options"}),(0,o.jsx)(n.p,{children:"None"}),(0,o.jsx)(n.h2,{id:"deprecated-options",children:"Deprecated options"}),(0,o.jsx)(n.p,{children:"None"}),(0,o.jsx)(n.h2,{id:"related-subsystems",children:"Related subsystems"}),(0,o.jsx)(n.p,{children:"None"})]})]})}function j(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},375002(e,n,s){s.d(n,{A:()=>r});let r={options:"options_nrbo"}},554707(e,n,s){s.d(n,{A:()=>t});var r=s(886070),o=s(384122),i=s(580830);function t({children:e,cli_repr:n,env_repr:s,toml_repr:t,one_of:d,default_repr:c,target_field_name:l,removal_version:a,removal_hint:p}){return(0,r.jsxs)("div",{className:"margin-bottom--lg",children:[(0,r.jsx)("code",{style:{color:"var(--pants-reference-option-repr)"},children:n}),(0,r.jsx)("br",{}),(0,r.jsx)("code",{style:{color:"var(--pants-reference-option-repr)"},children:s}),(0,r.jsx)("br",{}),(0,r.jsx)(o.A,{language:"toml",title:"pants.toml",children:t}),(0,r.jsxs)("div",{style:{paddingLeft:"2em"},children:[(0,r.jsxs)("span",{children:[d&&(0,r.jsxs)("span",{children:["one of:"," ",(0,r.jsx)("code",{style:{color:"var(--ifm-color-success)"},children:d}),(0,r.jsx)("br",{})]}),"default:"," ",(0,r.jsx)("span",{style:{color:"var(--ifm-color-success)"},children:(c||"").includes("\n")?(0,r.jsx)("pre",{className:"padding--sm",children:c}):(0,r.jsx)("code",{children:c})})]}),(0,r.jsx)("br",{}),a&&(0,r.jsxs)("span",{style:{color:"var(--ifm-color-danger-darkest)"},children:["Deprecated, will be removed in version: ",a,".",(0,r.jsx)("br",{}),p,(0,r.jsx)("br",{})]}),e,l&&(0,r.jsxs)("span",{children:["Can be overriden by field",(0,r.jsx)("code",{children:l})," on"," ",(0,r.jsx)(i.A,{to:"../targets/local_environment",children:(0,r.jsx)("code",{children:"local_environment"})}),","," ",(0,r.jsx)(i.A,{to:"../targets/docker_environment",children:(0,r.jsx)("code",{children:"docker_environment"})}),", or"," ",(0,r.jsx)(i.A,{to:"../targets/remote_environment",children:(0,r.jsx)("code",{children:"remote_environment"})}),"targets."]})]})]})}},487329(e){e.exports=JSON.parse('{"id":"reference/subsystems/nodejs-infer","title":"nodejs-infer","description":"Options controlling which dependencies will be inferred for javascript targets.\\n","source":"@site/versioned_docs/version-2.30/reference/subsystems/nodejs-infer.mdx","sourceDirName":"reference/subsystems","slug":"/reference/subsystems/nodejs-infer","permalink":"/stable/reference/subsystems/nodejs-infer","draft":false,"unlisted":false,"tags":[],"version":"2.30","frontMatter":{"title":"nodejs-infer","description":"Options controlling which dependencies will be inferred for javascript targets.\\n"},"sidebar":"referenceSidebar","previous":{"title":"nfpm","permalink":"/stable/reference/subsystems/nfpm"},"next":{"title":"nodejs-test","permalink":"/stable/reference/subsystems/nodejs-test"}}')}}]);