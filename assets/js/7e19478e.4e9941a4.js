"use strict";(self.webpackChunkpantsbuild_org=self.webpackChunkpantsbuild_org||[]).push([["456524"],{855875(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>d});var t=s(610223),o=s(886070),i=s(848193);let a={authors:["alexey"],tags:[]},r="Pants 2.18.0 is released!",l={authorsImageUrls:[void 0]},d=[{value:"Experimental backends!",id:"experimental-backends",level:2},{value:"Functions-as-a-service improvements for Python",id:"functions-as-a-service-improvements-for-python",level:2},{value:"Simplification of Python tool lockfiles",id:"simplification-of-python-tool-lockfiles",level:2},{value:"Infrastructure-as-code iteration",id:"infrastructure-as-code-iteration",level:2},{value:"Docker finesse",id:"docker-finesse",level:2},{value:"More visible visibility",id:"more-visible-visibility",level:2},{value:"Finding paths between addresses that expand to multiple targets",id:"finding-paths-between-addresses-that-expand-to-multiple-targets",level:2},{value:"Much more!",id:"much-more",level:2}];function c(e){let n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components},{CaptionedImg:t}=n;return t||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("CaptionedImg",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t,{src:s(165654).A,children:(0,o.jsxs)(n.p,{children:["Photo by ",(0,o.jsx)(n.a,{href:"https://unsplash.com/@jbcreate_?utm_source=ghost&utm_medium=referral&utm_campaign=api-credit",children:"Joseph\nBarrientos"}),"\n/\n",(0,o.jsx)(n.a,{href:"https://unsplash.com/?utm_source=ghost&utm_medium=referral&utm_campaign=api-credit",children:"Unsplash"})]})}),"\n","\n",(0,o.jsxs)(n.p,{children:["We're pleased to announce Pants 2.18.0, the latest release of ",(0,o.jsx)(n.a,{href:"https://www.pantsbuild.org/",children:"Pantsbuild, the scalable and ergonomic build system"}),".\nTo update, set ",(0,o.jsx)(n.code,{children:'pants_version = "2.18.0"'})," in your ",(0,o.jsx)(n.code,{children:"pants.toml"}),". If you're not using Pants to build, format, test (and more) your codebase, ",(0,o.jsx)(n.a,{href:"https://www.pantsbuild.org/docs/getting-started",children:"get started now"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"Highlights in 2.18.0 include:"}),"\n",(0,o.jsx)(n.p,{children:'Even more improvements to AWS Lambda and Google Cloud Function support, including simpler configuration and support for AWS Lambda Layers.\nMany more options can now be controlled when building Docker images.\nSignificant feature work and bug fixes to "deploy" backends like Helm and Terraform.'}),"\n",(0,o.jsxs)(n.p,{children:["There's ",(0,o.jsx)(n.a,{href:"https://github.com/pantsbuild/pants/blob/2.18.x/src/python/pants/notes/2.18.x.md",children:"much more"}),", too: performance optimizations, new backends, bug fixes and features!"]}),"\n",(0,o.jsxs)(n.p,{children:["Starting from the previous 2.17.0 release, you can now ",(0,o.jsx)(n.a,{href:"https://www.pantsbuild.org/docs/sponsorship",children:"support Pants financially"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"Pants is an open-source project that is not owned nor controlled by any one company or organization, and does incur some expenses. These expenses are managed by Pants Build, a non-profit that was established for this purpose. This non-profit's only source of revenue is sponsorship by individuals and companies that support Pants."}),"\n",(0,o.jsxs)(n.p,{children:["We offer ",(0,o.jsx)(n.a,{href:"https://www.pantsbuild.org/docs/sponsorship",children:"formal sponsorship tiers for companies"}),", as well as individual sponsorships via ",(0,o.jsx)(n.a,{href:"https://github.com/sponsors/pantsbuild",children:"GitHub"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"experimental-backends",children:"Experimental backends!"}),"\n",(0,o.jsxs)(n.p,{children:['Did you know that Pants has a lot of "experimental" backends? These include support for languages, tools and ecosystems that are still in preview. The ',(0,o.jsx)(n.a,{href:"https://www.pantsbuild.org/v2.18/docs/enabling-backends",children:"documentation of backends"})," now lists all these backends.\nPlease go check it out, try backends relevant to you and let us know how they go for your use cases, ",(0,o.jsx)(n.a,{href:"https://www.pantsbuild.org/v2.18/docs/getting-help",children:"report bugs"})," and/or ",(0,o.jsx)(n.a,{href:"https://www.pantsbuild.org/v2.18/docs/contributor-overview",children:"submit fixes"}),"! People like you trying them is how we can perfect the features and squash the bugs to stabilize them."]}),"\n",(0,o.jsx)(n.h2,{id:"functions-as-a-service-improvements-for-python",children:"Functions-as-a-service improvements for Python"}),"\n",(0,o.jsxs)(n.p,{children:["Pants includes support for building function-as-a-service artifacts for Python, via the ",(0,o.jsx)(n.a,{href:"https://www.pantsbuild.org/v2.18/docs/awslambda-python",children:(0,o.jsx)(n.code,{children:"pants.backend.awslambda.python"})})," and ",(0,o.jsx)(n.a,{href:"https://www.pantsbuild.org/v2.18/docs/google-cloud-function-python",children:(0,o.jsx)(n.code,{children:"pants.backend.google_cloud_function.python"})})," backends. These backends make it easy to generate zip artifacts appropriate for uploading to cloud services."]}),"\n",(0,o.jsx)(n.p,{children:"These backends had significant improvements to their start-up performance and size in 2.17, and the improvements have continued in 2.18:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsxs)(n.a,{href:"https://www.pantsbuild.org/v2.18/docs/awslambda-python#building-a-lambda-layer",children:["new ",(0,o.jsx)(n.code,{children:"python_aws_lambda_layer"})," target"]})," can be used to build Layers for AWS Lambda. For instance, this allows putting third-party requirements from PyPI into a layer, and only first party-sources from your repository into the function code, making for faster builds and uploads. (For consistency, the ",(0,o.jsx)(n.code,{children:"python_awslambda"})," target has been renamed to ",(0,o.jsx)(n.code,{children:"python_aws_lambda_function"}),".)\nThe ",(0,o.jsx)(n.code,{children:"runtime"})," field is no longer necessary when the interpreter constraints unambiguously refer to an entire single major version. For instance, with ",(0,o.jsx)(n.code,{children:'[python].interpreter_constraints = ["==3.11.*"]'})," in ",(0,o.jsx)(n.code,{children:"pants.toml"}),", one doesn't need to specify ",(0,o.jsx)(n.code,{children:'runtime="python3.11"'})," to ",(0,o.jsx)(n.code,{children:"python_aws_lambda_function"})," or ",(0,o.jsx)(n.code,{children:'runtime="python311"'})," to ",(0,o.jsx)(n.code,{children:"python_google_cloud_function"}),", as it will be inferred."]}),"\n",(0,o.jsxs)(n.li,{children:["For AWS Lambda targets, the ",(0,o.jsx)(n.code,{children:"complete_platforms"})," argument now has default values provided by Pants, which gives more reliable builds, especially when building on a different platform than the AWS Lambda itself. This change also means that only one of the ",(0,o.jsx)(n.code,{children:"complete_platforms"})," or ",(0,o.jsx)(n.code,{children:"platforms"})," fields should be provided."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"simplification-of-python-tool-lockfiles",children:"Simplification of Python tool lockfiles"}),"\n",(0,o.jsxs)(n.p,{children:["You now install custom versions of Python-based tools (such as Pytest, MyPy and so on) by pointing the tool's ",(0,o.jsx)(n.code,{children:"install_from_resolve"})," option at a regular Python ",(0,o.jsx)(n.a,{href:"https://www.pantsbuild.org/docs/python-lockfiles",children:"resolve"}),".\nYou create the lockfiles for these resolves just as you would for your own code's resolves. You can have one resolve per tool, or one resolve for multiple tools, and you can even install tools from the same resolve you use for your code.\nThis is useful when you have tools that also provide runtime libraries, such as Pytest.\nSee ",(0,o.jsx)(n.a,{href:"https://www.pantsbuild.org/docs/python-lockfiles#lockfiles-for-tools",children:"the documentation"})," for more details."]}),"\n",(0,o.jsxs)(n.p,{children:["Note that this means that you can no longer ",(0,o.jsx)(n.code,{children:"export"})," the built-in, default lockfile for a tool, as that is not represented by a named resolve. If you need to export Python tool virtualenvs for consumption outside of Pants, e.g., by an IDE, you must first create a resolve for them."]}),"\n",(0,o.jsx)(n.h2,{id:"infrastructure-as-code-iteration",children:"Infrastructure-as-code iteration"}),"\n",(0,o.jsxs)(n.p,{children:["Pants has nascent support for describing and deploying infrastructure via the ",(0,o.jsx)(n.a,{href:"https://www.pantsbuild.org/v2.18/docs/helm-overview",children:(0,o.jsx)(n.code,{children:"pants.backend.experimental.helm"})})," and ",(0,o.jsx)(n.code,{children:"pants.backend.experimental.terraform"})," backends. These have seen several improvements in 2.18.0:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Improved testing with ",(0,o.jsx)(n.a,{href:"https://www.pantsbuild.org/v2.18/docs/helm-overview#helm-unit-tests",children:(0,o.jsx)(n.code,{children:"helm_unittest_tests"})})," target as it can now be automatically created by the ",(0,o.jsx)(n.code,{children:"tailor"})," goal, and supports ",(0,o.jsx)(n.a,{href:"https://www.pantsbuild.org/v2.18/docs/helm-overview#snapshot-testing",children:"snapshot testing"})," via the new ",(0,o.jsx)(n.code,{children:"generate-snapshots"})," goal"]}),"\n",(0,o.jsxs)(n.li,{children:["Support for running Kubeconform on Helm targets via the ",(0,o.jsxs)(n.a,{href:"https://www.pantsbuild.org/v2.18/docs/helm-kubeconform",children:["new ",(0,o.jsx)(n.code,{children:"pants.backend.experimental.helm.check.kubeconform"})," backend"]})]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsxs)(n.a,{href:"https://www.pantsbuild.org/v2.18/docs/reference-terraform_deployment",children:["new ",(0,o.jsx)(n.code,{children:"terraform_deployment"})," target"]})," allows configuring a ",(0,o.jsx)(n.code,{children:"terraform_module"})," to be deployed with ",(0,o.jsxs)(n.a,{href:"https://www.pantsbuild.org/v2.18/docs/reference-experimental-deploy",children:["the ",(0,o.jsx)(n.code,{children:"experimental-deploy"})," goal"]}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["A new ",(0,o.jsx)(n.code,{children:"pants.backend.experimental.terraform.lint.tfsec"})," backend has been added to run the ",(0,o.jsx)(n.code,{children:"tfsec"})," linter as part of the ",(0,o.jsx)(n.code,{children:"lint"})," goal.\nIn addition to those major improvements, many smaller bug fixes and features are included in 2.18.0."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"docker-finesse",children:"Docker finesse"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"pants.backend.docker"})," backend now supports many more options to control how images are built:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["on ",(0,o.jsxs)(n.a,{href:"https://www.pantsbuild.org/v2.18/docs/reference-docker",children:["the ",(0,o.jsx)(n.code,{children:"[docker] subsystem"})]}),": ",(0,o.jsx)(n.code,{children:"build_hosts"}),", ",(0,o.jsx)(n.code,{children:"build_no_cache"})]}),"\n",(0,o.jsxs)(n.li,{children:["on [the ",(0,o.jsx)(n.code,{children:"docker_image"})," target]: ",(0,o.jsx)(n.code,{children:"build_network"}),", ",(0,o.jsx)(n.code,{children:"build_platform"}),", ",(0,o.jsx)(n.code,{children:"extra_build_hosts"})]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"These new options allow, for instance, more easily building a x86_64 image while running on an arm64 host."}),"\n",(0,o.jsx)(n.h2,{id:"more-visible-visibility",children:"More visible visibility"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsxs)(n.a,{href:"https://www.pantsbuild.org/v2.18/docs/validating-dependencies",children:["The ",(0,o.jsx)(n.code,{children:"pants.backend.experimental.visibility"})," backend"]})," now also runs as a linter, such as when running ",(0,o.jsx)(n.code,{children:"pants lint ::"}),", to report all visibility violations at one time."]}),"\n",(0,o.jsx)(n.p,{children:"This backend allows applying rules and restrictions to which targets can depend on other targets, for example, a repository with two applications and some shared library code can use the visibility backend to enforce that code in one application cannot depend on code in the other application."}),"\n",(0,o.jsx)(n.h2,{id:"finding-paths-between-addresses-that-expand-to-multiple-targets",children:"Finding paths between addresses that expand to multiple targets"}),"\n",(0,o.jsxs)(n.p,{children:["Pants previously allowed finding all paths in the dependency graph between two individual targets, like a ",(0,o.jsx)(n.code,{children:"python_source"})," and a ",(0,o.jsx)(n.code,{children:"python_test"}),'. You can now find all paths that exist between multiple targets, for instance, by passing a directory address.This will help you to answer various questions such as "How is this Python module connected to a Python package, if at all?" or "How tightly are two Java packages connected?".']}),"\n",(0,o.jsx)(n.p,{children:"This also enables sophisticated dependency graph analytics. By listing all the paths in the repo, for example, between sources and tests, one can find the source modules that have most paths leading to tests, identify very long paths, and many more."}),"\n",(0,o.jsx)(n.p,{children:"For example, this command will count all paths between all source and all test targets in a repository:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell-session",children:"$ pants paths --from=project/tests:: --to=project/src:: | jq length\n42\n"})}),"\n",(0,o.jsx)(n.h2,{id:"much-more",children:"Much more!"}),"\n",(0,o.jsxs)(n.p,{children:["Pants 2.18 involved several months of work from dozens of contributors, thank you everyone!\nSee the ",(0,o.jsx)(n.a,{href:"https://github.com/pantsbuild/pants/blob/2.18.x/src/python/pants/notes/2.18.x.md",children:"release notes"})," for all of the new features and fixes."]}),"\n",(0,o.jsxs)(n.p,{children:["To update, set ",(0,o.jsx)(n.code,{children:'pants_version = "2.18.0"'})," in your pants.toml. If you're not using Pants to build, format, test (and more) your codebase, get started now."]})]})}function h(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},165654(e,n,s){s.d(n,{A:()=>t});let t=s.p+"assets/images/splash-f596f3e61c5e9dff95a64738f0acb850.jpeg"},848193(e,n,s){s.d(n,{R:()=>a,x:()=>r});var t=s(830758);let o={},i=t.createContext(o);function a(e){let n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),t.createElement(i.Provider,{value:n},e.children)}},610223(e){e.exports=JSON.parse('{"permalink":"/blog/2023/11/14/pants-2.18.0-is-released","editUrl":"https://github.com/pantsbuild/pantsbuild.org/edit/main/blog/2023-11-14-pants-2.18.0-is-released/index.mdx","source":"@site/blog/2023-11-14-pants-2.18.0-is-released/index.mdx","title":"Pants 2.18.0 is released!","description":"Photo by [Joseph","date":"2023-11-14T00:00:00.000Z","tags":[],"readingTime":6.2,"hasTruncateMarker":true,"authors":[{"name":"Alexey Tereshenkov","title":"Pants Maintainer","url":"https://github.com/AlexTereshenkov","imageURL":"https://github.com/AlexTereshenkov.png","key":"alexey","page":null}],"frontMatter":{"authors":["alexey"],"tags":[]},"unlisted":false,"prevItem":{"title":"Pants 2.19.0 is released!","permalink":"/blog/2024/01/24/pants-2-19"},"nextItem":{"title":"Pants 2.17.0 is released!","permalink":"/blog/2023/08/30/pants-2-17-0-is-released"}}')}}]);