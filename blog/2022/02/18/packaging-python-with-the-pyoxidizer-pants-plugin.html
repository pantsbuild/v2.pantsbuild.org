<!doctype html><html lang=en dir=ltr class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>Packaging Python with the PyOxidizer Pants Plugin | Pantsbuild</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:image content=https://www.pantsbuild.org/img/social-card.png /><meta data-rh=true name=twitter:image content=https://www.pantsbuild.org/img/social-card.png /><meta data-rh=true property=og:url content=https://www.pantsbuild.org/blog/2022/02/18/packaging-python-with-the-pyoxidizer-pants-plugin /><meta data-rh=true property=og:locale content=en /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docusaurus_tag content=default /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docsearch:docusaurus_tag content=default /><meta data-rh=true property=og:title content="Packaging Python with the PyOxidizer Pants Plugin | Pantsbuild"/><meta data-rh=true name=description content="Photo by [Jay"/><meta data-rh=true property=og:description content="Photo by [Jay"/><meta data-rh=true property=og:type content=article /><meta data-rh=true property=article:published_time content=2022-02-18T00:00:00.000Z /><meta data-rh=true property=article:author content=https://github.com/sureshjoshi /><meta data-rh=true property=article:tag content=python,deployment /><link data-rh=true rel=icon href=/img/favicon.ico /><link data-rh=true rel=canonical href=https://www.pantsbuild.org/blog/2022/02/18/packaging-python-with-the-pyoxidizer-pants-plugin /><link data-rh=true rel=alternate href=https://www.pantsbuild.org/blog/2022/02/18/packaging-python-with-the-pyoxidizer-pants-plugin hreflang=en /><link data-rh=true rel=alternate href=https://www.pantsbuild.org/blog/2022/02/18/packaging-python-with-the-pyoxidizer-pants-plugin hreflang=x-default /><link data-rh=true rel=preconnect href=https://QD9KY1TRVK-dsn.algolia.net crossorigin=anonymous /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@id":"https://www.pantsbuild.org/blog/2022/02/18/packaging-python-with-the-pyoxidizer-pants-plugin","@type":"BlogPosting","author":{"@type":"Person","description":"Pants Maintainer, occasional blogger at sureshjoshi.com","image":"https://github.com/sureshjoshi.png","name":"SJ","url":"https://github.com/sureshjoshi"},"datePublished":"2022-02-18T00:00:00.000Z","description":"Photo by [Jay","headline":"Packaging Python with the PyOxidizer Pants Plugin","isPartOf":{"@id":"https://www.pantsbuild.org/blog","@type":"Blog","name":"Blog"},"keywords":[],"mainEntityOfPage":"https://www.pantsbuild.org/blog/2022/02/18/packaging-python-with-the-pyoxidizer-pants-plugin","name":"Packaging Python with the PyOxidizer Pants Plugin","url":"https://www.pantsbuild.org/blog/2022/02/18/packaging-python-with-the-pyoxidizer-pants-plugin"}</script><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="Pantsbuild RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="Pantsbuild Atom Feed"><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=G-SEHBXJRF42"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-SEHBXJRF42",{anonymize_ip:!0})</script><link rel=search type=application/opensearchdescription+xml title=Pantsbuild href=/opensearch.xml><link rel=stylesheet href=/assets/css/styles.b71b45ed.css /><script src=/assets/js/runtime~main.43acf77f.js defer></script><script src=/assets/js/main.636c7439.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_lucK href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/logo.svg alt="My Site Logo" class="themedComponent_x_jL themedComponent--light_WGb9"/><img src=/img/logo.svg alt="My Site Logo" class="themedComponent_x_jL themedComponent--dark_oBxQ"/></div><b class="navbar__title text--truncate">Pantsbuild</b></a><a class="navbar__item navbar__link" href=/stable/docs/introduction/welcome-to-pants>Docs</a><a class="navbar__item navbar__link" href=/stable/reference/global-options>Reference</a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/blog>Blog</a><a class="navbar__item navbar__link" href=/sponsors>Sponsors</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class=navbar__link aria-haspopup=true aria-expanded=false role=button href=/stable/docs/introduction/welcome-to-pants>2.30</a><ul class=dropdown__menu><li><a class=dropdown__link href=/prerelease/docs/introduction/welcome-to-pants>2.31 (prerelease)</a><li><a class=dropdown__link href=/stable/docs/introduction/welcome-to-pants>2.30</a><li><a class=dropdown__link href=/2.29/docs/introduction/welcome-to-pants>2.29</a><li><a class=dropdown__link href=/2.28/docs/introduction/welcome-to-pants>2.28 (deprecated)</a><li class=""><hr class=dropdown-separator><li><a class=dropdown__link href=/versions>All Versions</a></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>Slack</a><ul class=dropdown__menu><li><a href=https://pantsbuild.slack.com target=_blank rel="noopener noreferrer" class=dropdown__link>Workspace<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a><li><a href="https://docs.google.com/forms/d/e/1FAIpQLSf9zgf-MXRnVDJbrVEST3urqneq7LCcy0zw8qU-GH4hPMn52A/viewform?usp=sf_link" target=_blank rel="noopener noreferrer" class=dropdown__link>Workspace Invite<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a><li><a href=https://chat.pantsbuild.org target=_blank rel="noopener noreferrer" class=dropdown__link>Linen Mirror<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a></ul></div><a href=https://github.com/pantsbuild/pants target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a><div class=navbarSearchContainer_Mydu><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts=Meta+k><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 24 24" aria-hidden=true><circle cx=11 cy=11 r=8 stroke=currentColor fill=none stroke-width=1.4 /><path d="m21 21-4.3-4.3" stroke=currentColor fill=none stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div><div class="toggle_AwgP colorModeToggle_rXRM"><button class="clean-btn toggleButton_kTC9 toggleButtonDisabled_N4X8" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_X8HE lightToggleIcon_cay9"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_X8HE darkToggleIcon_B6hH"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_X8HE systemToggleIcon_k4zv"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_GzA5"><div class="container margin-vert--lg"><div class=row><aside class="col col--3"><nav class="sidebar_cLTH thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_C3sy margin-bottom--md">All posts</div><div role=group><h3 class=yearGroupHeading_Wib2>2025</h3><ul class="sidebarItemList_iEWr clean-list"><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2025/12/11/lockfile-metadata-files>Writing Python lockfile metadata to separate files</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2025/12/10/pants-2-30>Pants 2.30.0 is released!</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2025/10/06/winding-down-macos-intel-support>When to Wind Down MacOS Intel Support</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2025/10/03/pants-2-29>Pants 2.29.0 is released!</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2025/09/08/pants-2-28>Pants 2.28.0 is released!</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2025/06/30/pants-2-27>Pants 2.27.0 is released!</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2025/06/29/introducing-the-sandboxer>Introducing the Sandboxer!</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2025/05/05/pants-2-26>Pants 2.26.0 is released!</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2025/03/01/pants-2-25>Pants 2.25.0 is released!</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2025/01/28/pants-2-24>Pants 2.24.0 is released!</a></ul></div><div role=group><h3 class=yearGroupHeading_Wib2>2024</h3><ul class="sidebarItemList_iEWr clean-list"><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2024/12/04/workspace-environments>In-Workspace Execution in Pants v2.23.x</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2024/11/20/pants-2-23>Pants 2.23.0 is released!</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2024/10/08/user-survey-2024>2024 Pantsbuild User Survey</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2024/09/10/pants-2-22>Pants 2.22.0 is released!</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2024/08/24/venerable-pythons>Venerable Pythons, Pants, Pip, and Ecosystems</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2024/07/01/building-linux-on-osx-silicon>Building Linux/x64 containers on OS X on Apple Silicon with Pants</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2024/06/13/announcing-klaviyo-sponsorship>Announcing Klaviyo's Sponsorship</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2024/05/29/pants-2-21>Pants 2.21.0 is released!</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2024/04/27/simple-versioning-with-git-tags>Simple versioning with git tags</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2024/03/27/pants-2-20>Pants 2.20.0 is released!</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2024/01/25/inspecting-dependency-inference-results>Inspecting dependency inference results</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2024/01/24/pants-2-19>Pants 2.19.0 is released!</a></ul></div><div role=group><h3 class=yearGroupHeading_Wib2>2023</h3><ul class="sidebarItemList_iEWr clean-list"><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2023/11/14/pants-2.18.0-is-released>Pants 2.18.0 is released!</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2023/08/30/pants-2-17-0-is-released>Pants 2.17.0 is released!</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2023/07/03/sharing-pants-plugins>Sharing Pants plugins</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2023/06/16/pants-2-16-0>Pants 2.16.0 is here!</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2023/04/25/visibility-feature-in-pants-2-16>Visibility features coming in Pants 2.16</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2023/04/01/new-chat-archive>Tada, it's our new chat archive!</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2023/03/31/two-hermetic-pythons>Two hermetic Pythons</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2023/03/28/environments-simpler-multi-platform-workflows>Environments: simpler multi-platform workflows</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2023/03/02/what-we-mean-by-contributing-to-pants>What we mean by "contributing" to Pants</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2023/03/02/write-or-speak-about-pants-communitys-favorite-topics>Write (or speak) about any of Pants community's favorite topics!</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2023/02/28/linting-python-at-warp-speed>Linting Python at warp speed with Pants+Ruff</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2023/02/24/choosing-a-python-packaging-format>Challenges in choosing a Python packaging format</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2023/02/24/pants-2-15>Pants 2.15: Easier multi-platform workflows, Docker build support, automatic code cleanup, and more!</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2023/02/24/pantsbuild-community-survey-2023>Pantsbuild Community Survey 2023</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2023/02/23/the-pants-launcher-binary-a-much-simpler-way-to-install-and-run-pants>The pants launcher binary - a much simpler way to install and run Pants</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2023/02/14/my-experience-as-a-pantsbuild-maintainer>My experience as a Pantsbuild maintainer</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2023/01/03/tweag-case-study>Tweag case study: From adopting Pants, to generalizing our CI to multiple Python versions</a></ul></div><div role=group><h3 class=yearGroupHeading_Wib2>2022</h3><ul class="sidebarItemList_iEWr clean-list"><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/11/21/quick-feedback-on-new-features-via-experimental-backends>How we get quick feedback on new features via "experimental" backends</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/11/04/introducing-pants-to-oxbotica>Case Study: Introducing Pants to Oxbotica</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/10/27/celebrating-two-years-of-pants-2>Celebrating two years of Pants 2</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/10/27/why-dependency-inference>Dependency inference: Pants's special sauce</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/10/26/pants-2-14>Pants 2.14: Less boilerplate, more Rust, better support for Go monorepos, interactive debugging support, and more!</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/10/10/skipping-github-actions-jobs-without-breaking-branch-protection>Skipping GitHub Actions jobs while keeping branch protection rules that require them</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/09/02/meet-our-newest-maintainer-a-alonso-dominguez>Meet our newest Maintainer: A. Alonso Dominguez</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/09/01/introducing-pants-2-13>Pants 2.13: Easier at the command line, easier parallel execution in CI, Kotlin support, and better Python and JVM support!</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/08/12/astranis-case-study-wrangling-python-in-a-monorepo>Astranis Case Study: Wrangling Python In a Monorepo</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/08/05/monorepository-linting-via-pants-project-introspection>Monorepository linting via Pants's project introspection</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/08/02/optimizing-python-docker-deploys-using-pants>Optimizing Python + Docker deploys using Pants</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/07/28/better-ci-cd-caching-with-pants>Better CI/CD caching with Pants</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/06/29/pants-2-12>Pants 2.12: Improved performance for common cases, IDE support for Java and Scala</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/06/17/m1-support-self-hosted>How we streamlined Apple M1 Support with self-hosted Github Actions runners</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/05/25/multiple-lockfiles-python>Multiple lockfiles in Python repos</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/05/02/introducing-pants-2-11>Pants 2.11 adds Go Protobuf codegen, Pex lockfiles for Python, and parametrization</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/05/01/pycon-us-2022-talk>Talk Notes: PyCon US 2022 - Hermetic Environments in Pantsbuild</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/03/23/introducing-pants-2-10>Pants 2.10 adds multiple Python lockfile support, PyOxidizer, Thrift codegen, and better linter parallelization</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/03/21/the-2022-annual-community-survey-is-a-wrap-and-the-results-are-in>The 2022 annual community survey is a wrap, and the results are in!</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/03/15/effective-monorepos-with-pants>Effective monorepos with Pants</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/03/09/the-monorepo-approach-to-code-management>The monorepo approach to code management</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/03/07/thrift-python>Pants 2.10 adds Apache Thrift support for Python</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/02/28/meet-our-newest-maintainer-alexey-tereshenkov>Meet our newest Maintainer: Alexey Tereshenkov</a><li class=sidebarItem_O5rf><a aria-current=page class="sidebarItemLink_BBtq sidebarItemLinkActive_kBWW" href=/blog/2022/02/18/packaging-python-with-the-pyoxidizer-pants-plugin>Packaging Python with the PyOxidizer Pants Plugin</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/02/15/choosing-a-python-interpreter-for-a-pants-project>Choosing a Python interpreter for a Pants project</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/02/15/new-maintainer-joshua-cannon>Meet our newest Maintainer: Joshua Cannon</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/01/12/pants-2-9>Pants 2.9: Alpha support for Java and Scala, improvements for Docker and Go, and more</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/01/12/you-can-call-us-pantsbuild-or-pants-whichever-you-prefer>You can call us Pantsbuild (or Pants, whichever you prefer)</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/01/06/updating-pants-build-files-programmatically>Updating Pants BUILD files programmatically</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2022/01/05/happy-new-year-2022>Happy new year!</a></ul></div><div role=group><h3 class=yearGroupHeading_Wib2>2021</h3><ul class="sidebarItemList_iEWr clean-list"><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/12/16/docs-improvements>Docs improvements</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/11/22/automatically-unlocking-concurrent-builds-and-fine-grained-caching-on-the-jvm-with-dependency-inference>Automatically unlocking concurrent builds and fine-grained caching on the JVM with dependency inference</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/11/18/pants-vs-bazel>pants-vs-bazel</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/11/17/introducing-pants-2-8>Pants 2.8 adds Autoflake & Pyupgrade, Docker publishing, Golang, and Google Cloud Functions</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/11/10/golang-support-pants-28>Pants 2.8 adds experimental Golang support</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/10/27/pants-supports-pep-517>Pants supports PEP 517</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/10/21/podcasting-pants>Podcasting Pants</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/10/13/pants-pex-and-docker>Streamline your Docker builds with Pants</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/09/28/docker-support>Docker support in Pants 2.7</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/09/27/contributing-yapf-support>My experience contributing YAPF formatter support to Pants 2.7</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/09/27/introducing-pants-2-7>Introducing Pants 2.7: Python tool lockfiles, Yapf, Docker, and ./pants peek</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/09/14/meet-our-newest-maintainer-andreas-stenius>Meet our newest Maintainer: Andreas Stenius</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/08/02/introducing-pants-2-6>Introducing Pants 2.6: Poetry support, third-party type stubs, and linter reports</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/07/29/poetry-support-for-pants-2-6>Poetry support for Pants 2.6</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/06/28/pydev-of-the-week>PyDev of the Week</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/06/21/how-we-added-apple-silicon-support-to-pants>How we added Apple Silicon support to Pants</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/05/20/introducing-pants-2-5>Introducing Pants 2.5: Shell support, config autodiscovery, and incremental tool adoption</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/05/12/pycon_us_2021>It's PyCon US Time!</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/04/30/introducing-pants-build-2-4-0>Introducing Pants Build 2.4.0</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/04/21/monorepos-and-performance>Monorepos and performance: Pants Build maintainer Benjy Weinberger's conversation with SemaphoreCI</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/03/22/introducing-pants-2-3-0>Introducing Pants Build 2.3.0</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/03/19/tailoring-pants-to-your-codebase>Tailoring Pants to your codebase</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/02/22/pants-2-2-adds-dependency-inference-for-protobuf>Pants 2.2 adds dependency inference for Protobuf</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2021/02/01/fast-incremental-builds-speculation-cancellation>fast-incremental-builds-speculation-cancellation</a></ul></div><div role=group><h3 class=yearGroupHeading_Wib2>2020</h3><ul class="sidebarItemList_iEWr clean-list"><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2020/11/25/talking-pants>Talking Pants</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2020/11/17/python-3-migrations>Unlocking incremental Python 3 migrations with Pants</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2020/10/29/dependency-inference>Dependency inference: Precise caching and concurrency, without the boilerplate</a><li class=sidebarItem_O5rf><a class=sidebarItemLink_BBtq href=/blog/2020/10/27/introducing-pants-v2>Introducing Pants v2</a></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class=title_XRK8>Packaging Python with the PyOxidizer Pants Plugin</h1><div class="container_d4VT margin-vert--md"><time datetime=2022-02-18T00:00:00.000Z>February 18, 2022</time> · <!-- -->15 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_tvhT"><div class="avatar margin-bottom--sm"><a href=https://github.com/sureshjoshi target=_blank rel="noopener noreferrer" class=avatar__photo-link><img class="avatar__photo authorImage_en77" src=https://github.com/sureshjoshi.png alt=SJ /></a><div class="avatar__intro authorDetails_DHFq"><div class=avatar__name><a href=https://github.com/sureshjoshi target=_blank rel="noopener noreferrer"><span class=authorName_irTy translate=no>SJ</span></a></div><small class=authorTitle_4FLl title="Pants Maintainer, occasional blogger at sureshjoshi.com">Pants Maintainer, occasional blogger at sureshjoshi.com</small><div class=authorSocials_uJie></div></div></div></div></div></header><div id=__blog-post-container class=markdown><div><img decoding=async loading=lazy src=/assets/images/splash-10271ab53f74e191c12284045f4fdf35.jpg class=img_axWV /><figcaption><p>Photo by <a href="https://unsplash.com/@jayrheike?utm_source=ghost&utm_medium=referral&utm_campaign=api-credit" target=_blank rel="noopener noreferrer" class="">Jay
Heike</a>
/
<a href="https://unsplash.com/?utm_source=ghost&utm_medium=referral&utm_campaign=api-credit" target=_blank rel="noopener noreferrer" class="">Unsplash</a></figcaption></div>
<p>Alliterations aside, this post discusses the new PyOxidizer integration coming in Pants 2.10 for packaging Python applications.</p>
<!-- -->
<hr/>
<p>Let's talk about Python!</p>
<p>As a language, Python is very expressive, succinct, and typically requires the least effort and code to solve my problems - huge win. I can write custom command lines, automation tools, and even API servers in as little as a few minutes. Awesome.</p>
<p>Python's tooling and ecosystem is fantastic, but the development workflow surrounding dependency management, testing, linting, formatting, and other pre-release tasks is a bit kludgey. I had scripts upon scripts to handle virtual environment creation, pip installs, code generation, and then a bunch of other tasks. It mostly worked, but it wasn't pretty. Then I discovered Pants and all of those dev-only bash scripts disappeared overnight in place of a few simple BUILD files and the confidence of reliable, reproducible, and much faster builds. More awesome.</p>
<p>Python's application packaging and distribution stories, however… Well, those are significantly less awesome. It's always been a bit tricky distributing my Python code because of package management, Python interpreter management, etc. Also, trying to ask non-devs to install/run Python code never goes well.</p>
<p>Every year or so, I take a few days to look at the state of Python's packaging and distribution and play around with the options. Every year I try out the latest and greatest from all the usual suspects - but this year was different. I decided to try out PyOxidizer… and then I made a Pants plugin for it.</p>
<p>Now I, at long last, have a fully integrated end-to-end Python workflow that starts with me typing code and ends with a fully tested executable binary.</p>
<h2 class="anchor anchorTargetStickyNavbar_UrHV" id=what-is-pyoxidizer>What is PyOxidizer?<a href=#what-is-pyoxidizer class=hash-link aria-label="Direct link to What is PyOxidizer?" title="Direct link to What is PyOxidizer?" translate=no>​</a></h2>
<p>PyOxidizer is a command-line tool (or Rust crate) which packages/creates distributions for Python applications. It functionally falls into a class of Python packagers called "<a href=https://docs.python-guide.org/shipping/freezing/ target=_blank rel="noopener noreferrer" class="">freezers</a>".</p>
<h2 class="anchor anchorTargetStickyNavbar_UrHV" id=what-is-freezing>What is freezing?<a href=#what-is-freezing class=hash-link aria-label="Direct link to What is freezing?" title="Direct link to What is freezing?" translate=no>​</a></h2>
<p>The goal of freezing is to create a standalone, single-file executable which can be distributed to end-users. It "just works".</p>
<p>A "frozen" application comes pre-packaged with all of your application code, dependencies, and a Python interpreter. This way, your application isn't reliant on the user having already installed the compatible version of Python on their computer.</p>
<p>This freezing process isn't free, however. Embedding a Python interpreter incurs a size hit on the final bundle.</p>
<h2 class="anchor anchorTargetStickyNavbar_UrHV" id=how-does-pyoxidizer-work>How does PyOxidizer work?<a href=#how-does-pyoxidizer-work class=hash-link aria-label="Direct link to How does PyOxidizer work?" title="Direct link to How does PyOxidizer work?" translate=no>​</a></h2>
<p>The PyOxidizer process is <a href=https://pyoxidizer.readthedocs.io/en/stable/pyoxidizer_overview.html#how-it-works target=_blank rel="noopener noreferrer" class="">thoroughly documented</a>, but as a <strong>very</strong> hand-wavy TLDR: Your Python application, dependencies, and a Python interpreter are all embedded into a Rust application. When you call the resulting binary executable, you're actually calling Rust which drives Python (and thus, your Py application).</p>
<h2 class="anchor anchorTargetStickyNavbar_UrHV" id=how-is-that-different-from-using-a-pex>How is that different from using a PEX?<a href=#how-is-that-different-from-using-a-pex class=hash-link aria-label="Direct link to How is that different from using a PEX?" title="Direct link to How is that different from using a PEX?" translate=no>​</a></h2>
<p>Anyone who has used Pants for Python tooling has inevitably come across <a href=https://pex.readthedocs.io/en/latest/whatispex.html#whatispex target=_blank rel="noopener noreferrer" class="">PEX</a> files (short for "Python Executable" files). A PEX file is a self-contained, executable Python virtual environment. It's basically a special zip file that a Python interpreter knows how to run.</p>
<p>From the outside, the main functional difference between a PEX file and a PyOxidized application is that the PEX file requires a compatible Python interpreter on the host system, whereas the PyOxidized application embeds the Python interpreter.</p>
<p>For an even better TLDR, I can <a href=https://www.pantsbuild.org/v2.10/docs/pyoxidizer target=_blank rel="noopener noreferrer" class="">quote the docs</a>:</p>
<blockquote>
<p>PyOxidizer allows you to distribute your code as a single binary file, similar to Pex files. Unlike Pex, these binaries include a Python interpreter, often greatly simplifying distribution.</p>
</blockquote>
<h2 class="anchor anchorTargetStickyNavbar_UrHV" id=how-can-pyoxidizer-change-my-workflow>How can PyOxidizer change my workflow?<a href=#how-can-pyoxidizer-change-my-workflow class=hash-link aria-label="Direct link to How can PyOxidizer change my workflow?" title="Direct link to How can PyOxidizer change my workflow?" translate=no>​</a></h2>
<p>Since I started on this plugin a few weeks ago, I've had two major modifications in my packaging and deployment workflows.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=command-line-applications>Command-line Applications<a href=#command-line-applications class=hash-link aria-label="Direct link to Command-line Applications" title="Direct link to Command-line Applications" translate=no>​</a></h3>
<p>I write a lot of CLIs to speed up certain common workflows for team members. Most recently, I wrote a CLI with <a href=https://typer.tiangolo.com/ target=_blank rel="noopener noreferrer" class="">Typer</a> to handle user management administration on Firebase.</p>
<p>In order to use this tool, developers would clone the repo and run the commands using Python or alternatively, they would use the latest released PEX file on Github. This works fine, so long as everyone is on roughly the same Python version.</p>
<p>The distribution process became a bit more difficult when dealing with QA or non-technical account managers. Running the script was simple, but it was definitely tedious to have to get on a Zoom call to walk people through installing Python and then debug any problems that arose along the way.</p>
<p>Now, with a PyOxidized CLI, I haven't had to hop on a Zoom call in weeks.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=server-applications>Server Applications<a href=#server-applications class=hash-link aria-label="Direct link to Server Applications" title="Direct link to Server Applications" translate=no>​</a></h3>
<p>Before PyOxidizer, my server deployment workflow consisted of creating <a href=https://www.docker.com/ target=_blank rel="noopener noreferrer" class="">Docker</a> images with the correct Python base image, copying my <code>.pex</code> binaries into those containers, and using that as a distribution. It became easier with <a class="" href=/blog/2021/10/13/pants-pex-and-docker>Docker support in Pants</a>, as Docker handles the copying and a few other tedious items.</p>
<p>This solution has worked well for a long time, but it has always bugged me that I need Docker installed on all of my target systems. I have no problem with Docker, and I use it all the time to create custom development and build environments, but for a lot of my smaller deployments - I feel as though I'm using a sledgehammer to put up a painting.</p>
<p>Using PyOxidizer, however, my deployments consist of a <code>scp</code> and dropping my <code>systemd</code> service files in the right location (all using <a href=https://www.ansible.com/ target=_blank rel="noopener noreferrer" class="">Ansible</a>, of course).</p>
<div class="theme-admonition theme-admonition-info admonition_LZeC alert alert--info"><div class=admonitionHeading_SJYM><span class=admonitionIcon_iulS>✏️</span>Aside</div><div class=admonitionContent_NJOy><p>This was my first Pants plugin and to make the experience easier for fellow
newcomers, I wrote a post on my personal blog about developing <a href=https://sureshjoshi.com/development/first-pants-plugin target=_blank rel="noopener noreferrer" class="">your first
Pants plugin</a>.</div></div>
<h2 class="anchor anchorTargetStickyNavbar_UrHV" id=im-sold-how-do-i-use-it>I'm sold, how do I use it?<a href=#im-sold-how-do-i-use-it class=hash-link aria-label="Direct link to I'm sold, how do I use it?" title="Direct link to I'm sold, how do I use it?" translate=no>​</a></h2>
<p>Fortunately, I've already answered some/all of that question in the first <a href=https://github.com/pantsbuild/pants/pull/14183 target=_blank rel="noopener noreferrer" class="">Pants PyOxidizer plugin pull request (or PPPPR™ for short)</a>, so I'll just quote that below. This PPPPR was accepted and Pants PyOxidizer support will be included in the 2.10 release.</p>
<blockquote>
<p>Adding a new experimental plugin for creating executable binaries using PyOxidizer.</p>
<p>The plugin's current functionality is proof-of-concept, with minimal configuration capabilities, and minimal edge-case checking</p>
<p>The new <code>pyoxidizer_binary</code> target expects a wheel-based python distribution dependency, and optionally supports a PyOxidizer configuration template (with the extension <code>.bzlt</code>). If no template is specified, it will use a default configuration with reasonable defaults. The complexity of PyOxidizer's configuration, however, would suggest custom configurations will be the norm. Additionally, a <code>filesystem_resources</code> target field exists to handle certain edge cases listed in PyOxidizer's documentation (unclassified resource dependencies). The <code>entry_point</code> field is optional, however, if it is not included - the PyOxidizer binary will default to a REPL.</p>
<p>Recent versions of PyOxidizer require Python 3.8 or greater - which is setup as a default <code>interpreter_constraint</code>.</p>
<p>The only other option is to set command-line args (e.g. setting release mode, or setting the target tuple).</p>
</blockquote>
<div class="language-toml codeBlockContainer_LrZr theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockTitle_GKkA>pants.toml</div><div class=codeBlockContent_QpNL><pre tabindex=0 class="prism-code language-toml codeBlock_z5Jo thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_YVRJ><span class=token-line style=color:#bfc7d5><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token table class-name" style="color:rgb(255, 203, 107)">pyoxidizer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">interpreter_constraints</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">">=3.9"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token key property">args</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">"--release"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><br/></span></code></pre></div></div>
<div class="language-python codeBlockContainer_LrZr theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockTitle_GKkA>BUILD</div><div class=codeBlockContent_QpNL><pre tabindex=0 class="prism-code language-python codeBlock_z5Jo thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_YVRJ><span class=token-line style=color:#bfc7d5><span class="token plain">python_sources</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"libhelloworld"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> sources</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">"**/*.py"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">python_distribution</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"helloworld-dist"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    dependencies</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">":libhelloworld"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    wheel</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    sdist</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">False</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    provides</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">python_artifact</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">        name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"helloworld-dist"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">        version</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"0.0.1"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">        description</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"A distribution for the hello world library."</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">pyoxidizer_binary</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"helloworld-bin"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    entry_point</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"helloworld.main"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Optional</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    template</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"pyoxidizer.bzlt"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Optional</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    filesystem_resources</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">"numpy"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Optional</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    dependencies</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">":helloworld-dist"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br/></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_LrZr theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_QpNL><pre tabindex=0 class="prism-code language-bash codeBlock_z5Jo thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_YVRJ><span class=token-line style=color:#bfc7d5><span class="token plain">./pants </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--version</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">./pants package helloworld:</span><br/></span></code></pre></div></div>
<p>Packaging takes about a minute, and then you have a shiny new binary in your <code>dist</code> folder (under your architecture and debug/release folders).</p>
<p>For more examples, check out this <a href=https://github.com/sureshjoshi/pants-pyoxidizer-example target=_blank rel="noopener noreferrer" class="">sample repo</a> with some supporting code for this post. For more examples of how to use PyOxidizer with (or without) Pants, I maintain a <a href=https://github.com/sureshjoshi/pants-plugins target=_blank rel="noopener noreferrer" class="">pants-plugins repo</a> where I am working on some new plugins. Additionally, that repo contains example projects using various libraries - and each project has a working PyOxidizer configuration and whatever workarounds I needed to do in order to package them.</p>
<h2 class="anchor anchorTargetStickyNavbar_UrHV" id=this-sounds-too-good-to-be-true-whats-the-catch>This sounds too good to be true, what's the catch?<a href=#this-sounds-too-good-to-be-true-whats-the-catch class=hash-link aria-label="Direct link to This sounds too good to be true, what's the catch?" title="Direct link to This sounds too good to be true, what's the catch?" translate=no>​</a></h2>
<p>Well, that depends on how you look at it.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=chunky-files>Chunky files<a href=#chunky-files class=hash-link aria-label="Direct link to Chunky files" title="Direct link to Chunky files" translate=no>​</a></h3>
<p>As mentioned earlier, there is a definite size impact by packaging a Python interpreter. On my MacOS 12.1 system (Intel), a single-file, "Hello World" application created a 55MB PyOxidized binary file. Whether hosting and distributing packages of this size is a problem is entirely dependent on your workflow. Personally, I don't mind it. If I'm deploying to a server, the ease of copying a few single-file applications, instead of re-running a Docker pipeline outweighs the extra few seconds the transfer takes. This is similar for distributing automation and scripting tools to end-user machines. The files do feel a bit chunky, but not prohibitively so.</p>
<p>On the other hand, deploying some of these applications to my embedded Linux systems is a bit of a harder sell. A single 50MB Hello World application is already twice the size of the rest of the root filesystem and kernel.</p>
<p>I should note, if your files are even larger than what I've mentioned, ensure you've set the <code>--release</code> argument for PyOxidizer in <code>pants.toml</code> as shown in the code and configuration above. Compilation and packaging takes a bit more time, but the final result is smaller.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=single-ish-file-executable>Single-ish file executable<a href=#single-ish-file-executable class=hash-link aria-label="Direct link to Single-ish file executable" title="Direct link to Single-ish file executable" translate=no>​</a></h3>
<p>The "single binary file" is a bit of a stretch too at the current state. If you're simply packaging source code, then yes, it is a single file. However, if you're packaging application-level or dependencies with compiled files - then there will need to be a folder of those files on the filesystem next to your binary. This is discussed more below.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=all-the-pythons>All the Pythons<a href=#all-the-pythons class=hash-link aria-label="Direct link to All the Pythons" title="Direct link to All the Pythons" translate=no>​</a></h3>
<p>Selecting Pants Python interpreters in a coherent manner to avoid differing behaviour on developer machines, CI, and even in production, requires careful thought. Fortunately for all of us, Alexey Tereshenkov has taken care of most of that thought in his great (and aptly named) blog post: <a class="" href=/blog/2022/02/15/choosing-a-python-interpreter-for-a-pants-project>Choosing a Python interpreter for a Pants project</a></p>
<p>During packaging, PyOxidizer will take that Python interpreter and bundle it in each and every binary executable. Some people might find it odd or unsettling that they have so many Python interpreter "copies" floating around on their machine. Personally, I find it comforting. I think the version of your Python interpreter should be viewed as a classical dependency, and thus, versioned and lockfile'd just like any other dependency in your project.</p>
<h2 class="anchor anchorTargetStickyNavbar_UrHV" id=frequently-anticipated-questions>Frequently anticipated questions<a href=#frequently-anticipated-questions class=hash-link aria-label="Direct link to Frequently anticipated questions" title="Direct link to Frequently anticipated questions" translate=no>​</a></h2>
<p>To get ahead of some inevitable problems/questions/comments that the typical user will run into…</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=my-app-doesnt-run-any-faster>My app doesn't run any faster<a href=#my-app-doesnt-run-any-faster class=hash-link aria-label="Direct link to My app doesn't run any faster" title="Direct link to My app doesn't run any faster" translate=no>​</a></h3>
<p>Nope. Nor should it - not by any appreciable amount, anyways.</p>
<p>PyOxidizer is embedding and bundling resources, maybe running some out of memory, perhaps the filesystem - but fundamentally, it's calling a Python interpreter to run your code. It's not compiling that code, nor doing any particular optimization that would induce a performance jump.</p>
<p>In fact, there might even be a small hit caused by the Rust to embedded Python overhead, when compared against using a system Python interpreter.</p>
<p>On my Mac Mini (6-core i5, 32GB DDR4), I get the following when comparing a PyOxidized <a href=https://github.com/sureshjoshi/pants-pyoxidizer-example/tree/main/hellofib target=_blank rel="noopener noreferrer" class="">hellofib</a> example (in release mode) against my system Python (3.9.10).</p>
<p>Over 10 runs (about 2 seconds per run), the PyOxidized app takes ~100ms more per run. This equates to a 5% performance hit on this completely contrived example. In my day-to-day, real-world applications, I haven't really noticed any appreciable differences.</p>
<div class="language-bash codeBlockContainer_LrZr theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_QpNL><pre tabindex=0 class="prism-code language-bash codeBlock_z5Jo thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_YVRJ><span class=token-line style=color:#bfc7d5><span class="token shebang important">#! /bin/bash</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Using the release PyOxidized binary</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token keyword" style=font-style:italic>for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:rgb(191, 199, 213)">i</span><span class="token plain"> </span><span class="token keyword" style=font-style:italic>in</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style=font-style:italic>do</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">time</span><span class="token plain"> ./dist/build/x86_64-apple-darwin/release/install/hellofib-bin</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token keyword" style=font-style:italic>done</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Compared to the system Python calling my .py file</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token keyword" style=font-style:italic>for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:rgb(191, 199, 213)">i</span><span class="token plain"> </span><span class="token keyword" style=font-style:italic>in</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style=font-style:italic>do</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">time</span><span class="token plain"> python3 hellofib/hellofib/main.py</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token keyword" style=font-style:italic>done</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_UrHV" id=sysargv0-is-none><code>sys.argv[0] is None</code><a href=#sysargv0-is-none class=hash-link aria-label="Direct link to sysargv0-is-none" title="Direct link to sysargv0-is-none" translate=no>​</a></h2>
<p>If you're writing code or using a library that needs your application's executable name (e.g. argparse/Click/Typer), you're in for a surprise. For instance, this is what happens when I run a <code>Typer</code> application.</p>
<div class="language-txt codeBlockContainer_LrZr theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_QpNL><pre tabindex=0 class="prism-code language-txt codeBlock_z5Jo thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_YVRJ><span class=token-line style=color:#bfc7d5><span class="token plain">Traceback (most recent call last):</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  File "runpy", line 197, in _run_module_as_main</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  File "runpy", line 87, in _run_code</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  File "hellotyper.main", line 9, in &lt;module></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  File "typer.main", line 864, in run</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  File "typer.main", line 214, in __call__</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  File "click.core", line 1128, in __call__</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  File "click.core", line 1045, in main</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  File "click.utils", line 528, in _detect_program_name</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  File "posixpath", line 142, in basename</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">TypeError: expected str, bytes or os.PathLike object, not NoneType</span><br/></span></code></pre></div></div>
<p>This is a <a href=https://github.com/indygreg/PyOxidizer/issues/307 target=_blank rel="noopener noreferrer" class="">known PyOxidizer issue</a> - and <a href=https://github.com/sureshjoshi/pants-plugins/tree/main/hellotyper target=_blank rel="noopener noreferrer" class="">hellotyper</a> has an example workaround. At the top of your entry point file, you can add the following to force a <code>sys.argv[0]</code> if it doesn't already exist.</p>
<div class="language-python codeBlockContainer_LrZr theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockTitle_GKkA>main.py</div><div class=codeBlockContent_QpNL><pre tabindex=0 class="prism-code language-python codeBlock_z5Jo thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_YVRJ><span class=token-line style=color:#bfc7d5><span class="token keyword" style=font-style:italic>import</span><span class="token plain"> sys</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Patch missing sys.argv[0] which is None for some reason when using PyOxidizer</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Typer fails on this because it tries to emit the filename</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token keyword" style=font-style:italic>if</span><span class="token plain"> sys</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">argv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token keyword" style=font-style:italic>is</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">None</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">   sys</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">argv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> sys</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">executable</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">   </span><span class="token keyword" style=font-style:italic>print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string-interpolation string" style="color:rgb(195, 232, 141)">f"Patched sys.argv to </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string-interpolation interpolation">sys</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token string-interpolation interpolation">argv</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token string-interpolation string" style="color:rgb(195, 232, 141)">"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=i-cant-use-__file__>I can't use <code>__file__</code><a href=#i-cant-use-__file__ class=hash-link aria-label="Direct link to i-cant-use-__file__" title="Direct link to i-cant-use-__file__" translate=no>​</a></h3>
<p>This one caused the most confusion when I ran into it.</p>
<p>From the <a href=https://pyoxidizer.readthedocs.io/en/stable/oxidized_importer_behavior_and_compliance.html#no-file target=_blank rel="noopener noreferrer" class="">documentation</a>:</p>
<blockquote>
<p>when loading modules from memory, the traditional filesystem hierarchy of Python modules does not exist. In the opinion of PyOxidizer's maintainer, exposing <code>__file__</code> would be lying and this would cause more potential for harm than good.</p>
</blockquote>
<p>What this means is that neither your application code, nor your dependencies, can have code that uses <code>__file__</code> and also be stored in memory. This limitation, however, does not exist when your resources are <a href=https://pyoxidizer.readthedocs.io/en/stable/pyoxidizer_packaging_additional_files.html#installing-classified-resources-on-the-filesystem target=_blank rel="noopener noreferrer" class="">stored on the filesystem</a>.</p>
<blockquote>
<p>In scenarios where in-memory resource loading doesn't work, the ideal mitigation is to fix the offending Python modules so they can load from memory. But this isn't always trivial or possible with 3rd party dependencies.</p>
<p>Your next mitigation should be to attempt to place the resource on the filesystem, next to the built binary.</p>
</blockquote>
<p>In the <a href=https://github.com/pantsbuild/pants/blob/main/src/python/pants/backend/python/packaging/pyoxidizer/config.py target=_blank rel="noopener noreferrer" class="">default configuration template</a>, there is a hook to place these resources onto the filesystem, but it's up to the developer to tell the Pants BUILD target which dependencies need to be on the filesystem. Those deps will be <code>pip install</code>'d as <code>filesystem-relative</code> libs.</p>
<p>For example, this target knows to package <code>numpy</code> on the filesystem in a <code>libs</code> folder next to the <code>hellonumpy-bin</code> file.</p>
<div class="language-python codeBlockContainer_LrZr theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockTitle_GKkA>BUILD</div><div class=codeBlockContent_QpNL><pre tabindex=0 class="prism-code language-python codeBlock_z5Jo thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_YVRJ><span class=token-line style=color:#bfc7d5><span class="token plain">pyoxidizer_binary</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"hellonumpy-bin"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    entry_point</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"hellonumpy.main"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    dependencies</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">":hellonumpy-dist"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    filesystem_resources</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">"numpy"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br/></span></code></pre></div></div>
<p>For more context on the above snippet, please refer to the <a href=https://github.com/sureshjoshi/pants-plugins/tree/main/hellonumpy target=_blank rel="noopener noreferrer" class="">hellonumpy example</a>.</p>
<p>That folder also contains an example of a Pants-less NumPy <a href=https://github.com/sureshjoshi/pants-plugins/blob/main/hellonumpy/pyoxidizer.bzl target=_blank rel="noopener noreferrer" class="">PyOxidizer configuration</a> which can be run using PyOxidizer outside of the Pants ecosystem. The file represents roughly what Pants uses internally when hydrating the default configuration template with the <code>pyoxidizer_binary</code> target fields.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=the-default-configuration-template-is-too-limiting>The default configuration template is too limiting<a href=#the-default-configuration-template-is-too-limiting class=hash-link aria-label="Direct link to The default configuration template is too limiting" title="Direct link to The default configuration template is too limiting" translate=no>​</a></h3>
<p>If all else fails, you can always create a custom <code>pyoxidizer.bzlt</code>, place it next to the BUILD file, set the <code>template</code> field in the target - and your custom template will be used instead. For more information, please refer to the <a href=https://www.pantsbuild.org/v2.10/docs/pyoxidizer target=_blank rel="noopener noreferrer" class="">documentation</a> or run <code>./pants help pyoxidizer_binary</code>.</p>
<p><a href=https://github.com/sureshjoshi/pants-plugins/tree/main/hellotemplate target=_blank rel="noopener noreferrer" class="">Full template example</a>.</p>
<div class="language-python codeBlockContainer_LrZr theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockTitle_GKkA>BUILD</div><div class=codeBlockContent_QpNL><pre tabindex=0 class="prism-code language-python codeBlock_z5Jo thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_YVRJ><span class=token-line style=color:#bfc7d5><span class="token plain">pyoxidizer_binary</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"hellotemplate-bin"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    entry_point</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"hellotemplate.main"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    template</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"pyoxidizer.bzlt"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    dependencies</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">":hellotemplate-dist"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br/></span></code></pre></div></div>
<p>If you do try using the default configuration template but need to fall-back to using a custom template, <a href=https://www.pantsbuild.org/docs/getting-help target=_blank rel="noopener noreferrer" class="">please let us know</a> so we can work on improving the default configuration.</p>
<h2 class="anchor anchorTargetStickyNavbar_UrHV" id=still-a-work-in-progress>Still a work-in-progress<a href=#still-a-work-in-progress class=hash-link aria-label="Direct link to Still a work-in-progress" title="Direct link to Still a work-in-progress" translate=no>​</a></h2>
<p>As this is the first PyOxidizer plugin release for Pants, it has an experimental status and an API subject to change, but hopefully there won't be too many breaking changes in the future.</p>
<p>But, being in experimental status means this is also the best time to try it out, <a href=https://www.pantsbuild.org/docs/getting-help target=_blank rel="noopener noreferrer" class="">provide feedback</a>, and help improve the Python packaging experience.</p>
<h2 class="anchor anchorTargetStickyNavbar_UrHV" id=recommended-reading>Recommended reading<a href=#recommended-reading class=hash-link aria-label="Direct link to Recommended reading" title="Direct link to Recommended reading" translate=no>​</a></h2>
<p>Before you start to use PyOxidizer, or this plugin, I <strong>highly</strong> recommend reviewing the excellent PyOxidizer documentation. In order to have the fewest surprises, these four links explain the parts with the most overlap between PyOxidizer and the Pants plugin.</p>
<ul>
<li class=""><a href=https://pyoxidizer.readthedocs.io/en/stable/pyoxidizer_overview.html target=_blank rel="noopener noreferrer" class="">Overview</a></li>
<li class=""><a href=https://pyoxidizer.readthedocs.io/en/stable/pyoxidizer_getting_started.html#getting-started target=_blank rel="noopener noreferrer" class="">Getting Started</a></li>
<li class=""><a href=https://pyoxidizer.readthedocs.io/en/stable/pyoxidizer_config.html target=_blank rel="noopener noreferrer" class="">Configuration Files</a></li>
<li class=""><a href=https://pyoxidizer.readthedocs.io/en/stable/pyoxidizer_packaging_additional_files.html target=_blank rel="noopener noreferrer" class="">Packaging Files Instead of In-Memory Resources</a></li>
</ul></div><footer class=docusaurus-mt-lg><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class=col><b>Tags:</b><ul class="tags_zmUf padding--none margin-left--sm"><li class=tag_b6K5><a rel=tag class="tag_onkF tagRegular_ZD5p" href=/blog/tags/python>python</a><li class=tag_b6K5><a rel=tag class="tag_onkF tagRegular_ZD5p" href=/blog/tags/deployment>deployment</a></ul></div></div><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col noPrint_eWnd"><a href=https://github.com/pantsbuild/pantsbuild.org/edit/main/blog/2022-02-18-packaging-python-with-the-pyoxidizer-pants-plugin/index.mdx target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_HmrO aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_F4iS"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href=/blog/2022/02/28/meet-our-newest-maintainer-alexey-tereshenkov><div class=pagination-nav__sublabel>Newer post</div><div class=pagination-nav__label>Meet our newest Maintainer: Alexey Tereshenkov</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/blog/2022/02/15/choosing-a-python-interpreter-for-a-pants-project><div class=pagination-nav__sublabel>Older post</div><div class=pagination-nav__label>Choosing a Python interpreter for a Pants project</div></a></nav></main><div class="col col--2"><div class="tableOfContents_ZBPU thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#what-is-pyoxidizer class="table-of-contents__link toc-highlight">What is PyOxidizer?</a><li><a href=#what-is-freezing class="table-of-contents__link toc-highlight">What is freezing?</a><li><a href=#how-does-pyoxidizer-work class="table-of-contents__link toc-highlight">How does PyOxidizer work?</a><li><a href=#how-is-that-different-from-using-a-pex class="table-of-contents__link toc-highlight">How is that different from using a PEX?</a><li><a href=#how-can-pyoxidizer-change-my-workflow class="table-of-contents__link toc-highlight">How can PyOxidizer change my workflow?</a><ul><li><a href=#command-line-applications class="table-of-contents__link toc-highlight">Command-line Applications</a><li><a href=#server-applications class="table-of-contents__link toc-highlight">Server Applications</a></ul><li><a href=#im-sold-how-do-i-use-it class="table-of-contents__link toc-highlight">I'm sold, how do I use it?</a><li><a href=#this-sounds-too-good-to-be-true-whats-the-catch class="table-of-contents__link toc-highlight">This sounds too good to be true, what's the catch?</a><ul><li><a href=#chunky-files class="table-of-contents__link toc-highlight">Chunky files</a><li><a href=#single-ish-file-executable class="table-of-contents__link toc-highlight">Single-ish file executable</a><li><a href=#all-the-pythons class="table-of-contents__link toc-highlight">All the Pythons</a></ul><li><a href=#frequently-anticipated-questions class="table-of-contents__link toc-highlight">Frequently anticipated questions</a><ul><li><a href=#my-app-doesnt-run-any-faster class="table-of-contents__link toc-highlight">My app doesn't run any faster</a></ul><li><a href=#sysargv0-is-none class="table-of-contents__link toc-highlight"><code>sys.argv[0] is None</code></a><ul><li><a href=#i-cant-use-__file__ class="table-of-contents__link toc-highlight">I can't use <code>__file__</code></a><li><a href=#the-default-configuration-template-is-too-limiting class="table-of-contents__link toc-highlight">The default configuration template is too limiting</a></ul><li><a href=#still-a-work-in-progress class="table-of-contents__link toc-highlight">Still a work-in-progress</a><li><a href=#recommended-reading class="table-of-contents__link toc-highlight">Recommended reading</a></ul></div></div></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Spotlight</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/spotlight/users>Users</a><li class=footer__item><a class=footer__link-item href=/spotlight/testimonials>Testimonials</a><li class=footer__item><a class=footer__link-item href=/spotlight/media>Media</a><li class=footer__item><a class=footer__link-item href=/spotlight/service-providers>Service Providers</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Connect</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://github.com/pantsbuild/pants target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://twitter.com/pantsbuild target=_blank rel="noopener noreferrer" class=footer__link-item>Twitter<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://www.youtube.com/@pantsbuild target=_blank rel="noopener noreferrer" class=footer__link-item>YouTube<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://groups.google.com/forum/#!forum/pants-devel target=_blank rel="noopener noreferrer" class=footer__link-item>Mailing List<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/blog>Blog</a><li class=footer__item><a class=footer__link-item href=/sponsors>Sponsors</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/community/getting-help>Getting Help</a><li class=footer__item><a class=footer__link-item href=/community/members>Members</a><li class=footer__item><a class=footer__link-item href=/community/code-of-conduct>Code of Conduct</a><li class=footer__item><a class=footer__link-item href=/community/meet-the-team>Meet the Team</a><li class=footer__item><a class=footer__link-item href=/community/maintainers>Maintainers</a><li class=footer__item><a class=footer__link-item href=/community/contentious-decisions>Contentious Decisions</a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © Pants project contributors. <a href=https://github.com/pantsbuild/pantsbuild.org>Website source</a> @ <a href=https://github.com/pantsbuild/pantsbuild.org/commit/a274212dfdcfe1657dd5eae4836420db8cdf9099>a27421</a>.</div></div></div></footer></div></body>