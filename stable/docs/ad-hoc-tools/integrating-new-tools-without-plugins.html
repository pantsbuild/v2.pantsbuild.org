<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-2.30 docs-doc-page docs-doc-id-docs/ad-hoc-tools/integrating-new-tools-without-plugins" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>Integrating new tools without plugins | Pantsbuild</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:image content=https://www.pantsbuild.org/img/social-card.png /><meta data-rh=true name=twitter:image content=https://www.pantsbuild.org/img/social-card.png /><meta data-rh=true property=og:url content=https://www.pantsbuild.org/stable/docs/ad-hoc-tools/integrating-new-tools-without-plugins /><meta data-rh=true property=og:locale content=en /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docusaurus_version content=2.30 /><meta data-rh=true name=docusaurus_tag content=docs-default-2.30 /><meta data-rh=true name=docsearch:version content=2.30 /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-2.30 /><meta data-rh=true property=og:title content="Integrating new tools without plugins | Pantsbuild"/><meta data-rh=true name=description content=--- /><meta data-rh=true property=og:description content=--- /><link data-rh=true rel=icon href=/img/favicon.ico /><link data-rh=true rel=canonical href=https://www.pantsbuild.org/stable/docs/ad-hoc-tools/integrating-new-tools-without-plugins /><link data-rh=true rel=alternate href=https://www.pantsbuild.org/stable/docs/ad-hoc-tools/integrating-new-tools-without-plugins hreflang=en /><link data-rh=true rel=alternate href=https://www.pantsbuild.org/stable/docs/ad-hoc-tools/integrating-new-tools-without-plugins hreflang=x-default /><link data-rh=true rel=preconnect href=https://QD9KY1TRVK-dsn.algolia.net crossorigin=anonymous /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://www.pantsbuild.org/stable/docs/ad-hoc-tools/integrating-new-tools-without-plugins","name":"Integrating new tools without plugins","position":1}]}</script><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="Pantsbuild RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="Pantsbuild Atom Feed"><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=G-SEHBXJRF42"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-SEHBXJRF42",{anonymize_ip:!0})</script><link rel=search type=application/opensearchdescription+xml title=Pantsbuild href=/opensearch.xml><link rel=stylesheet href=/assets/css/styles.b71b45ed.css /><script src=/assets/js/runtime~main.43acf77f.js defer></script><script src=/assets/js/main.636c7439.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_lucK href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/logo.svg alt="My Site Logo" class="themedComponent_x_jL themedComponent--light_WGb9"/><img src=/img/logo.svg alt="My Site Logo" class="themedComponent_x_jL themedComponent--dark_oBxQ"/></div><b class="navbar__title text--truncate">Pantsbuild</b></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/stable/docs/introduction/welcome-to-pants>Docs</a><a class="navbar__item navbar__link" href=/stable/reference/global-options>Reference</a><a class="navbar__item navbar__link" href=/blog>Blog</a><a class="navbar__item navbar__link" href=/sponsors>Sponsors</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class=navbar__link aria-haspopup=true aria-expanded=false role=button href=/stable/docs/introduction/welcome-to-pants>2.30</a><ul class=dropdown__menu><li><a class=dropdown__link href=/prerelease/docs/ad-hoc-tools/integrating-new-tools-without-plugins>2.31 (prerelease)</a><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/stable/docs/ad-hoc-tools/integrating-new-tools-without-plugins>2.30</a><li><a class=dropdown__link href=/2.29/docs/ad-hoc-tools/integrating-new-tools-without-plugins>2.29</a><li><a class=dropdown__link href=/2.28/docs/ad-hoc-tools/integrating-new-tools-without-plugins>2.28 (deprecated)</a><li class=""><hr class=dropdown-separator><li><a class=dropdown__link href=/versions>All Versions</a></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>Slack</a><ul class=dropdown__menu><li><a href=https://pantsbuild.slack.com target=_blank rel="noopener noreferrer" class=dropdown__link>Workspace<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a><li><a href="https://docs.google.com/forms/d/e/1FAIpQLSf9zgf-MXRnVDJbrVEST3urqneq7LCcy0zw8qU-GH4hPMn52A/viewform?usp=sf_link" target=_blank rel="noopener noreferrer" class=dropdown__link>Workspace Invite<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a><li><a href=https://chat.pantsbuild.org target=_blank rel="noopener noreferrer" class=dropdown__link>Linen Mirror<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a></ul></div><a href=https://github.com/pantsbuild/pants target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a><div class=navbarSearchContainer_Mydu><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts=Meta+k><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 24 24" aria-hidden=true><circle cx=11 cy=11 r=8 stroke=currentColor fill=none stroke-width=1.4 /><path d="m21 21-4.3-4.3" stroke=currentColor fill=none stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div><div class="toggle_AwgP colorModeToggle_rXRM"><button class="clean-btn toggleButton_kTC9 toggleButtonDisabled_N4X8" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_X8HE lightToggleIcon_cay9"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_X8HE darkToggleIcon_B6hH"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_X8HE systemToggleIcon_k4zv"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_GzA5"><div class=docsWrapper_LbKj><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_bDNn" type=button></button><div class=docRoot_PpgM><aside class="theme-doc-sidebar-container docSidebarContainer_aj0D"><div class=sidebarViewport_pg77><div class=sidebar_Us5f><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_FPuF"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/stable/docs/introduction/welcome-to-pants><span title=Introduction class=categoryLinkLabel_JmoG>Introduction</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist" href=/stable/docs/getting-started><span title="Getting Started" class=categoryLinkLabel_JmoG>Getting Started</span></a><button aria-label="Expand sidebar category 'Getting Started'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/stable/docs/using-pants/command-line-help><span title="Using Pants" class=categoryLinkLabel_JmoG>Using Pants</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/stable/docs/python/overview><span title=Python class=categoryLinkLabel_JmoG>Python</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist" href=/stable/docs/go><span title=Go class=categoryLinkLabel_JmoG>Go</span></a><button aria-label="Expand sidebar category 'Go'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/stable/docs/jvm/java-and-scala><span title=JVM class=categoryLinkLabel_JmoG>JVM</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist" href=/stable/docs/shell><span title=Shell class=categoryLinkLabel_JmoG>Shell</span></a><button aria-label="Expand sidebar category 'Shell'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist" href=/stable/docs/docker><span title=Docker class=categoryLinkLabel_JmoG>Docker</span></a><button aria-label="Expand sidebar category 'Docker'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/stable/docs/kubernetes><span title=Kubernetes class=linkLabel_BwCR>Kubernetes</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist" href=/stable/docs/helm><span title=Helm class=categoryLinkLabel_JmoG>Helm</span></a><button aria-label="Expand sidebar category 'Helm'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/stable/docs/terraform><span title=Terraform class=linkLabel_BwCR>Terraform</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/stable/docs/sql><span title=SQL class=linkLabel_BwCR>SQL</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true href=/stable/docs/ad-hoc-tools/integrating-new-tools-without-plugins><span title="Ad-Hoc Tools" class=categoryLinkLabel_JmoG>Ad-Hoc Tools</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/stable/docs/ad-hoc-tools/integrating-new-tools-without-plugins><span title="Integrating new tools without plugins" class=linkLabel_BwCR>Integrating new tools without plugins</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/stable/docs/javascript/overview><span title=Javascript class=categoryLinkLabel_JmoG>Javascript</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/stable/docs/writing-plugins/overview><span title="Writing Plugins" class=categoryLinkLabel_JmoG>Writing Plugins</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/stable/docs/releases/deprecation-policy><span title=Releases class=categoryLinkLabel_JmoG>Releases</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist" href=/stable/docs/contributions><span title=Contributions class=categoryLinkLabel_JmoG>Contributions</span></a><button aria-label="Expand sidebar category 'Contributions'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_cnt8 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/stable/docs/tutorials/create-a-new-goal><span title=Tutorials class=categoryLinkLabel_JmoG>Tutorials</span></a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 margin-vert--none"><hr/><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/stable/reference/global-options><span title=Reference class=linkLabel_BwCR>Reference</span></a></ul></nav></div></div></aside><main class=docMainContainer_oWFJ><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_b2qu"><div class=docItemContainer_TkYX><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_nJ9e" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_WW1h><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>Ad-Hoc Tools</span><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Integrating new tools without plugins</span></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.30</span><div class="tocCollapsible_hk9T theme-doc-toc-mobile tocMobile_cNpz"><button type=button class="clean-btn tocCollapsibleButton_ljii">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Integrating new tools without plugins</h1></header><hr/>
<h2 class="anchor anchorTargetStickyNavbar_UrHV" id=integrating-new-tools-without-plugins>Integrating new tools without plugins<a href=#integrating-new-tools-without-plugins class=hash-link aria-label="Direct link to Integrating new tools without plugins" title="Direct link to Integrating new tools without plugins" translate=no>​</a></h2>
<p>The <code>adhoc_tool</code> target allows you to execute "runnable" targets inside the Pants sandbox. Runnable targets include first-party sources that can be run with <code>pants run</code>, 3rd-party dependencies like <code>python_requirement</code> or <code>jvm_artifact</code>, or even executables that exist on your system and managed externally to Pants.</p>
<p><code>adhoc_tool</code> provides you with the building blocks needed to put together a custom build process without needing to develop and maintain a plugin. The level of initial effort involved in using <code>adhoc_tool</code> is significantly lower than that of <a class="" href=/stable/docs/writing-plugins/overview>writing a plugin</a>, so it's well-suited to consuming one-off scripts, or for rapidly prototyping a process before actually writing a plugin. The tradeoff is that there is more manual work involved in defining build processes that reflect your codebase's structure, and that the targets that define the tools you consume are less easy to reuse.</p>
<p>The <code>antlr</code> demo in the <a href=https://github.com/pantsbuild/example-adhoc target=_blank rel="noopener noreferrer" class=""><code>example-adhoc</code> repository</a> shows an example of running a JVM-based tool to transparently generate Python code that can be used in another language:</p>
<div class="language-text codeBlockContainer_LrZr theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_QpNL><pre tabindex=0 class="prism-code language-text codeBlock_z5Jo thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_YVRJ><span class=token-line style=color:#bfc7d5><span class="token plain">adhoc_tool(</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    name="run_antlr",</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    runnable=":antlr4",</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    args=["Expr.g4", "-Dlanguage=Python3", "-o", "expr_parser", "-package", "expr_parser",],</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    output_directories=["expr_parser",],</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    # These are consumed by `antlr`, but are not relevant to this target's dependents.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    execution_dependencies=[":grammars"],</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    # These are needed by the code that is output by this target</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    output_dependencies=[":antlr4-python3-runtime",],</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    root_output_directory=".",</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    log_output=True,</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">)</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=runnable-targets><code>runnable</code> targets<a href=#runnable-targets class=hash-link aria-label="Direct link to runnable-targets" title="Direct link to runnable-targets" translate=no>​</a></h3>
<p>"Runnable" targets are targets that Pants knows how to execute within its sandbox. Generally, these correspond to targets that can be executed with the <code>pants run</code> goal, and include first-party source files, as well as third-party dependencies.</p>
<p>The tool will be run with values from <code>args</code> specified as arguments. By default, the process' working directory will be the directory where the <code>BUILD</code> file is defined. This can be adjusted using the <code>workdir</code> field.</p>
<div class="theme-admonition theme-admonition-caution admonition_LZeC alert alert--warning"><div class=admonitionHeading_SJYM><span class=admonitionIcon_iulS><svg viewBox="0 0 16 16"><path fill-rule=evenodd d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg></span><code>runnable</code> targets must be pure functions</div><div class=admonitionContent_NJOy><p>When run by <code>adhoc_tool</code>, Pants assumes that the inputs provided to the process -- that is, the values of the <code>adhoc_tool</code>'s fields, and the contents of the runnable and execution dependencies -- fully describe the output. Output values will be <a class="" href=/stable/docs/introduction/how-does-pants-work#caching>cached</a> by Pants, and future invocations with identical inputs will be retrieved from the cache instead of being re-executed. If your process has behavior that is not fully defined by its inputs, Pants' behavior may be unexpected or inconsistent.</div></div>
<div class="theme-admonition theme-admonition-caution admonition_LZeC alert alert--warning"><div class=admonitionHeading_SJYM><span class=admonitionIcon_iulS><svg viewBox="0 0 16 16"><path fill-rule=evenodd d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg></span><code>runnable</code> targets must be idempotent</div><div class=admonitionContent_NJOy><p><code>adhoc_tool</code> processes may be cancelled or retried any number of times, so it is important that any side effects are idempotent. That is, it should not matter if it is run several times, or only partially.</div></div>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=specifying-dependencies>Specifying dependencies<a href=#specifying-dependencies class=hash-link aria-label="Direct link to Specifying dependencies" title="Direct link to Specifying dependencies" translate=no>​</a></h3>
<p><code>adhoc_tool</code> has more complexity surrounding dependencies compared with Pants' first-class targets. This is because you need to do manual work to set up the execution environment, which is usually taken care of by plugin code.</p>
<p><code>adhoc_tool</code> has three dependencies fields:</p>
<ul>
<li class=""><code>output_dependencies</code>, which defines dependencies that are required to effectively consume the output of the tool, <em>e.g.</em> runtime libraries for generated code bindings. Any targets that (transitively) depend on the <code>adhoc_tool</code> target will also transitively depend on these dependencies.</li>
<li class=""><code>execution_dependencies</code>, which define data dependencies required for the tool to produce its output. These are not considered when resolving transitive dependencies that include this <code>adhoc_tool</code> target.</li>
<li class=""><code>runnable_dependencies</code>, which define runnables that the <code>adhoc_tool</code> needs on its <code>PATH</code> to execute as a subprocess. These are also not considered when resolving transitive dependencies. The discussion of <code>system_binary</code> later in this page shows one key use of <code>runnable_dependencies</code>.</li>
</ul>
<p>In the <code>antlr</code> example, <code>output_dependencies</code> is used because the tool produces Python-based bindings that depend on a runtime library. <code>execution_dependencies</code> specifies the sources that are consumed by the tool, but do not need to be consumed by subsequent build steps.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=specifying-outputs>Specifying outputs<a href=#specifying-outputs class=hash-link aria-label="Direct link to Specifying outputs" title="Direct link to Specifying outputs" translate=no>​</a></h3>
<p>Generally, <code>adhoc_tool</code> targets are run to produce outputs that can be supplied to other targets. These can be in the form of files or directories that are output directly by the tools: use the <code>output_files</code> field to capture individual files, or <code>output_directories</code> to capture entire directories as output.</p>
<p>Files are captured relative to the build root by default: this is useful when passing results to further <code>adhoc_tool</code> targets defined in the same <code>BUILD</code> file. If this behavior is not right for you, for example, if you are producing an artifact for packaging, you can change the root of the outputs using the <code>root_output_directory</code> field.</p>
<p>Finally, if you want to capture <code>stdout</code> or <code>stderr</code> from your tool, you can use the <code>stdout</code> or <code>stderr</code> fields. These specify filenames where those streams will be dumped once the process completes. Note that these files are specified in addition to those from the <code>output_files</code> field, and an error will occur if the filename occurs in the outputs arising from <code>output_files</code> or <code>output_directories</code> and the contents of that file are different.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=chaining-processes-together>Chaining processes together<a href=#chaining-processes-together class=hash-link aria-label="Direct link to Chaining processes together" title="Direct link to Chaining processes together" translate=no>​</a></h3>
<p><em>Our <a href=https://github.com/pantsbuild/example-adhoc/tree/main/javascript target=_blank rel="noopener noreferrer" class="">JavaScript demo</a> demonstrates a string of <code>adhoc_tool</code> targets that's used to produce a resource file.</em></p>
<p>To get the best cache efficiency, it can make sense to break your <code>adhoc_tool</code> into smaller incremental steps. For example, if your process needs to fetch dependencies and then build a library based on those dependencies and some first-party source files, having one <code>adhoc_tool</code> for each of those steps means that the dependency-fetching stage will only be re-run when your requirements change, and not when the first-party source files change.</p>
<p>Generally, if you are chaining <code>adhoc_tool</code> targets together , it will be easier to use the default <code>workdir</code> and <code>root_output_directory</code> fields for each step that will be consumed by an <code>adhoc_tool</code> in the same <code>BUILD</code> file. Change the <code>root_output_directory</code> only for targets that are intended to be used in other places or ways.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=wrapping-generated-sources-for-use-by-other-targets>Wrapping generated sources for use by other targets<a href=#wrapping-generated-sources-for-use-by-other-targets class=hash-link aria-label="Direct link to Wrapping generated sources for use by other targets" title="Direct link to Wrapping generated sources for use by other targets" translate=no>​</a></h3>
<p><em>Our <a href=https://github.com/pantsbuild/example-adhoc/tree/main/antlr target=_blank rel="noopener noreferrer" class="">Antlr demo</a> demonstrates wrapping the outputs of <code>adhoc_tool</code> targets for use as Python sources.</em></p>
<p><code>adhoc_tool</code> generates <code>file</code> sources by default. This can be acceptable if generating assets that do not need to be consumed as source files for another Pants backend. Other Pants backends need generated sources to be marked as actual source files.</p>
<p>There are several targets included in Pants with the prefix <code>experimental_wrap_as_</code>. These act as a source target that can be used as a dependency in a given language backend, with the caveat that dependency inference is not available.</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=using-externally-managed-tools>Using externally-managed tools<a href=#using-externally-managed-tools class=hash-link aria-label="Direct link to Using externally-managed tools" title="Direct link to Using externally-managed tools" translate=no>​</a></h3>
<p><em>Our <a href=https://github.com/pantsbuild/example-adhoc/tree/main/javascript target=_blank rel="noopener noreferrer" class="">JavaScript demo</a> demonstrates the use of externally-managed binaries.</em></p>
<p>Some build processes need to make use of tools that can't be modeled within a Pants codebase. The <code>system_binary</code> target lets you make use of a binary that is installed on the system. <code>system_binary</code> targets may be specified as <code>runnable</code> or <code>runnable_dependency</code> values for <code>adhoc_tool</code>.</p>
<p><code>system_binary</code> will search for a binary in pre-defined or user-supplied search paths with a given <code>binary_name</code>. To improve reproducibility, it's possible to test matching binaries with sample arguments, to see if its output matches a given regular expression. This can be used to match against version strings. If a such a binary does not exist on the system where Pants is being run, any build involving this <code>system_binary</code> target will fail.</p>
<p>When specified as a <code>runnable_dependency</code>, the binary will be available on the <code>PATH</code> with the target name of the dependency. This can be important if the <code>runnable</code> field invokes a subprocess (for example, <code>yarn</code> tries to invoke a binary called <code>node</code> as its interpreter).</p>
<h3 class="anchor anchorTargetStickyNavbar_UrHV" id=running-shell-scripts>Running shell scripts<a href=#running-shell-scripts class=hash-link aria-label="Direct link to Running shell scripts" title="Direct link to Running shell scripts" translate=no>​</a></h3>
<p>Currently, <code>shell_source</code> targets are not runnable. In the meantime, it is possible to run a shell script as an <code>adhoc_tool</code> through the following approach:</p>
<ul>
<li class="">Declare a <code>system_binary</code> target referring to your preferred shell (e.g. <code>bash</code>, <code>zsh</code>, <code>fish</code>)</li>
<li class="">Declare an <code>adhoc_tool</code>, with the <code>runnable</code> field pointing at your <code>system_binary</code> target, add your <code>shell_source</code> as an <code>execution_dependency</code>, and provide your script's path relative to the buildroot as the first value in <code>args</code></li>
</ul>
<p>This is clearly not as convenient as directly running a <code>shell_source</code> target, and we anticipate adding support in a future version of Pants.</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_eWnd"><a href=https://github.com/pantsbuild/pants/edit/main/docs/docs/ad-hoc-tools/integrating-new-tools-without-plugins.mdx target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_HmrO aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_F4iS"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/stable/docs/sql><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>SQL</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/stable/docs/javascript/overview><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Javascript overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_ZBPU thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#integrating-new-tools-without-plugins class="table-of-contents__link toc-highlight">Integrating new tools without plugins</a><ul><li><a href=#runnable-targets class="table-of-contents__link toc-highlight"><code>runnable</code> targets</a><li><a href=#specifying-dependencies class="table-of-contents__link toc-highlight">Specifying dependencies</a><li><a href=#specifying-outputs class="table-of-contents__link toc-highlight">Specifying outputs</a><li><a href=#chaining-processes-together class="table-of-contents__link toc-highlight">Chaining processes together</a><li><a href=#wrapping-generated-sources-for-use-by-other-targets class="table-of-contents__link toc-highlight">Wrapping generated sources for use by other targets</a><li><a href=#using-externally-managed-tools class="table-of-contents__link toc-highlight">Using externally-managed tools</a><li><a href=#running-shell-scripts class="table-of-contents__link toc-highlight">Running shell scripts</a></ul></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Spotlight</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/spotlight/users>Users</a><li class=footer__item><a class=footer__link-item href=/spotlight/testimonials>Testimonials</a><li class=footer__item><a class=footer__link-item href=/spotlight/media>Media</a><li class=footer__item><a class=footer__link-item href=/spotlight/service-providers>Service Providers</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Connect</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://github.com/pantsbuild/pants target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://twitter.com/pantsbuild target=_blank rel="noopener noreferrer" class=footer__link-item>Twitter<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://www.youtube.com/@pantsbuild target=_blank rel="noopener noreferrer" class=footer__link-item>YouTube<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://groups.google.com/forum/#!forum/pants-devel target=_blank rel="noopener noreferrer" class=footer__link-item>Mailing List<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_QvT7><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/blog>Blog</a><li class=footer__item><a class=footer__link-item href=/sponsors>Sponsors</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/community/getting-help>Getting Help</a><li class=footer__item><a class=footer__link-item href=/community/members>Members</a><li class=footer__item><a class=footer__link-item href=/community/code-of-conduct>Code of Conduct</a><li class=footer__item><a class=footer__link-item href=/community/meet-the-team>Meet the Team</a><li class=footer__item><a class=footer__link-item href=/community/maintainers>Maintainers</a><li class=footer__item><a class=footer__link-item href=/community/contentious-decisions>Contentious Decisions</a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © Pants project contributors. <a href=https://github.com/pantsbuild/pantsbuild.org>Website source</a> @ <a href=https://github.com/pantsbuild/pantsbuild.org/commit/a274212dfdcfe1657dd5eae4836420db8cdf9099>a27421</a>.</div></div></div></footer></div></body>